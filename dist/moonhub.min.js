var moonhub=function(e){function t(n){if(l[n])return l[n].exports;var s=l[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var l={};return t.m=e,t.c=l,t.d=function(e,l,n){t.o(e,l)||Object.defineProperty(e,l,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var l=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(l,'a',l),l},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=38)}([function(e,t,l){'use strict';(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function n(e,t){if(e===t)return 0;for(var l=e.length,n=t.length,s=0,u=Math.min(l,n);s<u;++s)if(e[s]!==t[s]){l=e[s],n=t[s];break}return l<n?-1:n<l?1:0}function s(e){return t.Buffer&&'function'==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!!(null!=e&&e._isBuffer)}function u(e){return Object.prototype.toString.call(e)}function r(e){return!s(e)&&!('function'!=typeof t.ArrayBuffer)&&('function'==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(!!(e instanceof DataView)||e.buffer&&e.buffer instanceof ArrayBuffer))}function o(e){if(m.isFunction(e)){if(b)return e.name;var t=e.toString(),l=t.match(k);return l&&l[1]}}function _(e,t){return'string'==typeof e?e.length<t?e:e.slice(0,t):e}function i(e){if(b||!m.isFunction(e))return m.inspect(e);var t=o(e),l=t?': '+t:'';return'[Function'+l+']'}function c(e){return _(i(e.actual),128)+' '+e.operator+' '+_(i(e.expected),128)}function d(e,t,l,n,s){throw new v.AssertionError({message:l,actual:e,expected:t,operator:n,stackStartFunction:s})}function g(e,t){e||d(e,!0,t,'==',v.ok)}function f(e,t,l,o){if(e===t)return!0;if(s(e)&&s(t))return 0===n(e,t);if(m.isDate(e)&&m.isDate(t))return e.getTime()===t.getTime();if(m.isRegExp(e)&&m.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if((null===e||'object'!=typeof e)&&(null===t||'object'!=typeof t))return l?e==t:e==t;if(r(e)&&r(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(s(e)!==s(t))return!1;o=o||{actual:[],expected:[]};var _=o.actual.indexOf(e);return-1!==_&&_===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),h(e,t,l,o))}function L(e){return'[object Arguments]'==Object.prototype.toString.call(e)}function h(e,t,l,n){if(null===e||e===void 0||null===t||t===void 0)return!1;if(m.isPrimitive(e)||m.isPrimitive(t))return e===t;if(l&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var s=L(e),u=L(t);if(s&&!u||!s&&u)return!1;if(s)return e=E.call(e),t=E.call(t),f(e,t,l);var r=R(e),o=R(t),_,c;if(r.length!==o.length)return!1;for(r.sort(),o.sort(),c=r.length-1;0<=c;c--)if(r[c]!==o[c])return!1;for(c=r.length-1;0<=c;c--)if(_=r[c],!f(e[_],t[_],l,n))return!1;return!0}function A(e,t,l){f(e,t,!0)&&d(e,t,l,'notDeepStrictEqual',A)}function T(e,t){if(!e||!t)return!1;if('[object RegExp]'==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(t){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e){var t;try{e()}catch(l){t=l}return t}function O(e,t,l,n){var s;if('function'!=typeof t)throw new TypeError('"block" argument must be a function');'string'==typeof l&&(n=l,l=null),s=x(t),n=(l&&l.name?' ('+l.name+').':'.')+(n?' '+n:'.'),e&&!s&&d(s,l,'Missing expected exception'+n);var u='string'==typeof n,r=!e&&m.isError(s),o=!e&&s&&!l;if((r&&u&&T(s,l)||o)&&d(s,l,'Got unwanted exception'+n),e&&s&&l&&!T(s,l)||!e&&s)throw s}var m=l(22),U=Object.prototype.hasOwnProperty,E=Array.prototype.slice,b=function(){return'foo'===function(){}.name}(),v=e.exports=g,k=/\s*function\s+([^\(\s]*)\s*/;v.AssertionError=function(e){this.name='AssertionError',this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var l=new Error;if(l.stack){var n=l.stack,s=o(t),u=n.indexOf('\n'+s);if(0<=u){var r=n.indexOf('\n',u+1);n=n.substring(r+1)}this.stack=n}}},m.inherits(v.AssertionError,Error),v.fail=d,v.ok=g,v.equal=function(e,t,l){e!=t&&d(e,t,l,'==',v.equal)},v.notEqual=function(e,t,l){e==t&&d(e,t,l,'!=',v.notEqual)},v.deepEqual=function(e,t,l){f(e,t,!1)||d(e,t,l,'deepEqual',v.deepEqual)},v.deepStrictEqual=function(e,t,l){f(e,t,!0)||d(e,t,l,'deepStrictEqual',v.deepStrictEqual)},v.notDeepEqual=function(e,t,l){f(e,t,!1)&&d(e,t,l,'notDeepEqual',v.notDeepEqual)},v.notDeepStrictEqual=A,v.strictEqual=function(e,t,l){e!==t&&d(e,t,l,'===',v.strictEqual)},v.notStrictEqual=function(e,t,l){e===t&&d(e,t,l,'!==',v.notStrictEqual)},v.throws=function(e,t,l){O(!0,e,t,l)},v.doesNotThrow=function(e,t,l){O(!1,e,t,l)},v.ifError=function(e){if(e)throw e};var R=Object.keys||function(e){var t=[];for(var l in e)U.call(e,l)&&t.push(l);return t}}).call(t,l(20))},function(e,t,l){'use strict';var n=String.fromCharCode;const s=l(0),u=l(10),r=[];for(let s=0;127>s;s++)r[n(s)]=s;e.exports.char=r;const o='5',_='3',i='4',c='Lua '+o+'.'+_,d=c+'.'+i,g=d+'  Copyright (C) 1994-2017 Lua.org, PUC-Rio',f='0',L='0',h='1',A='Fengari '+f+'.'+L,T=A+'.'+h,x='B. Giannangeli, Daurnimator',O='_'+o+'_'+_,m='LUA_INIT',U={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};U.LUA_TSHRSTR=U.LUA_TSTRING|0,U.LUA_TLNGSTR=U.LUA_TSTRING|16,U.LUA_TNUMFLT=U.LUA_TNUMBER|0,U.LUA_TNUMINT=U.LUA_TNUMBER|16,U.LUA_TLCL=U.LUA_TFUNCTION|0,U.LUA_TLCF=U.LUA_TFUNCTION|16,U.LUA_TCCL=U.LUA_TFUNCTION|32;const E=-u.LUAI_MAXSTACK-1e3,b=2;const v=function(e){return Array.isArray(e)},k={},R=0,S=1,I=2,N=3;e.exports.LUA_PATH_SEP=';';e.exports.LUA_PATH_MARK='?';e.exports.LUA_EXEC_DIR='!';const M=o+'.'+_;e.exports.LUA_VDIR=M;{e.exports.LUA_DIRSEP='/';e.exports.LUA_LDIR='./lua/'+M+'/';e.exports.LUA_CDIR='./lua/'+M+'/';e.exports.LUA_PATH_DEFAULT='?.lua;?/init.lua';e.exports.LUA_CPATH_DEFAULT='?.js;loadall.js'}e.exports.CT=U,e.exports.FENGARI_AUTHORS=x,e.exports.FENGARI_COPYRIGHT=T+'  Copyright (C) 2017 '+x+'\nBased on: '+g,e.exports.FENGARI_RELEASE=T,e.exports.FENGARI_VERSION=A,e.exports.FENGARI_VERSION_MAJOR=f,e.exports.FENGARI_VERSION_MINOR=L,e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE=h,e.exports.LUA_AUTHORS='R. Ierusalimschy, L. H. de Figueiredo, W. Celes',e.exports.LUA_COPYRIGHT=g,e.exports.LUA_HOOKCALL=R,e.exports.LUA_HOOKCOUNT=N,e.exports.LUA_HOOKLINE=I,e.exports.LUA_HOOKRET=S,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_INITVARVERSION=m+O,e.exports.LUA_INIT_VAR=m,e.exports.LUA_MASKCALL=1<<R,e.exports.LUA_MASKCOUNT=1<<N,e.exports.LUA_MASKLINE=1<<I,e.exports.LUA_MASKRET=1<<S,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=E,e.exports.LUA_RELEASE=d,e.exports.LUA_RIDX_GLOBALS=b,e.exports.LUA_RIDX_LAST=b,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.LUA_SIGNATURE='\x1BLua',e.exports.LUA_VERSION=c,e.exports.LUA_VERSION_MAJOR=o,e.exports.LUA_VERSION_MINOR=_,e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE=i,e.exports.LUA_VERSUFFIX=O,e.exports.constant_types=U,e.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},e.exports.lua_upvalueindex=function(e){return E-e},e.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6},e.exports.is_luastring=v,e.exports.to_jsstring=function(e,t,l){s(v(e),'jsstring expect a array of bytes');let u=0,r,o,_,i,c,d;e=e.slice(t?t:0,l);for(var g='';;){if(r=e[u++],0===r){g+='\0';continue}if(!r)return g;if(!(128&r)){g+=n(r);continue}if(o=63&e[u++],192==(224&r)){g+=n((31&r)<<6|o);continue}if(_=63&e[u++],224==(240&r)?r=(15&r)<<12|o<<6|_:(i=63&e[u++],240==(248&r)?r=(7&r)<<18|o<<12|_<<6|i:(c=63&e[u++],248==(252&r)?r=(3&r)<<24|o<<18|_<<12|i<<6|c:(d=63&e[u++],r=(1&r)<<30|o<<24|_<<18|i<<12|c<<6|d))),65536>r)g+=n(r);else{var f=r-65536;g+=n(55296|f>>10,56320|1023&f)}}},e.exports.to_luastring=function(e,t){if(s('string'==typeof e,'to_luastring expect a js string'),t){let t=k[e];if(v(t))return t}let l=[],n=0;for(let s=0,r;s<e.length;++s)r=e.codePointAt(s),55296<=r&&s++,127>=r?l[n++]=r:2047>=r?(l[n++]=192|r>>6,l[n++]=128|63&r):65535>=r?(l[n++]=224|r>>12,l[n++]=128|63&r>>6,l[n++]=128|63&r):2097151>=r?(l[n++]=240|r>>18,l[n++]=128|63&r>>12,l[n++]=128|63&r>>6,l[n++]=128|63&r):67108863>=r?(l[n++]=248|r>>24,l[n++]=128|63&r>>18,l[n++]=128|63&r>>12,l[n++]=128|63&r>>6,l[n++]=128|63&r):(l[n++]=252|r>>30,l[n++]=128|63&r>>24,l[n++]=128|63&r>>18,l[n++]=128|63&r>>12,l[n++]=128|63&r>>6,l[n++]=128|63&r);return t&&(k[e]=l),l}},function(e,t,l){'use strict';const n=l(1),s=l(23),u=l(11),r=l(7),o=l(13);e.exports.FENGARI_AUTHORS=n.FENGARI_AUTHORS,e.exports.FENGARI_COPYRIGHT=n.FENGARI_COPYRIGHT,e.exports.FENGARI_RELEASE=n.FENGARI_RELEASE,e.exports.FENGARI_VERSION=n.FENGARI_VERSION,e.exports.FENGARI_VERSION_MAJOR=n.FENGARI_VERSION_MAJOR,e.exports.FENGARI_VERSION_MINOR=n.FENGARI_VERSION_MINOR,e.exports.FENGARI_VERSION_NUM=n.FENGARI_VERSION_NUM,e.exports.FENGARI_VERSION_RELEASE=n.FENGARI_VERSION_RELEASE,e.exports.LUA_AUTHORS=n.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=n.LUA_COPYRIGHT,e.exports.LUA_ERRERR=n.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=n.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=n.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=n.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=n.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=n.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=n.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=n.LUA_HOOKLINE,e.exports.LUA_HOOKRET=n.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=n.LUA_HOOKTAILCALL,e.exports.LUA_INITVARVERSION=n.LUA_INITVARVERSION,e.exports.LUA_INIT_VAR=n.LUA_INIT_VAR,e.exports.LUA_MASKCALL=n.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=n.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=n.LUA_MASKLINE,e.exports.LUA_MASKRET=n.LUA_MASKRET,e.exports.LUA_MINSTACK=n.LUA_MINSTACK,e.exports.LUA_MULTRET=n.LUA_MULTRET,e.exports.LUA_NUMTAGS=n.LUA_NUMTAGS,e.exports.LUA_OK=n.thread_status.LUA_OK,e.exports.LUA_OPADD=n.LUA_OPADD,e.exports.LUA_OPBAND=n.LUA_OPBAND,e.exports.LUA_OPBNOT=n.LUA_OPBNOT,e.exports.LUA_OPBOR=n.LUA_OPBOR,e.exports.LUA_OPBXOR=n.LUA_OPBXOR,e.exports.LUA_OPDIV=n.LUA_OPDIV,e.exports.LUA_OPEQ=n.LUA_OPEQ,e.exports.LUA_OPIDIV=n.LUA_OPIDIV,e.exports.LUA_OPLE=n.LUA_OPLE,e.exports.LUA_OPLT=n.LUA_OPLT,e.exports.LUA_OPMOD=n.LUA_OPMOD,e.exports.LUA_OPMUL=n.LUA_OPMUL,e.exports.LUA_OPPOW=n.LUA_OPPOW,e.exports.LUA_OPSHL=n.LUA_OPSHL,e.exports.LUA_OPSHR=n.LUA_OPSHR,e.exports.LUA_OPSUB=n.LUA_OPSUB,e.exports.LUA_OPUNM=n.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=n.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=n.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=n.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=n.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=n.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=n.LUA_SIGNATURE,e.exports.LUA_TNONE=n.CT.LUA_TNONE,e.exports.LUA_TNIL=n.CT.LUA_TNIL,e.exports.LUA_TBOOLEAN=n.CT.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=n.CT.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=n.CT.LUA_TNUMBER,e.exports.LUA_TSTRING=n.CT.LUA_TSTRING,e.exports.LUA_TTABLE=n.CT.LUA_TTABLE,e.exports.LUA_TFUNCTION=n.CT.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=n.CT.LUA_TUSERDATA,e.exports.LUA_TTHREAD=n.CT.LUA_TTHREAD,e.exports.LUA_VERSION=n.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=n.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=n.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=n.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=n.LUA_VERSION_RELEASE,e.exports.LUA_VERSUFFIX=n.LUA_VERSUFFIX,e.exports.LUA_YIELD=n.thread_status.LUA_YIELD,e.exports.lua_Debug=n.lua_Debug,e.exports.lua_upvalueindex=n.lua_upvalueindex,e.exports.to_jsstring=n.to_jsstring,e.exports.to_luastring=n.to_luastring,e.exports.LUA_CDIR=n.LUA_CDIR,e.exports.LUA_CPATH_DEFAULT=n.LUA_CPATH_DEFAULT,e.exports.LUA_EXEC_DIR=n.LUA_EXEC_DIR,e.exports.LUA_LDIR=n.LUA_LDIR,e.exports.LUA_PATH_DEFAULT=n.LUA_PATH_DEFAULT,e.exports.LUA_PATH_MARK=n.LUA_PATH_MARK,e.exports.LUA_PATH_SEP=n.LUA_PATH_SEP,e.exports.LUA_ROOT=n.LUA_ROOT,e.exports.LUA_SHRDIR=n.LUA_SHRDIR,e.exports.LUA_VDIR=n.LUA_VDIR,e.exports.LUA_DIRSEP=n.LUA_DIRSEP,e.exports.lua_absindex=s.lua_absindex,e.exports.lua_arith=s.lua_arith,e.exports.lua_atpanic=s.lua_atpanic,e.exports.lua_atnativeerror=s.lua_atnativeerror,e.exports.lua_call=s.lua_call,e.exports.lua_callk=s.lua_callk,e.exports.lua_checkstack=s.lua_checkstack,e.exports.lua_close=o.lua_close,e.exports.lua_compare=s.lua_compare,e.exports.lua_concat=s.lua_concat,e.exports.lua_copy=s.lua_copy,e.exports.lua_createtable=s.lua_createtable,e.exports.lua_dump=s.lua_dump,e.exports.lua_error=s.lua_error,e.exports.lua_gc=s.lua_gc,e.exports.lua_getallocf=s.lua_getallocf,e.exports.lua_getextraspace=s.lua_getextraspace,e.exports.lua_getfield=s.lua_getfield,e.exports.lua_getglobal=s.lua_getglobal,e.exports.lua_gethook=u.lua_gethook,e.exports.lua_gethookcount=u.lua_gethookcount,e.exports.lua_gethookmask=u.lua_gethookmask,e.exports.lua_geti=s.lua_geti,e.exports.lua_getinfo=u.lua_getinfo,e.exports.lua_getlocal=u.lua_getlocal,e.exports.lua_getmetatable=s.lua_getmetatable,e.exports.lua_getstack=u.lua_getstack,e.exports.lua_gettable=s.lua_gettable,e.exports.lua_gettop=s.lua_gettop,e.exports.lua_getupvalue=s.lua_getupvalue,e.exports.lua_getuservalue=s.lua_getuservalue,e.exports.lua_insert=s.lua_insert,e.exports.lua_isboolean=s.lua_isboolean,e.exports.lua_iscfunction=s.lua_iscfunction,e.exports.lua_isfunction=s.lua_isfunction,e.exports.lua_isinteger=s.lua_isinteger,e.exports.lua_islightuserdata=s.lua_islightuserdata,e.exports.lua_isnil=s.lua_isnil,e.exports.lua_isnone=s.lua_isnone,e.exports.lua_isnoneornil=s.lua_isnoneornil,e.exports.lua_isnumber=s.lua_isnumber,e.exports.lua_isproxy=s.lua_isproxy,e.exports.lua_isstring=s.lua_isstring,e.exports.lua_istable=s.lua_istable,e.exports.lua_isthread=s.lua_isthread,e.exports.lua_isuserdata=s.lua_isuserdata,e.exports.lua_isyieldable=r.lua_isyieldable,e.exports.lua_len=s.lua_len,e.exports.lua_load=s.lua_load,e.exports.lua_newstate=o.lua_newstate,e.exports.lua_newtable=s.lua_newtable,e.exports.lua_newthread=o.lua_newthread,e.exports.lua_newuserdata=s.lua_newuserdata,e.exports.lua_next=s.lua_next,e.exports.lua_pcall=s.lua_pcall,e.exports.lua_pcallk=s.lua_pcallk,e.exports.lua_pop=s.lua_pop,e.exports.lua_pushboolean=s.lua_pushboolean,e.exports.lua_pushcclosure=s.lua_pushcclosure,e.exports.lua_pushcfunction=s.lua_pushcfunction,e.exports.lua_pushfstring=s.lua_pushfstring,e.exports.lua_pushglobaltable=s.lua_pushglobaltable,e.exports.lua_pushinteger=s.lua_pushinteger,e.exports.lua_pushjsclosure=s.lua_pushjsclosure,e.exports.lua_pushjsfunction=s.lua_pushjsfunction,e.exports.lua_pushlightuserdata=s.lua_pushlightuserdata,e.exports.lua_pushliteral=s.lua_pushliteral,e.exports.lua_pushlstring=s.lua_pushlstring,e.exports.lua_pushnil=s.lua_pushnil,e.exports.lua_pushnumber=s.lua_pushnumber,e.exports.lua_pushstring=s.lua_pushstring,e.exports.lua_pushthread=s.lua_pushthread,e.exports.lua_pushvalue=s.lua_pushvalue,e.exports.lua_pushvfstring=s.lua_pushvfstring,e.exports.lua_rawequal=s.lua_rawequal,e.exports.lua_rawget=s.lua_rawget,e.exports.lua_rawgeti=s.lua_rawgeti,e.exports.lua_rawgetp=s.lua_rawgetp,e.exports.lua_rawlen=s.lua_rawlen,e.exports.lua_rawset=s.lua_rawset,e.exports.lua_rawseti=s.lua_rawseti,e.exports.lua_rawsetp=s.lua_rawsetp,e.exports.lua_register=s.lua_register,e.exports.lua_remove=s.lua_remove,e.exports.lua_replace=s.lua_replace,e.exports.lua_resume=r.lua_resume,e.exports.lua_rotate=s.lua_rotate,e.exports.lua_setallof=r.lua_setallof,e.exports.lua_setfield=s.lua_setfield,e.exports.lua_setglobal=s.lua_setglobal,e.exports.lua_sethook=u.lua_sethook,e.exports.lua_seti=s.lua_seti,e.exports.lua_setlocal=u.lua_setlocal,e.exports.lua_setmetatable=s.lua_setmetatable,e.exports.lua_settable=s.lua_settable,e.exports.lua_settop=s.lua_settop,e.exports.lua_setupvalue=s.lua_setupvalue,e.exports.lua_setuservalue=s.lua_setuservalue,e.exports.lua_status=s.lua_status,e.exports.lua_stringtonumber=s.lua_stringtonumber,e.exports.lua_toboolean=s.lua_toboolean,e.exports.lua_todataview=s.lua_todataview,e.exports.lua_tointeger=s.lua_tointeger,e.exports.lua_tointegerx=s.lua_tointegerx,e.exports.lua_tojsstring=s.lua_tojsstring,e.exports.lua_toljsstring=s.lua_toljsstring,e.exports.lua_tolstring=s.lua_tolstring,e.exports.lua_tonumber=s.lua_tonumber,e.exports.lua_tonumberx=s.lua_tonumberx,e.exports.lua_topointer=s.lua_topointer,e.exports.lua_toproxy=s.lua_toproxy,e.exports.lua_tostring=s.lua_tostring,e.exports.lua_tothread=s.lua_tothread,e.exports.lua_touserdata=s.lua_touserdata,e.exports.lua_type=s.lua_type,e.exports.lua_typename=s.lua_typename,e.exports.lua_upvalueid=s.lua_upvalueid,e.exports.lua_upvaluejoin=s.lua_upvaluejoin,e.exports.lua_version=s.lua_version,e.exports.lua_xmove=s.lua_xmove,e.exports.lua_yield=r.lua_yield,e.exports.lua_yieldk=r.lua_yieldk,e.exports.lua_tocfunction=s.lua_tocfunction},function(e,t,l){'use strict';var n=Math.floor,u=String.fromCharCode;const s=l(0),r=l(1),o=l(26),_=l(11),c=l(7),d=l(12),g=l(13),i=l(9),f=l(8),h=l(10),A=l(15),T=l(5),x=l(14),O=r.constant_types,m=r.char,L=O.LUA_NUMTAGS,U=O.LUA_NUMTAGS+1;class E{constructor(e,t){this.type=e,this.value=t}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(e){return this.type===e}checktype(e){return this.ttnov()===e}ttisnumber(){return this.checktype(O.LUA_TNUMBER)}ttisfloat(){return this.checktag(O.LUA_TNUMFLT)}ttisinteger(){return this.checktag(O.LUA_TNUMINT)}ttisnil(){return this.checktag(O.LUA_TNIL)}ttisboolean(){return this.checktag(O.LUA_TBOOLEAN)}ttislightuserdata(){return this.checktag(O.LUA_TLIGHTUSERDATA)}ttisstring(){return this.checktype(O.LUA_TSTRING)}ttisshrstring(){return this.checktag(O.LUA_TSHRSTR)}ttislngstring(){return this.checktag(O.LUA_TLNGSTR)}ttistable(){return this.checktag(O.LUA_TTABLE)}ttisfunction(){return this.checktype(O.LUA_TFUNCTION)}ttisclosure(){return(31&this.type)===O.LUA_TFUNCTION}ttisCclosure(){return this.checktag(O.LUA_TCCL)}ttisLclosure(){return this.checktag(O.LUA_TLCL)}ttislcf(){return this.checktag(O.LUA_TLCF)}ttisfulluserdata(){return this.checktag(O.LUA_TUSERDATA)}ttisthread(){return this.checktag(O.LUA_TTHREAD)}ttisdeadkey(){return this.checktag(U)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(e){this.type=O.LUA_TNUMFLT,this.value=e}chgfltvalue(e){s(this.type==O.LUA_TNUMFLT),this.value=e}setivalue(e){this.type=O.LUA_TNUMINT,this.value=e}chgivalue(e){s(this.type==O.LUA_TNUMINT),this.value=e}setnilvalue(){this.type=O.LUA_TNIL,this.value=void 0}setfvalue(e){this.type=O.LUA_TLCF,this.value=e}setpvalue(e){this.type=O.LUA_TLIGHTUSERDATA,this.value=e}setbvalue(e){this.type=O.LUA_TBOOLEAN,this.value=e}setsvalue(e){this.type=O.LUA_TLNGSTR,this.value=e}setuvalue(e){this.type=O.LUA_TUSERDATA,this.value=e}setthvalue(e){this.type=O.LUA_TTHREAD,this.value=e}setclLvalue(e){this.type=O.LUA_TLCL,this.value=e}setclCvalue(e){this.type=O.LUA_TCCL,this.value=e}sethvalue(e){this.type=O.LUA_TTABLE,this.value=e}setdeadvalue(){this.type=U,this.value=null}setfrom(e){this.type=e.type,this.value=e.value}tsvalue(){return s(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(e,t){return r.to_jsstring(this.svalue(),e,t)}}const b=function(e,t,l){e.stack[t].setsvalue(l)},v=new E(O.LUA_TNIL,null);Object.freeze(v),e.exports.luaO_nilobject=v;class k{constructor(e,t){this.id=e.l_G.id_counter++,this.p=null,this.nupvalues=t,this.upvals=Array(t)}}class R{constructor(e,t,l){for(this.id=e.l_G.id_counter++,this.f=t,this.nupvalues=l,this.upvalue=Array(l);l--;)this.upvalue[l]=new E(O.LUA_TNIL,null)}}class S{constructor(e,t){this.id=e.l_G.id_counter++,this.metatable=null,this.uservalue=new E(O.LUA_TNIL,null),this.len=t,this.data=Object.create(null)}}const I=r.to_luastring('...',!0),N=r.to_luastring('[string "'),M=r.to_luastring('"]'),P=function(e){return o.lisdigit(e)?e-m[0]:u(e).toLowerCase().charCodeAt(0)-m.a+10},y=8,C=function(t){let l=0,n=m[h.lua_getlocaledecpoint()],s=0,u=0,_=0,i=0,e=!1,c;for(;o.lisspace(t[l]);)l++;if((c=t[l]===m['-'])?l++:t[l]===m['+']&&l++,t[l]!==m[0]||t[l+1]!==m.x&&t[l+1]!==m.X)return null;for(l+=2;;l++)if(t[l]===n){if(e)break;else e=!0;}else if(o.lisxdigit(t[l]))0==u&&t[l]===m[0]?_++:++u<=30?s=16*s+P(t[l]):i++,e&&i--;else break;if(0==_+u)return null;if(i*=4,t[l]===m.p||t[l]===m.P){let e=0,n;if(l++,(n=t[l]===m['-'])?l++:t[l]===m['+']&&l++,!o.lisdigit(t[l]))return null;for(;o.lisdigit(t[l]);)e=10*e+t[l++]-m[0];n&&(e=-e),i+=e}for(c&&(s=-s);o.lisspace(t[l]);)l++;return l===t.length?h.ldexp(s,i):null},D=function(e){let t=r.to_jsstring(e);if(!/^[\t\v\f \n\r]*[\+\-]?([0-9]+\.?[0-9]*|\.[0-9]*)([eE][\+\-]?[0-9]+)?[\t\v\f \n\r]*$/.test(t))return null;let l=parseFloat(t);return isNaN(l)?null:l},K=function(e,t){return'x'===t?C(e):D(e)},B=function(e){let t=/[.xXnN]/g.exec(u(...e));t=t?t.index:null;let l=t?e[t]:null,n=l?u(l).toLowerCase():0;if('n'===n)return null;let s=K(e,n);return null===s,s},w=n(T.MAX_INT/10),G=T.MAX_INT%10,V=function(e){let t=0,l=0,n=!0,s;for(;o.lisspace(e[t]);)t++;if((s=e[t]===m['-'])?t++:e[t]===m['+']&&t++,e[t]===m[0]&&(e[t+1]===m.x||e[t+1]===m.X))for(t+=2;o.lisxdigit(e[t]);t++)l=0|16*l+P(e[t]),n=!1;else for(;o.lisdigit(e[t]);t++){let u=e[t]-m[0];if(l>=w&&(l>w||u>G+s))return null;l=0|10*l+u,n=!1}for(;o.lisspace(e[t]);)t++;return n||t!==e.length?null:0|(s?-l:l)},j=function(e,t){let l;if(t.ttisinteger())l=r.to_luastring(h.lua_integer2str(t.value));else{let e=h.lua_number2str(t.value);l=r.to_luastring(e),/^[-0123456789]+$/.test(e)&&(l.push(m[h.lua_getlocaledecpoint()]),l.push(m[0]))}t.setsvalue(i.luaS_bless(e,l))},F=function(e,t){c.luaD_inctop(e),b(e,e.top-1,i.luaS_new(e,t))},X=function(t,l,u){let s=0,n=0,i=0,L;for(;L=l.indexOf(m['%'],n),-1!=L;){switch(F(t,l.slice(n,L)),l[L+1]){case m.s:let e=u[i++];null===e&&(e=r.to_luastring('(null)',!0)),F(t,e);break;case m.c:let s=u[i++];o.lisprint(s)?F(t,[s]):H(t,r.to_luastring('<\\%d>',!0),s);break;case m.d:case m.I:c.luaD_inctop(t),t.stack[t.top-1].setivalue(u[i++]),j(t,t.stack[t.top-1]);break;case m.f:c.luaD_inctop(t),t.stack[t.top-1].setfltvalue(u[i++]),j(t,t.stack[t.top-1]);break;case m.p:let h=u[i++];h instanceof g.lua_State||h instanceof f.Table||h instanceof S||h instanceof k||h instanceof R||h instanceof d.UpVal?F(t,r.to_luastring('0x'+h.id.toString(16))):F(t,r.to_luastring('<id NYI>'));break;case m.U:F(t,r.to_luastring(String.fromCodePoint(u[i++])));break;case m['%']:F(t,[m['%']]);break;default:_.luaG_runerror(t,r.to_luastring('invalid option \'%%%c\' to \'lua_pushfstring\''),l[L+1]);}s+=2,n=L+2}return c.luaD_checkstack(t,1),F(t,l.slice(n)),0<s&&A.luaV_concat(t,s+1),t.stack[t.top-1].svalue()},H=function(e,t,...l){return X(e,t,l)},Y=function(e,t,l,n){switch(t){case r.LUA_OPADD:return 0|l+n;case r.LUA_OPSUB:return 0|l-n;case r.LUA_OPMUL:return Math.imul(l,n);case r.LUA_OPMOD:return A.luaV_mod(e,l,n);case r.LUA_OPIDIV:return A.luaV_div(e,l,n);case r.LUA_OPBAND:return l&n;case r.LUA_OPBOR:return l|n;case r.LUA_OPBXOR:return l^n;case r.LUA_OPSHL:return A.luaV_shiftl(l,n);case r.LUA_OPSHR:return A.luaV_shiftl(l,-n);case r.LUA_OPUNM:return 0|0-l;case r.LUA_OPBNOT:return -1^l;default:s(0);}},z=function(e,t,l,u){switch(t){case r.LUA_OPADD:return l+u;case r.LUA_OPSUB:return l-u;case r.LUA_OPMUL:return l*u;case r.LUA_OPDIV:return l/u;case r.LUA_OPPOW:return Math.pow(l,u);case r.LUA_OPIDIV:return n(l/u);case r.LUA_OPUNM:return-l;case r.LUA_OPMOD:return T.luai_nummod(e,l,u);default:s(0);}};e.exports.CClosure=R,e.exports.LClosure=k,e.exports.LUA_TDEADKEY=U,e.exports.LUA_TPROTO=L,e.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},e.exports.TValue=E,e.exports.Udata=S,e.exports.UTF8BUFFSZ=y,e.exports.luaO_arith=function(e,t,l,n,u){let o='number'==typeof u?e.stack[u]:u;switch(t){case r.LUA_OPBAND:case r.LUA_OPBOR:case r.LUA_OPBXOR:case r.LUA_OPSHL:case r.LUA_OPSHR:case r.LUA_OPBNOT:{let s,u;if(!1!==(s=A.tointeger(l))&&!1!==(u=A.tointeger(n)))return void o.setivalue(Y(e,t,s,u));break}case r.LUA_OPDIV:case r.LUA_OPPOW:{let s,u;if(!1!==(s=A.tonumber(l))&&!1!==(u=A.tonumber(n)))return void o.setfltvalue(z(e,t,s,u));break}default:{let s,u;if(l.ttisinteger()&&n.ttisinteger())return void o.setivalue(Y(e,t,l.value,n.value));if(!1!==(s=A.tonumber(l))&&!1!==(u=A.tonumber(n)))return void o.setfltvalue(z(e,t,s,u));break}}s(null!==e),x.luaT_trybinTM(e,l,n,u,t-r.LUA_OPADD+x.TMS.TM_ADD)},e.exports.luaO_chunkid=function(e,t){let n=e.length,l;if(e[0]===m['='])l=n<t?e.slice(1):e.slice(1,t);else if(e[0]===m['@'])n<=t?l=e.slice(1):(t-=I.length,l=I.concat(e.slice(1+n-t)));else{let s=e.indexOf(m['\n']);l=N,t-=N.length+I.length+M.length+1,n<t&&-1===s?l=l.concat(e,M):(-1!==s&&(n=s),n>t&&(n=t),l=l.concat(e.slice(0,n),I,M))}return l},e.exports.luaO_hexavalue=P,e.exports.luaO_int2fb=function(t){let l=0;if(8>t)return t;for(;t>=128;)t=t+15>>4,l+=4;for(;t>=16;)t=t+1>>1,l++;return l+1<<3|t-8},e.exports.luaO_pushfstring=H,e.exports.luaO_pushvfstring=X,e.exports.luaO_str2num=function(e){let t=V(e);return null===t?(t=B(e),null!==t&&new E(O.LUA_TNUMFLT,t)):new E(O.LUA_TNUMINT,t)},e.exports.luaO_tostring=j,e.exports.luaO_utf8desc=function(e,t){let l=1;if(s(1114111>=t),128>t)e[y-1]=t;else{let n=63;do e[y-l++]=128|63&t,t>>=6,n>>=1;while(t>n);e[y-l]=~n<<1|t}return l},e.exports.luaO_utf8esc=function(e){let t=[],l=1;if(s(1114111>=e),128>e)t[y-1]=e;else{let n=63;do t[y-l++]=128|63&e,e>>=6,n>>=1;while(e>n);t[y-l]=~n<<1|e}return{buff:t,n:l}},e.exports.numarith=z,e.exports.pushobj2s=function(e,t){e.stack[e.top++]=new E(t.type,t.value)},e.exports.pushsvalue2s=function(e,t){e.stack[e.top++]=new E(O.LUA_TLNGSTR,t)},e.exports.setobjs2s=function(e,t,l){e.stack[t].setfrom(e.stack[l])},e.exports.setobj2s=function(e,t,l){e.stack[t].setfrom(l)},e.exports.setsvalue2s=b},function(e){e.exports=function(){throw new Error('define cannot be used indirect')}},function(e){'use strict';e.exports.LUAI_MAXCCALLS=200;e.exports.LUA_MAXINTEGER=2147483647;e.exports.LUA_MININTEGER=-2147483648;e.exports.luai_nummod=function(e,t,l){let n=t%l;return 0>n*l&&(n+=l),n};e.exports.MAX_INT=2147483647;e.exports.MIN_INT=-2147483648},function(e,t,l){'use strict';(function(t){const u=l(2),n='_LOADED',s=u.to_luastring('FILE*',!0),r=72;const o=10,_=11,i=function(e,t,l){if(0===l||!u.lua_istable(e,-1))return 0;for(u.lua_pushnil(e);u.lua_next(e,-2);){if(u.lua_type(e,-2)===u.LUA_TSTRING){if(u.lua_rawequal(e,t,-1))return u.lua_pop(e,1),1;if(i(e,t,l-1))return u.lua_remove(e,-2),u.lua_pushliteral(e,'.'),u.lua_insert(e,-2),u.lua_concat(e,3),1}u.lua_pop(e,1)}return 0},c=function(e,t){let l=u.lua_gettop(e);if(u.lua_getinfo(e,[102],t),u.lua_getfield(e,u.LUA_REGISTRYINDEX,u.to_luastring(n,!0)),i(e,l+1,2)){let t=u.lua_tostring(e,-1);return u.to_jsstring(t).startsWith('_G.')&&(u.lua_pushstring(e,t.slice(3)),u.lua_remove(e,-2)),u.lua_copy(e,-1,l+1),u.lua_pop(e,2),1}return u.lua_settop(e,l),0},d=function(e,t){c(e,t)?(u.lua_pushfstring(e,u.to_luastring('function \'%s\''),u.lua_tostring(e,-1)),u.lua_remove(e,-2)):0===t.namewhat.length?t.what&&t.what[0]===109?u.lua_pushliteral(e,'main chunk'):t.what&&t.what[0]!=67?u.lua_pushfstring(e,u.to_luastring('function <%s:%d>'),t.short_src,t.linedefined):u.lua_pushliteral(e,'?'):u.lua_pushfstring(e,u.to_luastring('%s \'%s\''),t.namewhat,t.name)},g=function(e){let t=new u.lua_Debug,l=1,n=1;for(;u.lua_getstack(e,n,t);)l=n,n*=2;for(;l<n;){let s=Math.floor((l+n)/2);u.lua_getstack(e,s,t)?l=s+1:n=s}return n-1},f=function(e){throw new Error(`PANIC: unprotected error in call to Lua API (${u.lua_tojsstring(e,-1)})`)},h=function(e,t,l){let n=new u.lua_Debug;return u.lua_getstack(e,0,n)?(u.lua_getinfo(e,[110],n),'method'===u.to_jsstring(n.namewhat)&&(t--,0===t))?x(e,u.to_luastring('calling \'%s\' on bad self (%s)'),n.name,l):(null===n.name&&(n.name=c(e,n)?u.lua_tostring(e,-1):[63]),x(e,u.to_luastring('bad argument #%d to \'%s\' (%s)'),t,n.name,l)):x(e,u.to_luastring('bad argument #%d (%s)'),t,l)},A=function(e,t,l){let n=F(e,t,u.to_luastring('__name',!0))===u.LUA_TSTRING?u.lua_tostring(e,-1):u.lua_type(e,t)===u.LUA_TLIGHTUSERDATA?u.to_luastring('light userdata',!0):b(e,t);let s=u.lua_pushfstring(e,u.to_luastring('%s expected, got %s'),l,n);return h(e,t,s)},T=function(e,t){let l=new u.lua_Debug;return u.lua_getstack(e,t,l)&&(u.lua_getinfo(e,u.to_luastring('Sl',!0),l),0<l.currentline)?void u.lua_pushfstring(e,u.to_luastring('%s:%d: '),l.short_src,l.currentline):void u.lua_pushstring(e,[])},x=function(e,t,...l){return T(e,1),u.lua_pushvfstring(e,t,l),u.lua_concat(e,2),u.lua_error(e)},O=function(t,l,n,s){return l?(u.lua_pushboolean(t,1),1):(u.lua_pushnil(t),n?u.lua_pushstring(t,u.to_luastring(`${u.to_jsstring(n)}: ${s.message}`)):u.lua_pushstring(t,u.to_luastring(s.message)),u.lua_pushinteger(t,-s.errno),3)},m=function(e,t){return u.lua_getfield(e,u.LUA_REGISTRYINDEX,t)},U=function(e,t,l){let n=u.lua_touserdata(e,t);return null!==n&&u.lua_getmetatable(e,t)?(m(e,l),u.lua_rawequal(e,-1,-2)||(n=null),u.lua_pop(e,2),n):null},E=function(e,t,l){A(e,t,u.lua_typename(e,l))},b=function(e,t){return u.lua_typename(e,u.lua_type(e,t))},v=function(e,t){return k(e,t,null)},k=function(e,t){let l=u.lua_tolstring(e,t);return(null===l||void 0===l)&&E(e,t,u.LUA_TSTRING),l},L=function(e,t,l){return 0>=u.lua_type(e,t)?l:k(e,t)},R=L,S=function(e,t){u.lua_isnumber(e,t)?h(e,t,u.to_luastring('number has no integer representation',!0)):E(e,t,u.LUA_TNUMBER)},I=function(e,t){let l=u.lua_tonumberx(e,t);return!1===l&&E(e,t,u.LUA_TNUMBER),l},N=function(e,t){let l=u.lua_tointeger(e,t);return!1===l&&S(e,t),l},M=function(e){return e},P=function(e,t){t.L=e,t.b=[]},y=function(e,t,n){e.b=e.b.concat(t.slice(0,n))},C=y,D=function(e){let t=e.L;u.lua_pushstring(t,e.b)},K=function(e,t){e.n+=t},B=function(e,t,l,n){return 0>=u.lua_type(e,l)?n:t(e,l)},w=function(e,t){let l=t.string;return t.string=null,l},G=function(e,t,l,n,s){return u.lua_load(e,w,{string:t},n,s)},V=function(e,t,l,s){return G(e,t,l,s,null)},j=function(e,t){return V(e,t,t.length,t)},F=function(e,t,l){if(!u.lua_getmetatable(e,t))return u.LUA_TNIL;u.lua_pushstring(e,l);let n=u.lua_rawget(e,-2);return n===u.LUA_TNIL&&u.lua_pop(e,2),n},X=function(e,t,l){return(t=u.lua_absindex(e,t),F(e,t,l)!==u.LUA_TNIL)&&(u.lua_pushvalue(e,t),u.lua_call(e,1,1),!0)},H=function(e,t,n){var s=n>>>0,u=t.length,r=e.length+1-u;loop:for(;s<r;s++){for(let l=0;l<u;l++)if(e[s+l]!==t[l])continue loop;return s}return-1},Y=function(e,t,l){return!(u.lua_getfield(e,t,l)!==u.LUA_TTABLE)||(u.lua_pop(e,1),t=u.lua_absindex(e,t),u.lua_newtable(e),u.lua_pushvalue(e,-1),u.lua_setfield(e,t,l),!1)},z=function(e,t,l){for(let n in J(e,l,u.to_luastring('too many upvalues',!0)),t){for(let t=0;t<l;t++)u.lua_pushvalue(e,-l);u.lua_pushcclosure(e,t[n],l),u.lua_setfield(e,-(l+2),u.to_luastring(n))}u.lua_pop(e,l)},J=function(e,t,l){u.lua_checkstack(e,t)||(l?x(e,u.to_luastring('stack overflow (%s)'),l):x(e,u.to_luastring('stack overflow',!0)))},Z=-1,q=function(e,t,l,n){let s=n.message,r=u.lua_tostring(e,l).slice(1);return u.lua_pushstring(e,u.to_luastring(`cannot ${t} ${u.to_jsstring(r)}: ${s}`)),u.lua_remove(e,l),u.LUA_ERRFILE};let W=function(){return null};const Q=[239,187,191],$=function(e){e.n=0;let t=0,l;do{if(l=W(e),null===l||l!==Q[t])return l;t++,e.buff[e.n++]=l}while(t<Q.length);return e.n=0,W(e)},ee=function(e){let t=$(e);if(t===35){do t=W(e);while(t&&t!==10);return{skipped:!0,c:W(e)}}return{skipped:!1,c:t}};class te{constructor(){this.n=NaN,this.f=null,this.buff=Array(1024),this.pos=0,this.err=void 0}}{const t=function(e,t){let l=t;if(null!==l.f&&0<l.n){let e=l.n;return l.n=0,l.f=l.f.slice(l.pos),l.buff.slice(0,e)}let n=l.f;return l.f=null,n};W=function(e){return e.pos<e.f.length?e.f[e.pos++]:null};const l=function(e,l,n){let s=new te,r=u.lua_gettop(e)+1;if(null===l)throw new Error(`Can't read stdin in the browser`);else{let t=u.to_jsstring(l);u.lua_pushliteral(e,`@${t}`);let n=new XMLHttpRequest;if(n.open('GET',t,!1),n.send(),200===n.status)s.f=u.to_luastring(n.response);else return s.err=n.status,q(e,'open',r,{message:`${n.status}: ${n.statusText}`})}let o=ee(s);o.c===u.LUA_SIGNATURE.charCodeAt(0)&&l||o.skipped&&(s.buff[s.n++]=10),null!==o.c&&(s.buff[s.n++]=o.c);let _=u.lua_load(e,t,s,u.lua_tostring(e,-1),n),i=s.err;return i?(u.lua_settop(e,r),q(e,'read',r,i)):(u.lua_remove(e,r),_)},n=function(e,t){return l(e,t,null)};e.exports.luaL_dofile=function(e,t){return n(e,t)||u.lua_pcall(e,0,u.LUA_MULTRET,0)},e.exports.luaL_loadfilex=l,e.exports.luaL_loadfile=n}e.exports.LUA_FILEHANDLE=s,e.exports.LUA_LOADED_TABLE=n,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE='_PRELOAD',e.exports.LUA_REFNIL=Z,e.exports.luaL_Buffer=class{constructor(){this.b=null,this.L=null}},e.exports.luaL_addchar=function(e,t){e.b.push(t)},e.exports.luaL_addlstring=y,e.exports.luaL_addsize=K,e.exports.luaL_addstring=C,e.exports.luaL_addvalue=function(e){let t=e.L,l=u.lua_tostring(t,-1);C(e,l),u.lua_remove(t,-1)},e.exports.luaL_argcheck=function(e,t,l,n){t||h(e,l,n)},e.exports.luaL_argerror=h,e.exports.luaL_buffinit=P,e.exports.luaL_buffinitsize=function(e,t){return P(e,t),t},e.exports.luaL_callmeta=X,e.exports.luaL_checkany=function(e,t){u.lua_type(e,t)===u.LUA_TNONE&&h(e,t,u.to_luastring('value expected',!0))},e.exports.luaL_checkinteger=N,e.exports.luaL_checklstring=k,e.exports.luaL_checknumber=I,e.exports.luaL_checkoption=function(e,t,l,n){let s=l?R(e,t,l):v(e,t);for(let u=0;n[u];u++)if(n[u].join('|')===s.join('|'))return u;return h(e,t,u.lua_pushfstring(e,u.to_luastring('invalid option \'%s\''),s))},e.exports.luaL_checkstack=J,e.exports.luaL_checkstring=v,e.exports.luaL_checktype=function(e,l,n){u.lua_type(e,l)!==n&&E(e,l,n)},e.exports.luaL_checkudata=function(e,t,l){let n=U(e,t,l);return null===n&&A(e,t,l),n},e.exports.luaL_checkversion=function(e){let t=u.LUA_VERSION_NUM,l=u.lua_version(e);r!=r,l==u.lua_version(null)?l!==t&&x(e,u.to_luastring('version mismatch: app. needs %f, Lua core provides %f'),t,l):x(e,u.to_luastring('multiple Lua VMs detected'))},e.exports.luaL_dostring=function(e,t){return j(e,t)||u.lua_pcall(e,0,u.LUA_MULTRET,0)},e.exports.luaL_error=x,e.exports.luaL_execresult=function(t,l){let e,n;if(null===l)return u.lua_pushboolean(t,1),u.lua_pushliteral(t,'exit'),u.lua_pushinteger(t,0),3;if(l.status)e='exit',n=l.status;else if(l.signal)e='signal',n=l.signal;else return O(t,0,null,l);return u.lua_pushnil(t),u.lua_pushliteral(t,e),u.lua_pushinteger(t,n),3},e.exports.luaL_fileresult=O,e.exports.luaL_getmetafield=F,e.exports.luaL_getmetatable=m,e.exports.luaL_getsubtable=Y,e.exports.luaL_gsub=function(e,t,l,n){let s=[],r;for(;0<=(r=H(t,l));)s.push(...t.slice(0,r)),s.push(...n),t=t.slice(r+l.length);return s.push(...t),u.lua_pushstring(e,s),u.lua_tostring(e,-1)},e.exports.luaL_len=function(e,t){u.lua_len(e,t);let n=u.lua_tointegerx(e,-1);return!1===n&&x(e,u.to_luastring('object length is not an integer',!0)),u.lua_pop(e,1),n},e.exports.luaL_loadbuffer=V,e.exports.luaL_loadbufferx=G,e.exports.luaL_loadstring=j,e.exports.luaL_newlib=function(e,t){u.lua_createtable(e),z(e,t,0)},e.exports.luaL_newlibtable=function(e){u.lua_createtable(e)},e.exports.luaL_newmetatable=function(e,t){return m(e,t)===u.LUA_TNIL?(u.lua_pop(e,1),u.lua_createtable(e,0,2),u.lua_pushstring(e,t),u.lua_setfield(e,-2,u.to_luastring('__name')),u.lua_pushvalue(e,-1),u.lua_setfield(e,u.LUA_REGISTRYINDEX,t),1):0},e.exports.luaL_newstate=function(){let e=u.lua_newstate();return e&&u.lua_atpanic(e,f),e},e.exports.luaL_opt=B,e.exports.luaL_optinteger=function(e,t,l){return B(e,N,t,l)},e.exports.luaL_optlstring=L,e.exports.luaL_optnumber=function(e,t,l){return B(e,I,t,l)},e.exports.luaL_optstring=R,e.exports.luaL_prepbuffer=function(e){return M(e,8192)},e.exports.luaL_prepbuffsize=M,e.exports.luaL_pushresult=D,e.exports.luaL_pushresultsize=function(e,t){K(e,t),D(e)},e.exports.luaL_ref=function(e,l){let t;return u.lua_isnil(e,-1)?(u.lua_pop(e,1),Z):(l=u.lua_absindex(e,l),u.lua_rawgeti(e,l,0),t=u.lua_tointeger(e,-1),u.lua_pop(e,1),0===t?t=u.lua_rawlen(e,l)+1:(u.lua_rawgeti(e,l,t),u.lua_rawseti(e,l,0)),u.lua_rawseti(e,l,t),t)},e.exports.luaL_requiref=function(e,t,l,s){Y(e,u.LUA_REGISTRYINDEX,u.to_luastring(n)),u.lua_getfield(e,-1,t),u.lua_toboolean(e,-1)||(u.lua_pop(e,1),u.lua_pushcfunction(e,l),u.lua_pushstring(e,t),u.lua_call(e,1,1),u.lua_pushvalue(e,-1),u.lua_setfield(e,-3,t)),u.lua_remove(e,-2),s&&(u.lua_pushvalue(e,-1),u.lua_setglobal(e,t))},e.exports.luaL_setfuncs=z,e.exports.luaL_setmetatable=function(e,t){m(e,t),u.lua_setmetatable(e,-2)},e.exports.luaL_testudata=U,e.exports.luaL_tolstring=function(e,l){if(X(e,l,u.to_luastring('__tostring',!0)))u.lua_isstring(e,-1)||x(e,u.to_luastring('\'__tostring\' must return a string',!0));else{let n=u.lua_type(e,l);switch(n){case u.LUA_TNUMBER:{u.lua_isinteger(e,l)?u.lua_pushfstring(e,u.to_luastring('%I'),u.lua_tointeger(e,l)):u.lua_pushfstring(e,u.to_luastring('%f'),u.lua_tonumber(e,l));break}case u.LUA_TSTRING:u.lua_pushvalue(e,l);break;case u.LUA_TBOOLEAN:u.lua_pushliteral(e,u.lua_toboolean(e,l)?'true':'false');break;case u.LUA_TNIL:u.lua_pushliteral(e,'nil');break;default:let t=F(e,l,u.to_luastring('__name',!0)),s=t===u.LUA_TSTRING?u.lua_tostring(e,-1):b(e,l);u.lua_pushfstring(e,u.to_luastring('%s: %p'),s,u.lua_topointer(e,l)),t!==u.LUA_TNIL&&u.lua_remove(e,-2);}}return u.lua_tolstring(e,-1)},e.exports.luaL_traceback=function(e,t,l,n){let s=new u.lua_Debug,r=u.lua_gettop(e),i=g(t),c=i-n>o+_?o:-1;for(l&&u.lua_pushfstring(e,u.to_luastring('%s\n'),l),J(e,10,null),u.lua_pushliteral(e,'stack traceback:');u.lua_getstack(t,n++,s);)0==c--?(u.lua_pushliteral(e,'\n\t...'),n=i-_+1):(u.lua_getinfo(t,u.to_luastring('Slnt',!0),s),u.lua_pushfstring(e,u.to_luastring('\n\t%s:'),s.short_src),0<s.currentline&&u.lua_pushliteral(e,`${s.currentline}:`),u.lua_pushliteral(e,' in '),d(e,s),s.istailcall&&u.lua_pushliteral(e,'\n\t(...tail calls..)'),u.lua_concat(e,u.lua_gettop(e)-r));u.lua_concat(e,u.lua_gettop(e)-r)},e.exports.luaL_typename=b,e.exports.luaL_unref=function(e,l,t){0<=t&&(l=u.lua_absindex(e,l),u.lua_rawgeti(e,l,0),u.lua_rawseti(e,l,t),u.lua_pushinteger(e,t),u.lua_rawseti(e,l,0))},e.exports.luaL_where=T,e.exports.lua_writestringerror=function(e){t.stderr?t.stderr.write(e):console.error(e)}}).call(t,l(19))},function(e,t,l){'use strict';const s=l(0),u=l(1),n=l(23),r=l(11),o=l(12),_=l(5),c=l(3),i=l(16),d=l(27),g=l(13),f=l(9),h=l(14),A=l(10),T=l(42),x=l(15),L=l(21),O=u.constant_types,m=u.thread_status,U=function(e,t){if(e.top<t)for(;e.top<t;)e.stack[e.top++]=new c.TValue(O.LUA_TNIL,null);else for(;e.top>t;)delete e.stack[--e.top]},E=function(e,t,l){let n=e.top;for(;e.top<l+1;)e.stack[e.top++]=new c.TValue(O.LUA_TNIL,null);switch(t){case m.LUA_ERRMEM:{c.setsvalue2s(e,l,f.luaS_newliteral(e,'not enough memory'));break}case m.LUA_ERRERR:{c.setsvalue2s(e,l,f.luaS_newliteral(e,'error in error handling'));break}default:c.setobjs2s(e,l,n-1);}for(;e.top>l+1;)delete e.stack[--e.top]},b=A.LUAI_MAXSTACK+200,v=function(e,t){s(t<=A.LUAI_MAXSTACK||t==b),s(e.stack_last==e.stack.length-g.EXTRA_STACK),e.stack.length=t,e.stack_last=t-g.EXTRA_STACK},k=function(e,t){let l=e.stack.length;if(l>A.LUAI_MAXSTACK)G(e,m.LUA_ERRERR);else{let n=e.top+t+g.EXTRA_STACK,s=2*l;s>A.LUAI_MAXSTACK&&(s=A.LUAI_MAXSTACK),s<n&&(s=n),s>A.LUAI_MAXSTACK?(v(e,b),r.luaG_runerror(e,u.to_luastring('stack overflow',!0))):v(e,s)}},R=function(e,t){e.stack_last-e.top<=t&&k(e,t)},S=function(e){let t=e.top;for(let l=e.ci;null!==l;l=l.previous)t<l.top&&(t=l.top);return s(t<=e.stack_last),t+1},I=function(e){let t=S(e),l=t+Math.floor(t/8)+2*g.EXTRA_STACK;l>A.LUAI_MAXSTACK&&(l=A.LUAI_MAXSTACK),e.stack.length>A.LUAI_MAXSTACK&&g.luaE_freeCI(e),t<=A.LUAI_MAXSTACK-g.EXTRA_STACK&&l<e.stack.length&&v(e,l)},N=function(e,t,l){let r=e.stack[t];switch(r.type){case O.LUA_TCCL:case O.LUA_TLCF:{let o=r.type===O.LUA_TCCL?r.value.f:r.value;R(e,u.LUA_MINSTACK);let _=g.luaE_extendCI(e);_.funcOff=t,_.nresults=l,_.func=r,_.top=e.top+u.LUA_MINSTACK,s(_.top<=e.stack_last),_.callstatus=0,e.hookmask&u.LUA_MASKCALL&&y(e,u.LUA_HOOKCALL,-1);let i=o(e);return s('number'==typeof i&&0<=i&&(0|i)===i,'invalid return value from JS function (expected integer)'),s(i<e.top-e.ci.funcOff,'not enough elements in the stack'),M(e,_,e.top-i,i),!0}case O.LUA_TLCL:{let s=r.value.p,o=e.top-t-1,n=s.maxstacksize,_;if(R(e,n),s.is_vararg)_=D(e,s,o);else{for(;o<s.numparams;o++)e.stack[e.top++]=new c.TValue(O.LUA_TNIL,null);_=t+1}let i=g.luaE_extendCI(e);return i.funcOff=t,i.nresults=l,i.func=r,i.l_base=_,i.top=_+n,U(e,i.top),i.l_code=s.code,i.l_savedpc=0,i.callstatus=g.CIST_LUA,e.hookmask&u.LUA_MASKCALL&&C(e,i),!1}default:return R(e,1),K(e,t,r),N(e,t,l);}},M=function(e,t,l,n){let s=t.nresults;e.hookmask&(u.LUA_MASKRET|u.LUA_MASKLINE)&&(e.hookmask&u.LUA_MASKRET&&y(e,u.LUA_HOOKRET,-1),e.oldpc=t.previous.l_savedpc);let r=t.funcOff;return e.ci=t.previous,e.ci.next=null,P(e,l,r,n,s)},P=function(e,t,l,n,s){switch(s){case 0:break;case 1:{0===n?e.stack[l].setnilvalue():c.setobjs2s(e,l,t);break}case u.LUA_MULTRET:{for(let s=0;s<n;s++)c.setobjs2s(e,l+s,t+s);for(let t=e.top;t>=l+n;t--)delete e.stack[t];return e.top=l+n,!1}default:{let u;if(s<=n)for(u=0;u<s;u++)c.setobjs2s(e,l+u,t+u);else{for(u=0;u<n;u++)c.setobjs2s(e,l+u,t+u);for(;u<s;u++)l+u>=e.top?e.stack[l+u]=new c.TValue(O.LUAT_NIL,null):e.stack[l+u].setnilvalue()}break}}let r=l+s;for(let u=e.top;u>=r;u--)delete e.stack[u];return e.top=r,!0},y=function(e,t,l){let n=e.hook;if(n&&e.allowhook){let r=e.ci,o=e.top,_=r.top,i=new u.lua_Debug;i.event=t,i.currentline=l,i.i_ci=r,R(e,u.LUA_MINSTACK),r.top=e.top+u.LUA_MINSTACK,s(r.top<=e.stack_last),e.allowhook=0,r.callstatus|=g.CIST_HOOKED,n(e,i),s(!e.allowhook),e.allowhook=1,r.top=_,U(e,o),r.callstatus&=~g.CIST_HOOKED}},C=function(e,t){let l=u.LUA_HOOKCALL;t.l_savedpc++,t.previous.callstatus&g.CIST_LUA&&t.previous.l_code[t.previous.l_savedpc-1].opcode==i.OpCodesI.OP_TAILCALL&&(t.callstatus|=g.CIST_TAIL,l=u.LUA_HOOKTAILCALL),y(e,l,-1),t.l_savedpc--},D=function(e,t,l){let n=t.numparams,s=e.top-l,u=e.top,r;for(r=0;r<n&&r<l;r++)c.pushobj2s(e,e.stack[s+r]),e.stack[s+r].setnilvalue();for(;r<n;r++)e.stack[e.top++]=new c.TValue(O.LUA_TNIL,null);return u},K=function(e,t,l){let n=h.luaT_gettmbyobj(e,l,h.TMS.TM_CALL);n.ttisfunction(n)||r.luaG_typeerror(e,l,u.to_luastring('call',!0)),c.pushobj2s(e,e.stack[e.top-1]);for(let n=e.top-2;n>t;n--)c.setobjs2s(e,n,n-1);c.setobj2s(e,t,n)},B=function(e){e.nCcalls===_.LUAI_MAXCCALLS?r.luaG_runerror(e,u.to_luastring('JS stack overflow',!0)):e.nCcalls>=_.LUAI_MAXCCALLS+(_.LUAI_MAXCCALLS>>3)&&G(e,m.LUA_ERRERR)},w=function(e,t,l){++e.nCcalls>=_.LUAI_MAXCCALLS&&B(e),N(e,t,l)||x.luaV_execute(e),e.nCcalls--},G=function(e,t){if(e.errorJmp)throw e.errorJmp.status=t,e.errorJmp;else{let l=e.l_G;if(e.status=t,l.mainthread.errorJmp)l.mainthread.stack[l.mainthread.top++]=e.stack[e.top-1],G(l.mainthread,t);else{let n=l.panic;throw n&&(E(e,t,e.top),e.ci.top<e.top&&(e.ci.top=e.top),n(e)),new Error(`Aborted ${t}`)}}},V=function(t,e,l){let s=t.nCcalls,u={status:m.LUA_OK,previous:t.errorJmp};t.errorJmp=u;try{e(t,l)}catch(l){if(u.status===m.LUA_OK){let e=t.l_G.atnativeerror;if(e)try{if(u.status=m.LUA_OK,n.lua_pushcfunction(t,e),n.lua_pushlightuserdata(t,l),q(t,t.top-2,1),0!==t.errfunc){let e=t.errfunc;c.pushobj2s(t,t.stack[t.top-1]),c.setobjs2s(t,t.top-2,e),q(t,t.top-2,1)}u.status=m.LUA_ERRRUN}catch(e){u.status===m.LUA_OK&&(u.status=-1)}else u.status=-1}}return t.errorJmp=u.previous,t.nCcalls=s,u.status},j=function(e,t){let l=e.ci;s(null!==l.c_k&&0===e.nny),s(l.callstatus&g.CIST_YPCALL||t===m.LUA_YIELD),l.callstatus&m.CIST_YPCALL&&(l.callstatus&=~m.CIST_YPCALL,e.errfunc=l.c_old_errfunc),l.nresults===u.LUA_MULTRET&&e.ci.top<e.top&&(e.ci.top=e.top);let r=l.c_k,o=r(e,t,l.c_ctx);s(o<e.top-e.ci.funcOff,'not enough elements in the stack'),M(e,l,e.top-o,o)},F=function(e,t){for(null!==t&&j(e,t);e.ci!==e.base_ci;)e.ci.callstatus&g.CIST_LUA?(x.luaV_finishOp(e),x.luaV_execute(e)):j(e,m.LUA_YIELD)},X=function(e){for(let t=e.ci;null!==t;t=t.previous)if(t.callstatus&g.CIST_YPCALL)return t;return null},H=function(e,t){let l=X(e);if(null===l)return 0;let n=l.extra;return o.luaF_close(e,n),E(e,t,n),e.ci=l,e.allowhook=l.callstatus&g.CIST_OAH,e.nny=0,I(e),e.errfunc=l.c_old_errfunc,1},Y=function(e,t,l){let n=f.luaS_newliteral(e,t);if(0===l)c.pushsvalue2s(e,n),s(e.top<=e.ci.top,'stack overflow');else{for(let t=1;t<l;t++)delete e.stack[--e.top];c.setsvalue2s(e,e.top-1,n)}return m.LUA_ERRRUN},z=function(e,t){let l=e.top-t,n=e.ci;e.status===m.LUA_OK?!N(e,l-1,u.LUA_MULTRET)&&x.luaV_execute(e):(s(e.status===m.LUA_YIELD),e.status=m.LUA_OK,n.funcOff=n.extra,n.func=e.stack[n.funcOff],n.callstatus&g.CIST_LUA?x.luaV_execute(e):(null!==n.c_k&&(t=n.c_k(e,m.LUA_YIELD,n.c_ctx),s(t<e.top-e.ci.funcOff,'not enough elements in the stack'),l=e.top-t),M(e,n,l,t)),F(e,null))},J=function(e,t,l,n){let o=e.ci;return s(t<e.top-e.ci.funcOff,'not enough elements in the stack'),0<e.nny&&(e===e.l_G.mainthread?r.luaG_runerror(e,u.to_luastring('attempt to yield from outside a coroutine',!0)):r.luaG_runerror(e,u.to_luastring('attempt to yield across a JS-call boundary',!0))),e.status=m.LUA_YIELD,o.extra=o.funcOff,o.callstatus&g.CIST_LUA?s(null===n,'hooks cannot continue after yielding'):(o.c_k=n,null!==n&&(o.c_ctx=l),o.funcOff=e.top-t-1,o.func=e.stack[o.funcOff],G(e,m.LUA_YIELD)),s(o.callstatus&g.CIST_HOOKED),0},Z=function(e,t,l,n,s){let u=e.ci,r=e.allowhook,_=e.nny,i=e.errfunc;e.errfunc=s;let c=V(e,t,l);return c!==m.LUA_OK&&(o.luaF_close(e,n),E(e,c,n),e.ci=u,e.allowhook=r,e.nny=_,I(e)),e.errfunc=i,c},q=function(e,t,l){e.nny++,w(e,t,l),e.nny--};class W{constructor(e,t,l){this.z=e,this.buff=new L.MBuffer,this.dyd=new d.Dyndata,this.mode=l,this.name=t}}const Q=function(e,t,l){t&&-1===t.indexOf(l[0])&&(n.lua_pushstring(e,u.to_luastring(`attempt to load a ${u.to_jsstring(l)} chunk (mode is '${u.to_jsstring(t)}')`)),G(e,m.LUA_ERRSYNTAX))},$=function(e,t){let l=t.z.zgetc(),n;l===u.LUA_SIGNATURE.charCodeAt(0)?(Q(e,t.mode,u.to_luastring('binary',!0)),n=T.luaU_undump(e,t.z,t.name)):(Q(e,t.mode,u.to_luastring('text',!0)),n=d.luaY_parser(e,t.z,t.buff,t.dyd,t.name,l)),s(n.nupvalues===n.p.upvalues.length),o.luaF_initupvals(e,n)};e.exports.adjust_top=U,e.exports.luaD_call=w,e.exports.luaD_callnoyield=q,e.exports.luaD_checkstack=R,e.exports.luaD_growstack=k,e.exports.luaD_hook=y,e.exports.luaD_inctop=function(e){R(e,1),e.stack[e.top++]=new c.TValue(O.LUA_TNIL,null)},e.exports.luaD_pcall=Z,e.exports.luaD_poscall=M,e.exports.luaD_precall=N,e.exports.luaD_protectedparser=function(e,t,l,n){let s=new W(t,l,n);e.nny++;let u=Z(e,$,s,e.top,e.errfunc);return e.nny--,u},e.exports.luaD_rawrunprotected=V,e.exports.luaD_reallocstack=v,e.exports.luaD_throw=G,e.exports.lua_isyieldable=function(e){return 0===e.nny},e.exports.lua_resume=function(e,t,l){let n=e.nny;if(e.status===m.LUA_OK){if(e.ci!==e.base_ci)return Y(e,'cannot resume non-suspended coroutine',l);}else if(e.status!==m.LUA_YIELD)return Y(e,'cannot resume dead coroutine',l);if(e.nCcalls=t?t.nCcalls+1:1,e.nCcalls>=_.LUAI_MAXCCALLS)return Y(e,'JS stack overflow',l);e.nny=0,s((e.status===m.LUA_OK?l+1:l)<e.top-e.ci.funcOff,'not enough elements in the stack');let u=V(e,z,l);if(-1===u)u=m.LUA_ERRRUN;else{for(;u>m.LUA_YIELD&&H(e,u);)u=V(e,F,u);u>m.LUA_YIELD?(e.status=u,E(e,u,e.top),e.ci.top=e.top):s(u===e.status)}return e.nny=n,e.nCcalls--,s(e.nCcalls===(t?t.nCcalls:0)),u},e.exports.lua_yield=function(e,t){J(e,t,0,null)},e.exports.lua_yieldk=J},function(e,t,l){'use strict';const n=l(0),s=l(1),u=l(11),r=l(3),o=l(9),_=l(13),i=s.constant_types;let c=new WeakMap;const d=function(e){let t=c.get(e);return t||(t={},c.set(e,t)),t},g=function(e,t){switch(t.type){case i.LUA_TNIL:return u.luaG_runerror(e,s.to_luastring('table index is nil',!0));case i.LUA_TNUMFLT:if(isNaN(t.value))return u.luaG_runerror(e,s.to_luastring('table index is NaN',!0));case i.LUA_TNUMINT:case i.LUA_TBOOLEAN:case i.LUA_TTABLE:case i.LUA_TLCL:case i.LUA_TLCF:case i.LUA_TCCL:case i.LUA_TUSERDATA:case i.LUA_TTHREAD:return t.value;case i.LUA_TSHRSTR:case i.LUA_TLNGSTR:return o.luaS_hashlongstr(t.tsvalue());case i.LUA_TLIGHTUSERDATA:let l=t.value;switch(typeof l){case'string':return'*'+l;case'number':return'#'+l;case'boolean':return l?'?true':'?false';case'function':return d(l);case'object':if(l instanceof _.lua_State&&l.l_G===e.l_G||l instanceof f||l instanceof r.Udata||l instanceof r.LClosure||l instanceof r.CClosure)return d(l);default:return l;}default:throw new Error('unknown key type: '+t.type);}};class f{constructor(e){this.id=e.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}}const L=function(e,t,l,n){e.dead_strong.clear(),e.dead_weak=void 0;let s=null,u={key:l,value:n,p:s=e.l,n:void 0};e.f||(e.f=u),s&&(s.n=u),e.strong.set(t,u),e.l=u},h=function(e){return'object'==typeof e?null!==e:'function'==typeof e},A=function(l,t){let n=l.strong.get(t);if(n){n.key.setdeadvalue(),n.value=void 0;let e=n.n,s=n.p;n.p=void 0,s&&(s.n=e),e&&(e.p=s),l.f===n&&(l.f=e),l.l===n&&(l.l=s),l.strong.delete(t),h(t)?(!l.dead_weak&&(l.dead_weak=new WeakMap),l.dead_weak.set(t,n)):l.dead_strong.set(t,n)}},T=function(e,t){let l=e.strong.get(t);return l?l.value:r.luaO_nilobject},x=function(e,t){return n('number'==typeof t&&(0|t)===t),T(e,t)},O=function(e,t,l){let n=e.strong.get(t);if(n)return n.value;let s=l.value;l=l.ttisfloat()&&(0|s)===s?new r.TValue(i.LUA_TNUMINT,s):new r.TValue(l.type,s);let u=new r.TValue(i.LUA_TNIL,null);return L(e,t,l,u),u};e.exports.invalidateTMcache=function(e){e.flags=0},e.exports.luaH_delete=function(e,l,t){n(t instanceof r.TValue);let s=g(e,t);return A(l,s)},e.exports.luaH_get=function(e,l,t){return n(t instanceof r.TValue),t.ttisnil()||t.ttisfloat()&&isNaN(t.value)?r.luaO_nilobject:T(l,g(e,t))},e.exports.luaH_getint=x,e.exports.luaH_getn=function(e){let t=0,l=e.strong.size+1;for(;1<l-t;){let n=Math.floor((t+l)/2);x(e,n).ttisnil()?l=n:t=n}return t},e.exports.luaH_getstr=function(e,t){return n(t instanceof o.TString),T(e,o.luaS_hashlongstr(t))},e.exports.luaH_set=function(e,l,t){n(t instanceof r.TValue);let s=g(e,t);return O(l,s,t)},e.exports.luaH_setint=function(e,t,l){n('number'==typeof t&&(0|t)===t&&l instanceof r.TValue);let s=t;if(l.ttisnil())return void A(e,s);let u=e.strong.get(s);if(u){let e=u.value;e.setfrom(l)}else{let n=new r.TValue(i.LUA_TNUMINT,t),u=new r.TValue(l.type,l.value);L(e,s,n,u)}},e.exports.luaH_new=function(e){return new f(e)},e.exports.luaH_next=function(e,t,l){let n=e.stack[l],o;if(n.type!==i.LUA_TNIL){let l=g(e,n);if(o=t.strong.get(l),!o){if(o=t.dead_weak&&t.dead_weak.get(l)||t.dead_strong.get(l),!o)return u.luaG_runerror(e,s.to_luastring('invalid key to \'next\''));do if(o=o.n,!o)return!1;while(o.key.ttisdeadkey())}else if(o=o.n,!o)return!1}else if(o=t.f,!o)return!1;return r.setobj2s(e,l,o.key),r.setobj2s(e,l+1,o.value),!0},e.exports.Table=f},function(e,t,l){'use strict';const n=l(0),s=l(1);class u{constructor(e,t){this.hash=null,this.realstring=t}getstr(){return this.realstring}tsslen(){return this.realstring.length}}const r=function(e){return n(s.is_luastring(e)),e.map((t)=>`${t}|`).join('')},o=function(e,t){return new u(e,t)};e.exports.luaS_eqlngstr=function(e,t){return n(e instanceof u),n(t instanceof u),e==t||e.realstring.length==t.realstring.length&&e.realstring.join()==t.realstring.join()},e.exports.luaS_hash=r,e.exports.luaS_hashlongstr=function(e){return n(e instanceof u),null===e.hash&&(e.hash=r(e.getstr())),e.hash},e.exports.luaS_bless=o,e.exports.luaS_new=function(e,t){return o(e,t.slice(0))},e.exports.luaS_newliteral=function(e,t){return o(e,s.to_luastring(t))},e.exports.TString=u},function(e,t,l){'use strict';const s=l(5),u=l(25).sprintf,n='',r=`%${n}d`,o='%.14g',_=function(e,t){for(var l=Math.min(3,Math.ceil(Math.abs(t)/1023)),n=e,s=0;s<l;s++)n*=Math.pow(2,Math.floor((t+s)/l));return n};e.exports.frexp=function(e){if(0===e)return[e,0];var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);var l=2047&t.getUint32(0)>>>20;0==l&&(t.setFloat64(0,18446744073709552000*e),l=(2047&t.getUint32(0)>>>20)-64);var n=l-1022,s=_(e,-n);return[s,n]},e.exports.ldexp=_,e.exports.LUAI_MAXSTACK=1e5,e.exports.LUA_IDSIZE=60,e.exports.LUA_INTEGER_FMT=r,e.exports.LUA_INTEGER_FRMLEN=n,e.exports.LUA_NUMBER_FMT=o,e.exports.LUA_NUMBER_FRMLEN='',e.exports.lua_getlocaledecpoint=function(){return 1.1.toLocaleString().substring(1,2)},e.exports.lua_integer2str=function(e){return u(r,e)},e.exports.lua_number2str=function(e){return u(o,e)},e.exports.lua_numbertointeger=function(e){return e>=s.MIN_INT&&e<-s.MIN_INT&&e}},function(e,t,l){'use strict';const u=l(0),s=l(1),n=l(7),o=l(12),r=l(3),_=l(16),c=l(13),d=l(8),g=l(14),i=l(10),f=l(15),h=s.constant_types,A=s.thread_status,T=function(e){return u(e.callstatus&c.CIST_LUA),e.l_savedpc-1},x=function(e){return 0===e.func.value.p.lineinfo.length?-1:e.func.value.p.lineinfo[T(e)]},O=function(e){if(e.status===A.LUA_YIELD){let t=e.ci,l=t.funcOff;t.func=e.stack[t.extra],t.funcOff=t.extra,t.extra=l}},L=function(e,t){u(t<e.upvalues.length);let l=e.upvalues[t].name;return null===l?[63]:l.getstr()},m=function(e,t){let l=e.func.value.p.numparams;return t>=e.l_base-e.funcOff-l?null:{pos:e.funcOff+l+t,name:s.to_luastring('(*vararg)',!0)}},U=function(e,t,l){let u=null,r;if(t.callstatus&c.CIST_LUA){if(0>l)return m(t,-l);r=t.l_base,u=o.luaF_getlocalname(t.func.value.p,l,T(t))}else r=t.funcOff+1;if(null===u){let n=t===e.ci?e.top:t.next.funcOff;if(n-r>=l&&0<l)u=s.to_luastring('(*temporary)',!0);else return null}return{pos:r+(l-1),name:u}},E=function(e,t){if(null===t||t instanceof r.CClosure)e.source=s.to_luastring('=[JS]',!0),e.linedefined=-1,e.lastlinedefined=-1,e.what=[74];else{let l=t.p;e.source=l.source?l.source.getstr():s.to_luastring('=?',!0),e.linedefined=l.linedefined,e.lastlinedefined=l.lastlinedefined,e.what=0===e.linedefined?s.to_luastring('main',!0):s.to_luastring('Lua',!0)}e.short_src=r.luaO_chunkid(e.source,i.LUA_IDSIZE)},b=function(e,l){if(null===l||l instanceof r.CClosure)e.stack[e.top]=new r.TValue(h.LUA_TNIL,null),e.top++,u(e.top<=e.ci.top,'stack overflow');else{let n=l.p.lineinfo,s=d.luaH_new(e);e.stack[e.top]=new r.TValue(h.LUA_TTABLE,s),e.top++,u(e.top<=e.ci.top,'stack overflow');let t=new r.TValue(h.LUA_TBOOLEAN,!0);for(let e=0;e<n.length;e++)d.luaH_setint(s,n[e],t)}},v=function(e,t){let l={name:null,funcname:null};return null===t?null:t.callstatus&c.CIST_FIN?(l.name=s.to_luastring('__gc',!0),l.funcname=s.to_luastring('metamethod',!0),l):!(t.callstatus&c.CIST_TAIL)&&t.previous.callstatus&c.CIST_LUA?M(e,t.previous):null},k=function(e,t,l,n,s){let u=1;for(;0<t.length;t=t.slice(1))switch(String.fromCharCode(t[0])){case'S':{E(l,n);break}case'l':{l.currentline=s&&s.callstatus&c.CIST_LUA?x(s):-1;break}case'u':{l.nups=null===n?0:n.nupvalues,null===n||n instanceof r.CClosure?(l.isvararg=!0,l.nparams=0):(l.isvararg=n.p.is_vararg,l.nparams=n.p.numparams);break}case't':{l.istailcall=s?s.callstatus&c.CIST_TAIL:0;break}case'n':{let t=v(e,s);null===t?(l.namewhat=[],l.name=null):(l.namewhat=t.funcname,l.name=t.name);break}case'L':case'f':break;default:u=0;}return u},R=function(e,t,l){let n={name:null,funcname:null};if(_.ISK(l)){let t=e.k[_.INDEXK(l)];if(t.ttisstring())return n.name=t.svalue(),n}else{let n=N(e,t,l);if(n&&99===n.funcname[0])return n}return n.name=[s.char['?']],n},S=function(e,t){return e<t?-1:e},I=function(e,t,l){let n=-1,s=0,u=_.OpCodesI;for(let r=0;r<t;r++){let o=e.code[r],i=o.A;switch(o.opcode){case u.OP_LOADNIL:{let e=o.B;i<=l&&l<=i+e&&(n=S(r,s));break}case u.OP_TFORCALL:{l>=i+2&&(n=S(r,s));break}case u.OP_CALL:case u.OP_TAILCALL:{l>=i&&(n=S(r,s));break}case u.OP_JMP:{let e=o.sBx,l=r+1+e;r<l&&l<=t&&l>s&&(s=l);break}default:_.testAMode(o.opcode)&&l===i&&(n=S(r,s));}}return n},N=function(e,t,l){let n={name:o.luaF_getlocalname(e,l+1,t),funcname:null};if(n.name)return n.funcname=s.to_luastring('local',!0),n;let u=I(e,t,l),r=_.OpCodesI;if(-1!==u){let l=e.code[u];switch(l.opcode){case r.OP_MOVE:{let t=l.B;if(t<l.A)return N(e,u,t);break}case r.OP_GETTABUP:case r.OP_GETTABLE:{let _=l.C,i=l.B,t=l.opcode===r.OP_GETTABLE?o.luaF_getlocalname(e,i+1,u):L(e,i);return n.name=R(e,u,_).name,n.funcname=t&&'_ENV'===s.to_jsstring(t)?s.to_luastring('global',!0):s.to_luastring('field',!0),n}case r.OP_GETUPVAL:return n.name=L(e,l.B),n.funcname=s.to_luastring('upvalue',!0),n;case r.OP_LOADK:case r.OP_LOADKX:{let t=l.opcode===r.OP_LOADK?l.Bx:e.code[u+1].Ax;if(e.k[t].ttisstring())return n.name=e.k[t].svalue(),n.funcname=s.to_luastring('constant',!0),n;break}case r.OP_SELF:{let t=l.C;return n.name=R(e,u,t).name,n.funcname=s.to_luastring('method',!0),n}default:}}return null},M=function(e,t){let l={name:null,funcname:null},n=0,u=t.func.value.p,r=T(t),o=u.code[r],i=_.OpCodesI;if(t.callstatus&c.CIST_HOOKED)return l.name=[s.char['?']],l.funcname=s.to_luastring('hook',!0),l;switch(o.opcode){case i.OP_CALL:case i.OP_TAILCALL:return N(u,r,o.A);case i.OP_TFORCALL:return l.name=s.to_luastring('for iterator',!0),l.funcname=s.to_luastring('for iterator',!0),l;case i.OP_SELF:case i.OP_GETTABUP:case i.OP_GETTABLE:n=g.TMS.TM_INDEX;break;case i.OP_SETTABUP:case i.OP_SETTABLE:n=g.TMS.TM_NEWINDEX;break;case i.OP_ADD:n=g.TMS.TM_ADD;break;case i.OP_SUB:n=g.TMS.TM_SUB;break;case i.OP_MUL:n=g.TMS.TM_MUL;break;case i.OP_MOD:n=g.TMS.TM_MOD;break;case i.OP_POW:n=g.TMS.TM_POW;break;case i.OP_DIV:n=g.TMS.TM_DIV;break;case i.OP_IDIV:n=g.TMS.TM_IDIV;break;case i.OP_BAND:n=g.TMS.TM_BAND;break;case i.OP_BOR:n=g.TMS.TM_BOR;break;case i.OP_BXOR:n=g.TMS.TM_BXOR;break;case i.OP_SHL:n=g.TMS.TM_SHL;break;case i.OP_SHR:n=g.TMS.TM_SHR;break;case i.OP_UNM:n=g.TMS.TM_UNM;break;case i.OP_BNOT:n=g.TMS.TM_BNOT;break;case i.OP_LEN:n=g.TMS.TM_LEN;break;case i.OP_CONCAT:n=g.TMS.TM_CONCAT;break;case i.OP_EQ:n=g.TMS.TM_EQ;break;case i.OP_LT:n=g.TMS.TM_LT;break;case i.OP_LE:n=g.TMS.TM_LE;break;default:return null;}return l.name=e.l_G.tmname[n].getstr(),l.funcname=s.to_luastring('metamethod',!0),l},P=function(e,t,l){for(let n=t.l_base;n<t.top;n++)if(e.stack[n]===l)return n;return!1},y=function(e,t,l){let n=t.func.value;for(let u=0;u<n.nupvalues;u++)if(n.upvals[u].v===l)return{name:L(n.p,u),funcname:s.to_luastring('upvalue',!0)};return null},C=function(e,t){let l=e.ci,n=null;if(l.callstatus&c.CIST_LUA){n=y(e,l,t);let s=P(e,l,t);!n&&s&&(n=N(l.func.value.p,T(l),s-l.l_base))}return n?r.luaO_pushfstring(e,s.to_luastring(' (%s \'%s\')',!0),n.funcname,n.name):s.to_luastring('',!0)},D=function(e,l,n){let u=g.luaT_objtypename(e,l);B(e,s.to_luastring('attempt to %s a %s value%s',!0),n,u,C(e,l))},K=function(e,t,l,n){let u;return u=l?r.luaO_chunkid(l.getstr(),i.LUA_IDSIZE):[63],r.luaO_pushfstring(e,s.to_luastring('%s:%d: %s',!0),u,n,t)},B=function(e,t,...l){let n=e.ci,s=r.luaO_pushvfstring(e,t,l);n.callstatus&c.CIST_LUA&&K(e,s,n.func.value.p.source,x(n)),w(e)},w=function(e){if(0!==e.errfunc){let t=e.errfunc;r.pushobj2s(e,e.stack[e.top-1]),r.setobjs2s(e,e.top-2,t),n.luaD_callnoyield(e,e.top-2,1)}n.luaD_throw(e,A.LUA_ERRRUN)};e.exports.luaG_addinfo=K,e.exports.luaG_concaterror=function(e,t,l){(t.ttisstring()||f.cvt2str(t))&&(t=l),D(e,t,s.to_luastring('concatenate',!0))},e.exports.luaG_errormsg=w,e.exports.luaG_opinterror=function(e,t,l,n){!1===f.tonumber(t)&&(l=t),D(e,l,n)},e.exports.luaG_ordererror=function(e,t,l){let n=g.luaT_objtypename(e,t),u=g.luaT_objtypename(e,l);n.join()===u.join()?B(e,s.to_luastring('attempt to compare two %s values',!0),n):B(e,s.to_luastring('attempt to compare %s with %s',!0),n,u)},e.exports.luaG_runerror=B,e.exports.luaG_tointerror=function(e,t,l){let n=f.tointeger(t);!1===n&&(l=t),B(e,s.to_luastring('number%s has no integer representation',!0),C(e,l))},e.exports.luaG_traceexec=function(e){let t=e.ci,l=e.hookmask,u=0==--e.hookcount&&l&s.LUA_MASKCOUNT;if(u)e.hookcount=e.basehookcount;else if(!(l&s.LUA_MASKLINE))return;if(t.callstatus&c.CIST_HOOKYIELD)return void(t.callstatus&=~c.CIST_HOOKYIELD);if(u&&n.luaD_hook(e,s.LUA_HOOKCOUNT,-1),l&s.LUA_MASKLINE){let l=t.func.value.p,u=t.l_savedpc-1,r=0===l.lineinfo.length?-1:l.lineinfo[u];(0==u||t.l_savedpc<=e.oldpc||r!==(0===l.lineinfo.length?-1:l.lineinfo[e.oldpc-1]))&&n.luaD_hook(e,s.LUA_HOOKLINE,r)}e.oldpc=t.l_savedpc,e.status===A.LUA_YIELD&&(u&&(e.hookcount=1),t.l_savedpc--,t.callstatus|=c.CIST_HOOKYIELD,t.funcOff=e.top-1,t.func=e.stack[t.funcOff],n.luaD_throw(e,A.LUA_YIELD))},e.exports.luaG_typeerror=D,e.exports.lua_gethook=function(e){return e.hook},e.exports.lua_gethookcount=function(e){return e.basehookcount},e.exports.lua_gethookmask=function(e){return e.hookmask},e.exports.lua_getinfo=function(e,t,l){let n,s,o,_;return O(e),62===t[0]?(o=null,_=e.stack[e.top-1],u(e,_.ttisfunction(),'function expected'),t=t.slice(1),e.top--):(o=l.i_ci,_=o.func,u(o.func.ttisfunction())),s=_.ttisclosure()?_.value:null,n=k(e,t,l,s,o),0<=t.indexOf(102)&&(r.pushobj2s(e,_),u(e.top<=e.ci.top,'stack overflow')),O(e),0<=t.indexOf(76)&&b(e,s),n},e.exports.lua_getlocal=function(e,t,l){let n;if(O(e),null===t)n=e.stack[e.top-1].ttisLclosure()?o.luaF_getlocalname(e.stack[e.top-1].value.p,l,0):null;else{let s=U(e,t.i_ci,l);s?(n=s.name,r.pushobj2s(e,e.stack[s.pos]),u(e.top<=e.ci.top,'stack overflow')):n=null}return O(e),n},e.exports.lua_getstack=function(e,t,l){let n,s;if(0>t)return 0;for(n=e.ci;0<t&&n!==e.base_ci;n=n.previous)t--;return 0===t&&n!==e.base_ci?(s=1,l.i_ci=n):s=0,s},e.exports.lua_sethook=function(e,t,l,n){(null===t||0===l)&&(l=0,t=null),e.ci.callstatus&c.CIST_LUA&&(e.oldpc=e.ci.l_savedpc),e.hook=t,e.basehookcount=n,e.hookcount=e.basehookcount,e.hookmask=l},e.exports.lua_setlocal=function(e,t,l){let n;O(e);let s=U(e,t.i_ci,l);return s?(n=s.name,r.setobjs2s(e,s.pos,e.top-1),delete e.stack[--e.top]):n=null,O(e),n}},function(e,t,l){'use strict';const n=l(0),s=l(1),u=l(3),r=s.constant_types;class o{constructor(e){this.id=e.l_G.id_counter++,this.v=void 0,this.vOff=void 0,this.refcount=0,this.open_next=null}isopen(){return void 0!==this.vOff}}e.exports.MAXUPVAL=255,e.exports.Proto=class{constructor(e){this.id=e.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},e.exports.UpVal=o,e.exports.luaF_findupval=function(e,t){let l=e.openupval,s;for(;null!==l&&l.vOff>=t;){if(n(l.isopen()),l.vOff===t)return l;s=l,l=l.open_next}let u=new o(e);return u.open_next=l,s?s.open_next=u:e.openupval=u,u.v=e.stack[t],u.vOff=t,u},e.exports.luaF_close=function(e,t){for(;null!==e.openupval&&e.openupval.vOff>=t;){let t=e.openupval;if(n(t.isopen()),e.openupval=t.open_next,0===t.refcount)t.v=void 0,t.open_next=null;else{let e=t.v;t.v=new u.TValue(e.type,e.value)}t.vOff=void 0}},e.exports.luaF_getlocalname=function(e,t,l){for(let n=0;n<e.locvars.length&&e.locvars[n].startpc<=l;n++)if(l<e.locvars[n].endpc&&(t--,0===t))return e.locvars[n].varname.getstr();return null},e.exports.luaF_initupvals=function(e,t){for(let l=0,n;l<t.nupvalues;l++)n=new o(e),n.refcount=1,n.v=new u.TValue(r.LUA_TNIL,null),t.upvals[l]=n},e.exports.luaF_newLclosure=function(e,t){let l=new u.LClosure(e,t);return l}},function(e,t,l){'use strict';const n=l(0),s=l(1),u=l(3),r=l(7),o=l(23),_=l(8),i=l(12),c=l(14),d=s.constant_types,f=s.thread_status,g=d.LUA_NUMTAGS,L=5,h=2*s.LUA_MINSTACK;class A{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}}class T{constructor(e){this.id=e.id_counter++,this.base_ci=new A,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=e,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.openupval=null,this.nny=1,this.status=f.LUA_OK,this.errfunc=0}}class x{constructor(){this.id_counter=0,this.mainthread=null,this.l_registry=new u.TValue(d.LUA_TNIL,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=Array(c.TMS.TM_N),this.mt=Array(g)}}const O=function(e){let t=e.ci;t.next=null},m=function(e){e.stack=Array(h),e.top=0,e.stack_last=h-L;let t=e.base_ci;t.next=t.previous=null,t.callstatus=0,t.funcOff=e.top,t.func=e.stack[e.top],e.stack[e.top++]=new u.TValue(d.LUA_TNIL,null),t.top=e.top+s.LUA_MINSTACK,e.ci=t},U=function(e){e.ci=e.base_ci,O(e),e.stack=null},E=function(e,t){let l=_.luaH_new(e);t.l_registry.sethvalue(l),_.luaH_setint(l,s.LUA_RIDX_MAINTHREAD,new u.TValue(d.LUA_TTHREAD,e)),_.luaH_setint(l,s.LUA_RIDX_GLOBALS,new u.TValue(d.LUA_TTABLE,_.luaH_new(e)))},b=function(e){let t=e.l_G;m(e,e),E(e,t),c.luaT_init(e),t.version=o.lua_version(null)},v=function(e){i.luaF_close(e,e.stack),U(e)};e.exports.lua_State=T,e.exports.CallInfo=A,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=L,e.exports.lua_close=function(e){e=e.l_G.mainthread,v(e)},e.exports.lua_newstate=function(){let e=new x,t=new T(e);return e.mainthread=t,r.luaD_rawrunprotected(t,b,null)!==f.LUA_OK&&(t=null),t},e.exports.lua_newthread=function(e){let t=e.l_G,l=new T(t);return e.stack[e.top]=new u.TValue(d.LUA_TTHREAD,l),e.top++,n(e.top<=e.ci.top,'stack overflow'),l.hookmask=e.hookmask,l.basehookcount=e.basehookcount,l.hook=e.hook,l.hookcount=l.basehookcount,m(l,e),l},e.exports.luaE_extendCI=function(e){let t=new A;return e.ci.next=t,t.previous=e.ci,t.next=null,e.ci=t,t},e.exports.luaE_freeCI=O,e.exports.luaE_freethread=function(e,t){i.luaF_close(t,t.stack),U(t)}},function(e,t,l){'use strict';const n=l(0),s=l(1),u=l(3),r=l(7),o=l(13),_=l(9),i=l(8),c=l(11),d=l(15),g=s.constant_types,f=['no value','nil','boolean','userdata','number','string','table','function','userdata','thread','proto'].map((t)=>s.to_luastring(t)),h=function(e){return f[e+1]},A={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},T=s.to_luastring('__name',!0),x=function(e,t,l,n,s,_){let i=e.top;if(u.pushobj2s(e,t),u.pushobj2s(e,l),u.pushobj2s(e,n),_||u.pushobj2s(e,s),e.ci.callstatus&o.CIST_LUA?r.luaD_call(e,i,_):r.luaD_callnoyield(e,i,_),_){let t=e.stack[e.top-1];delete e.stack[--e.top],s.setfrom(t)}},O=function(e,t,l,n,s){let u=m(e,t,s);return(u.ttisnil()&&(u=m(e,l,s)),!u.ttisnil())&&(x(e,u,t,l,n,1),!0)},L=function(e,t,l){const s=i.luaH_getstr(e,l);return n(t<=A.TM_EQ),s.ttisnil()?(e.flags|=1<<t,null):s},m=function(e,t,l){let n;switch(t.ttnov()){case g.LUA_TTABLE:case g.LUA_TUSERDATA:n=t.value.metatable;break;default:n=e.l_G.mt[t.ttnov()];}return n?i.luaH_getstr(n,e.l_G.tmname[l]):u.luaO_nilobject};e.exports.fasttm=function(t,l,n){return null===l?null:l.flags&1<<n?null:L(l,n,t.l_G.tmname[n])},e.exports.TMS=A,e.exports.luaT_callTM=x,e.exports.luaT_callbinTM=O,e.exports.luaT_trybinTM=function(e,t,l,n,u){if(!O(e,t,l,n,u))switch(u){case A.TM_CONCAT:c.luaG_concaterror(e,t,l);case A.TM_BAND:case A.TM_BOR:case A.TM_BXOR:case A.TM_SHL:case A.TM_SHR:case A.TM_BNOT:{let n=d.tonumber(t),u=d.tonumber(l);!1!==n&&!1!==u?c.luaG_tointerror(e,t,l):c.luaG_opinterror(e,t,l,s.to_luastring('perform bitwise operation on',!0))}default:c.luaG_opinterror(e,t,l,s.to_luastring('perform arithmetic on',!0));}},e.exports.luaT_callorderTM=function(e,t,l,n){let s=new u.TValue;return O(e,t,l,s,n)?!s.l_isfalse():null},e.exports.luaT_gettm=L,e.exports.luaT_gettmbyobj=m,e.exports.luaT_init=function(e){e.l_G.tmname[A.TM_INDEX]=new _.luaS_new(e,s.to_luastring('__index',!0)),e.l_G.tmname[A.TM_NEWINDEX]=new _.luaS_new(e,s.to_luastring('__newindex',!0)),e.l_G.tmname[A.TM_GC]=new _.luaS_new(e,s.to_luastring('__gc',!0)),e.l_G.tmname[A.TM_MODE]=new _.luaS_new(e,s.to_luastring('__mode',!0)),e.l_G.tmname[A.TM_LEN]=new _.luaS_new(e,s.to_luastring('__len',!0)),e.l_G.tmname[A.TM_EQ]=new _.luaS_new(e,s.to_luastring('__eq',!0)),e.l_G.tmname[A.TM_ADD]=new _.luaS_new(e,s.to_luastring('__add',!0)),e.l_G.tmname[A.TM_SUB]=new _.luaS_new(e,s.to_luastring('__sub',!0)),e.l_G.tmname[A.TM_MUL]=new _.luaS_new(e,s.to_luastring('__mul',!0)),e.l_G.tmname[A.TM_MOD]=new _.luaS_new(e,s.to_luastring('__mod',!0)),e.l_G.tmname[A.TM_POW]=new _.luaS_new(e,s.to_luastring('__pow',!0)),e.l_G.tmname[A.TM_DIV]=new _.luaS_new(e,s.to_luastring('__div',!0)),e.l_G.tmname[A.TM_IDIV]=new _.luaS_new(e,s.to_luastring('__idiv',!0)),e.l_G.tmname[A.TM_BAND]=new _.luaS_new(e,s.to_luastring('__band',!0)),e.l_G.tmname[A.TM_BOR]=new _.luaS_new(e,s.to_luastring('__bor',!0)),e.l_G.tmname[A.TM_BXOR]=new _.luaS_new(e,s.to_luastring('__bxor',!0)),e.l_G.tmname[A.TM_SHL]=new _.luaS_new(e,s.to_luastring('__shl',!0)),e.l_G.tmname[A.TM_SHR]=new _.luaS_new(e,s.to_luastring('__shr',!0)),e.l_G.tmname[A.TM_UNM]=new _.luaS_new(e,s.to_luastring('__unm',!0)),e.l_G.tmname[A.TM_BNOT]=new _.luaS_new(e,s.to_luastring('__bnot',!0)),e.l_G.tmname[A.TM_LT]=new _.luaS_new(e,s.to_luastring('__lt',!0)),e.l_G.tmname[A.TM_LE]=new _.luaS_new(e,s.to_luastring('__le',!0)),e.l_G.tmname[A.TM_CONCAT]=new _.luaS_new(e,s.to_luastring('__concat',!0)),e.l_G.tmname[A.TM_CALL]=new _.luaS_new(e,s.to_luastring('__call',!0))},e.exports.luaT_objtypename=function(e,t){let l;if(t.ttistable()&&null!==(l=t.value.metatable)||t.ttisfulluserdata()&&null!==(l=t.value.metatable)){let t=i.luaH_getstr(l,_.luaS_bless(e,T));if(t.ttisstring())return t.svalue()}return h(t.ttnov())},e.exports.ttypename=h},function(e,t,l){'use strict';var s=Math.floor;const u=l(0),r=l(1),o=l(16),_=l(10),d=l(3),n=l(12),c=l(13),i=l(9),g=l(5),f=l(7),A=l(14),T=l(8),h=l(11),x=r.constant_types,O=r.LUA_MULTRET,m=function(e,t,l){return t+l.A},U=function(e,t,l){return t+l.B},E=function(e,t,l,n){return o.ISK(n.B)?l[o.INDEXK(n.B)]:e.stack[t+n.B]},b=function(e,t,l,n){return o.ISK(n.C)?l[o.INDEXK(n.C)]:e.stack[t+n.C]},v=function(t,l,s,u){let e=s.A;0!==e&&n.luaF_close(t,l.l_base+e-1),l.l_savedpc+=s.sBx+u},R=function(e,t){v(e,t,t.l_code[t.l_savedpc],1)},S=function(e,t,l){if(t.ttisnumber()&&l.ttisnumber())return y(t,l)?1:0;if(t.ttisstring()&&l.ttisstring())return 0>D(t.tsvalue(),l.tsvalue())?1:0;let n=A.luaT_callorderTM(e,t,l,A.TMS.TM_LT);return null===n&&h.luaG_ordererror(e,t,l),n?1:0},I=function(e,t,l){let n;return t.ttisnumber()&&l.ttisnumber()?C(t,l)?1:0:t.ttisstring()&&l.ttisstring()?0>=D(t.tsvalue(),l.tsvalue())?1:0:(n=A.luaT_callorderTM(e,t,l,A.TMS.TM_LE),null!==n)?n?1:0:(e.ci.callstatus|=c.CIST_LEQ,n=A.luaT_callorderTM(e,l,t,A.TMS.TM_LT),e.ci.callstatus^=c.CIST_LEQ,null===n&&h.luaG_ordererror(e,t,l),n?0:1)},N=function(e,t,l){if(t.ttype()!==l.ttype())return t.ttnov()!==l.ttnov()||t.ttnov()!==x.LUA_TNUMBER?0:t.value===l.value?1:0;let n;switch(t.ttype()){case x.LUA_TNIL:return 1;case x.LUA_TBOOLEAN:return t.value==l.value?1:0;case x.LUA_TLIGHTUSERDATA:case x.LUA_TNUMINT:case x.LUA_TNUMFLT:case x.LUA_TLCF:return t.value===l.value?1:0;case x.LUA_TSHRSTR:case x.LUA_TLNGSTR:return i.luaS_eqlngstr(t.tsvalue(),l.tsvalue())?1:0;case x.LUA_TUSERDATA:case x.LUA_TTABLE:if(t.value===l.value)return 1;if(null===e)return 0;n=A.fasttm(e,t.value.metatable,A.TMS.TM_EQ),null===n&&(n=A.fasttm(e,l.value.metatable,A.TMS.TM_EQ));break;default:return t.value===l.value?1:0;}if(null===n)return 0;let s=new d.TValue;return A.luaT_callTM(e,n,t,l,s,1),s.l_isfalse()?0:1},k=function(e,t){let l=!1,s=L(e,0>t?2:1);if(!1===s){let u=P(e);if(!1===u)return!1;0<u?(s=g.LUA_MAXINTEGER,0>t&&(l=!0)):(s=g.LUA_MININTEGER,0<=t&&(l=!0))}return{stopnow:l,ilimit:s}},L=function(e,t){if(e.ttisfloat()){let l=e.value,n=s(l);if(l!==n){if(0===t)return!1;1<t&&(n+=1)}return _.lua_numbertointeger(n)}if(e.ttisinteger())return e.value;if(H(e)){let l=d.luaO_str2num(e.svalue());if(!1!==l)return L(l,t)}return!1},M=function(e){return e.ttisinteger()?e.value:L(e,0)},P=function(e){if(e.ttnov()===x.LUA_TNUMBER)return e.value;if(H(e)){let t=d.luaO_str2num(e.svalue());if(!1!==t)return t.value}return!1},y=function(e,t){return e.value<t.value},C=function(e,t){return e.value<=t.value},D=function(e,t){let n=i.luaS_hashlongstr(e),l=i.luaS_hashlongstr(t);return n===l?0:n<l?-1:1},K=function(e,t,l){let n;switch(l.ttype()){case x.LUA_TTABLE:{let s=l.value;if(n=A.fasttm(e,s.metatable,A.TMS.TM_LEN),null!==n)break;return void t.setivalue(T.luaH_getn(s))}case x.LUA_TSHRSTR:case x.LUA_TLNGSTR:return void t.setivalue(l.vslen());default:{n=A.luaT_gettmbyobj(e,l,A.TMS.TM_LEN),n.ttisnil()&&h.luaG_typeerror(e,l,r.to_luastring('get length of',!0));break}}A.luaT_callTM(e,n,l,l,t,1)},B=function(e,t,l){return 0===l&&h.luaG_runerror(e,r.to_luastring('attempt to divide by zero')),0|s(t/l)},w=function(e,t,l){return 0===l&&h.luaG_runerror(e,r.to_luastring('attempt to perform \'n%%0\'')),0|t-s(t/l)*l},G=32,V=function(e,t){return 0>t?t<=-G?0:e>>>-t:t>=G?0:e<<t},j=function(e,t,l,n){let s=e.cache;if(null!==s){let u=e.upvalues,r=u.length;for(let e=0,o;e<r;e++)if(o=u[e].instack?l[n+u[e].idx]:t[u[e].idx].v,s.upvals[e].v!==o)return null}return s},F=function(e,t,l,s,u){let r=t.upvalues.length,o=t.upvalues,_=new d.LClosure(e,r);_.p=t,e.stack[u].setclLvalue(_);for(let c=0;c<r;c++)_.upvals[c]=o[c].instack?n.luaF_findupval(e,s+o[c].idx):l[o[c].idx],_.upvals[c].refcount++;t.cache=_},X=function(e){return e.ttisnumber()},H=function(e){return e.ttisstring()},Y=function(e,t){let l=e.stack[t];return!!l.ttisstring()||!!X(l)&&(d.luaO_tostring(e,l),!0)},z=function(e){return e.ttisstring()&&0===e.vslen()},J=function(e,t){u(2<=t);do{let l=e.top,s=2;if(!(e.stack[l-2].ttisstring()||X(e.stack[l-2]))||!Y(e,l-1))A.luaT_trybinTM(e,e.stack[l-2],e.stack[l-1],e.stack[l-2],A.TMS.TM_CONCAT);else if(z(e.stack[l-1]))Y(e,l-2);else if(z(e.stack[l-2]))d.setobjs2s(e,l-2,l-1);else{let n=Array(t);for(n[t-1]=e.stack[l-1].svalue(),s=1;s<t;s++){if(!Y(e,l-s-1)){n=n.slice(t-s);break}n[t-s-1]=e.stack[l-s-1].svalue()}let u=i.luaS_bless(e,Array.prototype.concat.apply([],n));d.setsvalue2s(e,l-s,u)}for(t-=s-1;e.top>l-(s-1);)delete e.stack[--e.top]}while(1<t)},Z=2e3,q=function(e,l,t,n){for(let s=0;s<Z;s++){let s;if(!l.ttistable())s=A.luaT_gettmbyobj(e,l,A.TMS.TM_INDEX),s.ttisnil()&&h.luaG_typeerror(e,l,r.to_luastring('index',!0));else{let u=T.luaH_get(e,l.value,t);if(!u.ttisnil())return void d.setobj2s(e,n,u);if(s=A.fasttm(e,l.value.metatable,A.TMS.TM_INDEX),null===s)return void e.stack[n].setnilvalue()}if(s.ttisfunction())return void A.luaT_callTM(e,s,l,t,e.stack[n],1);l=s}h.luaG_runerror(e,r.to_luastring('\'__index\' chain too long; possible loop',!0))},W=function(e,l,t,n){for(let s=0;s<Z;s++){let s;if(l.ttistable()){let u=l.value,r=T.luaH_set(e,u,t);if(!r.ttisnil()||null===(s=A.fasttm(e,u.metatable,A.TMS.TM_NEWINDEX)))return n.ttisnil()?T.luaH_delete(e,u,t):r.setfrom(n),void T.invalidateTMcache(u)}else(s=A.luaT_gettmbyobj(e,l,A.TMS.TM_NEWINDEX)).ttisnil()&&h.luaG_typeerror(e,l,r.to_luastring('index',!0));if(s.ttisfunction())return void A.luaT_callTM(e,s,l,t,n,0);l=s}h.luaG_runerror(e,r.to_luastring('\'__newindex\' chain too long; possible loop',!0))};e.exports.cvt2str=X,e.exports.cvt2num=H,e.exports.luaV_gettable=q,e.exports.luaV_concat=J,e.exports.luaV_div=B,e.exports.luaV_equalobj=N,e.exports.luaV_execute=function(e){const t=o.OpCodesI;let l=e.ci;l.callstatus|=c.CIST_FRESH;newframe:for(;;){u(l===e.ci);let _=l.func.value,L=_.p.k,x=l.l_base,y=l.l_code[l.l_savedpc++];e.hookmask&(r.LUA_MASKLINE|r.LUA_MASKCOUNT)&&h.luaG_traceexec(e);let i=m(e,x,y),C=y.opcode;switch(C){case t.OP_MOVE:{d.setobjs2s(e,i,U(e,x,y));break}case t.OP_LOADK:{let t=L[y.Bx];d.setobj2s(e,i,t);break}case t.OP_LOADKX:{u(l.l_code[l.l_savedpc].opcode===t.OP_EXTRAARG);let n=L[l.l_code[l.l_savedpc++].Ax];d.setobj2s(e,i,n);break}case t.OP_LOADBOOL:{e.stack[i].setbvalue(0!==y.B),0!==y.C&&l.l_savedpc++;break}case t.OP_LOADNIL:{for(let t=0;t<=y.B;t++)e.stack[i+t].setnilvalue();break}case t.OP_GETUPVAL:{let t=y.B;d.setobj2s(e,i,_.upvals[t].v);break}case t.OP_GETTABUP:{let t=_.upvals[y.B].v,l=b(e,x,L,y);q(e,t,l,i);break}case t.OP_GETTABLE:{let t=e.stack[U(e,x,y)],l=b(e,x,L,y);q(e,t,l,i);break}case t.OP_SETTABUP:{let t=_.upvals[y.A].v,l=E(e,x,L,y),n=b(e,x,L,y);W(e,t,l,n);break}case t.OP_SETUPVAL:{let t=_.upvals[y.B];t.v.setfrom(e.stack[i]);break}case t.OP_SETTABLE:{let t=e.stack[i],l=E(e,x,L,y),n=b(e,x,L,y);W(e,t,l,n);break}case t.OP_NEWTABLE:{e.stack[i].sethvalue(T.luaH_new(e));break}case t.OP_SELF:{let t=U(e,x,y),l=b(e,x,L,y);d.setobjs2s(e,i+1,t),q(e,e.stack[t],l,i);break}case t.OP_ADD:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;t.ttisinteger()&&l.ttisinteger()?e.stack[i].setivalue(0|t.value+l.value):!1!==(n=P(t))&&!1!==(s=P(l))?e.stack[i].setfltvalue(n+s):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_ADD);break}case t.OP_SUB:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;t.ttisinteger()&&l.ttisinteger()?e.stack[i].setivalue(0|t.value-l.value):!1!==(n=P(t))&&!1!==(s=P(l))?e.stack[i].setfltvalue(n-s):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_SUB);break}case t.OP_MUL:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;t.ttisinteger()&&l.ttisinteger()?e.stack[i].setivalue(Math.imul(t.value,l.value)):!1!==(n=P(t))&&!1!==(s=P(l))?e.stack[i].setfltvalue(n*s):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_MUL);break}case t.OP_MOD:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;t.ttisinteger()&&l.ttisinteger()?e.stack[i].setivalue(w(e,t.value,l.value)):!1!==(n=P(t))&&!1!==(s=P(l))?e.stack[i].setfltvalue(g.luai_nummod(e,n,s)):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_MOD);break}case t.OP_POW:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;!1!==(n=P(t))&&!1!==(s=P(l))?e.stack[i].setfltvalue(Math.pow(n,s)):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_POW);break}case t.OP_DIV:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;!1!==(n=P(t))&&!1!==(s=P(l))?e.stack[i].setfltvalue(n/s):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_DIV);break}case t.OP_IDIV:{let t=E(e,x,L,y),l=b(e,x,L,y),n,u;t.ttisinteger()&&l.ttisinteger()?e.stack[i].setivalue(B(e,t.value,l.value)):!1!==(n=P(t))&&!1!==(u=P(l))?e.stack[i].setfltvalue(s(n/u)):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_IDIV);break}case t.OP_BAND:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;!1!==(n=M(t))&&!1!==(s=M(l))?e.stack[i].setivalue(n&s):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_BAND);break}case t.OP_BOR:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;!1!==(n=M(t))&&!1!==(s=M(l))?e.stack[i].setivalue(n|s):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_BOR);break}case t.OP_BXOR:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;!1!==(n=M(t))&&!1!==(s=M(l))?e.stack[i].setivalue(n^s):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_BXOR);break}case t.OP_SHL:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;!1!==(n=M(t))&&!1!==(s=M(l))?e.stack[i].setivalue(V(n,s)):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_SHL);break}case t.OP_SHR:{let t=E(e,x,L,y),l=b(e,x,L,y),n,s;!1!==(n=M(t))&&!1!==(s=M(l))?e.stack[i].setivalue(V(n,-s)):A.luaT_trybinTM(e,t,l,e.stack[i],A.TMS.TM_SHR);break}case t.OP_UNM:{let t=e.stack[U(e,x,y)],l;t.ttisinteger()?e.stack[i].setivalue(0|-t.value):!1===(l=P(t))?A.luaT_trybinTM(e,t,t,e.stack[i],A.TMS.TM_UNM):e.stack[i].setfltvalue(-l);break}case t.OP_BNOT:{let t=e.stack[U(e,x,y)];t.ttisinteger()?e.stack[i].setivalue(~t.value):A.luaT_trybinTM(e,t,t,e.stack[i],A.TMS.TM_BNOT);break}case t.OP_NOT:{let t=e.stack[U(e,x,y)];e.stack[i].setbvalue(t.l_isfalse());break}case t.OP_LEN:{K(e,e.stack[i],e.stack[U(e,x,y)]);break}case t.OP_CONCAT:{let t=y.B,n=y.C;e.top=x+n+1,J(e,n-t+1);d.setobjs2s(e,i,x+t),f.adjust_top(e,l.top);break}case t.OP_JMP:{v(e,l,y,0);break}case t.OP_EQ:{N(e,E(e,x,L,y),b(e,x,L,y))===y.A?R(e,l):l.l_savedpc++;break}case t.OP_LT:{S(e,E(e,x,L,y),b(e,x,L,y))===y.A?R(e,l):l.l_savedpc++;break}case t.OP_LE:{I(e,E(e,x,L,y),b(e,x,L,y))===y.A?R(e,l):l.l_savedpc++;break}case t.OP_TEST:{(y.C?e.stack[i].l_isfalse():!e.stack[i].l_isfalse())?l.l_savedpc++:R(e,l);break}case t.OP_TESTSET:{let t=U(e,x,y),n=e.stack[t];(y.C?n.l_isfalse():!n.l_isfalse())?l.l_savedpc++:(d.setobjs2s(e,i,t),R(e,l));break}case t.OP_CALL:{let t=y.B,n=y.C-1;if(0!==t&&f.adjust_top(e,i+t),f.luaD_precall(e,i,n))0<=n&&f.adjust_top(e,l.top);else{l=e.ci;continue newframe}break}case t.OP_TAILCALL:{let t=y.B;if(0!==t&&f.adjust_top(e,i+t),f.luaD_precall(e,i,O));else{let t=e.ci,s=t.previous,r=t.func,o=t.funcOff,i=s.funcOff,g=t.l_base+r.value.p.numparams;0<_.p.p.length&&n.luaF_close(e,s.l_base);for(let t=0;o+t<g;t++)d.setobjs2s(e,i+t,o+t);s.l_base=i+(t.l_base-o),s.top=i+(e.top-o),f.adjust_top(e,s.top),s.l_code=t.l_code,s.l_savedpc=t.l_savedpc,s.callstatus|=c.CIST_TAIL,s.next=null,l=e.ci=s,u(e.top===s.l_base+e.stack[i].value.p.maxstacksize);continue newframe}break}case t.OP_RETURN:{0<_.p.p.length&&n.luaF_close(e,x);let s=f.luaD_poscall(e,l,i,0===y.B?e.top-i:y.B-1);if(l.callstatus&c.CIST_FRESH)return;l=e.ci,s&&f.adjust_top(e,l.top),u(l.callstatus&c.CIST_LUA),u(l.l_code[l.l_savedpc-1].opcode===t.OP_CALL);continue newframe}case t.OP_FORLOOP:{if(e.stack[i].ttisinteger()){let t=e.stack[i+2].value,n=0|e.stack[i].value+t,s=e.stack[i+1].value;(0<t?n<=s:s<=n)&&(l.l_savedpc+=y.sBx,e.stack[i].chgivalue(n),e.stack[i+3].setivalue(n))}else{let t=e.stack[i+2].value,n=e.stack[i].value+t,s=e.stack[i+1].value;(0<t?n<=s:s<=n)&&(l.l_savedpc+=y.sBx,e.stack[i].chgfltvalue(n),e.stack[i+3].setfltvalue(n))}break}case t.OP_FORPREP:{let t=e.stack[i],n=e.stack[i+1],s=e.stack[i+2],u;if(t.ttisinteger()&&s.ttisinteger()&&(u=k(n,s.value))){let e=u.stopnow?0:t.value;n.value=u.ilimit,t.value=0|e-s.value}else{let l,u,o;!1===(l=P(n))&&h.luaG_runerror(e,r.to_luastring('\'for\' limit must be a number',!0)),e.stack[i+1].setfltvalue(l),!1===(u=P(s))&&h.luaG_runerror(e,r.to_luastring('\'for\' step must be a number',!0)),e.stack[i+2].setfltvalue(u),!1===(o=P(t))&&h.luaG_runerror(e,r.to_luastring('\'for\' initial value must be a number',!0)),e.stack[i].setfltvalue(o-u)}l.l_savedpc+=y.sBx;break}case t.OP_TFORCALL:{let n=i+3;d.setobjs2s(e,n+2,i+2),d.setobjs2s(e,n+1,i+1),d.setobjs2s(e,n,i),f.adjust_top(e,n+3),f.luaD_call(e,n,y.C),f.adjust_top(e,l.top),y=l.l_code[l.l_savedpc++],i=m(e,x,y),u(y.opcode===t.OP_TFORLOOP)}case t.OP_TFORLOOP:{e.stack[i+1].ttisnil()||(d.setobjs2s(e,i,i+1),l.l_savedpc+=y.sBx);break}case t.OP_SETLIST:{let s=y.B,n=y.C;0===s&&(s=e.top-i-1),0===n&&(u(l.l_code[l.l_savedpc].opcode===t.OP_EXTRAARG),n=l.l_code[l.l_savedpc++].Ax);for(let t=e.stack[i].value,l=(n-1)*o.LFIELDS_PER_FLUSH+s;0<s;s--)T.luaH_setint(t,l--,e.stack[i+s]);f.adjust_top(e,l.top);break}case t.OP_CLOSURE:{let t=_.p.p[y.Bx],l=j(t,_.upvals,e.stack,x);null===l?F(e,t,_.upvals,x,i):e.stack[i].setclLvalue(l);break}case t.OP_VARARG:{let t=y.B-1,s=x-l.funcOff-_.p.numparams-1,n;for(0>s&&(s=0),0>t&&(t=s,f.luaD_checkstack(e,s),f.adjust_top(e,i+s)),n=0;n<t&&n<s;n++)d.setobjs2s(e,i+n,x-s+n);for(;n<t;n++)e.stack[i+n].setnilvalue();break}case t.OP_EXTRAARG:throw Error('invalid opcode');}}},e.exports.luaV_finishOp=function(e){let t=e.ci,l=o.OpCodesI,n=t.l_base,s=t.l_code[t.l_savedpc-1],r=s.opcode;switch(r){case l.OP_ADD:case l.OP_SUB:case l.OP_MUL:case l.OP_DIV:case l.OP_IDIV:case l.OP_BAND:case l.OP_BOR:case l.OP_BXOR:case l.OP_SHL:case l.OP_SHR:case l.OP_MOD:case l.OP_POW:case l.OP_UNM:case l.OP_BNOT:case l.OP_LEN:case l.OP_GETTABUP:case l.OP_GETTABLE:case l.OP_SELF:{d.setobjs2s(e,n+s.A,e.top-1),delete e.stack[--e.top];break}case l.OP_LE:case l.OP_LT:case l.OP_EQ:{let n=!e.stack[e.top-1].l_isfalse();delete e.stack[--e.top],t.callstatus&c.CIST_LEQ&&(u(r===l.OP_LE),t.callstatus^=c.CIST_LEQ,n=!n),u(t.l_code[t.l_savedpc].opcode===l.OP_JMP),n!=!!s.A&&t.l_savedpc++;break}case l.OP_CONCAT:{let l=e.top-1,u=s.B,r=l-1-(n+u);d.setobjs2s(e,l-2,l),1<r&&(e.top=l-1,J(e,r)),d.setobjs2s(e,t.l_base+s.A,e.top-1),f.adjust_top(e,t.top);break}case l.OP_TFORCALL:{u(t.l_code[t.l_savedpc].opcode===l.OP_TFORLOOP),f.adjust_top(e,t.top);break}case l.OP_CALL:{0<=s.C-1&&f.adjust_top(e,t.top);break}}},e.exports.luaV_lessequal=I,e.exports.luaV_lessthan=S,e.exports.luaV_mod=w,e.exports.luaV_objlen=K,e.exports.luaV_rawequalobj=function(e,t){return N(null,e,t)},e.exports.luaV_shiftl=V,e.exports.luaV_tointeger=L,e.exports.settable=W,e.exports.tointeger=M,e.exports.tonumber=P},function(e){'use strict';const t=0,l=1,n=2,s=3,u=0,r=1,o=2,_=3,i=[64|n<<4|t<<2|u,64|s<<4|t<<2|r,64|t<<4|t<<2|r,64|l<<4|l<<2|u,64|l<<4|t<<2|u,64|l<<4|t<<2|u,64|l<<4|s<<2|u,64|n<<4|s<<2|u,0|s<<4|s<<2|u,0|l<<4|t<<2|u,0|s<<4|s<<2|u,64|l<<4|l<<2|u,64|n<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|s<<4|s<<2|u,64|n<<4|t<<2|u,64|n<<4|t<<2|u,64|n<<4|t<<2|u,64|n<<4|t<<2|u,64|n<<4|n<<2|u,0|n<<4|t<<2|o,128|s<<4|s<<2|u,128|s<<4|s<<2|u,128|s<<4|s<<2|u,128|t<<4|l<<2|u,192|n<<4|l<<2|u,64|l<<4|l<<2|u,64|l<<4|l<<2|u,0|l<<4|t<<2|u,64|n<<4|t<<2|o,64|n<<4|t<<2|o,0|t<<4|l<<2|u,64|n<<4|t<<2|o,0|l<<4|l<<2|u,64|l<<4|t<<2|r,64|l<<4|t<<2|u,0|l<<4|l<<2|_],c=9,d=9,g=c+d,f=8,L=c+d+f,h=6,A=0,T=A+h,x=T+f,O=x+c,m=x,U=T,E=(1<<g)-1,v=E>>1,b=(1<<f)-1,k=1<<d-1,R=function(e,t){return~(-1<<e)<<t},S=function(e,t){return~R(e,t)},I=function(e,t,l,n){return e.code=e.code&S(n,l)|t<<l&R(n,l),M(e)},N=function(e,t){return I(e,t,m,g)},M=function(e){if('number'==typeof e)return{code:e,opcode:e>>A&R(h,0),A:e>>T&R(f,0),B:e>>O&R(d,0),C:e>>x&R(c,0),Bx:e>>m&R(g,0),Ax:e>>U&R(L,0),sBx:(e>>m&R(g,0))-v};let t=e.code;return e.opcode=t>>A&R(h,0),e.A=t>>T&R(f,0),e.B=t>>O&R(d,0),e.C=t>>x&R(c,0),e.Bx=t>>m&R(g,0),e.Ax=t>>U&R(L,0),e.sBx=(t>>m&R(g,0))-v,e};e.exports.BITRK=k,e.exports.CREATE_ABC=function(e,t,l,n){return M(e<<A|t<<T|l<<O|n<<x)},e.exports.CREATE_ABx=function(e,t,l){return M(e<<A|t<<T|l<<m)},e.exports.CREATE_Ax=function(e,t){return M(e<<A|t<<U)},e.exports.GET_OPCODE=function(e){return e.opcode},e.exports.GETARG_A=function(e){return e.A},e.exports.GETARG_B=function(e){return e.B},e.exports.GETARG_C=function(e){return e.C},e.exports.GETARG_Bx=function(e){return e.Bx},e.exports.GETARG_Ax=function(e){return e.Ax},e.exports.GETARG_sBx=function(e){return e.sBx},e.exports.INDEXK=function(e){return e&~k},e.exports.ISK=function(e){return e&k},e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=b,e.exports.MAXARG_Ax=(1<<L)-1,e.exports.MAXARG_B=(1<<d)-1,e.exports.MAXARG_Bx=E,e.exports.MAXARG_C=(1<<c)-1,e.exports.MAXARG_sBx=v,e.exports.MAXINDEXRK=k-1,e.exports.NO_REG=b,e.exports.OpArgK=s,e.exports.OpArgN=t,e.exports.OpArgR=n,e.exports.OpArgU=l,e.exports.OpCodes=['MOVE','LOADK','LOADKX','LOADBOOL','LOADNIL','GETUPVAL','GETTABUP','GETTABLE','SETTABUP','SETUPVAL','SETTABLE','NEWTABLE','SELF','ADD','SUB','MUL','MOD','POW','DIV','IDIV','BAND','BOR','BXOR','SHL','SHR','UNM','BNOT','NOT','LEN','CONCAT','JMP','EQ','LT','LE','TEST','TESTSET','CALL','TAILCALL','RETURN','FORLOOP','FORPREP','TFORCALL','TFORLOOP','SETLIST','CLOSURE','VARARG','EXTRAARG'],e.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},e.exports.POS_A=T,e.exports.POS_Ax=U,e.exports.POS_B=O,e.exports.POS_Bx=m,e.exports.POS_C=x,e.exports.POS_OP=A,e.exports.RKASK=function(e){return e|k},e.exports.SETARG_A=function(e,t){return I(e,t,T,f)},e.exports.SETARG_Ax=function(e,t){return I(e,t,U,L)},e.exports.SETARG_B=function(e,t){return I(e,t,O,d)},e.exports.SETARG_Bx=N,e.exports.SETARG_C=function(e,t){return I(e,t,x,c)},e.exports.SETARG_sBx=function(e,t){return N(e,t+v)},e.exports.SET_OPCODE=function(e,t){return e.code=e.code&S(h,A)|t<<A&R(h,A),M(e)},e.exports.SIZE_A=f,e.exports.SIZE_Ax=L,e.exports.SIZE_B=d,e.exports.SIZE_Bx=g,e.exports.SIZE_C=c,e.exports.SIZE_OP=h,e.exports.fullins=M,e.exports.getBMode=function(e){return 3&i[e]>>4},e.exports.getCMode=function(e){return 3&i[e]>>2},e.exports.getOpMode=function(e){return 3&i[e]},e.exports.iABC=u,e.exports.iABx=r,e.exports.iAsBx=o,e.exports.iAx=_,e.exports.testAMode=function(e){return i[e]&64},e.exports.testTMode=function(e){return i[e]&128}},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e){function t(){throw new Error('setTimeout has not been defined')}function l(){throw new Error('clearTimeout has not been defined')}function n(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===l||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function u(){f&&h&&(f=!1,h.length?g=h.concat(g):L=-1,g.length&&r())}function r(){if(!f){var e=n(u);f=!0;for(var t=g.length;t;){for(h=g,g=[];++L<t;)h&&h[L].run();L=-1,t=g.length}h=null,f=!1,s(e)}}function o(e,t){this.fun=e,this.array=t}function _(){}var i=e.exports={},c,d;(function(){try{c='function'==typeof setTimeout?setTimeout:t}catch(l){c=t}try{d='function'==typeof clearTimeout?clearTimeout:l}catch(t){d=l}})();var g=[],f=!1,L=-1,h;i.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var l=1;l<arguments.length;l++)t[l-1]=arguments[l];g.push(new o(e,t)),1!==g.length||f||n(r)},o.prototype.run=function(){this.fun.apply(null,this.array)},i.title='browser',i.browser=!0,i.env={},i.argv=[],i.version='',i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(){return[]},i.binding=function(){throw new Error('process.binding is not supported')},i.cwd=function(){return'/'},i.chdir=function(){throw new Error('process.chdir is not supported')},i.umask=function(){return 0}},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(l){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,l){'use strict';const n=l(0);const s=-1,u=function(e){let t=e.reader(e.L,e.data),l;return null===t?s:(t instanceof DataView?(e.buffer=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.off=0,l=t.byteLength-t.byteOffset):(n('string'!=typeof t,'Should only load binary of array of bytes'),e.buffer=t,e.off=0,l=t.length),0===l)?s:(e.n=l-1,e.buffer[e.off++])};e.exports.EOZ=s,e.exports.luaZ_buffremove=function(e,t){e.n-=t},e.exports.luaZ_fill=u,e.exports.luaZ_read=function(e,t,l,r){for(;r;){if(0===e.n){if(u(e)===s)return r;e.n++,e.off--}let n=r<=e.n?r:e.n;for(let s=0;s<n;s++)t[l++]=e.buffer[e.off++];e.n-=n,0===e.n&&(e.buffer=null),r-=n}return 0},e.exports.luaZ_resetbuffer=function(e){e.n=0,e.buffer=[]},e.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},e.exports.ZIO=class{constructor(e,t,l){this.L=e,n('function'==typeof t,'ZIO requires a reader'),this.reader=t,this.data=l,this.n=0,this.buffer=null,this.off=0}zgetc(){return 0<this.n--?this.buffer[this.off++]:u(this)}}},function(e,t,l){(function(e,n){function s(e,l){var n={seen:[],stylize:r};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),h(l)?n.showHidden=l:l&&t._extend(n,l),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),_(n,e,n.depth)}function u(e,t){var l=s.styles[t];return l?'\x1B['+s.colors[l][0]+'m'+e+'\x1B['+s.colors[l][1]+'m':e}function r(e){return e}function o(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function _(e,l,s){if(e.customInspect&&l&&v(l.inspect)&&l.inspect!==t.inspect&&!(l.constructor&&l.constructor.prototype===l)){var u=l.inspect(s,e);return O(u)||(u=_(e,u,s)),u}var r=i(e,l);if(r)return r;var h=Object.keys(l),A=o(h);if(e.showHidden&&(h=Object.getOwnPropertyNames(l)),b(l)&&(0<=h.indexOf('message')||0<=h.indexOf('description')))return c(l);if(0===h.length){if(v(l)){var T=l.name?': '+l.name:'';return e.stylize('[Function'+T+']','special')}if(m(l))return e.stylize(RegExp.prototype.toString.call(l),'regexp');if(E(l))return e.stylize(Date.prototype.toString.call(l),'date');if(b(l))return c(l)}var x='',U=!1,k=['{','}'];if(L(l)&&(U=!0,k=['[',']']),v(l)){var R=l.name?': '+l.name:'';x=' [Function'+R+']'}if(m(l)&&(x=' '+RegExp.prototype.toString.call(l)),E(l)&&(x=' '+Date.prototype.toUTCString.call(l)),b(l)&&(x=' '+c(l)),0===h.length&&(!U||0==l.length))return k[0]+x+k[1];if(0>s)return m(l)?e.stylize(RegExp.prototype.toString.call(l),'regexp'):e.stylize('[Object]','special');e.seen.push(l);var n;return n=U?d(e,l,s,A,h):h.map(function(t){return g(e,l,s,A,t,U)}),e.seen.pop(),f(n,x,k)}function i(e,t){if(x(t))return e.stylize('undefined','undefined');if(O(t)){var l='\''+JSON.stringify(t).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return e.stylize(l,'string')}return T(t)?e.stylize(''+t,'number'):h(t)?e.stylize(''+t,'boolean'):A(t)?e.stylize('null','null'):void 0}function c(e){return'['+Error.prototype.toString.call(e)+']'}function d(e,t,n,s,u){for(var r=[],o=0,_=t.length;o<_;++o)I(t,o+'')?r.push(g(e,t,n,s,o+'',!0)):r.push('');return u.forEach(function(l){l.match(/^\d+$/)||r.push(g(e,t,n,s,l,!0))}),r}function g(e,t,l,n,s,u){var r,o,i;if(i=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},i.get?i.set?o=e.stylize('[Getter/Setter]','special'):o=e.stylize('[Getter]','special'):i.set&&(o=e.stylize('[Setter]','special')),I(n,s)||(r='['+s+']'),o||(0>e.seen.indexOf(i.value)?(o=A(l)?_(e,i.value,null):_(e,i.value,l-1),-1<o.indexOf('\n')&&(u?o=o.split('\n').map(function(e){return'  '+e}).join('\n').substr(2):o='\n'+o.split('\n').map(function(e){return'   '+e}).join('\n'))):o=e.stylize('[Circular]','special')),x(r)){if(u&&s.match(/^\d+$/))return o;r=JSON.stringify(''+s),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=e.stylize(r,'name')):(r=r.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),r=e.stylize(r,'string'))}return r+': '+o}function f(e,t,l){var n=0,s=e.reduce(function(e,t){return n++,0<=t.indexOf('\n')&&n++,e+t.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<s?l[0]+(''===t?'':t+'\n ')+' '+e.join(',\n  ')+' '+l[1]:l[0]+t+' '+e.join(', ')+' '+l[1]}function L(e){return Array.isArray(e)}function h(e){return'boolean'==typeof e}function A(e){return null===e}function T(e){return'number'==typeof e}function O(e){return'string'==typeof e}function x(e){return void 0===e}function m(e){return U(e)&&'[object RegExp]'===k(e)}function U(e){return'object'==typeof e&&null!==e}function E(e){return U(e)&&'[object Date]'===k(e)}function b(t){return U(t)&&('[object Error]'===k(t)||t instanceof Error)}function v(e){return'function'==typeof e}function k(e){return Object.prototype.toString.call(e)}function R(e){return 10>e?'0'+e.toString(10):e.toString(10)}function S(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(':');return[e.getDate(),y[e.getMonth()],t].join(' ')}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;t.format=function(e){if(!O(e)){for(var t=[],l=0;l<arguments.length;l++)t.push(s(arguments[l]));return t.join(' ')}for(var l=1,n=arguments,u=n.length,r=(e+'').replace(N,function(e){if('%%'===e)return'%';if(l>=u)return e;switch(e){case'%s':return n[l++]+'';case'%d':return+n[l++];case'%j':try{return JSON.stringify(n[l++])}catch(e){return'[Circular]'}default:return e;}}),o=n[l];l<u;o=n[++l])r+=A(o)||!U(o)?' '+o:' '+s(o);return r},t.deprecate=function(l,s){if(x(e.process))return function(){return t.deprecate(l,s).apply(this,arguments)};if(!0===n.noDeprecation)return l;var u=!1;return function(){if(!u){if(n.throwDeprecation)throw new Error(s);else n.traceDeprecation?console.trace(s):console.error(s);u=!0}return l.apply(this,arguments)}};var M={},P;t.debuglog=function(e){if(x(P)&&(P=n.env.NODE_DEBUG||''),e=e.toUpperCase(),!M[e])if(new RegExp('\\b'+e+'\\b','i').test(P)){var l=n.pid;M[e]=function(){var n=t.format.apply(t,arguments);console.error('%s %d: %s',e,l,n)}}else M[e]=function(){};return M[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey',null:'bold',string:'green',date:'magenta',regexp:'red'},t.isArray=L,t.isBoolean=h,t.isNull=A,t.isNullOrUndefined=function(e){return null==e},t.isNumber=T,t.isString=O,t.isSymbol=function(e){return'symbol'==typeof e},t.isUndefined=x,t.isRegExp=m,t.isObject=U,t.isDate=E,t.isError=b,t.isFunction=v,t.isPrimitive=function(e){return null===e||'boolean'==typeof e||'number'==typeof e||'string'==typeof e||'symbol'==typeof e||'undefined'==typeof e},t.isBuffer=l(39);var y=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];t.log=function(){console.log('%s - %s',S(),t.format.apply(t,arguments))},t.inherits=l(40),t._extend=function(e,t){if(!t||!U(t))return e;for(var l=Object.keys(t),n=l.length;n--;)e[l[n]]=t[l[n]];return e}}).call(t,l(20),l(19))},function(e,t,l){'use strict';const r=l(0),u=l(1),n=l(11),s=l(7),_=l(43),o=l(12),c=l(3),i=l(13),d=l(9),g=l(14),f=l(10),h=l(15),A=l(8),T=l(21),x=o.MAXUPVAL,O=u.constant_types,m=u.thread_status,U=c.TValue,E=c.CClosure,b=function(e){return e!==c.luaO_nilobject},R=function(e,t){let l=e.ci;if(0<t){let n=l.funcOff+t;return r(t<=l.top-(l.funcOff+1),'unacceptable index'),n>=e.top?c.luaO_nilobject:e.stack[n]}return t>u.LUA_REGISTRYINDEX?(r(0!=t&&-t<=e.top,'invalid index'),e.stack[e.top+t]):t===u.LUA_REGISTRYINDEX?e.l_G.l_registry:(t=u.LUA_REGISTRYINDEX-t,r(t<=x+1,'upvalue index too large'),l.func.ttislcf()?c.luaO_nilobject:t<=l.func.value.nupvalues?l.func.value.upvalue[t-1]:c.luaO_nilobject)},v=function(e,t){let l=e.ci;if(0<t){let n=l.funcOff+t;return r(t<=l.top-(l.funcOff+1),'unacceptable index'),n>=e.top?null:n}if(t>u.LUA_REGISTRYINDEX)return r(0!=t&&-t<=e.top,'invalid index'),e.top+t;throw Error('attempt to use pseudo-index')},k=function(e,t){let l=e.ci.funcOff,n;0<=t?(r(t<=e.stack_last-(l+1),'new top too large'),n=l+1+t):(r(-(t+1)<=e.top-(l+1),'invalid new top'),n=e.top+t+1),s.adjust_top(e,n)},S=function(e,t){k(e,-t-1)},I=function(e,t,l){for(;t<l;t++,l--){let n=e.stack[t],s=new U(n.type,n.value);c.setobjs2s(e,t,l),c.setobj2s(e,l,s)}},N=function(e,l,s){let o=e.top-1,t=v(e,l),_=e.stack[t];r(b(_)&&l>u.LUA_REGISTRYINDEX,'index not in the stack'),r((0<=s?s:-s)<=o-t+1,'invalid \'n\'');let i=0<=s?o-s:t-s-1;I(e,t,i),I(e,i+1,e.top-1),I(e,t,e.top-1)},M=function(e,t,l){let n=R(e,t);R(e,l).setfrom(n)},P=function(e,t,l){if(r('function'==typeof t),r('number'==typeof l),0===l)e.stack[e.top]=new U(O.LUA_TLCF,t);else{r(l<e.top-e.ci.funcOff,'not enough elements in the stack'),r(l<=x,'upvalue index too large');let n=new E(e,t,l);for(let t=0;t<l;t++)n.upvalue[t].setfrom(e.stack[e.top-l+t]);for(let t=1;t<l;t++)delete e.stack[--e.top];0<l&&--e.top,e.stack[e.top].setclCvalue(n)}e.top++,r(e.top<=e.ci.top,'stack overflow')},y=function(e,t){P(e,t,0)},C=function(e,l,t){r(u.is_luastring(t),'key must be an array of bytes');let n=d.luaS_new(e,t);r(1<e.top-e.ci.funcOff,'not enough elements in the stack'),c.pushsvalue2s(e,n),r(e.top<=e.ci.top,'stack overflow'),h.settable(e,l,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},D=function(e,t){C(e,A.luaH_getint(e.l_G.l_registry.value,u.LUA_RIDX_GLOBALS),t)},K=function(e,l,t){r(u.is_luastring(t),'key must be an array of bytes');let n=d.luaS_new(e,t);return c.pushsvalue2s(e,n),r(e.top<=e.ci.top,'stack overflow'),h.luaV_gettable(e,l,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},B=function(e,l,s){let n=R(e,l);return r(n.ttistable(),'table expected'),c.pushobj2s(e,A.luaH_getint(n.value,s)),r(e.top<=e.ci.top,'stack overflow'),e.stack[e.top-1].ttnov()},w=function(e){let l=new c.TValue(O.LUA_TTABLE,A.luaH_new(e));e.stack[e.top]=l,e.top++,r(e.top<=e.ci.top,'stack overflow')},G=function(e,t){return new c.Udata(e,t)},V=function(e,t,l){switch(t.ttype()){case O.LUA_TCCL:{let e=t.value;return 1<=l&&l<=e.nupvalues?{name:[],val:e.upvalue[l-1]}:null}case O.LUA_TLCL:{let e=t.value,n=e.p;if(!(1<=l&&l<=n.upvalues.length))return null;let s=n.upvalues[l-1].name;return{name:s?s.getstr():u.to_luastring('(*no name)',!0),val:e.upvals[l-1].v}}default:return null;}},L=function(e,t){let l=R(e,t);if(!l.ttisstring()){if(!h.cvt2str(l))return null;c.luaO_tostring(e,l)}return l.svalue()},j=function(e,t){let l=R(e,t);if(!l.ttisstring()){if(!h.cvt2str(l))return null;c.luaO_tostring(e,l)}return l.jsstring()},F=new WeakMap,X=function(e,t,l){let n=function(n){r(n instanceof i.lua_State&&e===n.l_G,'must be from same global state'),n.stack[n.top]=new U(t,l),n.top++,r(n.top<=n.ci.top,'stack overflow')};return F.set(n,e),n},H=function(e,t){s.luaD_callnoyield(e,t.funcOff,t.nresults)},Y=function(e,t){let l=R(e,t);return b(l)?l.ttnov():O.LUA_TNONE},z=function(e,t,l,n,o){r(null===o||!(e.ci.callstatus&i.CIST_LUA),'cannot use continuations inside hooks'),r(t+1<e.top-e.ci.funcOff,'not enough elements in the stack'),r(e.status===m.LUA_OK,'cannot do calls on non-normal thread'),r(t===u.LUA_MULTRET||e.ci.top-e.top>=t-l,'results from function overflow current stack size');let _=e.top-(t+1);null!==o&&0===e.nny?(e.ci.c_k=o,e.ci.c_ctx=n,s.luaD_call(e,_,l)):s.luaD_callnoyield(e,_,l),l===u.LUA_MULTRET&&e.ci.top<e.top&&(e.ci.top=e.top)},J=function(e,t,l,n,o,_){r(t+1<e.top-e.ci.funcOff,'not enough elements in the stack'),r(e.status===m.LUA_OK,'cannot do calls on non-normal thread'),r(t===u.LUA_MULTRET||e.ci.top-e.top>=t-l,'results from function overflow current stack size');let d={func:null,funcOff:NaN,nresults:NaN},c,g;if(g=0===n?0:v(e,n),d.funcOff=e.top-(t+1),d.func=e.stack[d.funcOff],null===_||0<e.nny)d.nresults=l,c=s.luaD_pcall(e,H,d,d.funcOff,g);else{let t=e.ci;t.c_k=_,t.c_ctx=o,t.extra=d.funcOff,t.c_old_errfunc=e.errfunc,e.errfunc=g,t.callstatus&=~i.CIST_OAH|e.allowhook,t.callstatus|=i.CIST_YPCALL,s.luaD_call(e,d.funcOff,l),t.callstatus&=~i.CIST_YPCALL,e.errfunc=t.c_old_errfunc,c=m.LUA_OK}return l===u.LUA_MULTRET&&e.ci.top<e.top&&(e.ci.top=e.top),c},Z=function(e,t,l){let n=R(e,t);r(n.ttisLclosure(),'Lua function expected');let s=n.value;return r(1<=l&&l<=s.p.upvalues.length,'invalid upvalue index'),{closure:s,upval:s.upvals[l-1],upvalOff:l-1}};e.exports.index2addr=R,e.exports.index2addr_=v,e.exports.lua_absindex=function(e,t){return 0<t||t<=u.LUA_REGISTRYINDEX?t:e.top-e.ci.funcOff+t},e.exports.lua_arith=function(e,t){t!==u.LUA_OPUNM&&t!==u.LUA_OPBNOT?r(2<e.top-e.ci.funcOff,'not enough elements in the stack'):(r(1<e.top-e.ci.funcOff,'not enough elements in the stack'),c.pushobj2s(e,e.stack[e.top-1]),r(e.top<=e.ci.top,'stack overflow')),c.luaO_arith(e,t,e.stack[e.top-2],e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top]},e.exports.lua_atpanic=function(e,t){let l=e.l_G.panic;return e.l_G.panic=t,l},e.exports.lua_atnativeerror=function(e,t){let l=e.l_G.atnativeerror;return e.l_G.atnativeerror=t,l},e.exports.lua_call=function(e,t,l){z(e,t,l,0,null)},e.exports.lua_callk=z,e.exports.lua_checkstack=function(e,t){let l=e.ci,n;if(r(0<=t,'negative \'n\''),e.stack_last-e.top>t)n=!0;else{let l=e.top+i.EXTRA_STACK;l>f.LUAI_MAXSTACK-t?n=!1:(s.luaD_growstack(e,t),n=!0)}return n&&l.top<e.top+t&&(l.top=e.top+t),n},e.exports.lua_compare=function(e,t,l,n){let s=R(e,t),o=R(e,l),_=0;return b(s)&&b(o)&&(n===u.LUA_OPEQ?_=h.luaV_equalobj(e,s,o):n===u.LUA_OPLT?_=h.luaV_lessthan(e,s,o):n===u.LUA_OPLE?_=h.luaV_lessequal(e,s,o):r(!1,'invalid option')),_},e.exports.lua_concat=function(e,t){r(t<e.top-e.ci.funcOff,'not enough elements in the stack'),2<=t?h.luaV_concat(e,t):0===t&&(c.pushsvalue2s(e,d.luaS_bless(e,[])),r(e.top<=e.ci.top,'stack overflow'))},e.exports.lua_copy=M,e.exports.lua_createtable=w,e.exports.lua_dump=function(e,t,l,n){r(1<e.top-e.ci.funcOff,'not enough elements in the stack');let s=e.stack[e.top-1];return s.ttisLclosure()?_.luaU_dump(e,s.value.p,t,l,n):1},e.exports.lua_error=function(e){r(1<e.top-e.ci.funcOff,'not enough elements in the stack'),n.luaG_errormsg(e)},e.exports.lua_gc=function(){},e.exports.lua_getallocf=function(){return console.warn('lua_getallocf is not available'),0},e.exports.lua_getextraspace=function(){return console.warn('lua_getextraspace is not available'),0},e.exports.lua_getfield=function(e,t,l){return K(e,R(e,t),l)},e.exports.lua_getglobal=function(e,t){return K(e,A.luaH_getint(e.l_G.l_registry.value,u.LUA_RIDX_GLOBALS),t)},e.exports.lua_geti=function(e,l,s){r('number'==typeof s&&(0|s)===s);let u=R(e,l);return e.stack[e.top]=new U(O.LUA_TNUMINT,s),e.top++,r(e.top<=e.ci.top,'stack overflow'),h.luaV_gettable(e,u,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_getmetatable=function(e,t){let l=R(e,t),n=!1,s;switch(l.ttnov()){case O.LUA_TTABLE:case O.LUA_TUSERDATA:s=l.value.metatable;break;default:s=e.l_G.mt[l.ttnov()];}return null!==s&&void 0!==s&&(e.stack[e.top]=new U(O.LUA_TTABLE,s),e.top++,r(e.top<=e.ci.top,'stack overflow'),n=!0),n},e.exports.lua_gettable=function(e,l){let n=R(e,l);return h.luaV_gettable(e,n,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_gettop=function(e){return e.top-(e.ci.funcOff+1)},e.exports.lua_getupvalue=function(e,t,l){let n=V(e,R(e,t),l);if(n){let t=n.name,l=n.val;return c.pushobj2s(e,l),r(e.top<=e.ci.top,'stack overflow'),t}return null},e.exports.lua_getuservalue=function(e,t){let l=R(e,t);r(e,l.ttisfulluserdata(),'full userdata expected');let n=l.value.uservalue;return e.stack[e.top]=new U(n.type,n.value),e.top++,r(e.top<=e.ci.top,'stack overflow'),e.stack[e.top-1].ttnov()},e.exports.lua_insert=function(e,t){N(e,t,1)},e.exports.lua_isboolean=function(e,t){return Y(e,t)===O.LUA_TBOOLEAN},e.exports.lua_iscfunction=function(e,t){let l=R(e,t);return l.ttislcf(l)||l.ttisCclosure()},e.exports.lua_isfunction=function(e,t){return Y(e,t)===O.LUA_TFUNCTION},e.exports.lua_isinteger=function(e,t){return R(e,t).ttisinteger()},e.exports.lua_islightuserdata=function(e,t){return Y(e,t)===O.LUA_TLIGHTUSERDATA},e.exports.lua_isnil=function(e,t){return Y(e,t)===O.LUA_TNIL},e.exports.lua_isnone=function(e,t){return Y(e,t)===O.LUA_TNONE},e.exports.lua_isnoneornil=function(e,t){return 0>=Y(e,t)},e.exports.lua_isnumber=function(e,t){return!1!==h.tonumber(R(e,t))},e.exports.lua_isproxy=function(e,t){let l=F.get(e);return!!l&&(null===t||t.l_G===l)},e.exports.lua_isstring=function(e,t){let l=R(e,t);return l.ttisstring()||h.cvt2str(l)},e.exports.lua_istable=function(e,t){return R(e,t).ttistable()},e.exports.lua_isthread=function(e,t){return Y(e,t)===O.LUA_TTHREAD},e.exports.lua_isuserdata=function(e,t){let l=R(e,t);return l.ttisfulluserdata(l)||l.ttislightuserdata()},e.exports.lua_len=function(e,l){let n=R(e,l),t=new U;h.luaV_objlen(e,t,n),e.stack[e.top]=t,e.top++,r(e.top<=e.ci.top,'stack overflow')},e.exports.lua_load=function(e,t,l,n,o){r(u.is_luastring(n),'lua_load expect an array of byte as chunkname'),r(!o||u.is_luastring(o),'lua_load expect an array of byte as mode'),n||(n=[u.char['?']]);let _=new T.ZIO(e,t,l),i=s.luaD_protectedparser(e,_,n,o);if(i===m.LUA_OK){let t=e.stack[e.top-1].value;if(1<=t.nupvalues){let l=A.luaH_getint(e.l_G.l_registry.value,u.LUA_RIDX_GLOBALS);t.upvals[0].v.setfrom(l)}}return i},e.exports.lua_newtable=function(e){w(e,0,0)},e.exports.lua_newuserdata=function(e,t){let l=G(e,t);return e.stack[e.top]=new c.TValue(O.LUA_TUSERDATA,l),e.top++,r(e.top<=e.ci.top,'stack overflow'),l.data},e.exports.lua_next=function(e,l){let n=R(e,l);r(n.ttistable(),'table expected'),e.stack[e.top]=new U;let t=A.luaH_next(e,n.value,e.top-1);return t?(e.top++,r(e.top<=e.ci.top,'stack overflow'),1):(delete e.stack[e.top],delete e.stack[--e.top],0)},e.exports.lua_pcall=function(e,t,l,n){return J(e,t,l,n,0,null)},e.exports.lua_pcallk=J,e.exports.lua_pop=S,e.exports.lua_pushboolean=function(e,t){e.stack[e.top]=new U(O.LUA_TBOOLEAN,!!t),e.top++,r(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushcclosure=P,e.exports.lua_pushcfunction=y,e.exports.lua_pushfstring=function(e,t,...l){return r(u.is_luastring(t)),c.luaO_pushvfstring(e,t,l)},e.exports.lua_pushglobaltable=function(e){B(e,u.LUA_REGISTRYINDEX,u.LUA_RIDX_GLOBALS)},e.exports.lua_pushinteger=function(e,t){r('number'==typeof t&&(0|t)===t),e.stack[e.top]=new U(O.LUA_TNUMINT,t),e.top++,r(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushjsclosure=P,e.exports.lua_pushjsfunction=y,e.exports.lua_pushlightuserdata=function(e,t){e.stack[e.top]=new U(O.LUA_TLIGHTUSERDATA,t),e.top++,r(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushliteral=function(e,t){if(r('string'==typeof t||void 0===t||null===t,'lua_pushliteral expects a JS string'),void 0===t||null===t)e.stack[e.top]=new U(O.LUA_TNIL,null),e.top++;else{let l=d.luaS_newliteral(e,t);c.pushsvalue2s(e,l),t=l.getstr()}return r(e.top<=e.ci.top,'stack overflow'),t},e.exports.lua_pushlstring=function(e,t,l){r('number'==typeof l);let n;return 0===l?n=d.luaS_bless(e,[]):(r(u.is_luastring(t)&&t.length>=l,'lua_pushlstring expects array of byte'),n=d.luaS_bless(e,t.slice(0,l))),c.pushsvalue2s(e,n),r(e.top<=e.ci.top,'stack overflow'),n.value},e.exports.lua_pushnil=function(e){e.stack[e.top]=new U(O.LUA_TNIL,null),e.top++,r(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushnumber=function(e,t){r('number'==typeof t),e.stack[e.top]=new U(O.LUA_TNUMFLT,t),e.top++,r(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushstring=function(e,t){if(r(u.is_luastring(t)||void 0===t||null===t,'lua_pushstring expects array of byte'),void 0===t||null===t)e.stack[e.top]=new U(O.LUA_TNIL,null),e.top++;else{let l=d.luaS_new(e,t);c.pushsvalue2s(e,l),t=l.getstr()}return r(e.top<=e.ci.top,'stack overflow'),t},e.exports.lua_pushthread=function(e){return e.stack[e.top]=new U(O.LUA_TTHREAD,e),e.top++,r(e.top<=e.ci.top,'stack overflow'),e.l_G.mainthread===e},e.exports.lua_pushvalue=function(e,t){c.pushobj2s(e,R(e,t)),r(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushvfstring=function(e,t,l){return r(u.is_luastring(t)),c.luaO_pushvfstring(e,t,l)},e.exports.lua_rawequal=function(e,t,l){let n=R(e,t),s=R(e,l);return b(n)&&b(s)?h.luaV_equalobj(null,n,s):0},e.exports.lua_rawget=function(e,l){let n=R(e,l);return r(n.ttistable(n),'table expected'),c.setobj2s(e,e.top-1,A.luaH_get(e,n.value,e.stack[e.top-1])),e.stack[e.top-1].ttnov()},e.exports.lua_rawgeti=B,e.exports.lua_rawgetp=function(e,l,n){let s=R(e,l);r(s.ttistable(),'table expected');let t=new U(O.LUA_TLIGHTUSERDATA,n);return c.pushobj2s(e,A.luaH_get(e,s.value,t)),r(e.top<=e.ci.top,'stack overflow'),e.stack[e.top-1].ttnov()},e.exports.lua_rawlen=function(e,t){let l=R(e,t);switch(l.ttype()){case O.LUA_TSHRSTR:case O.LUA_TLNGSTR:return l.vslen();case O.LUA_TUSERDATA:return l.value.len;case O.LUA_TTABLE:return A.luaH_getn(l.value);default:return 0;}},e.exports.lua_rawset=function(e,t){r(2<e.top-e.ci.funcOff,'not enough elements in the stack');let l=R(e,t);r(l.ttistable(),'table expected');let n=e.stack[e.top-2],s=e.stack[e.top-1];if(s.ttisnil())A.luaH_delete(e,l.value,n);else{let t=A.luaH_set(e,l.value,n);t.setfrom(s)}A.invalidateTMcache(l.value),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_rawseti=function(e,t,l){r(2<e.top-e.ci.funcOff,'not enough elements in the stack');let n=R(e,t);r(n.ttistable(),'table expected'),A.luaH_setint(n.value,l,e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_rawsetp=function(e,t,l){r(1<e.top-e.ci.funcOff,'not enough elements in the stack');let n=R(e,t);r(e,n.ttistable(),'table expected');let s=new U(O.LUA_TLIGHTUSERDATA,l),u=e.stack[e.top-1];if(u.ttisnil())A.luaH_delete(e,n.value,s);else{let t=A.luaH_set(e,n.value,s);t.setfrom(u)}delete e.stack[--e.top]},e.exports.lua_register=function(e,t,l){y(e,l),D(e,t)},e.exports.lua_remove=function(e,t){N(e,t,-1),S(e,1)},e.exports.lua_replace=function(e,t){M(e,-1,t),S(e,1)},e.exports.lua_rotate=N,e.exports.lua_setallocf=function(){return console.warn('lua_setallocf is not available'),0},e.exports.lua_setfield=function(e,t,l){C(e,R(e,t),l)},e.exports.lua_setglobal=D,e.exports.lua_seti=function(e,l,s){r('number'==typeof s&&(0|s)===s),r(1<e.top-e.ci.funcOff,'not enough elements in the stack');let u=R(e,l);e.stack[e.top]=new U(O.LUA_TNUMINT,s),e.top++,r(e.top<=e.ci.top,'stack overflow'),h.settable(e,u,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_setmetatable=function(e,t){r(1<e.top-e.ci.funcOff,'not enough elements in the stack');let l=R(e,t),n;switch(e.stack[e.top-1].ttisnil()?n=null:(r(e.stack[e.top-1].ttistable(),'table expected'),n=e.stack[e.top-1].value),l.ttnov()){case O.LUA_TUSERDATA:case O.LUA_TTABLE:{l.value.metatable=n;break}default:{e.l_G.mt[l.ttnov()]=n;break}}return delete e.stack[--e.top],!0},e.exports.lua_settable=function(e,l){r(2<e.top-e.ci.funcOff,'not enough elements in the stack');let n=R(e,l);h.settable(e,n,e.stack[e.top-2],e.stack[e.top-1]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_settop=k,e.exports.lua_setupvalue=function(e,t,l){let n=R(e,t);r(1<e.top-e.ci.funcOff,'not enough elements in the stack');let s=V(e,n,l);if(s){let t=s.name,l=s.val;return l.setfrom(e.stack[e.top-1]),delete e.stack[--e.top],t}return null},e.exports.lua_setuservalue=function(e,t){r(1<e.top-e.ci.funcOff,'not enough elements in the stack');let l=R(e,t);r(e,l.ttisfulluserdata(),'full userdata expected'),l.value.uservalue.setfrom(e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_status=function(e){return e.status},e.exports.lua_stringtonumber=function(e,t){let l=c.luaO_str2num(t);return l?(e.stack[e.top]=l,e.top++,r(e.top<=e.ci.top,'stack overflow'),t.length+1):0},e.exports.lua_toboolean=function(e,t){let l=R(e,t);return!l.l_isfalse()},e.exports.lua_tocfunction=function(e,t){let l=R(e,t);return l.ttislcf()||l.ttisCclosure()?l.value:null},e.exports.lua_todataview=function(e,t){let l=R(e,t);if(!l.ttisstring()){if(!h.cvt2str(l))return null;c.luaO_tostring(e,l)}let n=new DataView(new ArrayBuffer(l.vslen()));return l.svalue().forEach((t,e)=>n.setUint8(e,t,!0)),n},e.exports.lua_tointeger=function(e,t){return h.tointeger(R(e,t))},e.exports.lua_tointegerx=function(e,t){return h.tointeger(R(e,t))},e.exports.lua_tojsstring=j,e.exports.lua_toljsstring=j,e.exports.lua_tolstring=L,e.exports.lua_tonumber=function(e,t){let l=h.tonumber(R(e,t));return!1===l?0:l},e.exports.lua_tonumberx=function(e,t){return h.tonumber(R(e,t))},e.exports.lua_topointer=function(e,t){let l=R(e,t);switch(l.ttype()){case O.LUA_TTABLE:case O.LUA_TLCL:case O.LUA_TCCL:case O.LUA_TLCF:case O.LUA_TTHREAD:case O.LUA_TUSERDATA:case O.LUA_TLIGHTUSERDATA:return l.value;default:return null;}},e.exports.lua_toproxy=function(e,t){let l=R(e,t);return X(e.l_G,l.type,l.value)},e.exports.lua_tostring=L,e.exports.lua_tothread=function(e,t){let l=R(e,t);return l.ttisthread()?l.value:null},e.exports.lua_touserdata=function(e,t){let l=R(e,t);switch(l.ttnov()){case O.LUA_TUSERDATA:return l.value.data;case O.LUA_TLIGHTUSERDATA:return l.value;default:return null;}},e.exports.lua_type=Y,e.exports.lua_typename=function(e,l){return r(O.LUA_TNONE<=l&&l<O.LUA_NUMTAGS,'invalid tag'),g.ttypename(l)},e.exports.lua_upvalueid=function(e,t,l){let n=R(e,t);switch(n.ttype()){case O.LUA_TLCL:return Z(e,t,l).upval;case O.LUA_TCCL:{let e=n.value;return r(1<=l&&l<=e.nupvalues,'invalid upvalue index'),e.upvalue[l-1]}default:return r(!1,'closure expected'),null;}},e.exports.lua_upvaluejoin=function(e,t,l,n,s){let u=Z(e,t,l),o=Z(e,n,s),_=u.upval,i=o.upval,c=u.closure;r(0<_.refcount),_.refcount--,c.upvals[u.upvalOff]=i,i.refcount++},e.exports.lua_version=function(e){return null===e?u.LUA_VERSION_NUM:e.l_G.version},e.exports.lua_xmove=function(e,t,l){if(e!==t){r(l<e.top-e.ci.funcOff,'not enough elements in the stack'),r(e.l_G===t.l_G,'moving among independent states'),r(t.ci.top-t.top>=l,'stack overflow'),e.top-=l;for(let n=0;n<l;n++)t.stack[t.top]=new c.TValue,c.setobj2s(t,t.top,e.stack[e.top+n]),delete e.stack[e.top+n],t.top++}}},function(e,t,l){'use strict';const n=l(2),s=l(6),u=l(29);e.exports.lua=n,e.exports.lauxlib=s,e.exports.lualib=u},function(e,t,l){var n;!function(){'use strict';function s(e){return r(o(e),arguments)}function u(e,t){return s.apply(null,[e].concat(t||[]))}function r(e,t){var l=1,n=e.length,u='',r,o,i,c,d,g,f,L,h;for(o=0;o<n;o++)if('string'==typeof e[o])u+=e[o];else if(Array.isArray(e[o])){if(c=e[o],c[2])for(r=t[l],i=0;i<c[2].length;i++){if(!r.hasOwnProperty(c[2][i]))throw new Error(s('[sprintf] property "%s" does not exist',c[2][i]));r=r[c[2][i]]}else r=c[1]?t[c[1]]:t[l++];if(_.not_type.test(c[8])&&_.not_primitive.test(c[8])&&r instanceof Function&&(r=r()),_.numeric_arg.test(c[8])&&'number'!=typeof r&&isNaN(r))throw new TypeError(s('[sprintf] expecting number but found %T',r));switch(_.number.test(c[8])&&(L=0<=r),c[8]){case'b':r=parseInt(r,10).toString(2);break;case'c':r=String.fromCharCode(parseInt(r,10));break;case'd':case'i':r=parseInt(r,10);break;case'j':r=JSON.stringify(r,null,c[6]?parseInt(c[6]):0);break;case'e':r=c[7]?parseFloat(r).toExponential(c[7]):parseFloat(r).toExponential();break;case'f':r=c[7]?parseFloat(r).toFixed(c[7]):parseFloat(r);break;case'g':r=c[7]?+r.toPrecision(c[7])+'':parseFloat(r);break;case'o':r=(parseInt(r,10)>>>0).toString(8);break;case's':r+='',r=c[7]?r.substring(0,c[7]):r;break;case't':r=!!r+'',r=c[7]?r.substring(0,c[7]):r;break;case'T':r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=c[7]?r.substring(0,c[7]):r;break;case'u':r=parseInt(r,10)>>>0;break;case'v':r=r.valueOf(),r=c[7]?r.substring(0,c[7]):r;break;case'x':r=(parseInt(r,10)>>>0).toString(16);break;case'X':r=(parseInt(r,10)>>>0).toString(16).toUpperCase();}_.json.test(c[8])?u+=r:(_.number.test(c[8])&&(!L||c[3])?(h=L?'+':'-',r=r.toString().replace(_.sign,'')):h='',g=c[4]?'0'===c[4]?'0':c[4].charAt(1):' ',f=c[6]-(h+r).length,d=c[6]?0<f?g.repeat(f):'':'',u+=c[5]?h+r+d:'0'===g?h+d+r:d+h+r)}return u}function o(e){if(i[e])return i[e];for(var t=e,l=[],n=0,s;t;){if(null!==(s=_.text.exec(t)))l.push(s[0]);else if(null!==(s=_.modulo.exec(t)))l.push('%');else if(null!==(s=_.placeholder.exec(t))){if(s[2]){n|=1;var u=[],r=s[2],o=[];if(null!==(o=_.key.exec(r))){for(u.push(o[1]);''!==(r=r.substring(o[0].length));)if(null!==(o=_.key_access.exec(r)))u.push(o[1]);else if(null!==(o=_.index_access.exec(r)))u.push(o[1]);else throw new SyntaxError('[sprintf] failed to parse named argument key');}else throw new SyntaxError('[sprintf] failed to parse named argument key');s[2]=u}else n|=2;if(3==n)throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported');l.push(s)}else throw new SyntaxError('[sprintf] unexpected placeholder');t=t.substring(s[0].length)}return i[e]=l}var _={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},i=Object.create(null);t.sprintf=s,t.vsprintf=u,'undefined'!=typeof window&&(window.sprintf=s,window.vsprintf=u,n=function(){return{sprintf:s,vsprintf:u}}.call(t,l,t,e),!(n!==void 0&&(e.exports=n)))}()},function(e){'use strict';var t=String.fromCharCode;e.exports.lisdigit=function(e){return /^\d$/.test(t(e))},e.exports.lislalnum=function(e){return /^[_a-zA-Z0-9]$/.test(t(e))},e.exports.lislalpha=function(e){return /^[_a-zA-Z]$/.test(t(e))},e.exports.lisprint=function(e){return /^[\x20-\x7E]$/.test(t(e))},e.exports.lisspace=function(e){return /^\s$/.test(t(e))},e.exports.lisxdigit=function(e){return /^[0-9a-fA-F]$/.test(t(e))}},function(e,t,l){'use strict';const n=l(0),s=l(1),u=l(41),r=l(7),o=l(12),_=l(28),i=l(5),c=l(3),d=l(16),f=l(9),g=l(8),L=u.BinOpr,h=d.OpCodesI,A=o.Proto,T=_.RESERVED,x=u.UnOpr,O=s.char,m=function(e){return e===b.VCALL||e===b.VVARARG},U=function(e,t){return f.luaS_eqlngstr(e,t)};class E{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}}const b={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},v=function(e){return b.VLOCAL<=e&&e<=b.VINDEXED};class k{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(t){this.k=t.k,this.u=t.u,this.t=t.t,this.f=t.f}}class R{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}}class S{constructor(){this.idx=NaN}}class I{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}}class N{constructor(){this.arr=[],this.n=NaN,this.size=NaN}}const M=function(e,t){e.t.token=0,_.luaX_syntaxerror(e,t)},P=function(e,t){_.luaX_syntaxerror(e,c.luaO_pushfstring(e.L,s.to_luastring('%s expected',!0),_.luaX_token2str(e,t)))},y=function(e,t,l){let n=e.ls.L,u=e.f.linedefined,r=0===u?s.to_luastring('main function',!0):c.luaO_pushfstring(n,s.to_luastring('function at line %d',!0),u),o=c.luaO_pushfstring(n,s.to_luastring('too many %s (limit is %d) in %s',!0),l,t,r);_.luaX_syntaxerror(e.ls,o)},C=function(e,t,n,l){t>n&&y(e,n,l)},D=function(e,t){return!(e.t.token!==t)&&(_.luaX_next(e),!0)},K=function(e,t){e.t.token!==t&&P(e,t)},B=function(e,t){K(e,t),_.luaX_next(e)},w=function(e,t,l){t||_.luaX_syntaxerror(e,l)},G=function(e,t,l,n){D(e,t)||(n===e.linenumber?P(e,t):_.luaX_syntaxerror(e,c.luaO_pushfstring(e.L,s.to_luastring('%s expected (to close %s at line %d)'),_.luaX_token2str(e,t),_.luaX_token2str(e,l),n)))},V=function(e){K(e,T.TK_NAME);let t=e.t.seminfo.ts;return _.luaX_next(e),t},j=function(t,e,l){t.f=t.t=u.NO_JUMP,t.k=e,t.u.info=l},F=function(t,l,e){j(l,b.VK,u.luaK_stringK(t.fs,e))},X=function(t,l){F(t,l,V(t))},H=function(e,t){let l=e.fs,n=l.f;return n.locvars[l.nlocvars]=new c.LocVar,n.locvars[l.nlocvars].varname=t,l.nlocvars++},Y=function(e,t){let l=e.fs,n=e.dyd,u=H(e,t);C(l,n.actvar.n+1-l.firstlocal,200,s.to_luastring('local variables',!0)),n.actvar.arr[n.actvar.n]=new S,n.actvar.arr[n.actvar.n].idx=u,n.actvar.n++},z=function(e,t){Y(e,_.luaX_newstring(e,s.to_luastring(t,!0)))},J=function(e,t){let l=e.ls.dyd.actvar.arr[e.firstlocal+t].idx;return n(l<e.nlocvars),e.f.locvars[l]},Z=function(e,t){let l=e.fs;for(l.nactvar+=t;t;t--)J(l,l.nactvar-t).startpc=l.pc},q=function(e,t){for(e.ls.dyd.actvar.n-=e.nactvar-t;e.nactvar>t;)J(e,--e.nactvar).endpc=e.pc},W=function(e,t){let l=e.f.upvalues;for(let n=0;n<e.nups;n++)if(U(l[n].name,t))return n;return-1},Q=function(e,t,l){let n=e.f;return C(e,e.nups+1,o.MAXUPVAL,s.to_luastring('upvalues',!0)),n.upvalues[e.nups]={instack:l.k===b.VLOCAL,idx:l.u.info,name:t},e.nups++},$=function(e,t){for(let l=e.nactvar-1;0<=l;l--)if(U(t,J(e,l).varname))return l;return-1},ee=function(e,t){let l=e.bl;for(;l.nactvar>t;)l=l.previous;l.upval=1},te=function(e,t,l,n){if(null===e)j(l,b.VVOID,0);else{let s=$(e,t);if(0<=s)j(l,b.VLOCAL,s),n||ee(e,s);else{let n=W(e,t);if(0>n){if(te(e.prev,t,l,0),l.k===b.VVOID)return;n=Q(e,t,l)}j(l,b.VUPVAL,n)}}},ae=function(e,t){let l=V(e),s=e.fs;if(te(s,l,t,1),t.k===b.VVOID){let r=new k;te(s,e.envn,t,1),n(t.k!==b.VVOID),F(e,r,l),u.luaK_indexed(s,t,r)}},le=function(t,l,n,s){let e=t.fs,r=l-n;if(m(s.k))r++,0>r&&(r=0),u.luaK_setreturns(e,s,r),1<r&&u.luaK_reserveregs(e,r-1);else if(s.k!==b.VVOID&&u.luaK_exp2nextreg(e,s),0<r){let t=e.freereg;u.luaK_reserveregs(e,r),u.luaK_nil(e,t,r)}n>l&&(t.fs.freereg-=n-l)},ne=function(e){let t=e.L;++t.nCcalls,C(e.fs,t.nCcalls,i.LUAI_MAXCCALLS,s.to_luastring('JS levels',!0))},se=function(e){return e.L.nCcalls--},ue=function(e,t,l){let r=e.fs,o=e.dyd.gt,_=o.arr[t];if(n(U(_.name,l.name)),_.nactvar<l.nactvar){let t=J(r,_.nactvar).varname,l=c.luaO_pushfstring(e.L,s.to_luastring('<goto %s> at line %d jumps into the scope of local \'%s\''),_.name.getstr(),_.line,t.getstr());M(e,l)}u.luaK_patchlist(r,_.pc,l.pc);for(let n=t;n<o.n-1;n++)o.arr[n]=o.arr[n+1];o.n--},re=function(e,t){let l=e.fs.bl,n=e.dyd,s=n.gt.arr[t];for(let r=l.firstlabel,o;r<n.label.n;r++)if(o=n.label.arr[r],U(o.name,s.name))return s.nactvar>o.nactvar&&(l.upval||n.label.n>l.firstlabel)&&u.luaK_patchclose(e.fs,s.pc,o.nactvar),ue(e,t,o),!0;return!1},oe=function(e,t,l,s,u){let r=t.n;return t.arr[r]=new I,t.arr[r].name=l,t.arr[r].line=s,t.arr[r].nactvar=e.fs.nactvar,t.arr[r].pc=u,t.n=r+1,r},_e=function(e,t){for(let l=e.dyd.gt,n=e.fs.bl.firstgoto;n<l.n;)U(l.arr[n].name,t.name)?ue(e,n,t):n++},ie=function(e,t){for(let l=t.firstgoto,n=e.ls.dyd.gt;l<n.n;){let s=n.arr[l];s.nactvar>t.nactvar&&(t.upval&&u.luaK_patchclose(e,s.pc,t.nactvar),s.nactvar=t.nactvar),re(e.ls,l)||l++}},pe=function(e,t,l){t.isloop=l,t.nactvar=e.nactvar,t.firstlabel=e.ls.dyd.label.n,t.firstgoto=e.ls.dyd.gt.n,t.upval=0,t.previous=e.bl,e.bl=t,n(e.freereg===e.nactvar)},ce=function(e){let t=f.luaS_newliteral(e.L,'break'),n=oe(e,e.dyd.label,t,0,e.fs.pc);_e(e,e.dyd.label.arr[n])},de=function(e,t){let l=_.isreserved(t.name)?'<%s> at line %d not inside a loop':'no visible label \'%s\' for <goto> at line %d';l=c.luaO_pushfstring(e.L,s.to_luastring(l),t.name.getstr(),t.line),M(e,l)},ge=function(e){let t=e.L,l=new A(t),n=e.fs,s=n.f;return s.p[n.np++]=l,l},fe=function(e,t){let l=e.fs.prev;j(t,b.VRELOCABLE,u.luaK_codeABx(l,h.OP_CLOSURE,0,l.np-1)),u.luaK_exp2nextreg(l,t)},Le=function(e,t,l){t.prev=e.fs,t.ls=e,e.fs=t,t.pc=0,t.lasttarget=0,t.jpc=u.NO_JUMP,t.freereg=0,t.nk=0,t.np=0,t.nups=0,t.nlocvars=0,t.nactvar=0,t.firstlocal=e.dyd.actvar.n,t.bl=null;let n=new A(e.L);n=t.f,n.source=e.source,n.maxstacksize=2,pe(t,l,!1)},he=function(e){let t=e.bl,l=e.ls;if(t.previous&&t.upval){let l=u.luaK_jump(e);u.luaK_patchclose(e,l,t.nactvar),u.luaK_patchtohere(e,l)}t.isloop&&ce(l),e.bl=t.previous,q(e,t.nactvar),n(t.nactvar===e.nactvar),e.freereg=e.nactvar,l.dyd.label.n=t.firstlabel,t.previous?ie(e,t):t.firstgoto<l.dyd.gt.n&&de(l,l.dyd.gt.arr[t.firstgoto])},Ae=function(e){let t=e.fs;u.luaK_ret(t,0,0),he(t),n(null===t.bl),e.fs=t.prev},Te=function(e,t){switch(e.t.token){case T.TK_ELSE:case T.TK_ELSEIF:case T.TK_END:case T.TK_EOS:return!0;case T.TK_UNTIL:return t;default:return!1;}},xe=function(e){for(;!Te(e,1);){if(e.t.token===T.TK_RETURN)return void ct(e);ct(e)}},Oe=function(e,t){let l=e.fs,n=new k;u.luaK_exp2anyregup(l,t),_.luaX_next(e),X(e,n),u.luaK_indexed(l,t,n)},me=function(e,t){_.luaX_next(e),Ve(e,t),u.luaK_exp2val(e.fs,t),B(e,O[']'])};class Ue{constructor(){this.v=new k,this.t=new k,this.nh=NaN,this.na=NaN,this.tostore=NaN}}const Ee=function(e,t){let l=e.fs,n=e.fs.freereg,r=new k,o=new k;e.t.token===T.TK_NAME?(C(l,t.nh,i.MAX_INT,s.to_luastring('items in a constructor',!0)),X(e,r)):me(e,r),t.nh++,B(e,O['=']);let _=u.luaK_exp2RK(l,r);Ve(e,o),u.luaK_codeABC(l,h.OP_SETTABLE,t.t.u.info,_,u.luaK_exp2RK(l,o)),l.freereg=n},be=function(e,t){t.v.k===b.VVOID||(u.luaK_exp2nextreg(e,t.v),t.v.k=b.VVOID,t.tostore===d.LFIELDS_PER_FLUSH&&(u.luaK_setlist(e,t.t.u.info,t.na,t.tostore),t.tostore=0))},ve=function(e,t){0===t.tostore||(m(t.v.k)?(u.luaK_setmultret(e,t.v),u.luaK_setlist(e,t.t.u.info,t.na,s.LUA_MULTRET),t.na--):(t.v.k!==b.VVOID&&u.luaK_exp2nextreg(e,t.v),u.luaK_setlist(e,t.t.u.info,t.na,t.tostore)))},ke=function(e,t){Ve(e,t.v),C(e.fs,t.na,i.MAX_INT,s.to_luastring('items in a constructor',!0)),t.na++,t.tostore++},Re=function(e,t){switch(e.t.token){case T.TK_NAME:{_.luaX_lookahead(e)===O['=']?Ee(e,t):ke(e,t);break}case O['[']:{Ee(e,t);break}default:{ke(e,t);break}}},Se=function(e,l){let t=e.fs,s=e.linenumber,r=u.luaK_codeABC(t,h.OP_NEWTABLE,0,0,0),o=new Ue;o.na=o.nh=o.tostore=0,o.t=l,j(l,b.VRELOCABLE,r),j(o.v,b.VVOID,0),u.luaK_exp2nextreg(e.fs,l),B(e,O['{']);do{if(n(o.v.k===b.VVOID||0<o.tostore),e.t.token===O['}'])break;be(t,o),Re(e,o)}while(D(e,O[','])||D(e,O[';']));G(e,O['}'],O['{'],s),ve(t,o),d.SETARG_B(t.f.code[r],c.luaO_int2fb(o.na)),d.SETARG_C(t.f.code[r],c.luaO_int2fb(o.nh))},Ie=function(e){let t=e.fs,l=t.f,n=0;if(l.is_vararg=!1,e.t.token!==O[')'])do switch(e.t.token){case T.TK_NAME:{Y(e,V(e)),n++;break}case T.TK_DOTS:{_.luaX_next(e),l.is_vararg=!0;break}default:_.luaX_syntaxerror(e,s.to_luastring('<name> or \'...\' expected',!0));}while(!l.is_vararg&&D(e,O[',']));Z(e,n),l.numparams=t.nactvar,u.luaK_reserveregs(t,t.nactvar)},Ne=function(t,l,e,n){let s=new R,u=new E;s.f=ge(t),s.f.linedefined=n,Le(t,s,u),B(t,O['(']),e&&(z(t,'self'),Z(t,1)),Ie(t),B(t,O[')']),xe(t),s.f.lastlinedefined=t.linenumber,G(t,T.TK_END,T.TK_FUNCTION,n),fe(t,l),Ae(t)},Me=function(e,t){let l=1;for(Ve(e,t);D(e,O[',']);)u.luaK_exp2nextreg(e.fs,t),Ve(e,t),l++;return l},Pe=function(e,t,l){let r=e.fs,o=new k;switch(e.t.token){case O['(']:{_.luaX_next(e),e.t.token===O[')']?o.k=b.VVOID:(Me(e,o),u.luaK_setmultret(r,o)),G(e,O[')'],O['('],l);break}case O['{']:{Se(e,o);break}case T.TK_STRING:{F(e,o,e.t.seminfo.ts),_.luaX_next(e);break}default:_.luaX_syntaxerror(e,s.to_luastring('function arguments expected',!0));}n(t.k===b.VNONRELOC);let i=t.u.info,c;m(o.k)?c=s.LUA_MULTRET:(o.k!==b.VVOID&&u.luaK_exp2nextreg(r,o),c=r.freereg-(i+1)),j(t,b.VCALL,u.luaK_codeABC(r,h.OP_CALL,i,c+1,2)),u.luaK_fixline(r,l),r.freereg=i+1},ye=function(e,t){switch(e.t.token){case O['(']:{let l=e.linenumber;return _.luaX_next(e),Ve(e,t),G(e,O[')'],O['('],l),void u.luaK_dischargevars(e.fs,t)}case T.TK_NAME:return void ae(e,t);default:_.luaX_syntaxerror(e,s.to_luastring('unexpected symbol',!0));}},Ce=function(e,t){let l=e.fs,n=e.linenumber;for(ye(e,t);;)switch(e.t.token){case O['.']:{Oe(e,t);break}case O['[']:{let n=new k;u.luaK_exp2anyregup(l,t),me(e,n),u.luaK_indexed(l,t,n);break}case O[':']:{let s=new k;_.luaX_next(e),X(e,s),u.luaK_self(l,t,s),Pe(e,t,n);break}case O['(']:case T.TK_STRING:case O['{']:{u.luaK_exp2nextreg(l,t),Pe(e,t,n);break}default:return;}},De=function(e,t){switch(e.t.token){case T.TK_FLT:{j(t,b.VKFLT,0),t.u.nval=e.t.seminfo.r;break}case T.TK_INT:{j(t,b.VKINT,0),t.u.ival=e.t.seminfo.i;break}case T.TK_STRING:{F(e,t,e.t.seminfo.ts);break}case T.TK_NIL:{j(t,b.VNIL,0);break}case T.TK_TRUE:{j(t,b.VTRUE,0);break}case T.TK_FALSE:{j(t,b.VFALSE,0);break}case T.TK_DOTS:{let l=e.fs;w(e,l.f.is_vararg,s.to_luastring('cannot use \'...\' outside a vararg function',!0)),j(t,b.VVARARG,u.luaK_codeABC(l,h.OP_VARARG,0,1,0));break}case O['{']:return void Se(e,t);case T.TK_FUNCTION:return _.luaX_next(e),void Ne(e,t,0,e.linenumber);default:return void Ce(e,t);}_.luaX_next(e)},Ke=function(e){return e===T.TK_NOT?x.OPR_NOT:e===O['-']?x.OPR_MINUS:e===O['~']?x.OPR_BNOT:e===O['#']?x.OPR_LEN:x.OPR_NOUNOPR},Be=function(e){return e===O['+']?L.OPR_ADD:e===O['-']?L.OPR_SUB:e===O['*']?L.OPR_MUL:e===O['%']?L.OPR_MOD:e===O['^']?L.OPR_POW:e===O['/']?L.OPR_DIV:e===T.TK_IDIV?L.OPR_IDIV:e===O['&']?L.OPR_BAND:e===O['|']?L.OPR_BOR:e===O['~']?L.OPR_BXOR:e===T.TK_SHL?L.OPR_SHL:e===T.TK_SHR?L.OPR_SHR:e===T.TK_CONCAT?L.OPR_CONCAT:e===T.TK_NE?L.OPR_NE:e===T.TK_EQ?L.OPR_EQ:e===O['<']?L.OPR_LT:e===T.TK_LE?L.OPR_LE:e===O['>']?L.OPR_GT:e===T.TK_GE?L.OPR_GE:e===T.TK_AND?L.OPR_AND:e===T.TK_OR?L.OPR_OR:L.OPR_NOBINOPR},we=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],Ge=function(e,t,l){ne(e);let n=Ke(e.t.token);if(n!==x.OPR_NOUNOPR){let l=e.linenumber;_.luaX_next(e),Ge(e,t,12),u.luaK_prefix(e.fs,n,t,l)}else De(e,t);let s=Be(e.t.token);for(;s!==L.OPR_NOBINOPR&&we[s].left>l;){let l=new k,n=e.linenumber;_.luaX_next(e),u.luaK_infix(e.fs,s,t);let r=Ge(e,l,we[s].right);u.luaK_posfix(e.fs,s,t,l,n),s=r}return se(e),s},Ve=function(e,t){Ge(e,t,0)},je=function(e){let t=e.fs,l=new E;pe(t,l,0),xe(e),he(t)};class Fe{constructor(){this.prev=null,this.v=new k}}const Xe=function(e,t,l){let n=e.fs,s=n.freereg,r=!1;for(;t;t=t.prev)t.v.k===b.VINDEXED&&(t.v.u.ind.vt===l.k&&t.v.u.ind.t===l.u.info&&(r=!0,t.v.u.ind.vt=b.VLOCAL,t.v.u.ind.t=s),l.k===b.VLOCAL&&t.v.u.ind.idx===l.u.info&&(r=!0,t.v.u.ind.idx=s));if(r){let e=l.k===b.VLOCAL?h.OP_MOVE:h.OP_GETUPVAL;u.luaK_codeABC(n,e,s,l.u.info,0),u.luaK_reserveregs(n,1)}},He=function(t,l,n){let r=new k;if(w(t,v(l.v.k),s.to_luastring('syntax error',!0)),D(t,O[','])){let e=new Fe;e.prev=l,Ce(t,e.v),e.v.k!==b.VINDEXED&&Xe(t,l,e.v),C(t.fs,n+t.L.nCcalls,i.LUAI_MAXCCALLS,s.to_luastring('JS levels',!0)),He(t,e,n+1)}else{B(t,O['=']);let e=Me(t,r);if(e!==n)le(t,n,e,r);else return u.luaK_setoneret(t.fs,r),void u.luaK_storevar(t.fs,l.v,r)}j(r,b.VNONRELOC,t.fs.freereg-1),u.luaK_storevar(t.fs,l.v,r)},Ye=function(e){let t=new k;return Ve(e,t),t.k===b.VNIL&&(t.k=b.VFALSE),u.luaK_goiftrue(e.fs,t),t.f},ze=function(e,t){let l=e.linenumber,n;D(e,T.TK_GOTO)?n=V(e):(_.luaX_next(e),n=f.luaS_newliteral(e.L,'break'));let s=oe(e,e.dyd.gt,n,l,t);re(e,s)},Je=function(e,t,l){for(let n=e.bl.firstlabel;n<t.n;n++)if(U(l,t.arr[n].name)){let u=c.luaO_pushfstring(e.ls.L,s.to_luastring('label \'%s\' already defined on line %d',!0),l.getstr(),t.arr[n].line);M(e.ls,u)}},Ze=function(e){for(;e.t.token===O[';']||e.t.token===T.TK_DBCOLON;)ct(e)},qe=function(e,t,n){let s=e.fs,r=e.dyd.label,o;Je(s,r,t),B(e,T.TK_DBCOLON),o=oe(e,r,t,n,u.luaK_getlabel(s)),Ze(e),Te(e,0)&&(r.arr[o].nactvar=s.bl.nactvar),_e(e,r.arr[o])},We=function(e,t){let l=e.fs,n=new E;_.luaX_next(e);let s=u.luaK_getlabel(l),r=Ye(e);pe(l,n,1),B(e,T.TK_DO),je(e),u.luaK_jumpto(l,s),G(e,T.TK_END,T.TK_WHILE,t),he(l),u.luaK_patchtohere(l,r)},Qe=function(e,t){let l=e.fs,n=u.luaK_getlabel(l),s=new E,r=new E;pe(l,s,1),pe(l,r,0),_.luaX_next(e),xe(e),G(e,T.TK_UNTIL,T.TK_REPEAT,t);let o=Ye(e);r.upval&&u.luaK_patchclose(l,o,r.nactvar),he(l),u.luaK_patchlist(l,o,n),he(l)},$e=function(t){let l=new k;Ve(t,l),u.luaK_exp2nextreg(t.fs,l),n(l.k===b.VNONRELOC);let e=l.u.info;return e},et=function(e,t,l,n,s){let r=new E,o=e.fs,_;Z(e,3),B(e,T.TK_DO);let i=s?u.luaK_codeAsBx(o,h.OP_FORPREP,t,u.NO_JUMP):u.luaK_jump(o);pe(o,r,0),Z(e,n),u.luaK_reserveregs(o,n),je(e),he(o),u.luaK_patchtohere(o,i),s?_=u.luaK_codeAsBx(o,h.OP_FORLOOP,t,u.NO_JUMP):(u.luaK_codeABC(o,h.OP_TFORCALL,t,0,n),u.luaK_fixline(o,l),_=u.luaK_codeAsBx(o,h.OP_TFORLOOP,t+2,u.NO_JUMP)),u.luaK_patchlist(o,_,i+1),u.luaK_fixline(o,l)},tt=function(e,t,l){let n=e.fs,s=n.freereg;z(e,'(for index)'),z(e,'(for limit)'),z(e,'(for step)'),Y(e,t),B(e,O['=']),$e(e),B(e,O[',']),$e(e),D(e,O[','])?$e(e):(u.luaK_codek(n,n.freereg,u.luaK_intK(n,1)),u.luaK_reserveregs(n,1)),et(e,s,l,1,1)},at=function(t,l){let n=t.fs,s=new k,e=4,r=n.freereg;for(z(t,'(for generator)'),z(t,'(for state)'),z(t,'(for control)'),Y(t,l);D(t,O[',']);)Y(t,V(t)),e++;B(t,T.TK_IN);let o=t.linenumber;le(t,3,Me(t,s),s),u.luaK_checkstack(n,3),et(t,r,o,e-3,0)},lt=function(e,t){let l=e.fs,n=new E;pe(l,n,1),_.luaX_next(e);let u=V(e);switch(e.t.token){case O['=']:tt(e,u,t);break;case O[',']:case T.TK_IN:at(e,u);break;default:_.luaX_syntaxerror(e,s.to_luastring('\'=\' or \'in\' expected',!0));}G(e,T.TK_END,T.TK_FOR,t),he(l)},nt=function(e,t){let l=new E,n=e.fs,s=new k,r;if(_.luaX_next(e),Ve(e,s),B(e,T.TK_THEN),e.t.token===T.TK_GOTO||e.t.token===T.TK_BREAK){for(u.luaK_goiffalse(e.fs,s),pe(n,l,!1),ze(e,s.t);D(e,O[';']););if(Te(e,0))return he(n),t;r=u.luaK_jump(n)}else u.luaK_goiftrue(e.fs,s),pe(n,l,!1),r=s.f;return xe(e),he(n),(e.t.token===T.TK_ELSE||e.t.token===T.TK_ELSEIF)&&(t=u.luaK_concat(n,t,u.luaK_jump(n))),u.luaK_patchtohere(n,r),t},st=function(e,t){let l=e.fs,n=u.NO_JUMP;for(n=nt(e,n);e.t.token===T.TK_ELSEIF;)n=nt(e,n);D(e,T.TK_ELSE)&&je(e),G(e,T.TK_END,T.TK_IF,t),u.luaK_patchtohere(l,n)},ut=function(e){let t=new k,l=e.fs;Y(e,V(e)),Z(e,1),Ne(e,t,0,e.linenumber),J(l,t.u.info).startpc=l.pc},rt=function(t){let l=0,n=new k,e;do Y(t,V(t)),l++;while(D(t,O[',']));D(t,O['='])?e=Me(t,n):(n.k=b.VVOID,e=0),le(t,l,e,n),Z(t,l)},ot=function(e,t){let l=0;for(ae(e,t);e.t.token===O['.'];)Oe(e,t);return e.t.token===O[':']&&(l=1,Oe(e,t)),l},_t=function(e,t){let l=new k,n=new k;_.luaX_next(e);let s=ot(e,l);Ne(e,n,s,t),u.luaK_storevar(e.fs,l,n),u.luaK_fixline(e.fs,t)},it=function(e){let t=e.fs,l=new Fe;Ce(e,l.v),e.t.token===O['=']||e.t.token===O[',']?(l.prev=null,He(e,l,1)):(w(e,l.v.k===b.VCALL,s.to_luastring('syntax error',!0)),d.SETARG_C(u.getinstruction(t,l.v),1))},pt=function(t){let l=t.fs,r=new k,e,o;Te(t,1)||t.t.token===O[';']?e=o=0:(o=Me(t,r),m(r.k)?(u.luaK_setmultret(l,r),r.k===b.VCALL&&1===o&&(d.SET_OPCODE(u.getinstruction(l,r),h.OP_TAILCALL),n(u.getinstruction(l,r).A===l.nactvar)),e=l.nactvar,o=s.LUA_MULTRET):1===o?e=u.luaK_exp2anyreg(l,r):(u.luaK_exp2nextreg(l,r),e=l.nactvar,n(o==l.freereg-e))),u.luaK_ret(l,e,o),D(t,O[';'])},ct=function(e){let t=e.linenumber;switch(ne(e),e.t.token){case O[';']:{_.luaX_next(e);break}case T.TK_IF:{st(e,t);break}case T.TK_WHILE:{We(e,t);break}case T.TK_DO:{_.luaX_next(e),je(e),G(e,T.TK_END,T.TK_DO,t);break}case T.TK_FOR:{lt(e,t);break}case T.TK_REPEAT:{Qe(e,t);break}case T.TK_FUNCTION:{_t(e,t);break}case T.TK_LOCAL:{_.luaX_next(e),D(e,T.TK_FUNCTION)?ut(e):rt(e);break}case T.TK_DBCOLON:{_.luaX_next(e),qe(e,V(e),t);break}case T.TK_RETURN:{_.luaX_next(e),pt(e);break}case T.TK_BREAK:case T.TK_GOTO:{ze(e,u.luaK_jump(e.fs));break}default:{it(e);break}}n(e.fs.f.maxstacksize>=e.fs.freereg&&e.fs.freereg>=e.fs.nactvar),e.fs.freereg=e.fs.nactvar,se(e)},dt=function(e,t){let l=new E,n=new k;Le(e,t,l),t.f.is_vararg=!0,j(n,b.VLOCAL,0),Q(t,e.envn,n),_.luaX_next(e),xe(e),K(e,T.TK_EOS),Ae(e)};e.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new N,this.label=new N}},e.exports.expkind=b,e.exports.expdesc=k,e.exports.luaY_parser=function(e,t,l,s,u,i){let c=new _.LexState,d=new R,L=o.luaF_newLclosure(e,1);return r.luaD_inctop(e),e.stack[e.top-1].setclLvalue(L),c.h=g.luaH_new(e),r.luaD_inctop(e),e.stack[e.top-1].sethvalue(c.h),d.f=L.p=new A(e),d.f.source=f.luaS_new(e,u),c.buff=l,c.dyd=s,s.actvar.n=s.gt.n=s.label.n=0,_.luaX_setinput(e,c,t,d.f.source,i),dt(c,d),n(!d.prev&&1===d.nups&&!c.fs),n(0===s.actvar.n&&0===s.gt.n&&0===s.label.n),delete e.stack[--e.top],L},e.exports.vkisinreg=function(e){return e===b.VNONRELOC||e===b.VLOCAL}},function(e,t,l){'use strict';const n=l(0),u=l(1),s=l(11),r=l(7),o=l(26),_=l(3),c=l(9),i=l(8),d=l(5),g=l(21),f=u.thread_status,L=u.char,h=257,A={TK_AND:h,TK_BREAK:h+1,TK_DO:h+2,TK_ELSE:h+3,TK_ELSEIF:h+4,TK_END:h+5,TK_FALSE:h+6,TK_FOR:h+7,TK_FUNCTION:h+8,TK_GOTO:h+9,TK_IF:h+10,TK_IN:h+11,TK_LOCAL:h+12,TK_NIL:h+13,TK_NOT:h+14,TK_OR:h+15,TK_REPEAT:h+16,TK_RETURN:h+17,TK_THEN:h+18,TK_TRUE:h+19,TK_UNTIL:h+20,TK_WHILE:h+21,TK_IDIV:h+22,TK_CONCAT:h+23,TK_DOTS:h+24,TK_EQ:h+25,TK_GE:h+26,TK_LE:h+27,TK_NE:h+28,TK_SHL:h+29,TK_SHR:h+30,TK_DBCOLON:h+31,TK_EOS:h+32,TK_FLT:h+33,TK_INT:h+34,TK_NAME:h+35,TK_STRING:h+36},T=A,x=['and','break','do','else','elseif','end','false','for','function','goto','if','in','local','nil','not','or','repeat','return','then','true','until','while','//','..','...','==','>=','<=','~=','<<','>>','::','<eof>','<number>','<integer>','<name>','<string>'];class O{constructor(){this.r=NaN,this.i=NaN,this.ts=null}}class m{constructor(){this.token=NaN,this.seminfo=new O}}const U=function(e,t){let l=e.buff;l.n+1>l.buffer.length&&l.buffer.length>=d.MAX_INT/2&&y(e,u.to_luastring('lexical element too long',!0),0),l.buffer[l.n++]=0>t?255+t+1:t},E=function(e,t){if(t<h)return _.luaO_pushfstring(e.L,u.to_luastring('\'%c\'',!0),t);let l=x[t-h];return t<T.TK_EOS?_.luaO_pushfstring(e.L,u.to_luastring('\'%s\'',!0),u.to_luastring(l)):u.to_luastring(l)},b=function(e){return e.current===L['\n']||e.current===L['\r']},v=function(e){e.current=e.z.zgetc()},k=function(e){U(e,e.current),v(e)},R=function(e,t){let l=e.L,s=c.luaS_new(l,t),r=i.luaH_set(l,e.h,new _.TValue(u.CT.LUA_TLNGSTR,s));if(r.ttisnil())r.setbvalue(!0);else{let t=e.h.strong.get(c.luaS_hashlongstr(s));n(t.value==r),s=t.key.tsvalue()}return s},S=function(e){let t=e.current;n(b(e)),v(e),b(e)&&e.current!==t&&v(e),++e.linenumber>=d.MAX_INT&&y(e,u.to_luastring('chunk has too many lines',!0),0)},I=function(e,t){return!(e.current!==t.charCodeAt(0))&&(v(e),!0)},N=function(e,t){return(e.current===t[0].charCodeAt(0)||e.current===t[1].charCodeAt(0))&&(k(e),!0)},M=function(e,t){let l='Ee',s=e.current;for(n(o.lisdigit(e.current)),k(e),s===L[0]&&N(e,'xX')&&(l='Pp');;)if(N(e,l)&&N(e,'-+'),o.lisxdigit(e.current))k(e);else if(e.current===L['.'])k(e);else break;let r=_.luaO_str2num(e.buff.buffer);return!1===r&&y(e,u.to_luastring('malformed number',!0),T.TK_FLT),r.ttisinteger()?(t.i=r.value,T.TK_INT):(n(r.ttisfloat()),t.r=r.value,T.TK_FLT)},P=function(e,t){return t===T.TK_NAME||t===T.TK_STRING||t===T.TK_FLT||t===T.TK_INT?_.luaO_pushfstring(e.L,u.to_luastring('\'%s\'',!0),e.buff.buffer):E(e,t)},y=function(e,t,l){t=s.luaG_addinfo(e.L,t,e.source,e.linenumber),l&&_.luaO_pushfstring(e.L,u.to_luastring('%s near %s'),t,P(e,l)),r.luaD_throw(e.L,f.LUA_ERRSYNTAX)},C=function(e){let t=0,l=e.current;for(n(l===L['[']||l===L[']']),k(e);e.current===L['='];)k(e),t++;return e.current===l?t:-t-1},D=function(e,t,l){let n=e.linenumber;k(e),b(e)&&S(e);for(let s=!1;!s;)switch(e.current){case g.EOZ:{let l=t?'string':'comment',s=`unfinished long ${l} (starting at line ${n})`;y(e,u.to_luastring(s),T.TK_EOS);break}case L[']']:{C(e)===l&&(k(e),s=!0);break}case L['\n']:case L['\r']:{U(e,L['\n']),S(e),t||g.luaZ_resetbuffer(e.buff);break}default:t?k(e):v(e);}t&&(t.ts=R(e,e.buff.buffer.slice(2+l,2+l-2*(2+l))))},K=function(e,t,l){t||(e.current!==g.EOZ&&k(e),y(e,l,T.TK_STRING))},B=function(e){return k(e),K(e,o.lisxdigit(e.current),u.to_luastring('hexadecimal digit expected',!0)),_.luaO_hexavalue(e.current)},w=function(e){let t=B(e);return t=(t<<4)+B(e),g.luaZ_buffremove(e.buff,2),t},G=function(e){let t=4;k(e),K(e,e.current===L['{'],u.to_luastring('missing \'{\'',!0));let l=B(e);for(k(e);o.lisxdigit(e.current);)t++,l=(l<<4)+_.luaO_hexavalue(e.current),K(e,1114111>=l,u.to_luastring('UTF-8 value too large',!0)),k(e);return K(e,e.current===L['}'],u.to_luastring('missing \'}\'',!0)),v(e),g.luaZ_buffremove(e.buff,t),l},V=function(e){let t=_.luaO_utf8esc(G(e)),l=t.buff;for(let s=t.n;0<s;s--)U(e,l[_.UTF8BUFFSZ-s])},j=function(e){let t=0,l;for(l=0;3>l&&o.lisdigit(e.current);l++)t=10*t+e.current-L[0],k(e);return K(e,255>=t,u.to_luastring('decimal escape too large',!0)),g.luaZ_buffremove(e.buff,l),t},F=function(e,t,l){for(k(e);e.current!==t;)switch(e.current){case g.EOZ:y(e,u.to_luastring('unfinished string',!0),T.TK_EOS);break;case L['\n']:case L['\r']:y(e,u.to_luastring('unfinished string',!0),T.TK_STRING);break;case L['\\']:{k(e);let t,l;switch(e.current){case L.a:l=7,t='read_save';break;case L.b:l=L['\b'],t='read_save';break;case L.f:l=L['\f'],t='read_save';break;case L.n:l=L['\n'],t='read_save';break;case L.r:l=L['\r'],t='read_save';break;case L.t:l=L['\t'],t='read_save';break;case L.v:l=L['\x0B'],t='read_save';break;case L.x:l=w(e),t='read_save';break;case L.u:V(e),t='no_save';break;case L['\n']:case L['\r']:S(e),l=L['\n'],t='only_save';break;case L['\\']:case L['"']:case L['\'']:l=e.current,t='read_save';break;case g.EOZ:t='no_save';break;case L.z:{for(g.luaZ_buffremove(e.buff,1),v(e);o.lisspace(e.current);)b(e)?S(e):v(e);t='no_save';break}default:{K(e,o.lisdigit(e.current),u.to_luastring('invalid escape sequence',!0)),l=j(e),t='only_save';break}}'read_save'===t&&v(e),('read_save'===t||'only_save'===t)&&(g.luaZ_buffremove(e.buff,1),U(e,l));break}default:k(e);}k(e),l.ts=R(e,e.buff.buffer.slice(1,e.buff.n-1))},X=Object.create(null);x.forEach((t,e)=>X[c.luaS_hash(u.to_luastring(t))]=e);const H=function(e,t){for(g.luaZ_resetbuffer(e.buff);;)switch(n('number'==typeof e.current),e.current){case L['\n']:case L['\r']:{S(e);break}case L[' ']:case L['\f']:case L['\t']:case L['\x0B']:{v(e);break}case L['-']:{if(v(e),e.current!==L['-'])return L['-'];if(v(e),e.current===L['[']){let t=C(e);if(g.luaZ_resetbuffer(e.buff),0<=t){D(e,null,t),g.luaZ_resetbuffer(e.buff);break}}for(;!b(e)&&e.current!==g.EOZ;)v(e);break}case L['[']:{let l=C(e);return 0<=l?(D(e,t,l),T.TK_STRING):(-1!==l&&y(e,u.to_luastring('invalid long string delimiter',!0),T.TK_STRING),L['['])}case L['=']:return v(e),I(e,'=')?T.TK_EQ:L['='];case L['<']:return v(e),I(e,'=')?T.TK_LE:I(e,'<')?T.TK_SHL:L['<'];case L['>']:return v(e),I(e,'=')?T.TK_GE:I(e,'>')?T.TK_SHR:L['>'];case L['/']:return v(e),I(e,'/')?T.TK_IDIV:L['/'];case L['~']:return v(e),I(e,'=')?T.TK_NE:L['~'];case L[':']:return v(e),I(e,':')?T.TK_DBCOLON:L[':'];case L['"']:case L['\'']:return F(e,e.current,t),T.TK_STRING;case L['.']:return k(e),I(e,'.')?I(e,'.')?T.TK_DOTS:T.TK_CONCAT:o.lisdigit(e.current)?M(e,t):L['.'];case L[0]:case L[1]:case L[2]:case L[3]:case L[4]:case L[5]:case L[6]:case L[7]:case L[8]:case L[9]:return M(e,t);case g.EOZ:return T.TK_EOS;default:{if(o.lislalpha(e.current)){do k(e);while(o.lislalnum(e.current));let l=R(e,e.buff.buffer);t.ts=l;let n=X[c.luaS_hashlongstr(l)];return void 0!==n&&22>=n?n+h:T.TK_NAME}let l=e.current;return v(e),l}}};e.exports.FIRST_RESERVED=h,e.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new m,this.lookahead=new m,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},e.exports.RESERVED=A,e.exports.isreserved=function(e){let t=X[c.luaS_hashlongstr(e)];return void 0!==t&&22>=t},e.exports.luaX_lookahead=function(e){return n(e.lookahead.token===T.TK_EOS),e.lookahead.token=H(e,e.lookahead.seminfo),e.lookahead.token},e.exports.luaX_newstring=R,e.exports.luaX_next=function(e){e.lastline=e.linenumber,e.lookahead.token===T.TK_EOS?e.t.token=H(e,e.t.seminfo):(e.t.token=e.lookahead.token,e.t.seminfo.i=e.lookahead.seminfo.i,e.t.seminfo.r=e.lookahead.seminfo.r,e.t.seminfo.ts=e.lookahead.seminfo.ts,e.lookahead.token=T.TK_EOS)},e.exports.luaX_setinput=function(e,t,l,n,s){t.t={token:0,seminfo:new O},t.L=e,t.current=s,t.lookahead={token:T.TK_EOS,seminfo:new O},t.z=l,t.fs=null,t.linenumber=1,t.lastline=1,t.source=n,t.envn=c.luaS_newliteral(e,'_ENV')},e.exports.luaX_syntaxerror=function(e,t){y(e,t,e.t.token)},e.exports.luaX_token2str=E,e.exports.luaX_tokens=x},function(e,t,l){'use strict';const n=l(2),s=l(44),u='_'+n.LUA_VERSION_MAJOR+'_'+n.LUA_VERSION_MINOR;e.exports.LUA_VERSUFFIX=u;e.exports.LUA_COLIBNAME='coroutine',e.exports.luaopen_coroutine=l(30).luaopen_coroutine;e.exports.LUA_TABLIBNAME='table',e.exports.luaopen_table=l(33).luaopen_table;e.exports.LUA_OSLIBNAME='os',e.exports.luaopen_os=l(36).luaopen_os;e.exports.LUA_STRLIBNAME='string',e.exports.luaopen_string=l(32).luaopen_string;e.exports.LUA_UTF8LIBNAME='utf8',e.exports.luaopen_utf8=l(34).luaopen_utf8;e.exports.LUA_BITLIBNAME='bit32';e.exports.LUA_MATHLIBNAME='math',e.exports.luaopen_math=l(31).luaopen_math;e.exports.LUA_DBLIBNAME='debug',e.exports.luaopen_debug=l(35).luaopen_debug;e.exports.LUA_LOADLIBNAME='package',e.exports.luaopen_package=l(37).luaopen_package,e.exports.luaL_openlibs=s.luaL_openlibs},function(e,t,l){'use strict';const n=l(2),s=l(6),u=function(e){let t=n.lua_tothread(e,1);return s.luaL_argcheck(e,t,1,n.to_luastring('thread expected',!0)),t},o=function(e,t,l){if(!n.lua_checkstack(t,l))return n.lua_pushliteral(e,'too many arguments to resume'),-1;if(n.lua_status(t)===n.LUA_OK&&0===n.lua_gettop(t))return n.lua_pushliteral(e,'cannot resume dead coroutine'),-1;n.lua_xmove(e,t,l);let s=n.lua_resume(t,e,l);if(s===n.LUA_OK||s===n.LUA_YIELD){let l=n.lua_gettop(t);return n.lua_checkstack(e,l+1)?(n.lua_xmove(t,e,l),l):(n.lua_pop(t,l),n.lua_pushliteral(e,'too many results to resume'),-1)}return n.lua_xmove(t,e,1),-1},r=function(e){let t=n.lua_tothread(e,n.lua_upvalueindex(1)),l=o(e,t,n.lua_gettop(e));return 0>l?(n.lua_type(e,-1)===n.LUA_TSTRING&&(s.luaL_where(e,1),n.lua_insert(e,-2),n.lua_concat(e,2)),n.lua_error(e)):l},_=function(e){s.luaL_checktype(e,1,n.LUA_TFUNCTION);let t=n.lua_newthread(e);return n.lua_pushvalue(e,1),n.lua_xmove(e,t,1),1},i={create:_,isyieldable:function(e){return n.lua_pushboolean(e,n.lua_isyieldable(e)),1},resume:function(e){let t=u(e),l=o(e,t,n.lua_gettop(e)-1);return 0>l?(n.lua_pushboolean(e,0),n.lua_insert(e,-2),2):(n.lua_pushboolean(e,1),n.lua_insert(e,-(l+1)),l+1)},running:function(e){return n.lua_pushboolean(e,n.lua_pushthread(e)),2},status:function(e){let t=u(e);if(e===t)n.lua_pushliteral(e,'running');else switch(n.lua_status(t)){case n.LUA_YIELD:n.lua_pushliteral(e,'suspended');break;case n.LUA_OK:{let l=new n.lua_Debug;0<n.lua_getstack(t,0,l)?n.lua_pushliteral(e,'normal'):0===n.lua_gettop(t)?n.lua_pushliteral(e,'dead'):n.lua_pushliteral(e,'suspended');break}default:n.lua_pushliteral(e,'dead');}return 1},wrap:function(e){return _(e),n.lua_pushcclosure(e,r,1),1},yield:function(e){return n.lua_yield(e,n.lua_gettop(e))}};e.exports.luaopen_coroutine=function(e){return s.luaL_newlib(e,i),1}},function(e,t,l){'use strict';var n=Math.PI,s=Math.log,u=Math.ceil,r=Math.abs,o=Math.floor;const _=l(50),c=l(2),i=l(6),d=l(5),g=l(10);var f=_();const h=function(e,t){let l=g.lua_numbertointeger(t);!1===l?c.lua_pushnumber(e,t):c.lua_pushinteger(e,l)},A={abs:function(e){if(c.lua_isinteger(e,1)){let t=c.lua_tointeger(e,1);0>t&&(t=0|-t),c.lua_pushinteger(e,t)}else c.lua_pushnumber(e,r(i.luaL_checknumber(e,1)));return 1},acos:function(e){return c.lua_pushnumber(e,Math.acos(i.luaL_checknumber(e,1))),1},asin:function(e){return c.lua_pushnumber(e,Math.asin(i.luaL_checknumber(e,1))),1},atan:function(e){let t=i.luaL_checknumber(e,1),l=i.luaL_optnumber(e,2,1);return c.lua_pushnumber(e,Math.atan2(t,l)),1},ceil:function(e){return c.lua_isinteger(e,1)?c.lua_settop(e,1):h(e,u(i.luaL_checknumber(e,1))),1},cos:function(e){return c.lua_pushnumber(e,Math.cos(i.luaL_checknumber(e,1))),1},deg:function(e){return c.lua_pushnumber(e,i.luaL_checknumber(e,1)*(180/n)),1},exp:function(e){return c.lua_pushnumber(e,Math.exp(i.luaL_checknumber(e,1))),1},floor:function(e){return c.lua_isinteger(e,1)?c.lua_settop(e,1):h(e,o(i.luaL_checknumber(e,1))),1},fmod:function(e){if(c.lua_isinteger(e,1)&&c.lua_isinteger(e,2)){let t=c.lua_tointeger(e,2);0===t?i.luaL_argerror(e,2,c.to_luastring('zero',!0)):c.lua_pushinteger(e,0|c.lua_tointeger(e,1)%t)}else{let t=i.luaL_checknumber(e,1),l=i.luaL_checknumber(e,2);c.lua_pushnumber(e,t%l)}return 1},log:function(e){let t=i.luaL_checknumber(e,1),l;if(c.lua_isnoneornil(e,2))l=s(t);else{let n=i.luaL_checknumber(e,2);l=2===n?Math.log2(t):10===n?Math.log10(t):s(t)/s(n)}return c.lua_pushnumber(e,l),1},max:function(e){let t=c.lua_gettop(e),l=1;i.luaL_argcheck(e,1<=t,1,c.to_luastring('value expected',!0));for(let n=2;n<=t;n++)c.lua_compare(e,l,n,c.LUA_OPLT)&&(l=n);return c.lua_pushvalue(e,l),1},min:function(e){let t=c.lua_gettop(e),l=1;i.luaL_argcheck(e,1<=t,1,c.to_luastring('value expected',!0));for(let n=2;n<=t;n++)c.lua_compare(e,n,l,c.LUA_OPLT)&&(l=n);return c.lua_pushvalue(e,l),1},modf:function(e){if(c.lua_isinteger(e,1))c.lua_settop(e,1),c.lua_pushnumber(e,0);else{let t=i.luaL_checknumber(e,1),l=0>t?u(t):o(t);h(e,l),c.lua_pushnumber(e,t===l?0:t-l)}return 2},rad:function(e){return c.lua_pushnumber(e,i.luaL_checknumber(e,1)*(n/180)),1},random:function(e){let t=f(),l,n;switch(c.lua_gettop(e)){case 0:return c.lua_pushnumber(e,t),1;case 1:{l=1,n=i.luaL_checkinteger(e,1);break}case 2:{l=i.luaL_checkinteger(e,1),n=i.luaL_checkinteger(e,2);break}default:return i.luaL_error(e,c.to_luastring('wrong number of arguments',!0));}return i.luaL_argcheck(e,l<=n,1,c.to_luastring('interval is empty',!0)),i.luaL_argcheck(e,0<=l||n<=d.MAX_INT+l,1,c.to_luastring('interval too large',!0)),t*=n-l+1,c.lua_pushinteger(e,o(t)+l),1},randomseed:function(e){return f=_(r(i.luaL_checknumber(e,1))),0},sin:function(e){return c.lua_pushnumber(e,Math.sin(i.luaL_checknumber(e,1))),1},sqrt:function(e){return c.lua_pushnumber(e,Math.sqrt(i.luaL_checknumber(e,1))),1},tan:function(e){return c.lua_pushnumber(e,Math.tan(i.luaL_checknumber(e,1))),1},tointeger:function(e){let t=c.lua_tointegerx(e,1);return!1===t?(i.luaL_checkany(e,1),c.lua_pushnil(e)):c.lua_pushinteger(e,t),1},type:function(e){return c.lua_type(e,1)===c.LUA_TNUMBER?c.lua_isinteger(e,1)?c.lua_pushliteral(e,'integer'):c.lua_pushliteral(e,'float'):(i.luaL_checkany(e,1),c.lua_pushnil(e)),1},ult:function(e){let t=i.luaL_checkinteger(e,1),l=i.luaL_checkinteger(e,2);return c.lua_pushboolean(e,0<=t?0>l||t<l:0>l&&t<l),1}};e.exports.luaopen_math=function(e){return i.luaL_newlib(e,A),c.lua_pushnumber(e,Math.PI),c.lua_setfield(e,-2,c.to_luastring('pi',!0)),c.lua_pushnumber(e,Infinity),c.lua_setfield(e,-2,c.to_luastring('huge',!0)),c.lua_pushinteger(e,d.MAX_INT),c.lua_setfield(e,-2,c.to_luastring('maxinteger',!0)),c.lua_pushinteger(e,d.MIN_INT),c.lua_setfield(e,-2,c.to_luastring('mininteger',!0)),1}},function(e,t,l){'use strict';var u=String.fromCharCode;const n=l(0),r=l(25).sprintf,_=l(6),c=l(2),s=l(10),o=l(5),d='%'.charCodeAt(0),i=2147483647,g=function(e){let t=e.indexOf(0);return-1<t?t:e.length},f=function(e,t){return 0<=e?e:0-e>t?0:t+e+1},h=function(e,t,l,n){return n.push(...t.slice(0,l)),0},A=s.LUA_NUMBER_FRMLEN.length+1,L=1,T=function(e,t,l){let n=Math.floor(l);return e[t]=10>n?n+48:n-10+97,l-n},O=function(t){if(Object.is(t,Infinity))return c.to_luastring('inf',!0).slice(0);if(Object.is(t,-Infinity))return c.to_luastring('-inf',!0).slice(0);if(Number.isNaN(t))return c.to_luastring('nan',!0).slice(0);if(0===t){let e=r(s.LUA_NUMBER_FMT+'x0p+0',t);return Object.is(t,-0)&&(e='-'+e),c.to_luastring(e)}let l=[],u=s.frexp(t),o=u[0],_=u[1],e=0;if(0>o&&(l[e++]=45,o=-o),l[e++]=48,l[e++]=120,o=T(l,e++,o*(1<<L)),_-=L,0<o){l[e++]=s.lua_getlocaledecpoint().charCodeAt(0);do o=T(l,e++,16*o);while(0<o)}let n=c.to_luastring(r('p%+d',_));return l.concat(n)},x=function(e,t,l){let n=O(l);if(t[A]===65)for(let e=0;e<n.length;e++)n[e]=u(n[e]).toUpperCase().charCodeAt(0);else 97!==t[A]&&_.luaL_error(e,c.to_luastring('modifiers for format \'%%a\'/\'%%A\' not implemented'));return n},m=[45,43,32,35,48],U=(t)=>97<=t&&t<=122||t>=65&&t<=90,E=(t)=>48<=t&&t<=57,v=(t)=>0<=t&&31>=t||127===t,b=(t)=>32<t&&127>t,k=(t)=>/^[a-z]$/.test(u(t)),R=(t)=>/^[A-Z]$/.test(u(t)),S=(t)=>/^[a-zA-Z0-9]$/.test(u(t)),I=(t)=>b(t)&&!S(t),N=(t)=>/^\s$/.test(u(t)),M=(t)=>/^[0-9A-Fa-f]$/.test(u(t)),P=function(e,t){for(let l=0;l<t.length;l++)e.push(t[l])},y=function(e,t){e.push(34);for(let l=t.length;l--;){if(t[0]===34||t[0]===92||t[0]===10)e.push(92),e.push(t[0]);else if(v(t[0])){let l=[];l=E(t[1])?c.to_luastring(r('\\%03d',t[0])):c.to_luastring(r('\\%d',t[0])),P(e,l)}else e.push(t[0]);t=t.slice(1)}e.push(34)},C=function(e){if(0>e.indexOf(46)){let t=s.lua_getlocaledecpoint().charCodeAt(0),l=e.indexOf(t);l&&(e[l]='.')}},D=function(e,t,l){switch(c.lua_type(e,l)){case c.LUA_TSTRING:{let n=c.lua_tostring(e,l);y(t,n,n.length);break}case c.LUA_TNUMBER:{if(!c.lua_isinteger(e,l)){let u=c.lua_tonumber(e,l);P(t,x(e,c.to_luastring(`%${s.LUA_INTEGER_FRMLEN}a`),u)),C(t)}else{let u=c.lua_tointeger(e,l),n=u===o.LUA_MININTEGER?'0x%'+s.LUA_INTEGER_FRMLEN+'x':s.LUA_INTEGER_FMT;P(t,c.to_luastring(r(n,u)))}break}case c.LUA_TNIL:case c.LUA_TBOOLEAN:{P(t,_.luaL_tolstring(e,l));break}default:_.luaL_argerror(e,l,c.to_luastring('value has no literal form',!0));}},K=function(e,t,l){let n=t;for(;0!==n[0]&&0<=m.indexOf(n[0]);)n=n.slice(1);t.length-n.length>=m.length&&_.luaL_error(e,c.to_luastring('invalid format (repeated flags)',!0)),E(n[0])&&(n=n.slice(1)),E(n[0])&&(n=n.slice(1)),n[0]===46&&(n=n.slice(1),E(n[0])&&(n=n.slice(1)),E(n[0])&&(n=n.slice(1))),E(n[0])&&_.luaL_error(e,c.to_luastring('invalid format (width or precision too long)',!0)),l[0]=37;for(let s=0;s<t.length-n.length+1;s++)l[s+1]=t[s];return{form:l,p:n}},B=function(e,t){let n=e.length,l=t.length,s=e[n-1];for(let l=0;l<t.length;l++)e[l+n-1]=t[l];return e[n+l-1]=s,e},w=0,G=16,V=4,j=8,F=(1<<j)-1;class X{constructor(e){this.L=e,this.islittle=!0,this.maxalign=1}}const H={Kint:0,Kuint:1,Kfloat:2,Kchar:3,Kstring:4,Kzstr:5,Kpadding:6,Kpaddalign:7,Knop:8},Y=function(e){return 48<=e&&e<=57},z=function(e,t){if(e.off>=e.s.length||!Y(e.s[e.off]))return t;let l=0;do l=10*l+(e.s[e.off++]-48);while(e.off<e.s.length&&Y(e.s[e.off])&&l<=(i-9)/10);return l},J=function(e,t,l){let n=z(t,l);return(n>G||0>=n)&&_.luaL_error(e.L,c.to_luastring('integral size (%d) out of limits [1,%d]'),n,G),n},Z=function(e,t){let l={opt:NaN,size:NaN,opt:t.s[t.off++],size:0};switch(l.opt){case 98:return l.size=1,l.opt=H.Kint,l;case 66:return l.size=1,l.opt=H.Kuint,l;case 104:return l.size=2,l.opt=H.Kint,l;case 72:return l.size=2,l.opt=H.Kuint,l;case 108:return l.size=4,l.opt=H.Kint,l;case 76:return l.size=4,l.opt=H.Kuint,l;case 106:return l.size=4,l.opt=H.Kint,l;case 74:return l.size=4,l.opt=H.Kuint,l;case 84:return l.size=4,l.opt=H.Kuint,l;case 102:return l.size=4,l.opt=H.Kfloat,l;case 100:return l.size=8,l.opt=H.Kfloat,l;case 110:return l.size=8,l.opt=H.Kfloat,l;case 105:return l.size=J(e,t,4),l.opt=H.Kint,l;case 73:return l.size=J(e,t,4),l.opt=H.Kuint,l;case 115:return l.size=J(e,t,4),l.opt=H.Kstring,l;case 99:return l.size=z(t,-1),-1===l.size&&_.luaL_error(e.L,c.to_luastring('missing size for format option \'c\'')),l.opt=H.Kchar,l;case 122:return l.opt=H.Kzstr,l;case 120:return l.size=1,l.opt=H.Kpadding,l;case 88:return l.opt=H.Kpaddalign,l;case 32:break;case 60:e.islittle=!0;break;case 62:e.islittle=!1;break;case 61:e.islittle=!0;break;case 33:e.maxalign=J(e,t,8);break;default:_.luaL_error(e.L,c.to_luastring('invalid format option \'%c\''),l.opt);}return l.opt=H.Knop,l},q=function(e,t,l){let n={opt:NaN,size:NaN,ntoalign:NaN},s=Z(e,l);n.size=s.size,n.opt=s.opt;let u=n.size;if(n.opt===H.Kpaddalign)if(l.off>=l.s.length||0===l.s[l.off])_.luaL_argerror(e.L,1,c.to_luastring('invalid next option for option \'X\'',!0));else{let t=Z(e,l);u=t.size,t=t.opt,(t===H.Kchar||0===u)&&_.luaL_argerror(e.L,1,c.to_luastring('invalid next option for option \'X\'',!0))}return 1>=u||n.opt===H.Kchar?n.ntoalign=0:(u>e.maxalign&&(u=e.maxalign),0!=(u&u-1)&&_.luaL_argerror(e.L,1,c.to_luastring('format asks for alignment not power of 2',!0)),n.ntoalign=u-(t&u-1)&u-1),n},W=function(e,t,l,n,s){let u=Array(n);u[l?0:n-1]=t&F;for(let r=1;r<n;r++)t>>=j,u[l?r:n-1-r]=t&F;if(s&&n>V)for(let e=V;e<n;e++)u[l?e:n-1-e]=F;e.push(...u)},Q=function(e,t,l,n){let s=new DataView(new ArrayBuffer(n));4===n?s.setFloat32(0,t,l):s.setFloat64(0,t,l);for(let u=0;u<n;u++)e.push(s.getUint8(u,l))},$=function(e,t,l,n,s){let u=0,r=n<=V?n:V;for(let o=r-1;0<=o;o--)u<<=j,u|=t[l?o:n-1-o];if(n<V){if(s){let e=1<<n*j-1;u=(u^e)-e}}else if(n>V){let o=!s||0<=u?0:F;for(let s=r;s<n;s++)t[l?s:n-1-s]!==o&&_.luaL_error(e,c.to_luastring('%d-byte integer does not fit into Lua Integer'),n)}return u},ee=function(e,t,l,s){n(t.length>=s);let u=new DataView(new ArrayBuffer(s));for(let n=0;n<s;n++)u.setUint8(n,t[n],l);return 4==s?u.getFloat32(0,l):u.getFloat64(0,l)},te=-1,ae=-2,le=200,ne=[94,36,42,43,63,46,40,91,37,45];class se{constructor(e){this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=e,this.matchdepth=NaN,this.level=NaN,this.capture=[]}}const ue=function(e,t){return t-=49,0>t||t>=e.level||e.capture[t].len===te?_.luaL_error(e.L,c.to_luastring('invalid capture index %%%d'),t+1):t},re=function(e){let t=e.level;for(t--;0<=t;t--)if(e.capture[t].len===te)return t;return _.luaL_error(e.L,c.to_luastring('invalid pattern capture'))},oe=function(e,t){switch(e.p[t++]){case d:return t===e.p_end&&_.luaL_error(e.L,c.to_luastring('malformed pattern (ends with \'%%\')')),t+1;case 91:{e.p[t]===94&&t++;do t===e.p_end&&_.luaL_error(e.L,c.to_luastring('malformed pattern (missing \']\')')),e.p[t++]===d&&t<e.p_end&&t++;while(e.p[t]!==93);return t+1}default:return t;}},_e=function(e,t){let l;switch(u(t).toLowerCase().charCodeAt(0)){case 97:l=U(e);break;case 99:l=v(e);break;case 100:l=E(e);break;case 103:l=b(e);break;case 108:l=k(e);break;case 112:l=I(e);break;case 115:l=N(e);break;case 117:l=R(e);break;case 119:l=S(e);break;case 120:l=M(e);break;case 122:l=0===e;break;default:return t===e;}return k(t)?l:!l},ie=function(e,t,l,n){let s=!0;for(94===e.p[l+1]&&(s=!1,l++);++l<n;)if(e.p[l]===d){if(l++,_e(t,e.p[l]))return s;}else if(45===e.p[l+1]&&l+2<n){if(l+=2,e.p[l-2]<=t&&t<=e.p[l])return s;}else if(e.p[l]===t)return s;return!s},pe=function(e,t,l,n){if(t>=e.src_end)return!1;let s=e.src[t];switch(e.p[l]){case 46:return!0;case d:return _e(s,e.p[l+1]);case 91:return ie(e,s,l,n-1);default:return e.p[l]===s;}},ce=function(t,l,n){if(n>=t.p_end-1&&_.luaL_error(t.L,c.to_luastring('malformed pattern (missing arguments to \'%%b\'')),t.src[l]!==t.p[n])return null;for(let s=t.p[n],u=t.p[n+1],e=1;++l<t.src_end;)if(t.src[l]!==u)t.src[l]===s&&e++;else if(0==--e)return l+1;return null},de=function(e,t,l,n){let s=0;for(;pe(e,t+s,l,n);)s++;for(;0<=s;){let l=Te(e,t+s,n+1);if(l)return l;s--}return null},ge=function(e,t,l,n){for(;;){let s=Te(e,t,n+1);if(null!==s)return s;if(pe(e,t,l,n))t++;else return null}},fe=function(e,t,l,n){let s=e.level;s>=32&&_.luaL_error(e.L,c.to_luastring('too many captures',!0)),e.capture[s]=e.capture[s]?e.capture[s]:{},e.capture[s].init=t,e.capture[s].len=n,e.level=s+1;let u;return null===(u=Te(e,t,l))&&e.level--,u},Le=function(e,t,n){let s=re(e);e.capture[s].len=t-e.capture[s].init;let l;return null===(l=Te(e,t,n))&&(e.capture[s].len=te),l},he=function(e,t,l,n,s){for(let u=t+s;t<u;t++,n++)if(e[t]!==l[n])return!1;return!0},Ae=function(e,t,n){n=ue(e,n);let l=e.capture[n].len;return e.src_end-t>=l&&he(e.src,e.capture[n].init,e.src,t,l)?t+l:null},Te=function(e,t,l){let n=!1,s=!0;for(0==e.matchdepth--&&_.luaL_error(e.L,c.to_luastring('pattern too complex',!0));s||n;)if(s=!1,l!==e.p_end)switch(n?120:e.p[l]){case 40:{t=41===e.p[l+1]?fe(e,t,l+2,ae):fe(e,t,l+1,te);break}case 41:{t=Le(e,t,l+1);break}case 36:{if(l+1!==e.p_end){n=!0;break}t=0===e.src.slice(t).length?t:null;break}case d:{switch(e.p[l+1]){case 98:{t=ce(e,t,l+2),null!==t&&(l+=4,s=!0);break}case 102:{l+=2,91!==e.p[l]&&_.luaL_error(e.L,c.to_luastring('missing \'[\' after \'%%f\' in pattern'));let n=oe(e,l),u=t===e.src_init?0:e.src[t-1];if(!ie(e,u,l,n-1)&&ie(e,t===e.src_end?0:e.src[t],l,n-1)){l=n,s=!0;break}t=null;break}case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:{t=Ae(e,t,e.p[l+1]),null!==t&&(l+=2,s=!0);break}default:n=!0;}break}default:{n=!1;let u=oe(e,l);if(!!pe(e,t,l,u))switch(e.p[u]){case 63:{let n;null===(n=Te(e,t+1,u+1))?(l=u+1,s=!0):t=n;break}case 43:t++;case 42:t=de(e,t,l,u);break;case 45:t=ge(e,t,l,u);break;default:t++,l=u,s=!0;}else if(42===e.p[u]||63===e.p[u]||45===e.p[u]){l=u+1,s=!0;break}else t=null;break}}return e.matchdepth++,t},xe=function(t,n,l,s){if(n>=t.level)0===n?c.lua_pushlstring(t.L,t.src.slice(l,s),s-l):_.luaL_error(t.L,c.to_luastring('invalid capture index %%%d'),n+1);else{let e=t.capture[n].len;e===te&&_.luaL_error(t.L,c.to_luastring('unfinished capture',!0)),e===ae?c.lua_pushinteger(t.L,t.capture[n].init-t.src_init+1):c.lua_pushlstring(t.L,t.src.slice(t.capture[n].init),e)}},Oe=function(t,l,n){let e=0===t.level&&t.src.slice(l)?1:t.level;_.luaL_checkstack(t.L,e,c.to_luastring('too many catpures',!0));for(let s=0;s<e;s++)xe(t,s,l,n);return e},me=function(e,t){let l=0;do{let t=!1,n=e.slice(l);for(let e=0;e<ne.length;e++)if(-1<n.indexOf(ne[e])){t=!0;break}if(t)return!1;++l}while(l<=t);return!0},Ue=function(e,t,l,n,s,u){e.L=t,e.matchdepth=le,e.src=l,e.src_init=0,e.src_end=n,e.p=s,e.p_end=u},Ee=function(e){e.level=0,n(e.matchdepth===le)},be=function(e,t,n){var s=n>>>0,u=t.length,r=e.length+1-u;loop:for(;s<r;s++){for(let l=0;l<u;l++)if(e[s+l]!==t[l])continue loop;return s}return-1},ve=function(e,t){let l=_.luaL_checkstring(e,1),n=_.luaL_checkstring(e,2),s=l.length,u=n.length,r=f(_.luaL_optinteger(e,3,1),s);if(1>r)r=1;else if(r>s+1)return c.lua_pushnil(e),1;if(t&&(c.lua_toboolean(e,4)||me(n,u))){let t=be(l.slice(r-1),n,0);if(-1<t)return c.lua_pushinteger(e,r+t),c.lua_pushinteger(e,r+t+u-1),2}else{let o=new se(e),_=r-1,i=94===n[0];i&&(n=n.slice(1),u--),Ue(o,e,l,s,n,u);do{let l;if(Ee(o),null!==(l=Te(o,_,0)))return t?(c.lua_pushinteger(e,_+1),c.lua_pushinteger(e,l),Oe(o,null,0)+2):Oe(o,_,l)}while(_++<o.src_end&&!i)}return c.lua_pushnil(e),1};class ke{constructor(){this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new se}}const Re=function(e){let t=c.lua_touserdata(e,c.lua_upvalueindex(3));t.ms.L=e;for(let l=t.src;l<=t.ms.src_end;l++){Ee(t.ms);let n;if(null!==(n=Te(t.ms,l,t.p))&&n!==t.lastmatch)return t.src=t.lastmatch=n,Oe(t.ms,l,n)}return 0},Se=function(t,n,u,s){let e=t.L,r=c.lua_tostring(e,3),o=r.length;for(let l=0;l<o;l++)r[l]===d?(l++,E(r[l])?48===r[l]?_.luaL_addlstring(n,t.src.slice(u),s-u):(xe(t,r[l]-49,u,s),_.luaL_tolstring(e,-1),c.lua_remove(e,-2),_.luaL_addvalue(n)):(r[l]!==d&&_.luaL_error(e,c.to_luastring('invalid use of \'%c\' in replacement string'),d),_.luaL_addchar(n,r[l]))):_.luaL_addchar(n,r[l])},Ie=function(t,l,u,s,e){let r=t.L;switch(e){case c.LUA_TFUNCTION:{c.lua_pushvalue(r,3);let e=Oe(t,u,s);c.lua_call(r,e,1);break}case c.LUA_TTABLE:{xe(t,0,u,s),c.lua_gettable(r,3);break}default:return void Se(t,l,u,s);}c.lua_toboolean(r,-1)?!c.lua_isstring(r,-1)&&_.luaL_error(r,c.to_luastring('invalid replacement value (a %s)'),_.luaL_typename(r,-1)):(c.lua_pop(r,1),c.lua_pushlstring(r,t.src.slice(u,s),s-u)),_.luaL_addvalue(l)},Ne={byte:function(e){let t=_.luaL_checkstring(e,1),s=t.length,l=f(_.luaL_optinteger(e,2,1),s),u=f(_.luaL_optinteger(e,3,l),s);if(1>l&&(l=1),u>s&&(u=s),l>u)return 0;if(u-l>=o.MAX_INT)return _.luaL_error(e,c.to_luastring('string slice too long',!0));let r=u-l+1;_.luaL_checkstack(e,r,c.to_luastring('string slice too long',!0));for(let n=0;n<r;n++)c.lua_pushinteger(e,t[l+n-1]);return r},char:function(e){let t=c.lua_gettop(e),l=[];for(let n=1,s;n<=t;n++)s=_.luaL_checkinteger(e,n),_.luaL_argcheck(e,0<=s&&255>=s,'value out of range'),l.push(s);return c.lua_pushstring(e,l),1},dump:function(e){let t=[],l=c.lua_toboolean(e,2);return(_.luaL_checktype(e,1,c.LUA_TFUNCTION),c.lua_settop(e,1),0!==c.lua_dump(e,h,t,l))?_.luaL_error(e,c.to_luastring('unable to dump given function')):(c.lua_pushstring(e,t),1)},find:function(e){return ve(e,1)},format:function(e){let t=c.lua_gettop(e),l=1,o=_.luaL_checkstring(e,l),i=[];for(;0<o.length;)if(o[0]!==d)i.push(o[0]),o=o.slice(1);else if((o=o.slice(1))[0]===d)i.push(o[0]),o=o.slice(1);else{let d=[];++l>t&&_.luaL_argerror(e,l,c.to_luastring('no value',!0));let n=K(e,o,d);switch(o=n.p,d=n.form,u(o[0])){case'c':{o=o.slice(1),i.push(_.luaL_checkinteger(e,l));break}case'd':case'i':case'o':case'u':case'x':case'X':{o=o.slice(1);let t=_.luaL_checkinteger(e,l);d=B(d,s.LUA_INTEGER_FRMLEN.split('').map((t)=>t.charCodeAt(0))),P(i,c.to_luastring(r(u(...d),t)));break}case'a':case'A':{o=o.slice(1),d=B(d,s.LUA_INTEGER_FRMLEN.split('').map((t)=>t.charCodeAt(0))),P(i,x(e,d,_.luaL_checknumber(e,l)));break}case'e':case'E':case'f':case'g':case'G':{o=o.slice(1);let t=_.luaL_checknumber(e,l);d=B(d,s.LUA_INTEGER_FRMLEN.split('').map((t)=>t.charCodeAt(0))),P(i,c.to_luastring(r(u(...d),t)));break}case'q':{o=o.slice(1),D(e,i,l);break}case's':{o=o.slice(1);let t=_.luaL_tolstring(e,l);2>=d.length||0===d[2]?(P(i,t),c.lua_pop(e,1)):(_.luaL_argcheck(e,t.length===g(t),l,c.to_luastring('string contains zeros',!0)),0>d.indexOf(46)&&100<=t.length?(P(i,t),c.lua_pop(e,1)):(P(i,c.to_luastring(r(u(...d),c.to_jsstring(t)))),c.lua_pop(e,1)));break}default:return _.luaL_error(e,c.to_luastring('invalid option \'%%%c\' to \'format\''),o[0]);}}return c.lua_pushstring(e,i),1},gmatch:function(e){let t=_.luaL_checkstring(e,1),l=_.luaL_checkstring(e,2),n=t.length,s=l.length;c.lua_settop(e,2);let u=new ke;return c.lua_pushlightuserdata(e,u),Ue(u.ms,e,t,n,l,s),u.src=0,u.p=0,u.lastmatch=null,c.lua_pushcclosure(e,Re,3),1},gsub:function(e){let t=_.luaL_checkstring(e,1),l=t.length,s=_.luaL_checkstring(e,2),u=s.length,r=null,o=c.lua_type(e,3),i=_.luaL_optinteger(e,4,l+1),d=94===s[0],g=0,n=new se(e),f=new _.luaL_Buffer;for(_.luaL_argcheck(e,o===c.LUA_TNUMBER||o===c.LUA_TSTRING||o===c.LUA_TFUNCTION||o===c.LUA_TTABLE,3,c.to_luastring('string/function/table expected',!0)),_.luaL_buffinit(e,f),d&&(s=s.slice(1),u--),Ue(n,e,t,l,s,u),t=0,s=0;g<i;){let l;if(Ee(n),null!==(l=Te(n,t,s))&&l!==r)g++,Ie(n,f,t,l,o),t=r=l;else if(t<n.src_end)_.luaL_addchar(f,n.src[t++]);else break;if(d)break}return _.luaL_addlstring(f,n.src.slice(t),n.src_end-t),_.luaL_pushresult(f),c.lua_pushinteger(e,g),2},len:function(e){return c.lua_pushinteger(e,_.luaL_checkstring(e,1).length),1},lower:function(e){return c.lua_pushstring(e,c.to_luastring(c.to_jsstring(_.luaL_checkstring(e,1)).toLowerCase())),1},match:function(e){return ve(e,0)},pack:function(e){let t=[],l=new X(e),n={s:_.luaL_checkstring(e,1),off:0},u=1,r=0;for(c.lua_pushnil(e);n.off<n.s.length;){let s=q(l,r,n),o=s.opt,i=s.size,d=s.ntoalign;for(r+=d+i;0<d--;)t.push(w);switch(u++,o){case H.Kint:{let s=_.luaL_checkinteger(e,u);if(i<V){let t=1<<8*i-1;_.luaL_argcheck(e,-t<=s&&s<t,u,c.to_luastring('integer overflow',!0))}W(t,s,l.islittle,i,0>s);break}case H.Kuint:{let s=_.luaL_checkinteger(e,u);i<V&&_.luaL_argcheck(e,s>>>0<1<<i*j,u,c.to_luastring('unsigned overflow',!0)),W(t,s>>>0,l.islittle,i,!1);break}case H.Kfloat:{let s=_.luaL_checknumber(e,u);Q(t,s,l.islittle,i);break}case H.Kchar:{let l=_.luaL_checkstring(e,u),n=l.length;for(_.luaL_argcheck(e,n<=i,u,c.to_luastring('string longer than given size',!0)),t.push(...l);n++<i;)t.push(w);break}case H.Kstring:{let n=_.luaL_checkstring(e,u),s=n.length;_.luaL_argcheck(e,4<=i||s<1<<i*j,u,c.to_luastring('string length does not fit in given size',!0)),W(t,s,l.islittle,i,0),t.push(...n),r+=s;break}case H.Kzstr:{let l=_.luaL_checkstring(e,u),n=l.length;_.luaL_argcheck(e,0>l.indexOf(0),u,c.to_luastring('strings contains zeros',!0)),t.push(...l),t.push(0),r+=n+1;break}case H.Kpadding:t.push(w);case H.Kpaddalign:case H.Knop:u--;}}return c.lua_pushstring(e,t),1},packsize:function(e){let t=new X(e),l={s:_.luaL_checkstring(e,1),off:0},n=0;for(;l.off<l.s.length;){let s=q(t,n,l),u=s.opt,r=s.size,o=s.ntoalign;switch(r+=o,_.luaL_argcheck(e,n<=i-r,1,c.to_luastring('format result too large',!0)),n+=r,u){case H.Kstring:case H.Kzstr:_.luaL_argerror(e,1,c.to_luastring('variable-length format',!0));default:}}return c.lua_pushinteger(e,n),1},rep:function(e){let t=_.luaL_checkstring(e,1),l=_.luaL_checkinteger(e,2),n=_.luaL_optstring(e,3,[]);if(t.length+n.length<t.length||t.length+n.length>i/l)return _.luaL_error(e,c.to_luastring('resulting string too large',!0));let s=[];for(let u=0;u<l-1;u++)s=s.concat(t.concat(n));return s=s.concat(t),c.lua_pushstring(e,0<l?s:[]),1},reverse:function(e){return c.lua_pushstring(e,_.luaL_checkstring(e,1).slice(0).reverse()),1},sub:function(e){let t=_.luaL_checkstring(e,1),n=t.length,l=f(_.luaL_checkinteger(e,2),n),s=f(_.luaL_optinteger(e,3,-1),n);return 1>l&&(l=1),s>n&&(s=n),l<=s?c.lua_pushstring(e,t.slice(l-1,l-1+(s-l+1))):c.lua_pushliteral(e,''),1},unpack:function(e){let t=new X(e),l={s:_.luaL_checkstring(e,1),off:0},s=_.luaL_checkstring(e,2),u=s.length,r=f(_.luaL_optinteger(e,3,1),u)-1,o=0;for(_.luaL_argcheck(e,r<=u&&0<=r,3,c.to_luastring('initial position out of string',!0));l.off<l.s.length;){let n=q(t,r,l),i=n.opt,d=n.size,g=n.ntoalign;switch(r+g+d>u&&_.luaL_argerror(e,2,c.to_luastring('data string too short',!0)),r+=g,_.luaL_checkstack(e,2,c.to_luastring('too many results',!0)),o++,i){case H.Kint:case H.Kuint:{let l=$(e,s.slice(r),t.islittle,d,i===H.Kint);c.lua_pushinteger(e,l);break}case H.Kfloat:{let l=ee(e,s.slice(r),t.islittle,d);c.lua_pushnumber(e,l);break}case H.Kchar:{c.lua_pushstring(e,s.slice(r,r+d));break}case H.Kstring:{let l=$(e,s.slice(r),t.islittle,d,0);_.luaL_argcheck(e,r+l+d<=u,2,c.to_luastring('data string too short',!0)),c.lua_pushstring(e,s.slice(r+d,r+d+l)),r+=l;break}case H.Kzstr:{let t=s.slice(r).indexOf(0);c.lua_pushstring(e,s.slice(r,r+t)),r+=t+1;break}case H.Kpaddalign:case H.Kpadding:case H.Knop:o--;}r+=d}return c.lua_pushinteger(e,r+1),o+1},upper:function(e){return c.lua_pushstring(e,c.to_luastring(c.to_jsstring(_.luaL_checkstring(e,1)).toUpperCase())),1}},Me=function(e){c.lua_createtable(e,0,1),c.lua_pushliteral(e,''),c.lua_pushvalue(e,-2),c.lua_setmetatable(e,-2),c.lua_pop(e,1),c.lua_pushvalue(e,-2),c.lua_setfield(e,-2,c.to_luastring('__index',!0)),c.lua_pop(e,1)};e.exports.luaopen_string=function(e){return _.luaL_newlib(e,Ne),Me(e),1}},function(e,t,l){'use strict';var s=Math.floor;const n=l(0),u=l(2),r=l(6),o=l(5),_=1,i=2,c=4,d=_|i,g=function(e,t,l){return u.lua_pushstring(e,t),u.lua_rawget(e,-l)!==u.LUA_TNIL},h=function(e,t,l){if(u.lua_type(e,t)!==u.LUA_TTABLE){let s=1;u.lua_getmetatable(e,t)&&(!(l&_)||g(e,u.to_luastring('__index',!0),++s))&&(!(l&i)||g(e,u.to_luastring('__newindex',!0),++s))&&(!(l&c)||g(e,u.to_luastring('__len',!0),++s))?u.lua_pop(e,s):r.luaL_checktype(e,t,u.LUA_TTABLE)}},f=function(e,t,l){return h(e,t,l|c),r.luaL_len(e,t)},A=function(e,t,l){u.lua_geti(e,1,l),u.lua_isstring(e,-1)||r.luaL_error(e,u.to_luastring('invalid value (%s) at index %d in table for \'concat\''),r.luaL_typename(e,-1),l),r.luaL_addvalue(t)},T=function(){return s(1*Math.random()<<32)},x=function(e,t,l){u.lua_seti(e,1,t),u.lua_seti(e,1,l)},O=function(e,t,l){if(u.lua_isnil(e,2))return u.lua_compare(e,t,l,u.LUA_OPLT);u.lua_pushvalue(e,2),u.lua_pushvalue(e,t-1),u.lua_pushvalue(e,l-2),u.lua_call(e,2,1);let n=u.lua_toboolean(e,-1);return u.lua_pop(e,1),n},m=function(e,t,l){for(let n=t,s=l-1;;){for(;u.lua_geti(e,1,++n),O(e,-1,-2);)n==l-1&&r.luaL_error(e,u.to_luastring('invalid order function for sorting')),u.lua_pop(e,1);for(;u.lua_geti(e,1,--s),O(e,-3,-1);)s<n&&r.luaL_error(e,u.to_luastring('invalid order function for sorting')),u.lua_pop(e,1);if(s<n)return u.lua_pop(e,1),x(e,l-1,n),n;x(e,n,s)}},U=function(e,t,l){let u=s((t-e)/4),r=l%(2*u)+(e+u);return n(e+u<=r&&r<=t-u),r},E=function(e,t,l,r){for(;t<l;){if(u.lua_geti(e,1,t),u.lua_geti(e,1,l),O(e,-1,-2)?x(e,t,l):u.lua_pop(e,2),1==l-t)return;let o;if(o=l-t<100||0===r?s((t+l)/2):U(t,l,r),u.lua_geti(e,1,o),u.lua_geti(e,1,t),O(e,-2,-1)?x(e,o,t):(u.lua_pop(e,1),u.lua_geti(e,1,l),O(e,-1,-2)?x(e,o,l):u.lua_pop(e,2)),2==l-t)return;u.lua_geti(e,1,o),u.lua_pushvalue(e,-1),u.lua_geti(e,1,l-1),x(e,o,l-1),o=m(e,t,l);let _;o-t<l-o?(E(e,t,o-1,r),_=o-t,t=o+1):(E(e,o+1,l,r),_=l-o,l=o-1),(l-t)/128>_&&(r=T())}},b={concat:function(e){let t=f(e,1,_),l=r.luaL_optlstring(e,2,[]),n=r.luaL_optinteger(e,3,1);t=r.luaL_optinteger(e,4,t);let s=new r.luaL_Buffer;for(r.luaL_buffinit(e,s);n<t;n++)A(e,s,n),r.luaL_addlstring(s,l);return n===t&&A(e,s,n),r.luaL_pushresult(s),1},insert:function(t){let l=f(t,1,d)+1,e;switch(u.lua_gettop(t)){case 2:e=l;break;case 3:{e=r.luaL_checkinteger(t,2),r.luaL_argcheck(t,1<=e&&e<=l,2,u.to_luastring('position out of bounds',!0));for(let n=l;n>e;n--)u.lua_geti(t,1,n-1),u.lua_seti(t,1,n);break}default:return r.luaL_error(t,u.to_luastring('wrong number of arguments to \'insert\'',!0));}return u.lua_seti(t,1,e),0},move:function(l){let s=r.luaL_checkinteger(l,2),c=r.luaL_checkinteger(l,3),e=r.luaL_checkinteger(l,4),t=u.lua_isnoneornil(l,5)?1:5;if(h(l,1,_),h(l,t,i),c>=s){r.luaL_argcheck(l,0<s||c<o.LUA_MAXINTEGER+s,3,u.to_luastring('too many elements to move',!0));let _=c-s+1;if(r.luaL_argcheck(l,e<=o.LUA_MAXINTEGER-_+1,4,u.to_luastring('destination wrap around',!0)),e>c||e<=s||1!=t&&1!==u.lua_compare(l,1,t,u.LUA_OPEQ))for(let n=0;n<_;n++)u.lua_geti(l,1,s+n),u.lua_seti(l,t,e+n);else for(let n=_-1;0<=n;n--)u.lua_geti(l,1,s+n),u.lua_seti(l,t,e+n)}return u.lua_pushvalue(l,t),1},pack:function(e){let t=u.lua_gettop(e);u.lua_createtable(e,t,1),u.lua_insert(e,1);for(let l=t;1<=l;l--)u.lua_seti(e,1,l);return u.lua_pushinteger(e,t),u.lua_setfield(e,1,[110]),1},remove:function(e){let t=f(e,1,d),l=r.luaL_optinteger(e,2,t);for(l!==t&&r.luaL_argcheck(e,1<=l&&l<=t+1,1,u.to_luastring('position out of bounds',!0)),u.lua_geti(e,1,l);l<t;l++)u.lua_geti(e,1,l+1),u.lua_seti(e,1,l);return u.lua_pushnil(e),u.lua_seti(e,1,l),1},sort:function(e){let t=f(e,1,d);return 1<t&&(r.luaL_argcheck(e,t<o.MAX_INT,1,u.to_luastring('array too big',!0)),!u.lua_isnoneornil(e,2)&&r.luaL_checktype(e,2,u.LUA_TFUNCTION),u.lua_settop(e,2),E(e,1,t,0)),0},unpack:function(t){let l=r.luaL_optinteger(t,2,1),s=r.luaL_opt(t,r.luaL_checkinteger,3,r.luaL_len(t,1));if(l>s)return 0;let e=s-l;if(e>=o.MAX_INT||!u.lua_checkstack(t,++e))return r.luaL_error(t,u.to_luastring('too many results to unpack',!0));for(;l<s;l++)u.lua_geti(t,1,l);return u.lua_geti(t,1,s),e}};e.exports.luaopen_table=function(e){return r.luaL_newlib(e,b),1}},function(e,t,l){'use strict';const u=l(2),r=l(6),o=l(5),n=1114111,_=function(e){return 128==(192&e)},i=function(e,t){return 0<=e?e:0-e>t?0:t+e+1},d=[255,127,2047,65535],c=function(e,t){let l=e[t],s=0;if(128>l)s=l;else{let u=0;for(;64&l;){let n=e[t+ ++u];if(128!=(192&n))return null;s=s<<6|63&n,l<<=1}if(s|=(127&l)<<5*u,3<u||s>n||s<=d[u])return null;t+=u}return{code:s,pos:t+1}},s=function(e,t){let l=r.luaL_checkinteger(e,t);r.luaL_argcheck(e,0<=l&&l<=n,t,u.to_luastring('value out of range',!0)),u.lua_pushstring(e,u.to_luastring(String.fromCodePoint(l)))},g=function(e){let t=r.luaL_checkstring(e,1),l=t.length,s=u.lua_tointeger(e,2)-1;if(0>s)s=0;else if(s<l)for(s++;_(t[s]);)s++;if(s>=l)return 0;let n=c(t,s);return null===n||_(t[n.pos])?r.luaL_error(e,u.to_luastring('invalid UTF-8 code',!0)):(u.lua_pushinteger(e,s+1),u.lua_pushinteger(e,n.code),2)},f={char:function(e){let t=u.lua_gettop(e);if(1===t)s(e,1);else{let l=new r.luaL_Buffer;r.luaL_buffinit(e,l);for(let n=1;n<=t;n++)s(e,n),r.luaL_addvalue(l);r.luaL_pushresult(l)}return 1},codepoint:function(e){let t=r.luaL_checkstring(e,1),l=i(r.luaL_optinteger(e,2,1),t.length),s=i(r.luaL_optinteger(e,3,l),t.length);if(r.luaL_argcheck(e,1<=l,2,u.to_luastring('out of range',!0)),r.luaL_argcheck(e,s<=t.length,3,u.to_luastring('out of range',!0)),l>s)return 0;if(s-l>=o.MAX_INT)return r.luaL_error(e,u.to_luastring('string slice too long',!0));let _=s-l+1;for(r.luaL_checkstack(e,_,u.to_luastring('string slice too long',!0)),_=0,l-=1;l<s;){let n=c(t,l);if(null===n)return r.luaL_error(e,u.to_luastring('invalid UTF-8 code',!0));u.lua_pushinteger(e,n.code),l=n.pos,_++}return _},codes:function(e){return r.luaL_checkstring(e,1),u.lua_pushcfunction(e,g),u.lua_pushvalue(e,1),u.lua_pushinteger(e,0),3},len:function(e){let t=0,l=r.luaL_checkstring(e,1),n=l.length,s=i(r.luaL_optinteger(e,2,1),n),o=i(r.luaL_optinteger(e,3,-1),n);for(r.luaL_argcheck(e,1<=s&&--s<=n,2,u.to_luastring('initial position out of string')),r.luaL_argcheck(e,--o<n,3,u.to_luastring('final position out of string'));s<=o;){let n=c(l,s);if(null===n)return u.lua_pushnil(e),u.lua_pushinteger(e,s+1),2;s=n.pos,t++}return u.lua_pushinteger(e,t),1},offset:function(e){let t=r.luaL_checkstring(e,1),l=r.luaL_checkinteger(e,2),n=0<=l?1:t.length+1;if(n=i(r.luaL_optinteger(e,3,n),t.length),r.luaL_argcheck(e,1<=n&&--n<=t.length,3,u.to_luastring('position out of range',!0)),0===l)for(;0<n&&_(t[n]);)n--;else if(_(t[n])&&r.luaL_error(e,u.to_luastring('initial position is a continuation byte',!0)),0>l)for(;0>l&&0<n;){do n--;while(0<n&&_(t[n]));l++}else for(l--;0<l&&n<t.length;){do n++;while(_(t[n]));l--}return 0===l?u.lua_pushinteger(e,n+1):u.lua_pushnil(e),1}},h=[91,0,45,127,194,45,244,93,91,128,45,191,93,42];e.exports.luaopen_utf8=function(e){return r.luaL_newlib(e,f),u.lua_pushstring(e,h),u.lua_setfield(e,-2,u.to_luastring('charpattern',!0)),1}},function(e,t,l){'use strict';const n=l(0),s=l(2),u=l(6),r=function(e,t,l){e===t||s.lua_checkstack(t,l)||u.luaL_error(e,s.to_luastring('stack overflow',!0))},o=function(e){return s.lua_isthread(e,1)?{arg:1,thread:s.lua_tothread(e,1)}:{arg:0,thread:e}},_=function(e,t,l){s.lua_pushstring(e,l),s.lua_setfield(e,-2,t)},i=function(e,t,l){s.lua_pushinteger(e,l),s.lua_setfield(e,-2,t)},c=function(e,t,l){s.lua_pushboolean(e,l),s.lua_setfield(e,-2,t)},d=function(e,t,l){e==t?s.lua_rotate(e,-2,1):s.lua_xmove(t,e,1),s.lua_setfield(e,-2,l)},g=function(e,t){let l=u.luaL_checkinteger(e,2);u.luaL_checktype(e,1,s.LUA_TFUNCTION);let n=t?s.lua_getupvalue(e,1,l):s.lua_setupvalue(e,1,l);return null===n?0:(s.lua_pushstring(e,n),s.lua_insert(e,-(t+1)),t+1)},f=function(e,t,l){let n=u.luaL_checkinteger(e,l);return u.luaL_checktype(e,t,s.LUA_TFUNCTION),u.luaL_argcheck(e,null!==s.lua_getupvalue(e,t,n),l,s.to_luastring('invalid upvalue index',!0)),n},h=s.to_luastring('__hooks__',!0),A=['call','return','line','count','tail call'].map((t)=>s.to_luastring(t)),T=function(e,t){s.lua_rawgetp(e,s.LUA_REGISTRYINDEX,h),s.lua_pushthread(e),s.lua_rawget(e,-2)===s.LUA_TFUNCTION&&(s.lua_pushstring(e,A[t.event]),0<=t.currentline?s.lua_pushinteger(e,t.currentline):s.lua_pushnil(e),n(s.lua_getinfo(e,[108,83],t)),s.lua_call(e,2,0))},x=function(e,t){let l=0;return-1<e.indexOf(99)&&(l|=s.LUA_MASKCALL),-1<e.indexOf(114)&&(l|=s.LUA_MASKRET),-1<e.indexOf(108)&&(l|=s.LUA_MASKLINE),0<t&&(l|=s.LUA_MASKCOUNT),l},O=function(e,t){let l=0;return e&s.LUA_MASKCALL&&(t[l++]=99),e&s.LUA_MASKRET&&(t[l++]=114),e&s.LUA_MASKLINE&&(t[l++]=108),t},m={gethook:function(e){let t=o(e),l=t.thread,n=s.lua_gethookmask(l),u=s.lua_gethook(l);return null===u?s.lua_pushnil(e):u===T?(s.lua_rawgetp(e,s.LUA_REGISTRYINDEX,h),r(e,l,1),s.lua_pushthread(l),s.lua_xmove(l,e,1),s.lua_rawget(e,-2),s.lua_remove(e,-2)):s.lua_pushliteral(e,'external hook'),s.lua_pushstring(e,O(n,[])),s.lua_pushinteger(e,s.lua_gethookcount(l)),3},getinfo:function(e){let t=new s.lua_Debug,l=o(e),n=l.arg,g=l.thread,f=u.luaL_optstring(e,n+2,s.to_luastring('flnStu',!0));if(r(e,g,3),s.lua_isfunction(e,n+1))f=s.lua_pushfstring(e,s.to_luastring('>%s'),f),s.lua_pushvalue(e,n+1),s.lua_xmove(e,g,1);else if(!s.lua_getstack(g,u.luaL_checkinteger(e,n+1),t))return s.lua_pushnil(e),1;return s.lua_getinfo(g,f,t)||u.luaL_argerror(e,n+2,s.to_luastring('invalid option',!0)),s.lua_newtable(e),-1<f.indexOf(83)&&(_(e,s.to_luastring('source',!0),t.source),_(e,s.to_luastring('short_src',!0),t.short_src),i(e,s.to_luastring('linedefined',!0),t.linedefined),i(e,s.to_luastring('lastlinedefined',!0),t.lastlinedefined),_(e,s.to_luastring('what',!0),t.what)),-1<f.indexOf(108)&&i(e,s.to_luastring('currentline',!0),t.currentline),-1<f.indexOf(117)&&(i(e,s.to_luastring('nups',!0),t.nups),i(e,s.to_luastring('nparams',!0),t.nparams),c(e,s.to_luastring('isvararg',!0),t.isvararg)),-1<f.indexOf(110)&&(_(e,s.to_luastring('name',!0),t.name),_(e,s.to_luastring('namewhat',!0),t.namewhat)),-1<f.indexOf(116)&&c(e,s.to_luastring('istailcall',!0),t.istailcall),-1<f.indexOf(76)&&d(e,g,s.to_luastring('activelines',!0)),-1<f.indexOf(102)&&d(e,g,s.to_luastring('func',!0)),1},getlocal:function(e){let t=o(e),l=t.thread,n=t.arg,_=new s.lua_Debug,i=u.luaL_checkinteger(e,n+2);if(s.lua_isfunction(e,n+1))return s.lua_pushvalue(e,n+1),s.lua_pushstring(e,s.lua_getlocal(e,null,i)),1;let c=u.luaL_checkinteger(e,n+1);if(!s.lua_getstack(l,c,_))return u.luaL_argerror(e,n+1,s.to_luastring('level out of range',!0));r(e,l,1);let d=s.lua_getlocal(l,_,i);return d?(s.lua_xmove(l,e,1),s.lua_pushstring(e,d),s.lua_rotate(e,-2,1),2):(s.lua_pushnil(e),1)},getmetatable:function(e){return u.luaL_checkany(e,1),s.lua_getmetatable(e,1)||s.lua_pushnil(e),1},getregistry:function(e){return s.lua_pushvalue(e,s.LUA_REGISTRYINDEX),1},getupvalue:function(e){return g(e,1)},getuservalue:function(e){return s.lua_type(e,1)===s.LUA_TUSERDATA?s.lua_getuservalue(e,1):s.lua_pushnil(e),1},sethook:function(e){let t=o(e),l=t.thread,n=t.arg,_,i,c;if(s.lua_isnoneornil(e,n+1))s.lua_settop(e,n+1),c=null,_=0,i=0;else{const t=u.luaL_checkstring(e,n+2);u.luaL_checktype(e,n+1,s.LUA_TFUNCTION),i=u.luaL_optinteger(e,n+3,0),c=T,_=x(t,i)}return s.lua_rawgetp(e,s.LUA_REGISTRYINDEX,h)===s.LUA_TNIL&&(s.lua_createtable(e,0,2),s.lua_pushvalue(e,-1),s.lua_rawsetp(e,s.LUA_REGISTRYINDEX,h),s.lua_pushstring(e,[107]),s.lua_setfield(e,-2,s.to_luastring('__mode',!0)),s.lua_pushvalue(e,-1),s.lua_setmetatable(e,-2)),r(e,l,1),s.lua_pushthread(l),s.lua_xmove(l,e,1),s.lua_pushvalue(e,n+1),s.lua_rawset(e,-3),s.lua_sethook(l,c,_,i),0},setlocal:function(e){let t=o(e),l=t.thread,n=t.arg,_=new s.lua_Debug,i=u.luaL_checkinteger(e,n+1),c=u.luaL_checkinteger(e,n+2);if(!s.lua_getstack(l,i,_))return u.luaL_argerror(e,n+1,'level out of range');u.luaL_checkany(e,n+3),s.lua_settop(e,n+3),r(e,l,1),s.lua_xmove(e,l,1);let d=s.lua_setlocal(l,_,c);return null===d&&s.lua_pop(l,1),s.lua_pushstring(e,d),1},setmetatable:function(e){const l=s.lua_type(e,2);return u.luaL_argcheck(e,l==s.LUA_TNIL||l==s.LUA_TTABLE,2,s.to_luastring('nil or table expected',!0)),s.lua_settop(e,2),s.lua_setmetatable(e,1),1},setupvalue:function(e){return u.luaL_checkany(e,3),g(e,0)},setuservalue:function(e){return u.luaL_checktype(e,1,s.LUA_TUSERDATA),u.luaL_checkany(e,2),s.lua_settop(e,2),s.lua_setuservalue(e,1),1},traceback:function(e){let t=o(e),l=t.thread,n=t.arg,r=s.lua_tostring(e,n+1);if(null===r&&!s.lua_isnoneornil(e,n+1))s.lua_pushvalue(e,n+1);else{let t=u.luaL_optinteger(e,n+2,e===l?1:0);u.luaL_traceback(e,l,r,t)}return 1},upvalueid:function(e){let t=f(e,1,2);return s.lua_pushlightuserdata(e,s.lua_upvalueid(e,1,t)),1},upvaluejoin:function(e){let t=f(e,1,2),l=f(e,3,4);return u.luaL_argcheck(e,!s.lua_iscfunction(e,1),1,s.to_luastring('Lua function expected',!0)),u.luaL_argcheck(e,!s.lua_iscfunction(e,3),3,s.to_luastring('Lua function expected',!0)),s.lua_upvaluejoin(e,1,t,3,l),0}};e.exports.luaopen_debug=function(e){return u.luaL_newlib(e,m),1}},function(e,t,l){'use strict';var n=Math.floor;(function(t){const u=l(2),r=l(6),s=l(5),o=l(59),_=u.to_luastring('aAbBcdHIjmMpSUwWxXyYZ%',!0),i=u.to_luastring('aAbBcCdDeFgGhHIjmMnprRStTuUVwWxXyYzZ%||EcECExEXEyEYOdOeOHOIOmOMOSOuOUOVOwOWOy',!0),c=u.to_luastring('aAbBcdHIjmMpSUwWxXyYzZ%||#c#x#d#H#I#j#m#M#S#U#w#W#y#Y',!0),d=function(e,t,l){u.lua_pushinteger(e,l),u.lua_setfield(e,-2,u.to_luastring(t,!0))},g=function(e,t,l){d(e,'sec',l?t.getUTCSeconds():t.getSeconds()),d(e,'min',l?t.getUTCMinutes():t.getMinutes()),d(e,'hour',l?t.getUTCHours():t.getHours()),d(e,'day',l?t.getUTCDate():t.getDate()),d(e,'month',l?t.getUTCMonth():t.getMonth()),d(e,'year',l?t.getUTCFullYear():t.getFullYear()),d(e,'wday',l?t.getUTCDay():t.getDay());let s=new Date;d(e,'yday',n((s-new Date(s.getFullYear(),0,0))/86400000))},f=s.MAX_INT/2,h=function(e,l,n,s){let o=u.lua_getfield(e,-1,u.to_luastring(l,!0)),t=u.lua_tointegerx(e,-1);if(!1===t){if(o!==u.LUA_TNIL)return r.luaL_error(e,u.to_luastring('field \'%s\' is not an integer'),l);if(0>n)return r.luaL_error(e,u.to_luastring('field \'%s\' missing in date table'),l);t=n}else{if(!(-f<=t&&t<=f))return r.luaL_error(e,u.to_luastring('field \'%s\' is out-of-bound'),l);t-=s}return u.lua_pop(e,1),t},A=function(e,t,l){for(let n=_,s=1;0<n.length&&s<=t.length;n=n.slice(s))if(n[0]===124)s++;else if(u.to_jsstring(t.slice(0,s))===u.to_jsstring(n.slice(0,s)))return l.push(...t.slice(0,s)),t.slice(s);r.luaL_argerror(e,1,u.lua_pushliteral(e,`invalid conversion specifier '%${t}'`,t))},T=function(e,l){let n=r.luaL_checkinteger(e,l);return n},x={date:function(e){let l=r.luaL_optlstring(e,1,'%c'),n=1e3*r.luaL_opt(e,T,2,new Date().getTime()/1e3),t=new Date(n),s=!1;if(33===l[0]&&(s=!0,l=l.slice(1)),null===t&&r.luaL_error(e,u.to_luastring('time result cannot be represented in this installation',!0)),'*t'===u.to_jsstring(l))u.lua_createtable(e,0,9),g(e,t,s);else{let n=[],s;for(;0<l.length;)s=[37],37===l[0]?(l=l.slice(1),l=A(e,l,s),n.push(...u.to_luastring(o(u.to_jsstring(s),t)))):(n.push(l[0]),l=l.slice(1));u.lua_pushstring(e,n)}return 1},difftime:function(e){let t=T(e,1),l=T(e,2);return u.lua_pushnumber(e,new Date(t)-new Date(l)),1},time:function(e){let l=new Date;return u.lua_isnoneornil(e,1)||(r.luaL_checktype(e,1,u.LUA_TTABLE),u.lua_settop(e,1),l.setSeconds(h(e,'sec',0,0)),l.setMinutes(h(e,'min',0,0)),l.setHours(h(e,'hour',12,0)),l.setDate(h(e,'day',-1,0)),l.setMonth(h(e,'month',-1,1)),l.setFullYear(h(e,'year',-1,0)),g(e,l)),u.lua_pushinteger(e,n(l/1e3)),1}};if(t&&t.exit&&t.env&&t.uptime){x.clock=function(e){return u.lua_pushnumber(e,t.uptime()),1},x.exit=function(e){let l;return l=u.lua_isboolean(e,1)?u.lua_toboolean(e,1)?0:1:r.luaL_optinteger(e,1,0),u.lua_toboolean(e,2)&&u.lua_close(e),e&&t.exit(l),0},x.getenv=function(e){return u.lua_pushliteral(e,t.env[u.to_jsstring(r.luaL_checkstring(e,1))]),1}}e.exports.luaopen_os=function(e){return r.luaL_newlib(e,x),1}}).call(t,l(19))},function(e,t,l){'use strict';(function(t){const n=l(2),s=l(6),u=[45],r=n.to_luastring('__CLIBS__',!0),o='LUA_PATH',_='LUA_CPATH',i=n.LUA_DIRSEP,c=n.LUA_DIRSEP,d=n.to_luastring('luaopen_'),g=n.to_luastring('_'),f='open',h=[1];let A=0?function(l,e){try{return e=n.to_jsstring(e),e.startsWith('.')&&(e=`${t.env.PWD}/${e}`),require(e)}catch(t){return n.lua_pushstring(l,n.to_luastring(t.message)),null}}:function(e,t){let l=new XMLHttpRequest;return l.open('GET',n.to_jsstring(t),!1),l.send(),200===l.status?eval(l.response):(n.lua_pushstring(e,n.to_luastring(`${l.status}: ${l.statusText}`)),null)};const T=function(e,t,l){let s=t[n.to_jsstring(l)];return s&&'function'==typeof s?s:(n.lua_pushfstring(e,n.to_luastring('undefined symbol: %s'),l),null)},x=function(e){n.lua_getfield(e,n.LUA_REGISTRYINDEX,n.to_luastring('LUA_NOENV'));let t=n.lua_toboolean(e,-1);return n.lua_pop(e,1),t};let O=function(e){let t=new XMLHttpRequest;return t.open('GET',n.to_jsstring(e),!1),t.send(),200===t.status};const m=1,U=2,E=function(e,t,l){let s=v(e,t);if(null===s){if(s=A(e,t,42===l[0]),null===s)return m;k(e,t,s)}if(42===l[0])return n.lua_pushboolean(e,1),0;let u=T(e,s,l);return null===u?U:(n.lua_pushcfunction(e,u),0)},L=function(e){let t=s.luaL_checkstring(e,1),l=s.luaL_checkstring(e,2),u=E(e,t,l);return 0===u?1:(n.lua_pushnil(e),n.lua_insert(e,-2),n.lua_pushliteral(e,u===m?f:'init'),3)},b=function(e,l,u,r){let o=n.lua_pushstring(e,n.to_luastring(`${u}${n.LUA_VERSUFFIX}`,!0)),_=t.env[o];_===void 0&&(_=t.env[u]),_===void 0||x(e)?n.lua_pushstring(e,n.to_luastring(r,!0)):(_=s.luaL_gsub(e,n.to_luastring(_),n.to_luastring(n.LUA_PATH_SEP+n.LUA_PATH_SEP,!0),n.to_luastring(n.LUA_PATH_SEP,!0).concat(h).concat(n.to_luastring(n.LUA_PATH_SEP,!0))),s.luaL_gsub(e,_,h,n.to_luastring(r)),n.lua_remove(e,-2)),n.lua_setfield(e,-3,l),n.lua_pop(e,1)},v=function(e,t){n.lua_rawgetp(e,n.LUA_REGISTRYINDEX,r),n.lua_getfield(e,-1,t);let l=n.lua_touserdata(e,-1);return n.lua_pop(e,2),l},k=function(e,t,l){n.lua_rawgetp(e,n.LUA_REGISTRYINDEX,r),n.lua_pushlightuserdata(e,l),n.lua_pushvalue(e,-1),n.lua_setfield(e,-3,t),n.lua_rawseti(e,-2,s.luaL_len(e,-2)+1),n.lua_pop(e,1)},R=function(e,t){for(;t[0]===n.LUA_PATH_SEP.charCodeAt(0);)t=t.slice(1);if(0===t.length)return null;let s=t.indexOf(n.LUA_PATH_SEP.charCodeAt(0));return 0>s&&(s=t.length),n.lua_pushlstring(e,t,s),t.slice(s)},S=function(e,t,l,u,r){let o=new s.luaL_Buffer;for(s.luaL_buffinit(e,o),0!==u[0]&&(t=s.luaL_gsub(e,t,u,r));null!==(l=R(e,l));){let l=s.luaL_gsub(e,n.lua_tostring(e,-1),n.to_luastring(n.LUA_PATH_MARK,!0),t);if(n.lua_remove(e,-2),O(l))return l;n.lua_pushfstring(e,n.to_luastring('\n\tno file \'%s\''),l),n.lua_remove(e,-2),s.luaL_addvalue(o)}return s.luaL_pushresult(o),null},I=function(e){let t=S(e,s.luaL_checkstring(e,1),s.luaL_checkstring(e,2),s.luaL_optstring(e,3,[46]),s.luaL_optstring(e,4,[n.LUA_DIRSEP.charCodeAt(0)]));return null===t?(n.lua_pushnil(e),n.lua_insert(e,-2),2):1},N=function(e,t,l,u){n.lua_getfield(e,n.lua_upvalueindex(1),l);let r=n.lua_tostring(e,-1);return null===r&&s.luaL_error(e,n.to_luastring('\'package.%s\' must be a string'),l),S(e,t,r,[46],u)},M=function(e,t,l){return t?(n.lua_pushstring(e,l),2):s.luaL_error(e,n.to_luastring('error loading module \'%s\' from file \'%s\':\n\t%s'),n.lua_tostring(e,1),l,n.lua_tostring(e,-1))},P=function(e){let t=s.luaL_checkstring(e,1),l=N(e,t,n.to_luastring('path',!0),n.to_luastring(c,!0));return null===l?1:M(e,s.luaL_loadfile(e,l)===n.LUA_OK,l)},y=function(e,t,l){let r;l=s.luaL_gsub(e,l,[46],g);let o=l.indexOf(u[0]);if(0<=o){r=n.lua_pushlstring(e,l,o),r=n.lua_pushfstring(e,n.to_luastring('%s%s'),d,r);let s=E(e,t,r);if(s!==U)return s;l=o+1}return r=n.lua_pushfstring(e,n.to_luastring('%s%s'),d,l),E(e,t,r)},C=function(e){let t=s.luaL_checkstring(e,1),l=N(e,t,n.to_luastring('cpath',!0),n.to_luastring(i,!0));return null===l?1:M(e,0===y(e,l,t),l)},D=function(e){let t=s.luaL_checkstring(e,1),l=t.indexOf(46),u;if(0>l)return 0;n.lua_pushlstring(e,t,l);let r=N(e,n.lua_tostring(e,-1),n.to_luastring('cpath',!0),n.to_luastring(i,!0));return null===r?1:0===(u=y(e,r,t))?(n.lua_pushstring(e,r),2):u==U?(n.lua_pushstring(e,n.to_luastring(`\n\tno module '${n.to_jsstring(t)}' in file '${n.to_jsstring(r)}'`)),1):M(e,0,r)},K=function(e){let t=s.luaL_checkstring(e,1);return n.lua_getfield(e,n.LUA_REGISTRYINDEX,n.to_luastring(s.LUA_PRELOAD_TABLE,!0)),n.lua_getfield(e,-1,t)===n.LUA_TNIL&&n.lua_pushliteral(e,`\n\tno field package.preload['${n.to_jsstring(t)}']`),1},B=function(e,t,l,u){let r=new s.luaL_Buffer;s.luaL_buffinit(e,r),n.lua_getfield(e,n.lua_upvalueindex(1),n.to_luastring('searchers',!0))!==n.LUA_TTABLE&&s.luaL_error(e,n.to_luastring('\'package.searchers\' must be a table'));return w(e,n.LUA_OK,{name:t,i:1,msg:r,ctx:l,k:u})},w=function(e,t,l){for(;;l.i++)if(t===n.LUA_OK?(n.lua_rawgeti(e,3,l.i)===n.LUA_TNIL&&(n.lua_pop(e,1),s.luaL_pushresult(l.msg),s.luaL_error(e,n.to_luastring('module \'%s\' not found:%s'),l.name,n.lua_tostring(e,-1))),n.lua_pushstring(e,l.name),n.lua_callk(e,1,2,l,w)):t=n.LUA_OK,n.lua_isfunction(e,-2))break;else n.lua_isstring(e,-2)?(n.lua_pop(e,1),s.luaL_addvalue(l.msg)):n.lua_pop(e,2);return l.k(e,n.LUA_OK,l.ctx)},G=function(e){let t=s.luaL_checkstring(e,1);if(n.lua_settop(e,1),n.lua_getfield(e,n.LUA_REGISTRYINDEX,n.to_luastring(s.LUA_LOADED_TABLE,!0)),n.lua_getfield(e,2,t),n.lua_toboolean(e,-1))return 1;n.lua_pop(e,1);return B(e,t,t,V)},V=function(e,t,l){return n.lua_pushstring(e,l),n.lua_insert(e,-2),n.lua_callk(e,2,1,l,j),j(e,n.LUA_OK,l)},j=function(e,t,l){let s=l;return n.lua_isnil(e,-1)||n.lua_setfield(e,2,s),n.lua_getfield(e,2,s)==n.LUA_TNIL&&(n.lua_pushboolean(e,1),n.lua_pushvalue(e,-1),n.lua_setfield(e,2,s)),1},F={loadlib:L,searchpath:I},X={require:G},H=function(e){let t=[K,P,C,D,null];n.lua_createtable(e);for(let l=0;t[l];l++)n.lua_pushvalue(e,-2),n.lua_pushcclosure(e,t[l],1),n.lua_rawseti(e,-2,l+1);n.lua_setfield(e,-2,n.to_luastring('searchers',!0))},Y=function(e){n.lua_newtable(e),n.lua_createtable(e,0,1),n.lua_setmetatable(e,-2),n.lua_rawsetp(e,n.LUA_REGISTRYINDEX,r)},z=function(e){return Y(e),s.luaL_newlib(e,F),H(e),b(e,n.to_luastring('path',!0),o,n.LUA_PATH_DEFAULT),b(e,n.to_luastring('cpath',!0),_,n.LUA_CPATH_DEFAULT),n.lua_pushliteral(e,n.LUA_DIRSEP+'\n'+n.LUA_PATH_SEP+'\n'+n.LUA_PATH_MARK+'\n'+n.LUA_EXEC_DIR+'\n'+u+'\n'),n.lua_setfield(e,-2,n.to_luastring('config',!0)),s.luaL_getsubtable(e,n.LUA_REGISTRYINDEX,n.to_luastring(s.LUA_LOADED_TABLE,!0)),n.lua_setfield(e,-2,n.to_luastring('loaded',!0)),s.luaL_getsubtable(e,n.LUA_REGISTRYINDEX,n.to_luastring(s.LUA_PRELOAD_TABLE,!0)),n.lua_setfield(e,-2,n.to_luastring('preload',!0)),n.lua_pushglobaltable(e),n.lua_pushvalue(e,-2),s.luaL_setfuncs(e,X,1),n.lua_pop(e,1),1};e.exports.luaopen_package=z}).call(t,l(19))},function(e,t,l){'use strict';window.WEB=!0;const n=l(24),s=n.lua,u=n.lauxlib,r=n.lualib,o=l(60);window.md=l(61).markdown;const _=u.luaL_newstate();r.luaL_openlibs(_),u.luaL_requiref(_,s.to_luastring('js'),o.luaopen_js,1),s.lua_pop(_,1);let i=u.luaL_loadfile(_,s.to_luastring('moonhub.lua'));if(i===s.LUA_OK&&(i=s.lua_pcall(_,0,0,0)),i!==s.LUA_OK){let e=u.luaL_tolstring(_,-1);s.lua_pop(_,1),console.error(s.to_jsstring(e))}},function(e){e.exports=function(e){return e&&'object'==typeof e&&'function'==typeof e.copy&&'function'==typeof e.fill&&'function'==typeof e.readUInt8}},function(e){e.exports='function'==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var l=function(){};l.prototype=t.prototype,e.prototype=new l,e.prototype.constructor=e}},function(e,t,l){'use strict';const n=l(0),s=l(1),u=l(28),r=l(3),_=l(16),o=l(27),i=l(8),c=l(15),d=s.CT,g=_.OpCodesI,f=r.TValue,L=-1,h={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},A={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},T=function(t){return t.t!==t.f},x=function(t,e){let l=o.expkind;if(T(t))return!1;switch(t.k){case l.VKINT:return!e||new f(d.LUA_TNUMINT,t.u.ival);case l.VKFLT:return!e||new f(d.LUA_TNUMFLT,t.u.nval);default:return!1;}},O=function(e,t,s){let n=t+s-1,l;if(e.pc>e.lasttarget&&(l=e.f.code[e.pc-1],l.opcode===g.OP_LOADNIL)){let e=l.A,s=e+l.B;if(e<=t&&t<=s+1||t<=e&&e<=n+1)return e<t&&(t=e),s>n&&(n=s),_.SETARG_A(l,t),void _.SETARG_B(l,n-t)}w(e,g.OP_LOADNIL,t,s-1,0)},m=function(t,l){return t.f.code[l.u.info]},U=function(e,t){let l=e.f.code[t].sBx;return l===L?L:t+1+l},E=function(e,t,l){let r=e.f.code[t],o=l-(t+1);n(l!==L),Math.abs(o)>_.MAXARG_sBx&&u.luaX_syntaxerror(e.ls,s.to_luastring('control structure too long',!0)),_.SETARG_sBx(r,o)},b=function(e,t,l){if(l===L)return t;if(t===L)t=l;else{let n=t,s=U(e,n);for(;s!==L;)n=s,s=U(e,n);E(e,n,l)}return t},v=function(e){let t=e.jpc;e.jpc=L;let l=G(e,g.OP_JMP,0,L);return l=b(e,l,t),l},k=function(e,t,l,n,s){return w(e,t,l,n,s),v(e)},R=function(e){return e.lasttarget=e.pc,e.pc},S=function(e,t){return 1<=t&&_.testTMode(e.f.code[t-1].opcode)?t-1:t},I=function(e,t){return e.f.code[S(e,t)]},N=function(e,t,l){let n=S(e,t),s=e.f.code[n];return!(s.opcode!==g.OP_TESTSET)&&(l!==_.NO_REG&&l!==s.B?_.SETARG_A(s,l):e.f.code[n]=_.CREATE_ABC(g.OP_TEST,s.B,0,s.C),!0)},M=function(e,t){for(;t!==L;t=U(e,t))N(e,t,_.NO_REG)},P=function(e,t,l,n,s){for(;t!==L;){let u=U(e,t);N(e,t,n)?E(e,t,l):E(e,t,s),t=u}},y=function(e){P(e,e.jpc,e.pc,_.NO_REG,e.pc),e.jpc=L},C=function(e,t){R(e),e.jpc=b(e,e.jpc,t)},D=function(e,t,l){l===e.pc?C(e,t):(n(l<e.pc),P(e,t,l,_.NO_REG,l))},K=function(e,t){let l=e.f;return y(e),l.code[e.pc]=t,l.lineinfo[e.pc]=e.ls.lastline,e.pc++},w=function(e,t,l,s,u){return n(_.getOpMode(t)===_.iABC),n(_.getBMode(t)!==_.OpArgN||0===s),n(_.getCMode(t)!==_.OpArgN||0===u),n(l<=_.MAXARG_A&&s<=_.MAXARG_B&&u<=_.MAXARG_C),K(e,_.CREATE_ABC(t,l,s,u))},B=function(e,t,l,s){return n(_.getOpMode(t)===_.iABx||_.getOpMode(t)===_.iAsBx),n(_.getCMode(t)===_.OpArgN),n(l<=_.MAXARG_A&&s<=_.MAXARG_Bx),K(e,_.CREATE_ABx(t,l,s))},G=function(e,t,l,n){return B(e,t,l,n+_.MAXARG_sBx)},V=function(e,t){return n(t<=_.MAXARG_Ax),K(e,_.CREATE_Ax(g.OP_EXTRAARG,t))},j=function(e,t,l){if(l<=_.MAXARG_Bx)return B(e,g.OP_LOADK,t,l);let n=B(e,g.OP_LOADKX,t,0);return V(e,l),n},F=function(e,t){let l=e.freereg+t;l>e.f.maxstacksize&&(l>=255&&u.luaX_syntaxerror(e.ls,s.to_luastring('function or expression needs too many registers',!0)),e.f.maxstacksize=l)},X=function(e,t){F(e,t),e.freereg+=t},H=function(e,t){!_.ISK(t)&&t>=e.nactvar&&(e.freereg--,n(t===e.freereg))},Y=function(t,l){l.k===o.expkind.VNONRELOC&&H(t,l.u.info)},z=function(e,t,l){let n=t.k===o.expkind.VNONRELOC?t.u.info:-1,s=l.k===o.expkind.VNONRELOC?l.u.info:-1;n>s?(H(e,n),H(e,s)):(H(e,s),H(e,n))},J=function(e,t,l){let n=e.f,s=i.luaH_set(e.L,e.ls.h,t);if(s.ttisinteger()){let t=s.value;if(t<e.nk&&n.k[t].ttype()===l.ttype()&&n.k[t].value===l.value)return t}let u=e.nk;return s.setivalue(u),n.k[u]=l,e.nk++,u},Z=function(e,t){let l=new f(d.LUA_TLIGHTUSERDATA,t),n=new f(d.LUA_TNUMINT,t);return J(e,l,n)},q=function(e,t){let l=new f(d.LUA_TNUMFLT,t);return J(e,l,l)},W=function(e,t){let l=new f(d.LUA_TBOOLEAN,t);return J(e,l,l)},Q=function(e){let t=new f(d.LUA_TNIL,null),l=new f(d.LUA_TTABLE,e.ls.h);return J(e,l,t)},$=function(t,l,e){let u=o.expkind;if(l.k===u.VCALL)_.SETARG_C(m(t,l),e+1);else if(l.k===u.VVARARG){let n=m(t,l);_.SETARG_B(n,e+1),_.SETARG_A(n,t.freereg),X(t,1)}else n(e===s.LUA_MULTRET)},ee=function(t,l){let e=o.expkind;l.k===e.VCALL?(n(2===m(t,l).C),l.k=e.VNONRELOC,l.u.info=m(t,l).A):l.k===e.VVARARG&&(_.SETARG_B(m(t,l),2),l.k=e.VRELOCABLE)},te=function(t,l){let e=o.expkind;switch(l.k){case e.VLOCAL:{l.k=e.VNONRELOC;break}case e.VUPVAL:{l.u.info=w(t,g.OP_GETUPVAL,0,l.u.info,0),l.k=e.VRELOCABLE;break}case e.VINDEXED:{let s;H(t,l.u.ind.idx),l.u.ind.vt===e.VLOCAL?(H(t,l.u.ind.t),s=g.OP_GETTABLE):(n(l.u.ind.vt===e.VUPVAL),s=g.OP_GETTABUP),l.u.info=w(t,s,0,l.u.ind.t,l.u.ind.idx),l.k=e.VRELOCABLE;break}case e.VVARARG:case e.VCALL:{ee(t,l);break}default:}},ae=function(e,t,l,n){return R(e),w(e,g.OP_LOADBOOL,t,l,n)},le=function(t,l,e){let s=o.expkind;switch(te(t,l),l.k){case s.VNIL:{O(t,e,1);break}case s.VFALSE:case s.VTRUE:{w(t,g.OP_LOADBOOL,e,l.k===s.VTRUE,0);break}case s.VK:{j(t,e,l.u.info);break}case s.VKFLT:{j(t,e,q(t,l.u.nval));break}case s.VKINT:{j(t,e,Z(t,l.u.ival));break}case s.VRELOCABLE:{let n=m(t,l);_.SETARG_A(n,e);break}case s.VNONRELOC:{e!==l.u.info&&w(t,g.OP_MOVE,e,l.u.info,0);break}default:return void n(l.k===s.VJMP);}l.u.info=e,l.k=s.VNONRELOC},ne=function(t,l){l.k!==o.expkind.VNONRELOC&&(X(t,1),le(t,l,t.freereg-1))},se=function(e,t){for(;t!==L;t=U(e,t)){let l=I(e,t);if(l.opcode!==g.OP_TESTSET)return!0}return!1},ue=function(t,l,e){let n=o.expkind;if(le(t,l,e),l.k===n.VJMP&&(l.t=b(t,l.t,l.u.info)),T(l)){let s=L,u=L,r;if(se(t,l.t)||se(t,l.f)){let r=l.k===n.VJMP?L:v(t);s=ae(t,e,0,1),u=ae(t,e,1,0),C(t,r)}r=R(t),P(t,l.f,r,e,s),P(t,l.t,r,e,u)}l.f=l.t=L,l.u.info=e,l.k=n.VNONRELOC},re=function(t,l){te(t,l),Y(t,l),X(t,1),ue(t,l,t.freereg-1)},oe=function(t,l){if(te(t,l),l.k===o.expkind.VNONRELOC){if(!T(l))return l.u.info;if(l.u.info>=t.nactvar)return ue(t,l,l.u.info),l.u.info}return re(t,l),l.u.info},_e=function(t,l){T(l)?oe(t,l):te(t,l)},ie=function(t,l){let e=o.expkind,n=!1;switch(_e(t,l),l.k){case e.VTRUE:l.u.info=W(t,!0),n=!0;break;case e.VFALSE:l.u.info=W(t,!1),n=!0;break;case e.VNIL:l.u.info=Q(t),n=!0;break;case e.VKINT:l.u.info=Z(t,l.u.ival),n=!0;break;case e.VKFLT:l.u.info=q(t,l.u.nval),n=!0;break;case e.VK:n=!0;break;default:}return n&&(l.k=e.VK,l.u.info<=_.MAXINDEXRK)?_.RKASK(l.u.info):oe(t,l)},pe=function(t,l){let e=I(t,l.u.info);n(_.testTMode(e.opcode)&&e.opcode!==g.OP_TESTSET&&e.opcode!==g.OP_TEST),_.SETARG_A(e,!e.A)},ce=function(t,l,e){if(l.k===o.expkind.VRELOCABLE){let n=m(t,l);if(n.opcode===g.OP_NOT)return t.pc--,k(t,g.OP_TEST,n.B,0,!e)}return ne(t,l),Y(t,l),k(t,g.OP_TESTSET,_.NO_REG,l.u.info,e)},de=function(t,l){let e=o.expkind,n;switch(te(t,l),l.k){case e.VJMP:{pe(t,l),n=l.u.info;break}case e.VK:case e.VKFLT:case e.VKINT:case e.VTRUE:{n=L;break}default:{n=ce(t,l,0);break}}l.f=b(t,l.f,n),C(t,l.t),l.t=L},ge=function(t,l){let e=o.expkind,n;switch(te(t,l),l.k){case e.VJMP:{n=l.u.info;break}case e.VNIL:case e.VFALSE:{n=L;break}default:{n=ce(t,l,1);break}}l.t=b(t,l.t,n),C(t,l.f),l.f=L},fe=function(t,l){let e=o.expkind;switch(te(t,l),l.k){case e.VNIL:case e.VFALSE:{l.k=e.VTRUE;break}case e.VK:case e.VKFLT:case e.VKINT:case e.VTRUE:{l.k=e.VFALSE;break}case e.VJMP:{pe(t,l);break}case e.VRELOCABLE:case e.VNONRELOC:{ne(t,l),Y(t,l),l.u.info=w(t,g.OP_NOT,0,l.u.info,0),l.k=e.VRELOCABLE;break}}{let e=l.f;l.f=l.t,l.t=e}M(t,l.f),M(t,l.t)},Le=function(e,t,l){return e===s.LUA_OPBAND||e===s.LUA_OPBOR||e===s.LUA_OPBXOR||e===s.LUA_OPSHL||e===s.LUA_OPSHR||e===s.LUA_OPBNOT?!1!==c.tointeger(t)&&!1!==c.tointeger(l):e===s.LUA_OPDIV||e===s.LUA_OPIDIV||e===s.LUA_OPMOD?0!==l.value:1},he=function(e,t,l){let s=o.expkind,n,u;if(!(n=x(t,!0))||!(u=x(l,!0))||!Le(e,n,u))return 0;let _=new f;if(r.luaO_arith(null,e,n,u,_),_.ttisinteger())t.k=s.VKINT,t.u.ival=_.value;else{let e=_.value;if(isNaN(e)||0===e)return!1;t.k=s.VKFLT,t.u.nval=e}return!0},Ae=function(t,l,n,e){let s=oe(t,n);Y(t,n),n.u.info=w(t,l,0,s,0),n.k=o.expkind.VRELOCABLE,Oe(t,e)},Te=function(e,t,l,n,s){let u=ie(e,n),r=ie(e,l);z(e,l,n),l.u.info=w(e,t,0,r,u),l.k=o.expkind.VRELOCABLE,Oe(e,s)},xe=function(e,t,l,s){let u=o.expkind,r;l.k===u.VK?r=_.RKASK(l.u.info):(n(l.k===u.VNONRELOC),r=l.u.info);let i=ie(e,s);switch(z(e,l,s),t){case h.OPR_NE:{l.u.info=k(e,g.OP_EQ,0,r,i);break}case h.OPR_GT:case h.OPR_GE:{let n=t-h.OPR_NE+g.OP_EQ;l.u.info=k(e,n,1,i,r);break}default:{let n=t-h.OPR_EQ+g.OP_EQ;l.u.info=k(e,n,1,r,i);break}}l.k=u.VJMP},Oe=function(e,t){e.f.lineinfo[e.pc-1]=t};e.exports.BinOpr=h,e.exports.NO_JUMP=L,e.exports.UnOpr=A,e.exports.getinstruction=m,e.exports.luaK_checkstack=F,e.exports.luaK_code=K,e.exports.luaK_codeABC=w,e.exports.luaK_codeABx=B,e.exports.luaK_codeAsBx=G,e.exports.luaK_codek=j,e.exports.luaK_concat=b,e.exports.luaK_dischargevars=te,e.exports.luaK_exp2RK=ie,e.exports.luaK_exp2anyreg=oe,e.exports.luaK_exp2anyregup=function(t,l){(l.k!==o.expkind.VUPVAL||T(l))&&oe(t,l)},e.exports.luaK_exp2nextreg=re,e.exports.luaK_exp2val=_e,e.exports.luaK_fixline=Oe,e.exports.luaK_getlabel=R,e.exports.luaK_goiffalse=ge,e.exports.luaK_goiftrue=de,e.exports.luaK_indexed=function(e,l,t){let s=o.expkind;n(!T(l)&&(o.vkisinreg(l.k)||l.k===s.VUPVAL)),l.u.ind.t=l.u.info,l.u.ind.idx=ie(e,t),l.u.ind.vt=l.k===s.VUPVAL?s.VUPVAL:s.VLOCAL,l.k=s.VINDEXED},e.exports.luaK_infix=function(e,t,l){switch(t){case h.OPR_AND:{de(e,l);break}case h.OPR_OR:{ge(e,l);break}case h.OPR_CONCAT:{re(e,l);break}case h.OPR_ADD:case h.OPR_SUB:case h.OPR_MUL:case h.OPR_DIV:case h.OPR_IDIV:case h.OPR_MOD:case h.OPR_POW:case h.OPR_BAND:case h.OPR_BOR:case h.OPR_BXOR:case h.OPR_SHL:case h.OPR_SHR:{x(l,!1)||ie(e,l);break}default:{ie(e,l);break}}},e.exports.luaK_intK=Z,e.exports.luaK_jump=v,e.exports.luaK_jumpto=function(e,l){return D(e,v(e),l)},e.exports.luaK_nil=O,e.exports.luaK_numberK=q,e.exports.luaK_patchclose=function(e,t,l){for(l++;t!==L;t=U(e,t)){let s=e.f.code[t];n(s.opcode===g.OP_JMP&&(0===s.A||s.A>=l)),_.SETARG_A(s,l)}},e.exports.luaK_patchlist=D,e.exports.luaK_patchtohere=C,e.exports.luaK_posfix=function(e,t,l,u,r){let i=o.expkind;switch(t){case h.OPR_AND:{n(l.t===L),te(e,u),u.f=b(e,u.f,l.f),l.to(u);break}case h.OPR_OR:{n(l.f===L),te(e,u),u.t=b(e,u.t,l.t),l.to(u);break}case h.OPR_CONCAT:{_e(e,u);let t=m(e,u);u.k===i.VRELOCABLE&&t.opcode===g.OP_CONCAT?(n(l.u.info===t.B-1),Y(e,l),_.SETARG_B(t,l.u.info),l.k=i.VRELOCABLE,l.u.info=u.u.info):(re(e,u),Te(e,g.OP_CONCAT,l,u,r));break}case h.OPR_ADD:case h.OPR_SUB:case h.OPR_MUL:case h.OPR_DIV:case h.OPR_IDIV:case h.OPR_MOD:case h.OPR_POW:case h.OPR_BAND:case h.OPR_BOR:case h.OPR_BXOR:case h.OPR_SHL:case h.OPR_SHR:{he(t+s.LUA_OPADD,l,u)||Te(e,t+g.OP_ADD,l,u,r);break}case h.OPR_EQ:case h.OPR_LT:case h.OPR_LE:case h.OPR_NE:case h.OPR_GT:case h.OPR_GE:{xe(e,t,l,u);break}}return l},e.exports.luaK_prefix=function(t,l,n,e){let u=new o.expdesc;switch(u.k=o.expkind.VKINT,u.u.ival=u.u.nval=u.u.info=0,u.t=L,u.f=L,l){case A.OPR_MINUS:case A.OPR_BNOT:if(he(l+s.LUA_OPUNM,n,u))break;case A.OPR_LEN:Ae(t,l+g.OP_UNM,n,e);break;case A.OPR_NOT:fe(t,n);}},e.exports.luaK_reserveregs=X,e.exports.luaK_ret=function(e,t,l){w(e,g.OP_RETURN,t,l+1,0)},e.exports.luaK_self=function(t,l,e){oe(t,l);let n=l.u.info;Y(t,l),l.u.info=t.freereg,l.k=o.expkind.VNONRELOC,X(t,2),w(t,g.OP_SELF,l.u.info,n,ie(t,e)),Y(t,e)},e.exports.luaK_setlist=function(e,t,l,r){let o=(l-1)/_.LFIELDS_PER_FLUSH+1,i=r===s.LUA_MULTRET?0:r;n(0!==r&&r<=_.LFIELDS_PER_FLUSH),o<=_.MAXARG_C?w(e,g.OP_SETLIST,t,i,o):o<=_.MAXARG_Ax?(w(e,g.OP_SETLIST,t,i,0),V(e,o)):u.luaX_syntaxerror(e.ls,s.to_luastring('constructor too long',!0)),e.freereg=t+1},e.exports.luaK_setmultret=function(t,l){$(t,l,s.LUA_MULTRET)},e.exports.luaK_setoneret=ee,e.exports.luaK_setreturns=$,e.exports.luaK_storevar=function(t,l,n){let s=o.expkind;switch(l.k){case s.VLOCAL:return Y(t,n),void ue(t,n,l.u.info);case s.VUPVAL:{let s=oe(t,n);w(t,g.OP_SETUPVAL,s,l.u.info,0);break}case s.VINDEXED:{let u=l.u.ind.vt===s.VLOCAL?g.OP_SETTABLE:g.OP_SETTABUP,r=ie(t,n);w(t,u,l.u.ind.t,l.u.ind.idx,r);break}}Y(t,n)},e.exports.luaK_stringK=function(e,t){let l=new f(d.LUA_TLNGSTR,t);return J(e,l,l)}},function(e,t,l){'use strict';var n=Math.max;const s=l(0),u=l(1),r=l(7),o=l(12),_=l(3),i=l(16),c=l(9),d=l(21);let g=[25,147,u.char['\r'],u.char['\n'],26,u.char['\n']];class h{constructor(e,t,l){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,s(t instanceof d.ZIO,'BytecodeParser only operates on a ZIO'),s(u.is_luastring(l)),this.name=l[0]==u.char['@']||l[0]==u.char['=']?l.slice(1):l[0]==u.LUA_SIGNATURE.charCodeAt(0)?u.to_luastring('binary string',!0):l,this.L=e,this.Z=t,this.arraybuffer=new ArrayBuffer(n(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(e){let t=new Uint8Array(e);return 0!==d.luaZ_read(this.Z,t,0,e)&&this.error('truncated'),Array.from(t)}readByte(){return 0!==d.luaZ_read(this.Z,this.u8,0,1)&&this.error('truncated'),this.u8[0]}readInteger(){return 0!==d.luaZ_read(this.Z,this.u8,0,this.integerSize)&&this.error('truncated'),this.dv.getInt32(0,!0)}readSize_t(){return this.readInteger()}readInt(){return 0!==d.luaZ_read(this.Z,this.u8,0,this.intSize)&&this.error('truncated'),this.dv.getInt32(0,!0)}readNumber(){return 0!==d.luaZ_read(this.Z,this.u8,0,this.numberSize)&&this.error('truncated'),this.dv.getFloat64(0,!0)}readString(){let e=n(this.readByte()-1,0);return 255===e+1&&(e=this.readSize_t()-1),0===e?null:c.luaS_bless(this.L,this.read(e))}static MASK1(e,t){return~(-1<<e)<<t}static MASK0(e,t){return~h.MASK1(e,t)}readInstruction(){return 0!==d.luaZ_read(this.Z,this.u8,0,this.instructionSize)&&this.error('truncated'),this.dv.getUint32(0,!0)}readCode(e){let t=this.readInt(),l=i,n=h;for(let s=0,u;s<t;s++)u=this.readInstruction(),e.code[s]={code:u,opcode:u>>l.POS_OP&n.MASK1(l.SIZE_OP,0),A:u>>l.POS_A&n.MASK1(l.SIZE_A,0),B:u>>l.POS_B&n.MASK1(l.SIZE_B,0),C:u>>l.POS_C&n.MASK1(l.SIZE_C,0),Bx:u>>l.POS_Bx&n.MASK1(l.SIZE_Bx,0),Ax:u>>l.POS_Ax&n.MASK1(l.SIZE_Ax,0),sBx:(u>>l.POS_Bx&n.MASK1(l.SIZE_Bx,0))-l.MAXARG_sBx}}readUpvalues(e){let t=this.readInt();for(let l=0;l<t;l++)e.upvalues[l]={name:null,instack:this.readByte(),idx:this.readByte()}}readConstants(e){let l=this.readInt();for(let n=0,s;n<l;n++)s=this.readByte(),s===u.CT.LUA_TNIL?e.k.push(new _.TValue(u.CT.LUA_TNIL,null)):s===u.CT.LUA_TBOOLEAN?e.k.push(new _.TValue(u.CT.LUA_TBOOLEAN,0!==this.readByte())):s===u.CT.LUA_TNUMFLT?e.k.push(new _.TValue(u.CT.LUA_TNUMFLT,this.readNumber())):s===u.CT.LUA_TNUMINT?e.k.push(new _.TValue(u.CT.LUA_TNUMINT,this.readInteger())):s===u.CT.LUA_TSHRSTR||s===u.CT.LUA_TLNGSTR?e.k.push(new _.TValue(u.CT.LUA_TLNGSTR,this.readString())):this.error(`unrecognized constant '${s}'`)}readProtos(e){let t=this.readInt();for(let l=0;l<t;l++)e.p[l]=new o.Proto(this.L),this.readFunction(e.p[l],e.source)}readDebug(e){let t=this.readInt();for(let l=0;l<t;l++)e.lineinfo[l]=this.readInt();t=this.readInt();for(let l=0;l<t;l++)e.locvars[l]={varname:this.readString(),startpc:this.readInt(),endpc:this.readInt()};t=this.readInt();for(let l=0;l<t;l++)e.upvalues[l].name=this.readString()}readFunction(e,t){e.source=this.readString(),null===e.source&&(e.source=t),e.linedefined=this.readInt(),e.lastlinedefined=this.readInt(),e.numparams=this.readByte(),e.is_vararg=0!==this.readByte(),e.maxstacksize=this.readByte(),this.readCode(e),this.readConstants(e),this.readUpvalues(e),this.readProtos(e),this.readDebug(e)}checkliteral(e,t){let l=this.read(e.length);l.join()!==e.join()&&this.error(t)}checkHeader(){this.checkliteral(u.to_luastring(u.LUA_SIGNATURE.substring(1)),'not a'),83!==this.readByte()&&this.error('version mismatch in'),0!==this.readByte()&&this.error('format mismatch in'),this.checkliteral(g,'corrupted'),this.intSize=this.readByte(),this.size_tSize=this.readByte(),this.instructionSize=this.readByte(),this.integerSize=this.readByte(),this.numberSize=this.readByte(),this.checksize(this.intSize,4,'int'),this.checksize(this.size_tSize,4,'size_t'),this.checksize(this.instructionSize,4,'instruction'),this.checksize(this.integerSize,4,'integer'),this.checksize(this.numberSize,8,'number'),22136!==this.readInteger()&&this.error('endianness mismatch in'),370.5!==this.readNumber()&&this.error('float format mismatch in')}error(e){_.luaO_pushfstring(this.L,u.to_luastring('%s: %s precompiled chunk'),this.name,u.to_luastring(e)),r.luaD_throw(this.L,u.thread_status.LUA_ERRSYNTAX)}checksize(e,t,l){e!==t&&this.error(`${l} size mismatch in`)}}e.exports.luaU_undump=function(e,t,l){let n=new h(e,t,l);n.checkHeader();let u=o.luaF_newLclosure(e,n.readByte());return r.luaD_inctop(e),e.stack[e.top-1].setclLvalue(u),u.p=new o.Proto(e),n.readFunction(u.p,null),s(u.nupvalues===u.p.upvalues.length),u}},function(e,t,l){'use strict';var n=Number.parseInt;const u=l(1),s=u.constant_types,r=16*n(u.LUA_VERSION_MAJOR)+n(u.LUA_VERSION_MINOR);class o{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}}const _=function(e,t,l){0===l.status&&0<t&&(l.status=l.writer(l.L,e,t,l.data))},i=function(e,t){e=u.to_luastring(e),_(e,e.length,t)},c=function(e,t){_([e],1,t)},d=function(e,l){let n=new DataView(new ArrayBuffer(4));n.setInt32(0,e,!0);let s=[];for(let t=0;4>t;t++)s.push(n.getUint8(t,!0));_(s,4,l)},g=function(e,l){let n=new DataView(new ArrayBuffer(4));n.setInt32(0,e,!0);let s=[];for(let t=0;4>t;t++)s.push(n.getUint8(t,!0));_(s,8,l)},L=function(e,l){let n=new DataView(new ArrayBuffer(8));n.setFloat64(0,e,!0);let s=[];for(let t=0;8>t;t++)s.push(n.getUint8(t,!0));_(s,8,l)},h=function(e,t){if(null===e)c(0,t);else{let l=e.tsslen()+1,n=e.getstr();255>l?c(l,t):(c(255,t),g(l,t)),_(n,l-1,t)}},A=function(e,t){let l=e.code.map((t)=>t.code);d(l.length,t);for(let n=0;n<l.length;n++)d(l[n],t)},T=function(e,t){let l=e.k.length;d(l,t);for(let n=0,u;n<l;n++)switch(u=e.k[n],c(u.ttype(),t),u.ttype()){case s.LUA_TNIL:break;case s.LUA_TBOOLEAN:c(u.value?1:0,t);break;case s.LUA_TNUMFLT:L(u.value,t);break;case s.LUA_TNUMINT:g(u.value,t);break;case s.LUA_TSHRSTR:case s.LUA_TLNGSTR:h(u.tsvalue(),t);}},x=function(e,t){let l=e.p.length;d(l,t);for(let n=0;n<l;n++)U(e.p[n],e.source,t)},O=function(e,t){let l=e.upvalues.length;d(l,t);for(let n=0;n<l;n++)c(e.upvalues[n].instack?1:0,t),c(e.upvalues[n].idx,t)},m=function(e,t){let l=t.strip?0:e.lineinfo.length;d(l,t);for(let n=0;n<l;n++)d(e.lineinfo[n],t);l=t.strip?0:e.locvars.length,d(l,t);for(let n=0;n<l;n++)h(e.locvars[n].varname,t),d(e.locvars[n].startpc,t),d(e.locvars[n].endpc,t);l=t.strip?0:e.upvalues.length,d(l,t);for(let n=0;n<l;n++)h(e.upvalues[n].name,t)},U=function(e,t,l){l.strip||e.source===t?h(null,l):h(e.source,l),d(e.linedefined,l),d(e.lastlinedefined,l),c(e.numparams,l),c(e.is_vararg?1:0,l),c(e.maxstacksize,l),A(e,l),T(e,l),O(e,l),x(e,l),m(e,l)},E=function(e){i(u.LUA_SIGNATURE,e),c(r,e),c(0,e);let t='\x19\x93\r\n\x1A\n'.split('').map((t)=>t.charCodeAt(0));_(t,t.length,e),c(4,e),c(4,e),c(4,e),c(4,e),c(8,e),g(22136,e),L(370.5,e)};e.exports.luaU_dump=function(e,t,l,n,s){let u=new o;return u.L=e,u.writer=l,u.data=n,u.strip=s,u.status=0,E(u),c(t.upvalues.length,u),U(t,null,u),u.status}},function(e,t,l){'use strict';const n=l(2),s=l(6),u=l(45),r=l(30),o=l(31),_=l(32),i=l(33),c=l(34),d=l(35),g=l(36),f=l(37),h=l(29);e.exports.luaL_openlibs=function(e){const t={[h.LUA_LOADLIBNAME]:f.luaopen_package,[h.LUA_COLIBNAME]:r.luaopen_coroutine,[h.LUA_DBLIBNAME]:d.luaopen_debug,[h.LUA_MATHLIBNAME]:o.luaopen_math,[h.LUA_OSLIBNAME]:g.luaopen_os,[h.LUA_STRLIBNAME]:_.luaopen_string,[h.LUA_TABLIBNAME]:i.luaopen_table,[h.LUA_UTF8LIBNAME]:c.luaopen_utf8,_G:u.luaopen_base};for(let l in!1,t)s.luaL_requiref(e,n.to_luastring(l),t[l],1),n.lua_pop(e,1)}},function(e,t,l){'use strict';(function(t,s){const u=l(2),r=l(6),n=['stop','restart','collect','count','step','setpause','setstepmul','isrunning'].map((t)=>u.to_luastring(t)),o=function(e,t,l,n){return r.luaL_checkany(e,1),r.luaL_getmetafield(e,1,t)===u.LUA_TNIL?(u.lua_pushcfunction(e,n),u.lua_pushvalue(e,1),l?u.lua_pushinteger(e,0):u.lua_pushnil(e)):(u.lua_pushvalue(e,1),u.lua_call(e,1,3)),3},_=function(e){return r.luaL_checktype(e,1,u.LUA_TTABLE),u.lua_settop(e,2),u.lua_next(e,1)?2:(u.lua_pushnil(e),1)},i=function(e){let t=r.luaL_checkinteger(e,2)+1;return u.lua_pushinteger(e,t),u.lua_geti(e,1,t)===u.LUA_TNIL?1:2},c=function(e,t){let l=/^[\t\v\f \n\r]*([\+\-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(u.to_jsstring(e));if(!l)return null;let s='-'===l[1],o=l[2],_=0;for(let l=0,n;l<o.length;l++){if(n=/\d/.test(o[l])?o.charCodeAt(l)-48:o[l].toUpperCase().charCodeAt(0)-65+10,n>=t)return null;_=(0|_*t)+n}return 0|(s?-_:_)},d=function(e){let t=r.luaL_optinteger(e,2,1);return u.lua_settop(e,1),u.lua_type(e,1)===u.LUA_TSTRING&&0<t&&(r.luaL_where(e,t),u.lua_pushvalue(e,1),u.lua_concat(e,2)),u.lua_error(e)},g=function(e,t,l){return t!==u.LUA_OK&&t!==u.LUA_YIELD?(u.lua_pushboolean(e,0),u.lua_pushvalue(e,-2),2):u.lua_gettop(e)-l},f=function(e,t,l){return t===u.LUA_OK?(0!==l&&(u.lua_pushvalue(e,l),!u.lua_setupvalue(e,-2,1)&&u.lua_pop(e,1)),1):(u.lua_pushnil(e),u.lua_insert(e,-2),2)},h=5,A=function(e){return(r.luaL_checkstack(e,2,u.to_luastring('too many nested functions',!0)),u.lua_pushvalue(e,1),u.lua_call(e,0,1),u.lua_isnil(e,-1))?(u.lua_pop(e,1),null):(u.lua_isstring(e,-1)||r.luaL_error(e,u.to_luastring('reader function must return a string',!0)),u.lua_replace(e,h),u.lua_tostring(e,h))},T={assert:function(e){return u.lua_toboolean(e,1)?u.lua_gettop(e):(r.luaL_checkany(e,1),u.lua_remove(e,1),u.lua_pushliteral(e,'assertion failed!'),u.lua_settop(e,1),d(e))},collectgarbage:function(e){r.luaL_checkoption(e,1,u.to_luastring('collect'),n),r.luaL_optinteger(e,2,0),r.luaL_error(e,u.to_luastring('lua_gc not implemented'))},error:d,getmetatable:function(e){return(r.luaL_checkany(e,1),!u.lua_getmetatable(e,1))?(u.lua_pushnil(e),1):(r.luaL_getmetafield(e,1,u.to_luastring('__metatable',!0)),1)},ipairs:function(e){return r.luaL_checkany(e,1),u.lua_pushcfunction(e,i),u.lua_pushvalue(e,1),u.lua_pushinteger(e,0),3},load:function(e){let t=u.lua_tostring(e,1),l=r.luaL_optstring(e,3,u.to_luastring('bt',!0)),n=u.lua_isnone(e,4)?0:4,s;if(null!==t){let n=r.luaL_optstring(e,2,t);s=r.luaL_loadbufferx(e,t,t.length,n,l)}else{let t=r.luaL_optstring(e,2,u.to_luastring('=(load)',!0));r.luaL_checktype(e,1,u.LUA_TFUNCTION),u.lua_settop(e,h),s=u.lua_load(e,A,null,t,l)}return f(e,s,n)},next:_,pairs:function(e){return o(e,u.to_luastring('__pairs',!0),0,_)},pcall:function(e){r.luaL_checkany(e,1),u.lua_pushboolean(e,1),u.lua_insert(e,1);let t=u.lua_pcallk(e,u.lua_gettop(e)-2,u.LUA_MULTRET,0,0,g);return g(e,t,0)},print:function(e){let l=u.lua_gettop(e),n=[];u.lua_getglobal(e,u.to_luastring('tostring',!0));for(let t=1;t<=l;t++){u.lua_pushvalue(e,-1),u.lua_pushvalue(e,t),u.lua_call(e,1,1);let l=u.lua_tolstring(e,-1);if(null===l)return r.luaL_error(e,u.to_luastring('\'tostring\' must return a string to \'print\'',!0));1<t&&n.push(9),n=n.concat(l),u.lua_pop(e,1)}return t.stdout?(n.push(10),t.stdout.write(s.from(n))):console.log(u.to_jsstring(n)),0},rawequal:function(e){return r.luaL_checkany(e,1),r.luaL_checkany(e,2),u.lua_pushboolean(e,u.lua_rawequal(e,1,2)),1},rawget:function(e){return r.luaL_checktype(e,1,u.LUA_TTABLE),r.luaL_checkany(e,2),u.lua_settop(e,2),u.lua_rawget(e,1),1},rawlen:function(e){let l=u.lua_type(e,1);return r.luaL_argcheck(e,l===u.LUA_TTABLE||l===u.LUA_TSTRING,1,u.to_luastring('table or string expected',!0)),u.lua_pushinteger(e,u.lua_rawlen(e,1)),1},rawset:function(e){return r.luaL_checktype(e,1,u.LUA_TTABLE),r.luaL_checkany(e,2),r.luaL_checkany(e,3),u.lua_settop(e,3),u.lua_rawset(e,1),1},select:function(e){let t=u.lua_gettop(e);if(u.lua_type(e,1)===u.LUA_TSTRING&&35===u.lua_tostring(e,1)[0])return u.lua_pushinteger(e,t-1),1;let l=r.luaL_checkinteger(e,1);return 0>l?l=t+l:l>t&&(l=t),r.luaL_argcheck(e,1<=l,1,u.to_luastring('index out of range',!0)),t-l},setmetatable:function(e){let l=u.lua_type(e,2);return(r.luaL_checktype(e,1,u.LUA_TTABLE),r.luaL_argcheck(e,l===u.LUA_TNIL||l===u.LUA_TTABLE,2,u.to_luastring('nil or table expected',!0)),r.luaL_getmetafield(e,1,u.to_luastring('__metatable',!0))!==u.LUA_TNIL)?r.luaL_error(e,u.to_luastring('cannot change a protected metatable',!0)):(u.lua_settop(e,2),u.lua_setmetatable(e,1),1)},tonumber:function(e){if(0>=u.lua_type(e,2)){if(r.luaL_checkany(e,1),u.lua_type(e,1)===u.LUA_TNUMBER)return u.lua_settop(e,1),1;let t=u.lua_tostring(e,1);if(null!==t&&u.lua_stringtonumber(e,t)===t.length+1)return 1}else{let t=r.luaL_checkinteger(e,2);r.luaL_checktype(e,1,u.LUA_TSTRING);let l=u.lua_tostring(e,1);r.luaL_argcheck(e,2<=t&&36>=t,2,u.to_luastring('base out of range',!0));let s=c(l,t);if(null!==s)return u.lua_pushinteger(e,s),1}return u.lua_pushnil(e),1},tostring:function(e){return r.luaL_checkany(e,1),r.luaL_tolstring(e,1),1},type:function(e){let l=u.lua_type(e,1);return r.luaL_argcheck(e,l!==u.LUA_TNONE,1,u.to_luastring('value expected',!0)),u.lua_pushstring(e,u.lua_typename(e,l)),1},xpcall:function(e){let t=u.lua_gettop(e);r.luaL_checktype(e,2,u.LUA_TFUNCTION),u.lua_pushboolean(e,1),u.lua_pushvalue(e,1),u.lua_rotate(e,3,2);let l=u.lua_pcallk(e,t-2,u.LUA_MULTRET,2,2,g);return g(e,l,2)}};e.exports.luaopen_base=function(e){return u.lua_pushglobaltable(e),r.luaL_setfuncs(e,T,0),u.lua_pushvalue(e,-1),u.lua_setfield(e,-2,u.to_luastring('_G',!0)),u.lua_pushliteral(e,u.LUA_VERSION),u.lua_setfield(e,-2,u.to_luastring('_VERSION',!0)),1}}).call(t,l(19),l(46).Buffer)},function(e,t,l){'use strict';var n=Math.pow,s=Math.floor,u=String.fromCharCode,r=Math.min;(function(e){function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _(e,t){if(o()<t)throw new RangeError('Invalid typed array length');return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=c.prototype):(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,l){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,l);if('number'==typeof e){if('string'==typeof t)throw new Error('If encoding is specified then the first argument must be a string');return f(this,e)}return i(this,e,t,l)}function i(e,t,l,n){if('number'==typeof t)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&t instanceof ArrayBuffer?A(e,t,l,n):'string'==typeof t?L(e,t,l):T(e,t)}function d(e){if('number'!=typeof e)throw new TypeError('"size" argument must be a number');else if(0>e)throw new RangeError('"size" argument must not be negative')}function g(e,t,l,n){return d(t),0>=t?_(e,t):void 0===l?_(e,t):'string'==typeof n?_(e,t).fill(l,n):_(e,t).fill(l)}function f(e,t){if(d(t),e=_(e,0>t?0:0|x(t)),!c.TYPED_ARRAY_SUPPORT)for(var l=0;l<t;++l)e[l]=0;return e}function L(e,t,l){if(('string'!=typeof l||''===l)&&(l='utf8'),!c.isEncoding(l))throw new TypeError('"encoding" must be a valid string encoding');var n=0|O(t,l);e=_(e,n);var s=e.write(t,l);return s!==n&&(e=e.slice(0,s)),e}function h(e,t){var l=0>t.length?0:0|x(t.length);e=_(e,l);for(var n=0;n<l;n+=1)e[n]=255&t[n];return e}function A(e,t,l,n){if(t.byteLength,0>l||t.byteLength<l)throw new RangeError('\'offset\' is out of bounds');if(t.byteLength<l+(n||0))throw new RangeError('\'length\' is out of bounds');return t=void 0===l&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,l):new Uint8Array(t,l,n),c.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=c.prototype):e=h(e,t),e}function T(e,t){if(c.isBuffer(t)){var l=0|x(t.length);return(e=_(e,l),0===e.length)?e:(t.copy(e,0,0,l),e)}if(t){if('undefined'!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||'length'in t)return'number'!=typeof t.length||ee(t.length)?_(e,0):h(e,t);if('Buffer'===t.type&&le(t.data))return h(e,t.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function x(e){if(e>=o())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+o().toString(16)+' bytes');return 0|e}function O(e,t){if(c.isBuffer(e))return e.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;'string'!=typeof e&&(e=''+e);var l=e.length;if(0===l)return 0;for(var n=!1;;)switch(t){case'ascii':case'latin1':case'binary':return l;case'utf8':case'utf-8':case void 0:return Z(e).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*l;case'hex':return l>>>1;case'base64':return Q(e).length;default:if(n)return Z(e).length;t=(''+t).toLowerCase(),n=!0;}}function m(e,t,l){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return'';if((void 0===l||l>this.length)&&(l=this.length),0>=l)return'';if(l>>>=0,t>>>=0,l<=t)return'';for(e||(e='utf8');;)switch(e){case'hex':return K(this,t,l);case'utf8':case'utf-8':return P(this,t,l);case'ascii':return C(this,t,l);case'latin1':case'binary':return D(this,t,l);case'base64':return M(this,t,l);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return B(this,t,l);default:if(n)throw new TypeError('Unknown encoding: '+e);e=(e+'').toLowerCase(),n=!0;}}function U(e,t,l){var n=e[t];e[t]=e[l],e[l]=n}function E(e,t,l,n,s){if(0===e.length)return-1;if('string'==typeof l?(n=l,l=0):2147483647<l?l=2147483647:-2147483648>l&&(l=-2147483648),l=+l,isNaN(l)&&(l=s?0:e.length-1),0>l&&(l=e.length+l),l>=e.length){if(s)return-1;l=e.length-1}else if(0>l)if(s)l=0;else return-1;if('string'==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:b(e,t,l,n,s);if('number'==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,l):Uint8Array.prototype.lastIndexOf.call(e,t,l):b(e,[t],l,n,s);throw new TypeError('val must be string, number or Buffer')}function b(e,t,l,n,s){function u(e,t){return 1==r?e[t]:e.readUInt16BE(t*r)}var r=1,o=e.length,_=t.length;if(void 0!==n&&(n=(n+'').toLowerCase(),'ucs2'===n||'ucs-2'===n||'utf16le'===n||'utf-16le'===n)){if(2>e.length||2>t.length)return-1;r=2,o/=2,_/=2,l/=2}var c;if(s){var i=-1;for(c=l;c<o;c++)if(u(e,c)!==u(t,-1==i?0:c-i))-1!=i&&(c-=c-i),i=-1;else if(-1==i&&(i=c),c-i+1===_)return i*r}else for(l+_>o&&(l=o-_),c=l;0<=c;c--){for(var d=!0,g=0;g<_;g++)if(u(e,c+g)!==u(t,g)){d=!1;break}if(d)return c}return-1}function v(e,t,l,n){l=+l||0;var s=e.length-l;n?(n=+n,n>s&&(n=s)):n=s;var u=t.length;if(0!=u%2)throw new TypeError('Invalid hex string');n>u/2&&(n=u/2);for(var r=0,o;r<n;++r){if(o=parseInt(t.substr(2*r,2),16),isNaN(o))return r;e[l+r]=o}return r}function k(e,t,l,n){return $(Z(t,e.length-l),e,l,n)}function R(e,t,l,n){return $(q(t),e,l,n)}function S(e,t,l,n){return R(e,t,l,n)}function I(e,t,l,n){return $(Q(t),e,l,n)}function N(e,t,l,n){return $(W(t,e.length-l),e,l,n)}function M(e,t,l){return 0===t&&l===e.length?te.fromByteArray(e):te.fromByteArray(e.slice(t,l))}function P(e,t,l){l=r(e.length,l);for(var n=[],s=t;s<l;){var u=e[s],o=null,_=239<u?4:223<u?3:191<u?2:1;if(s+_<=l){var i,c,d,g;1==_?128>u&&(o=u):2==_?(i=e[s+1],128==(192&i)&&(g=(31&u)<<6|63&i,127<g&&(o=g))):3==_?(i=e[s+1],c=e[s+2],128==(192&i)&&128==(192&c)&&(g=(15&u)<<12|(63&i)<<6|63&c,2047<g&&(55296>g||57343<g)&&(o=g))):4==_?(i=e[s+1],c=e[s+2],d=e[s+3],128==(192&i)&&128==(192&c)&&128==(192&d)&&(g=(15&u)<<18|(63&i)<<12|(63&c)<<6|63&d,65535<g&&1114112>g&&(o=g))):void 0}null===o?(o=65533,_=1):65535<o&&(o-=65536,n.push(55296|1023&o>>>10),o=56320|1023&o),n.push(o),s+=_}return y(n)}function y(e){var t=e.length;if(t<=ne)return u.apply(String,e);for(var l='',n=0;n<t;)l+=u.apply(String,e.slice(n,n+=ne));return l}function C(e,t,l){var n='';l=r(e.length,l);for(var s=t;s<l;++s)n+=u(127&e[s]);return n}function D(e,t,l){var n='';l=r(e.length,l);for(var s=t;s<l;++s)n+=u(e[s]);return n}function K(e,t,l){var n=e.length;(!t||0>t)&&(t=0),(!l||0>l||l>n)&&(l=n);for(var s='',u=t;u<l;++u)s+=J(e[u]);return s}function B(e,t,l){for(var n=e.slice(t,l),s='',r=0;r<n.length;r+=2)s+=u(n[r]+256*n[r+1]);return s}function w(e,t,l){if(0!=e%1||0>e)throw new RangeError('offset is not uint');if(e+t>l)throw new RangeError('Trying to access beyond buffer length')}function G(e,t,l,n,s,u){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<u)throw new RangeError('"value" argument is out of bounds');if(l+n>e.length)throw new RangeError('Index out of range')}function V(e,t,l,n){0>t&&(t=65535+t+1);for(var s=0,u=r(e.length-l,2);s<u;++s)e[l+s]=(t&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function j(e,t,l,n){0>t&&(t=4294967295+t+1);for(var s=0,u=r(e.length-l,4);s<u;++s)e[l+s]=255&t>>>8*(n?s:3-s)}function F(e,t,l,n){if(l+n>e.length)throw new RangeError('Index out of range');if(0>l)throw new RangeError('Index out of range')}function X(e,t,l,n,s){return s||F(e,t,l,4,3.4028234663852886e38,-3.4028234663852886e38),ae.write(e,t,l,n,23,4),l+4}function H(e,t,l,n,s){return s||F(e,t,l,8,1.7976931348623157e308,-1.7976931348623157e308),ae.write(e,t,l,n,52,8),l+8}function Y(e){if(e=z(e).replace(se,''),2>e.length)return'';for(;0!=e.length%4;)e+='=';return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,'')}function J(e){return 16>e?'0'+e.toString(16):e.toString(16)}function Z(e,t){t=t||Infinity;for(var l=e.length,n=null,s=[],u=0,r;u<l;++u){if(r=e.charCodeAt(u),55295<r&&57344>r){if(!n){if(56319<r){-1<(t-=3)&&s.push(239,191,189);continue}else if(u+1===l){-1<(t-=3)&&s.push(239,191,189);continue}n=r;continue}if(56320>r){-1<(t-=3)&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&-1<(t-=3)&&s.push(239,191,189);if(n=null,128>r){if(0>(t-=1))break;s.push(r)}else if(2048>r){if(0>(t-=2))break;s.push(192|r>>6,128|63&r)}else if(65536>r){if(0>(t-=3))break;s.push(224|r>>12,128|63&r>>6,128|63&r)}else if(1114112>r){if(0>(t-=4))break;s.push(240|r>>18,128|63&r>>12,128|63&r>>6,128|63&r)}else throw new Error('Invalid code point')}return s}function q(e){for(var t=[],l=0;l<e.length;++l)t.push(255&e.charCodeAt(l));return t}function W(e,t){for(var l=[],n=0,s,u,r;n<e.length&&!(0>(t-=2));++n)s=e.charCodeAt(n),u=s>>8,r=s%256,l.push(r),l.push(u);return l}function Q(e){return te.toByteArray(Y(e))}function $(e,t,l,n){for(var s=0;s<n&&!(s+l>=t.length||s>=e.length);++s)t[s+l]=e[s];return s}function ee(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var te=l(47),ae=l(48),le=l(49);t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT===void 0?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&'function'==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}():e.TYPED_ARRAY_SUPPORT,t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,l){return i(null,e,t,l)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,l){return g(null,e,t,l)},c.allocUnsafe=function(e){return f(null,e)},c.allocUnsafeSlow=function(e){return f(null,e)},c.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('Arguments must be Buffers');if(e===t)return 0;for(var l=e.length,n=t.length,s=0,u=r(l,n);s<u;++s)if(e[s]!==t[s]){l=e[s],n=t[s];break}return l<n?-1:n<l?1:0},c.isEncoding=function(e){switch((e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},c.concat=function(e,t){if(!le(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var l;if(t===void 0)for(t=0,l=0;l<e.length;++l)t+=e[l].length;var n=c.allocUnsafe(t),s=0;for(l=0;l<e.length;++l){var u=e[l];if(!c.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(n,s),s+=u.length}return n},c.byteLength=O,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var t=0;t<e;t+=2)U(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var t=0;t<e;t+=4)U(this,t,t+3),U(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var t=0;t<e;t+=8)U(this,t,t+7),U(this,t+1,t+6),U(this,t+2,t+5),U(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0==e?'':0===arguments.length?P(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError('Argument must be a Buffer');return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e='',l=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString('hex',0,l).match(/.{2}/g).join(' '),this.length>l&&(e+=' ... ')),'<Buffer '+e+'>'},c.prototype.compare=function(e,t,l,n,s){if(!c.isBuffer(e))throw new TypeError('Argument must be a Buffer');if(void 0===t&&(t=0),void 0===l&&(l=e?e.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),0>t||l>e.length||0>n||s>this.length)throw new RangeError('out of range index');if(n>=s&&t>=l)return 0;if(n>=s)return-1;if(t>=l)return 1;if(t>>>=0,l>>>=0,n>>>=0,s>>>=0,this===e)return 0;for(var u=s-n,o=l-t,_=r(u,o),d=this.slice(n,s),g=e.slice(t,l),f=0;f<_;++f)if(d[f]!==g[f]){u=d[f],o=g[f];break}return u<o?-1:o<u?1:0},c.prototype.includes=function(e,t,l){return-1!==this.indexOf(e,t,l)},c.prototype.indexOf=function(e,t,l){return E(this,e,t,l,!0)},c.prototype.lastIndexOf=function(e,t,l){return E(this,e,t,l,!1)},c.prototype.write=function(e,t,l,n){if(void 0===t)n='utf8',l=this.length,t=0;else if(void 0===l&&'string'==typeof t)n=t,l=this.length,t=0;else if(isFinite(t))t|=0,isFinite(l)?(l|=0,void 0===n&&(n='utf8')):(n=l,l=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var s=this.length-t;if((void 0===l||l>s)&&(l=s),0<e.length&&(0>l||0>t)||t>this.length)throw new RangeError('Attempt to write outside buffer bounds');n||(n='utf8');for(var u=!1;;)switch(n){case'hex':return v(this,e,t,l);case'utf8':case'utf-8':return k(this,e,t,l);case'ascii':return R(this,e,t,l);case'latin1':case'binary':return S(this,e,t,l);case'base64':return I(this,e,t,l);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return N(this,e,t,l);default:if(u)throw new TypeError('Unknown encoding: '+n);n=(''+n).toLowerCase(),u=!0;}},c.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var ne=4096;c.prototype.slice=function(e,t){var l=this.length;e=~~e,t=t===void 0?l:~~t,0>e?(e+=l,0>e&&(e=0)):e>l&&(e=l),0>t?(t+=l,0>t&&(t=0)):t>l&&(t=l),t<e&&(t=e);var n;if(c.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=c.prototype;else{var s=t-e;n=new c(s,void 0);for(var u=0;u<s;++u)n[u]=this[u+e]}return n},c.prototype.readUIntLE=function(e,t,l){e|=0,t|=0,l||w(e,t,this.length);for(var n=this[e],s=1,u=0;++u<t&&(s*=256);)n+=this[e+u]*s;return n},c.prototype.readUIntBE=function(e,t,l){e|=0,t|=0,l||w(e,t,this.length);for(var n=this[e+--t],s=1;0<t&&(s*=256);)n+=this[e+--t]*s;return n},c.prototype.readUInt8=function(e,t){return t||w(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||w(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||w(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||w(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,l){e|=0,t|=0,l||w(e,t,this.length);for(var s=this[e],u=1,r=0;++r<t&&(u*=256);)s+=this[e+r]*u;return u*=128,s>=u&&(s-=n(2,8*t)),s},c.prototype.readIntBE=function(e,t,l){e|=0,t|=0,l||w(e,t,this.length);for(var s=t,u=1,r=this[e+--s];0<s&&(u*=256);)r+=this[e+--s]*u;return u*=128,r>=u&&(r-=n(2,8*t)),r},c.prototype.readInt8=function(e,t){return t||w(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||w(e,2,this.length);var l=this[e]|this[e+1]<<8;return 32768&l?4294901760|l:l},c.prototype.readInt16BE=function(e,t){t||w(e,2,this.length);var l=this[e+1]|this[e]<<8;return 32768&l?4294901760|l:l},c.prototype.readInt32LE=function(e,t){return t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||w(e,4,this.length),ae.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||w(e,4,this.length),ae.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||w(e,8,this.length),ae.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||w(e,8,this.length),ae.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,l,s){if(e=+e,t|=0,l|=0,!s){var u=n(2,8*l)-1;G(this,e,t,l,u,0)}var r=1,o=0;for(this[t]=255&e;++o<l&&(r*=256);)this[t+o]=255&e/r;return t+l},c.prototype.writeUIntBE=function(e,t,l,s){if(e=+e,t|=0,l|=0,!s){var u=n(2,8*l)-1;G(this,e,t,l,u,0)}var r=l-1,o=1;for(this[t+r]=255&e;0<=--r&&(o*=256);)this[t+r]=255&e/o;return t+l},c.prototype.writeUInt8=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=s(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):V(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):V(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,l,s){if(e=+e,t|=0,!s){var u=n(2,8*l-1);G(this,e,t,l,u-1,-u)}var r=0,o=1,_=0;for(this[t]=255&e;++r<l&&(o*=256);)0>e&&0==_&&0!==this[t+r-1]&&(_=1),this[t+r]=255&(e/o>>0)-_;return t+l},c.prototype.writeIntBE=function(e,t,l,s){if(e=+e,t|=0,!s){var u=n(2,8*l-1);G(this,e,t,l,u-1,-u)}var r=l-1,o=1,_=0;for(this[t+r]=255&e;0<=--r&&(o*=256);)0>e&&0==_&&0!==this[t+r+1]&&(_=1),this[t+r]=255&(e/o>>0)-_;return t+l},c.prototype.writeInt8=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=s(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):V(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):V(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,l){return e=+e,t|=0,l||G(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,l){return X(this,e,t,!0,l)},c.prototype.writeFloatBE=function(e,t,l){return X(this,e,t,!1,l)},c.prototype.writeDoubleLE=function(e,t,l){return H(this,e,t,!0,l)},c.prototype.writeDoubleBE=function(e,t,l){return H(this,e,t,!1,l)},c.prototype.copy=function(e,t,l,n){if(l||(l=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<l&&(n=l),n===l)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError('targetStart out of bounds');if(0>l||l>=this.length)throw new RangeError('sourceStart out of bounds');if(0>n)throw new RangeError('sourceEnd out of bounds');n>this.length&&(n=this.length),e.length-t<n-l&&(n=e.length-t+l);var s=n-l,u;if(this===e&&l<t&&t<n)for(u=s-1;0<=u;--u)e[u+t]=this[u+l];else if(1e3>s||!c.TYPED_ARRAY_SUPPORT)for(u=0;u<s;++u)e[u+t]=this[u+l];else Uint8Array.prototype.set.call(e,this.subarray(l,l+s),t);return s},c.prototype.fill=function(e,t,l,n){if('string'==typeof e){if('string'==typeof t?(n=t,t=0,l=this.length):'string'==typeof l&&(n=l,l=this.length),1===e.length){var s=e.charCodeAt(0);256>s&&(e=s)}if(void 0!==n&&'string'!=typeof n)throw new TypeError('encoding must be a string');if('string'==typeof n&&!c.isEncoding(n))throw new TypeError('Unknown encoding: '+n)}else'number'==typeof e&&(e&=255);if(0>t||this.length<t||this.length<l)throw new RangeError('Out of range index');if(l<=t)return this;t>>>=0,l=l===void 0?this.length:l>>>0,e||(e=0);var u;if('number'==typeof e)for(u=t;u<l;++u)this[u]=e;else{var r=c.isBuffer(e)?e:Z(new c(e,n).toString()),o=r.length;for(u=0;u<l-t;++u)this[u+t]=r[u%o]}return this};var se=/[^+\/0-9A-Za-z-_]/g}).call(t,l(20))},function(e,t){'use strict';function n(e){var t=e.length;if(0<t%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===e[t-2]?2:'='===e[t-1]?1:0}function l(e){return u[63&e>>18]+u[63&e>>12]+u[63&e>>6]+u[63&e]}function s(e,t,n){for(var s=[],u=t,r;u<n;u+=3)r=(e[u]<<16)+(e[u+1]<<8)+e[u+2],s.push(l(r));return s.join('')}t.byteLength=function(e){return 3*e.length/4-n(e)},t.toByteArray=function(e){var t=e.length,s,u,l,_,i;_=n(e),i=new o(3*t/4-_),u=0<_?t-4:t;var c=0;for(s=0;s<u;s+=4)l=r[e.charCodeAt(s)]<<18|r[e.charCodeAt(s+1)]<<12|r[e.charCodeAt(s+2)]<<6|r[e.charCodeAt(s+3)],i[c++]=255&l>>16,i[c++]=255&l>>8,i[c++]=255&l;return 2===_?(l=r[e.charCodeAt(s)]<<2|r[e.charCodeAt(s+1)]>>4,i[c++]=255&l):1===_&&(l=r[e.charCodeAt(s)]<<10|r[e.charCodeAt(s+1)]<<4|r[e.charCodeAt(s+2)]>>2,i[c++]=255&l>>8,i[c++]=255&l),i},t.fromByteArray=function(e){for(var t=e.length,l=t%3,n='',r=[],o=16383,_=0,i=t-l,c;_<i;_+=o)r.push(s(e,_,_+o>i?i:_+o));return 1==l?(c=e[t-1],n+=u[c>>2],n+=u[63&c<<4],n+='=='):2==l&&(c=(e[t-2]<<8)+e[t-1],n+=u[c>>10],n+=u[63&c>>4],n+=u[63&c<<2],n+='='),r.push(n),r.join('')};for(var u=[],r=[],o='undefined'==typeof Uint8Array?Array:Uint8Array,_='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',c=0,i=_.length;c<i;++c)u[c]=_[c],r[_.charCodeAt(c)]=c;r[45]=62,r[95]=63},function(e,t){var l=Math.pow;t.read=function(t,n,u,r,o){var _=8*o-r-1,c=(1<<_)-1,g=c>>1,f=-7,L=u?o-1:0,i=u?-1:1,d=t[n+L],s,e;for(L+=i,s=d&(1<<-f)-1,d>>=-f,f+=_;0<f;s=256*s+t[n+L],L+=i,f-=8);for(e=s&(1<<-f)-1,s>>=-f,f+=r;0<f;e=256*e+t[n+L],L+=i,f-=8);if(0===s)s=1-g;else{if(s===c)return e?NaN:(d?-1:1)*Infinity;e+=l(2,r),s-=g}return(d?-1:1)*e*l(2,s-r)},t.write=function(t,n,u,r,o,_){var g=8*_-o-1,f=(1<<g)-1,L=f>>1,h=23===o?5.960464477539063e-8-6.617444900424222e-24:0,A=r?0:_-1,i=r?1:-1,d=0>n||0===n&&0>1/n?1:0,s,T,x;for(n=Math.abs(n),isNaN(n)||n===Infinity?(T=isNaN(n)?1:0,s=f):(s=Math.floor(Math.log(n)/Math.LN2),1>n*(x=l(2,-s))&&(s--,x*=2),n+=1<=s+L?h/x:h*l(2,1-L),2<=n*x&&(s++,x/=2),s+L>=f?(T=0,s=f):1<=s+L?(T=(n*x-1)*l(2,o),s+=L):(T=n*l(2,L-1)*l(2,o),s=0));8<=o;t[u+A]=255&T,A+=i,T/=256,o-=8);for(s=s<<o|T,g+=o;0<g;t[u+A]=255&s,A+=i,s/=256,g-=8);t[u+A-i]|=128*d}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return'[object Array]'==t.call(e)}},function(e,t,l){var n=l(51),s=l(52),u=l(53),r=l(54),o=l(55),_=l(56),i=l(57);i.alea=n,i.xor128=s,i.xorwow=u,i.xorshift7=r,i.xor4096=o,i.tychei=_,e.exports=i},function(e,t,l){(function(e){var n;(function(e,s){function u(e){var l=this,t=_();l.next=function(){var e=2091639*l.s0+2.3283064365386963e-10*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=e-(l.c=0|e)},l.c=1,l.s0=t(' '),l.s1=t(' '),l.s2=t(' '),l.s0-=t(e),0>l.s0&&(l.s0+=1),l.s1-=t(e),0>l.s1&&(l.s1+=1),l.s2-=t(e),0>l.s2&&(l.s2+=1),t=null}function r(e,l){return l.c=e.c,l.s0=e.s0,l.s1=e.s1,l.s2=e.s2,l}function o(e,t){var l=new u(e),n=t&&t.state,s=l.next;return s.int32=function(){return 0|4294967296*l.next()},s.double=function(){return s()+1.1102230246251565e-16*(0|2097152*s())},s.quick=s,n&&('object'==typeof n&&r(n,l),s.state=function(){return r(l,{})}),s}function _(){var e=4022871197;return function(t){t=t.toString();for(var l=0;l<t.length;l++){e+=t.charCodeAt(l);var n=0.02519603282416938*e;e=n>>>0,n-=e,n*=e,e=n>>>0,n-=e,e+=4294967296*n}return 2.3283064365386963e-10*(e>>>0)}}s&&s.exports?s.exports=o:l(4)&&l(18)?(n=function(){return o}.call(t,l,t,s),!(n!==void 0&&(s.exports=n))):this.alea=o})(this,'object'==typeof e&&e,l(4))}).call(t,l(17)(e))},function(e,t,l){(function(e){var n;(function(e,s){function u(e){var l=this,t='';l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var e=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^e^e>>>8},e===(0|e)?l.x=e:t+=e;for(var n=0;n<t.length+64;n++)l.x^=0|t.charCodeAt(n),l.next()}function r(e,l){return l.x=e.x,l.y=e.y,l.z=e.z,l.w=e.w,l}function o(e,t){var l=new u(e),n=t&&t.state,s=function(){return(l.next()>>>0)/4294967296};return s.double=function(){do var e=l.next()>>>11,t=(l.next()>>>0)/4294967296,n=(e+t)/2097152;while(0===n);return n},s.int32=l.next,s.quick=s,n&&('object'==typeof n&&r(n,l),s.state=function(){return r(l,{})}),s}s&&s.exports?s.exports=o:l(4)&&l(18)?(n=function(){return o}.call(t,l,t,s),!(n!==void 0&&(s.exports=n))):this.xor128=o})(this,'object'==typeof e&&e,l(4))}).call(t,l(17)(e))},function(e,t,l){(function(e){var n;(function(e,s){function u(e){var l=this,t='';l.next=function(){var e=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,0|(l.d=0|l.d+362437)+(l.v=l.v^l.v<<4^(e^e<<1))},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,e===(0|e)?l.x=e:t+=e;for(var n=0;n<t.length+64;n++)l.x^=0|t.charCodeAt(n),n==t.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(e,l){return l.x=e.x,l.y=e.y,l.z=e.z,l.w=e.w,l.v=e.v,l.d=e.d,l}function o(e,t){var l=new u(e),n=t&&t.state,s=function(){return(l.next()>>>0)/4294967296};return s.double=function(){do var e=l.next()>>>11,t=(l.next()>>>0)/4294967296,n=(e+t)/2097152;while(0===n);return n},s.int32=l.next,s.quick=s,n&&('object'==typeof n&&r(n,l),s.state=function(){return r(l,{})}),s}s&&s.exports?s.exports=o:l(4)&&l(18)?(n=function(){return o}.call(t,l,t,s),!(n!==void 0&&(s.exports=n))):this.xorwow=o})(this,'object'==typeof e&&e,l(4))}).call(t,l(17)(e))},function(e,t,l){(function(e){var n;(function(e,s){function u(e){var l=this;l.next=function(){var e=l.x,n=l.i,s,t;return s=e[n],s^=s>>>7,t=s^s<<24,s=e[7&n+1],t^=s^s>>>10,s=e[7&n+3],t^=s^s>>>3,s=e[7&n+4],t^=s^s<<7,s=e[7&n+7],s^=s<<13,t^=s^s<<9,e[n]=t,l.i=7&n+1,t},function(e,t){var l=[],n,s;if(t===(0|t))s=l[0]=t;else for(t=''+t,n=0;n<t.length;++n)l[7&n]=l[7&n]<<15^t.charCodeAt(n)+l[7&n+1]<<13;for(;8>l.length;)l.push(0);for(n=0;8>n&&0===l[n];++n);for(s=8==n?l[7]=-1:l[n],e.x=l,e.i=0,n=256;0<n;--n)e.next()}(l,e)}function r(e,l){return l.x=e.x.slice(),l.i=e.i,l}function o(e,t){null==e&&(e=+new Date);var l=new u(e),n=t&&t.state,s=function(){return(l.next()>>>0)/4294967296};return s.double=function(){do var e=l.next()>>>11,t=(l.next()>>>0)/4294967296,n=(e+t)/2097152;while(0===n);return n},s.int32=l.next,s.quick=s,n&&(n.x&&r(n,l),s.state=function(){return r(l,{})}),s}s&&s.exports?s.exports=o:l(4)&&l(18)?(n=function(){return o}.call(t,l,t,s),!(n!==void 0&&(s.exports=n))):this.xorshift7=o})(this,'object'==typeof e&&e,l(4))}).call(t,l(17)(e))},function(e,t,l){(function(e){var n;(function(e,s){function u(e){var l=this;l.next=function(){var e=l.w,n=l.X,s=l.i,u,t;return l.w=e=0|e+1640531527,t=n[127&s+34],u=n[s=127&s+1],t^=t<<13,u^=u<<17,t^=t>>>15,u^=u>>>12,t=n[s]=t^u,l.i=s,0|t+(e^e>>>16)},function(e,l){var n=[],s=128,u,t,r,o,_;for(l===(0|l)?(t=l,l=null):(l+='\0',t=0,s=Math.max(s,l.length)),r=0,o=-32;o<s;++o)l&&(t^=l.charCodeAt((o+32)%l.length)),0===o&&(_=t),t^=t<<10,t^=t>>>15,t^=t<<4,t^=t>>>13,0<=o&&(_=0|_+1640531527,u=n[127&o]^=t+_,r=0==u?r+1:0);for(128<=r&&(n[127&(l&&l.length||0)]=-1),r=127,o=512;0<o;--o)t=n[127&r+34],u=n[r=127&r+1],t^=t<<13,u^=u<<17,t^=t>>>15,u^=u>>>12,n[r]=t^u;e.w=_,e.X=n,e.i=r}(l,e)}function r(e,l){return l.i=e.i,l.w=e.w,l.X=e.X.slice(),l}function o(e,t){null==e&&(e=+new Date);var l=new u(e),n=t&&t.state,s=function(){return(l.next()>>>0)/4294967296};return s.double=function(){do var e=l.next()>>>11,t=(l.next()>>>0)/4294967296,n=(e+t)/2097152;while(0===n);return n},s.int32=l.next,s.quick=s,n&&(n.X&&r(n,l),s.state=function(){return r(l,{})}),s}s&&s.exports?s.exports=o:l(4)&&l(18)?(n=function(){return o}.call(t,l,t,s),!(n!==void 0&&(s.exports=n))):this.xor4096=o})(this,'object'==typeof e&&e,l(4))}).call(t,l(17)(e))},function(e,t,l){(function(e){var n;(function(e,s){function u(e){var t=this,l='';t.next=function(){var e=t.b,l=t.c,n=t.d,s=t.a;return e=e<<25^e>>>7^l,l=0|l-n,n=n<<24^n>>>8^s,s=0|s-e,t.b=e=e<<20^e>>>12^l,t.c=l=0|l-n,t.d=n<<16^l>>>16^s,t.a=0|s-e},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=0|e/4294967296,t.b=0|e):l+=e;for(var n=0;n<l.length+20;n++)t.b^=0|l.charCodeAt(n),t.next()}function r(e,l){return l.a=e.a,l.b=e.b,l.c=e.c,l.d=e.d,l}function o(e,t){var l=new u(e),n=t&&t.state,s=function(){return(l.next()>>>0)/4294967296};return s.double=function(){do var e=l.next()>>>11,t=(l.next()>>>0)/4294967296,n=(e+t)/2097152;while(0===n);return n},s.int32=l.next,s.quick=s,n&&('object'==typeof n&&r(n,l),s.state=function(){return r(l,{})}),s}s&&s.exports?s.exports=o:l(4)&&l(18)?(n=function(){return o}.call(t,l,t,s),!(n!==void 0&&(s.exports=n))):this.tychei=o})(this,'object'==typeof e&&e,l(4))}).call(t,l(17)(e))},function(e,t,l){var n;(function(s,u){function r(e,t,l){var n=[];t=!0==t?{entropy:!0}:t||{};var r=c(i(t.entropy?[e,g(s)]:null==e?d():e,3),n),f=new o(n),x=function(){for(var e=f.g(h),t=T,l=0;e<O;)e=(e+l)*L,t*=L,l=f.g(1);for(;e>=m;)e/=2,t/=2,l>>>=1;return(e+l)/t};return x.int32=function(){return 0|f.g(4)},x.quick=function(){return f.g(4)/4294967296},x.double=x,c(g(f.S),s),(t.pass||l||function(e,t,l,n){return n&&(n.S&&_(n,f),e.state=function(){return _(f,{})}),l?(u[A]=e,t):e})(x,r,'global'in t?t.global:this==u,t.state)}function o(e){var l=e.length,n=this,u=0,r=n.i=n.j=0,o=n.S=[],s;for(l||(e=[l++]);u<L;)o[u]=u++;for(u=0;u<L;u++)o[u]=o[r=x&r+e[u%l]+(s=o[u])],o[r]=s;(n.g=function(e){for(var l=0,u=n.i,r=n.j,o=n.S,s;e--;)s=o[u=x&u+1],l=l*L+o[x&(o[u]=o[r=x&r+s])+(o[r]=s)];return n.i=u,n.j=r,l})(L)}function _(e,l){return l.i=e.i,l.j=e.j,l.S=e.S.slice(),l}function i(e,t){var l=[],n=typeof e,s;if(t&&'object'==n)for(s in e)try{l.push(i(e[s],t-1))}catch(t){}return l.length?l:'string'==n?e:e+'\0'}function c(e,t){for(var l=e+'',n=0,s;n<l.length;)t[x&n]=x&(s^=19*t[x&n])+l.charCodeAt(n++);return g(t)}function d(){try{var e;return U&&(e=U.randomBytes)?e=e(L):(e=new Uint8Array(L),(f.crypto||f.msCrypto).getRandomValues(e)),g(e)}catch(n){var t=f.navigator,l=t&&t.plugins;return[+new Date,f,l,f.screen,g(s)]}}function g(e){return String.fromCharCode.apply(0,e)}var f=this,L=256,h=6,A='random',T=u.pow(L,h),O=u.pow(2,52),m=2*O,x=L-1,U;if(u['seed'+A]=r,c(u.random(),s),'object'==typeof e&&e.exports){e.exports=r;try{U=l(58)}catch(e){}}else n=function(){return r}.call(t,l,t,e),!(void 0!==n&&(e.exports=n))})([],Math)},function(){},function(e){var t=Math.abs,l=Math.floor;(function(){function n(e,f,L){function h(e,n,d,g){for(var f='',L=null,A=!1,O=e.length,m=!1,U=0,i;U<O;U++){if(i=e.charCodeAt(U),!0==A){if(45===i){L='';continue}else if(95===i){L=' ';continue}else if(48===i){L='0';continue}else if(58===i){m&&c('[WARNING] detected use of unsupported %:: or %::: modifiers to strftime'),m=!0;continue}switch(i){case 37:f+='%';break;case 65:f+=d.days[n.getDay()];break;case 66:f+=d.months[n.getMonth()];break;case 67:f+=s(l(n.getFullYear()/100),L);break;case 68:f+=h(d.formats.D,n,d,g);break;case 70:f+=h(d.formats.F,n,d,g);break;case 72:f+=s(n.getHours(),L);break;case 73:f+=s(r(n.getHours()),L);break;case 76:f+=u(l(g%1e3));break;case 77:f+=s(n.getMinutes(),L);break;case 80:f+=12>n.getHours()?d.am:d.pm;break;case 82:f+=h(d.formats.R,n,d,g);break;case 83:f+=s(n.getSeconds(),L);break;case 84:f+=h(d.formats.T,n,d,g);break;case 85:f+=s(o(n,'sunday'),L);break;case 87:f+=s(o(n,'monday'),L);break;case 88:f+=h(d.formats.X,n,d,g);break;case 89:f+=n.getFullYear();break;case 90:if(x&&0===T)f+='GMT';else{var E=n.toString().match(/\(([\w\s]+)\)/);f+=E&&E[1]||''}break;case 97:f+=d.shortDays[n.getDay()];break;case 98:f+=d.shortMonths[n.getMonth()];break;case 99:f+=h(d.formats.c,n,d,g);break;case 100:f+=s(n.getDate(),L);break;case 101:f+=s(n.getDate(),null==L?' ':L);break;case 104:f+=d.shortMonths[n.getMonth()];break;case 106:var b=new Date(n.getFullYear(),0,1),v=Math.ceil((n.getTime()-b.getTime())/86400000);f+=u(v);break;case 107:f+=s(n.getHours(),null==L?' ':L);break;case 108:f+=s(r(n.getHours()),null==L?' ':L);break;case 109:f+=s(n.getMonth()+1,L);break;case 110:f+='\n';break;case 111:var v=n.getDate();f+=d.ordinalSuffixes?v+''+(d.ordinalSuffixes[v-1]||_(v)):v+''+_(v);break;case 112:f+=12>n.getHours()?d.AM:d.PM;break;case 114:f+=h(d.formats.r,n,d,g);break;case 115:f+=l(g/1e3);break;case 116:f+='\t';break;case 117:var v=n.getDay();f+=0===v?7:v;break;case 118:f+=h(d.formats.v,n,d,g);break;case 119:f+=n.getDay();break;case 120:f+=h(d.formats.x,n,d,g);break;case 121:f+=(''+n.getFullYear()).slice(2);break;case 122:if(x&&0===T)f+=m?'+00:00':'+0000';else{var k=0===T?-n.getTimezoneOffset():T/60000;var R=0>k?'-':'+',S=m?':':'',I=l(t(k/60)),N=t(k%60);f+=R+s(I)+S+s(N)}break;default:A&&(f+='%'),f+=e[U];}L=null,A=!1;continue}if(37===i){A=!0;continue}f+=e[U]}return f}var A=e||g,T=f||0,x=L||!1,O=0,m=function(e,t){var l;if(!t){var n=Date.now();n>O?(O=n,U=new Date(O),l=O,x&&(U=new Date(O+i(U)+T))):l=O,t=U}else if(l=t.getTime(),x){var s=i(t);if(t=new Date(l+s+T),i(t)!==s){var u=i(t);t=new Date(l+u+T)}}return h(e,t,A,l)},U;return m.localize=function(e){return new n(e||A,T,x)},m.localizeByIdentifier=function(e){var t=d[e];return t?m.localize(t):(c('[WARNING] No locale found with identifier "'+e+'".'),m)},m.timezone=function(e){var t=T,l=x,s=typeof e;if('number'==s||'string'==s)if(l=!0,'string'==s){var u='-'===e[0]?-1:1,r=parseInt(e.slice(1,3),10),o=parseInt(e.slice(3,5),10);t=1e3*(60*(u*(60*r+o)))}else'number'==s&&(t=1e3*(60*e));return new n(A,t,l)},m.utc=function(){return new n(A,T,!0)},m}function s(e,t){return''===t||9<e?e:(null==t&&(t='0'),t+e)}function u(e){return 99<e?e:9<e?'0'+e:'00'+e}function r(e){if(0===e)return 12;return 12<e?e-12:e}function o(e,t){t=t||'sunday';var n=e.getDay();'monday'===t&&(0===n?n=6:n--);var s=Date.UTC(e.getFullYear(),0,1),u=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),r=l((u-s)/8.64e7),o=(r+7-n)/7;return l(o)}function _(e){var t=e%10,l=e%100;if(11<=l&&13>=l||0==t||4<=t)return'th';return 1==t?'st':2==t?'nd':3==t?'rd':void 0}function i(e){return 6e4*(e.getTimezoneOffset()||0)}function c(e){'undefined'!=typeof console&&'function'==typeof console.warn&&console.warn(e)}var d={de_DE:{days:['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],shortDays:['So','Mo','Di','Mi','Do','Fr','Sa'],months:['Januar','Februar','M\xE4rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],shortMonths:['Jan','Feb','M\xE4r','Apr','Mai','Jun','Jul','Aug','Sep','Okt','Nov','Dez'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d.%m.%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},en_CA:{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],ordinalSuffixes:['st','nd','rd','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','st','nd','rd','th','th','th','th','th','th','th','st'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}},en_US:{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],ordinalSuffixes:['st','nd','rd','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','st','nd','rd','th','th','th','th','th','th','th','st'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%m/%d/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}},es_MX:{days:['domingo','lunes','martes','mi\xE9rcoles','jueves','viernes','s\xE1bado'],shortDays:['dom','lun','mar','mi\xE9','jue','vie','s\xE1b'],months:['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre',' diciembre'],shortMonths:['ene','feb','mar','abr','may','jun','jul','ago','sep','oct','nov','dic'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},fr_FR:{days:['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi'],shortDays:['dim.','lun.','mar.','mer.','jeu.','ven.','sam.'],months:['janvier','f\xE9vrier','mars','avril','mai','juin','juillet','ao\xFBt','septembre','octobre','novembre','d\xE9cembre'],shortMonths:['janv.','f\xE9vr.','mars','avril','mai','juin','juil.','ao\xFBt','sept.','oct.','nov.','d\xE9c.'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},it_IT:{days:['domenica','luned\xEC','marted\xEC','mercoled\xEC','gioved\xEC','venerd\xEC','sabato'],shortDays:['dom','lun','mar','mer','gio','ven','sab'],months:['gennaio','febbraio','marzo','aprile','maggio','giugno','luglio','agosto','settembre','ottobre','novembre','dicembre'],shortMonths:['pr','mag','giu','lug','ago','set','ott','nov','dic'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},nl_NL:{days:['zondag','maandag','dinsdag','woensdag','donderdag','vrijdag','zaterdag'],shortDays:['zo','ma','di','wo','do','vr','za'],months:['januari','februari','maart','april','mei','juni','juli','augustus','september','oktober','november','december'],shortMonths:['jan','feb','mrt','apr','mei','jun','jul','aug','sep','okt','nov','dec'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},pt_BR:{days:['domingo','segunda','ter\xE7a','quarta','quinta','sexta','s\xE1bado'],shortDays:['Dom','Seg','Ter','Qua','Qui','Sex','S\xE1b'],months:['janeiro','fevereiro','mar\xE7o','abril','maio','junho','julho','agosto','setembro','outubro','novembro','dezembro'],shortMonths:['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},ru_RU:{days:['\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435','\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A','\u0412\u0442\u043E\u0440\u043D\u0438\u043A','\u0421\u0440\u0435\u0434\u0430','\u0427\u0435\u0442\u0432\u0435\u0440\u0433','\u041F\u044F\u0442\u043D\u0438\u0446\u0430','\u0421\u0443\u0431\u0431\u043E\u0442\u0430'],shortDays:['\u0412\u0441','\u041F\u043D','\u0412\u0442','\u0421\u0440','\u0427\u0442','\u041F\u0442','\u0421\u0431'],months:['\u042F\u043D\u0432\u0430\u0440\u044C','\u0424\u0435\u0432\u0440\u0430\u043B\u044C','\u041C\u0430\u0440\u0442','\u0410\u043F\u0440\u0435\u043B\u044C','\u041C\u0430\u0439','\u0418\u044E\u043D\u044C','\u0418\u044E\u043B\u044C','\u0410\u0432\u0433\u0443\u0441\u0442','\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C','\u041E\u043A\u0442\u044F\u0431\u0440\u044C','\u041D\u043E\u044F\u0431\u0440\u044C','\u0414\u0435\u043A\u0430\u0431\u0440\u044C'],shortMonths:['\u044F\u043D\u0432','\u0444\u0435\u0432','\u043C\u0430\u0440','\u0430\u043F\u0440','\u043C\u0430\u0439','\u0438\u044E\u043D','\u0438\u044E\u043B','\u0430\u0432\u0433','\u0441\u0435\u043D','\u043E\u043A\u0442','\u043D\u043E\u044F','\u0434\u0435\u043A'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X',D:'%d.%m.%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},tr_TR:{days:['Pazar','Pazartesi','Sal\u0131','\xC7ar\u015Famba','Per\u015Fembe','Cuma','Cumartesi'],shortDays:['Paz','Pzt','Sal','\xC7r\u015F','Pr\u015F','Cum','Cts'],months:['Ocak','\u015Eubat','Mart','Nisan','May\u0131s','Haziran','Temmuz','A\u011Fustos','Eyl\xFCl','Ekim','Kas\u0131m','Aral\u0131k'],shortMonths:['Oca','\u015Eub','Mar','Nis','May','Haz','Tem','A\u011Fu','Eyl','Eki','Kas','Ara'],AM:'\xD6\xD6',PM:'\xD6S',am:'\xD6\xD6',pm:'\xD6S',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},zh_CN:{days:['\u661F\u671F\u65E5','\u661F\u671F\u4E00','\u661F\u671F\u4E8C','\u661F\u671F\u4E09','\u661F\u671F\u56DB','\u661F\u671F\u4E94','\u661F\u671F\u516D'],shortDays:['\u65E5','\u4E00','\u4E8C','\u4E09','\u56DB','\u4E94','\u516D'],months:['\u4E00\u6708\u4EFD','\u4E8C\u6708\u4EFD','\u4E09\u6708\u4EFD','\u56DB\u6708\u4EFD','\u4E94\u6708\u4EFD','\u516D\u6708\u4EFD','\u4E03\u6708\u4EFD','\u516B\u6708\u4EFD','\u4E5D\u6708\u4EFD','\u5341\u6708\u4EFD','\u5341\u4E00\u6708\u4EFD','\u5341\u4E8C\u6708\u4EFD'],shortMonths:['\u4E00\u6708','\u4E8C\u6708','\u4E09\u6708','\u56DB\u6708','\u4E94\u6708','\u516D\u6708','\u4E03\u6708','\u516B\u6708','\u4E5D\u6708','\u5341\u6708','\u5341\u4E00\u6708','\u5341\u4E8C\u6708'],AM:'\u4E0A\u5348',PM:'\u4E0B\u5348',am:'\u4E0A\u5348',pm:'\u4E0B\u5348',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}}},g=d.en_US,f=new n(g,0,!1),L;'undefined'!=typeof e?L=e.exports=f:(L=function(){return this||(1,eval)('this')}(),L.strftime=f),'function'!=typeof Date.now&&(Date.now=function(){return+new Date})})()},function(e,t,l){'use strict';(function(t){const n=l(24),o=n.lua,s=n.lauxlib,u=n.lualib;let r;try{r=l(22).inspect.custom}catch(t){}const _=Reflect.apply,i=Reflect.construct,c=function(e){return''+e},d=function(e){return'object'==typeof e?null!==e:'function'==typeof e},g=o.to_luastring('js object'),f=function(e,t){let l=s.luaL_testudata(e,t,g);return l?l.data:void 0},h=function(e,t){return s.luaL_checkudata(e,t,g).data},A=function(e,t){let l=o.lua_newuserdata(e);l.data=t,s.luaL_setmetatable(e,g)},T=function(e){o.lua_rawgeti(e,o.LUA_REGISTRYINDEX,o.LUA_RIDX_MAINTHREAD);let t=o.lua_tothread(e,-1);return o.lua_pop(e,1),t},x=new WeakMap,O=function(e){let t=o.lua_touserdata(e,1);return m(e,t),1},m=function(e,t){switch(typeof t){case'undefined':o.lua_pushnil(e);break;case'number':o.lua_pushnumber(e,t);break;case'string':o.lua_pushstring(e,o.to_luastring(t));break;case'boolean':o.lua_pushboolean(e,t);break;case'symbol':o.lua_pushlightuserdata(e,t);break;case'function':if(o.lua_isproxy(t,e)){t(e);break}case'object':if(null===t){o.lua_rawgetp(e,o.LUA_REGISTRYINDEX,null);break}default:let l=x.get(T(e)),n=l.get(t);n?n(e):(A(e,t),n=o.lua_toproxy(e,-1),l.set(t,n));}},U=function(e,t){switch(o.lua_type(e,t)){case o.LUA_TNONE:case o.LUA_TNIL:return;case o.LUA_TBOOLEAN:return o.lua_toboolean(e,t);case o.LUA_TLIGHTUSERDATA:return o.lua_touserdata(e,t);case o.LUA_TNUMBER:return o.lua_tonumber(e,t);case o.LUA_TSTRING:return o.lua_tojsstring(e,t);case o.LUA_TUSERDATA:let l=f(e,t);if(void 0!==l)return l;case o.LUA_TTABLE:case o.LUA_TFUNCTION:case o.LUA_TTHREAD:default:return M(T(e),o.lua_toproxy(e,t));}},E=function(e,t,l,n,u){s.luaL_checkstack(e,2+n.length),(void 0===u||null===u)&&(u=o.LUA_MULTRET);let r=o.lua_gettop(e);t(e),m(e,l);for(let s=0;s<n.length;s++)m(e,n[s]);o.lua_call(e,1+n.length,u);let _=o.lua_gettop(e)-r,c=Array(_);for(let s=0;s<_;s++)c[s]=U(e,r+s+1);return o.lua_settop(e,r),c},b=function(e,t,l){s.luaL_checkstack(e,2),t(e),m(e,l),o.lua_gettable(e,-2);let n=U(e,-1);return o.lua_pop(e,2),n},v=function(e,t,l){s.luaL_checkstack(e,2),t(e),m(e,l),o.lua_gettable(e,-2);let n=o.lua_isnil(e,-1);return o.lua_pop(e,2),n},R=function(e,t,l,n){s.luaL_checkstack(e,3),t(e),m(e,l),m(e,n),o.lua_settable(e,-3),o.lua_pop(e,1)},S=function(e,t,l){s.luaL_checkstack(e,3),t(e),m(e,l),o.lua_pushnil(e),o.lua_settable(e,-3),o.lua_pop(e,1)},k=function(e,t){s.luaL_checkstack(e,1),t(e);let l=s.luaL_tolstring(e,-1);return o.lua_pop(e,2),o.to_jsstring(l)},I=function(){s.luaL_checkstack(this.L,3);let e=o.lua_gettop(this.L);this.iter(this.L),this.state(this.L),this.last(this.L),o.lua_call(this.L,2,o.LUA_MULTRET),this.last=o.lua_toproxy(this.L,e+1);let t;if(o.lua_isnil(this.L,-1))t={done:!0,value:void 0};else{let l=o.lua_gettop(this.L)-e,n=Array(l);for(let t=0;t<l;t++)n[t]=U(this.L,e+t+1);t={done:!1,value:n}}return o.lua_settop(this.L,e),t},N=function(e,t){s.luaL_requiref(e,o.to_luastring('_G'),u.luaopen_base,0),o.lua_getfield(e,-1,o.to_luastring('pairs')),o.lua_remove(e,-2),t(e),o.lua_call(e,1,3);let l=o.lua_toproxy(e,-3),n=o.lua_toproxy(e,-2),r=o.lua_toproxy(e,-1);return o.lua_pop(e,3),{L:e,iter:l,state:n,last:r,next:I}},M=function(e,t){let l=function(){return E(e,t,this,arguments,1)[0]};return l.apply=function(l,n){return E(e,t,l,n,1)[0]},l.invoke=function(l,n){return E(e,t,l,n,o.LUA_MULTRET)},l.get=function(l){return b(e,t,l)},l.has=function(l){return v(e,t,l)},l.set=function(l,n){return R(e,t,l,n)},l.delete=function(l){return S(e,t,l)},l.toString=function(){return k(e,t)},l[Symbol.toStringTag]='Fengari object',l[Symbol.iterator]=function(){return N(e,t)},Symbol.toPrimitive&&(l[Symbol.toPrimitive]=function(l){if('string'===l)return k(e,t)}),r&&(l[r]=l.toString),l},P={apply:function(e,t,l){return E(e.L,e.p,t,l,1)[0]},get:function(e,t){return b(e.L,e.p,t)},has:function(e,t){return v(e.L,e.p,t)},set:function(e,t,l){return R(e.L,e.p,t,l)},deleteProperty:function(e,t){return S(e.L,e.p,t)}},y=function(e,t){let l=function(){return t(e)};l.p=t,l.L=e;let n=new Proxy(l,P);return n},C=function(e,t){let l=h(e,t),n=l[Symbol.iterator];n||s.luaL_argerror(e,t,o.to_luastring('object not iterable'));let u=_(n,l,[]);return d(u)||s.luaL_argerror(e,t,o.to_luastring('Result of the Symbol.iterator method is not an object')),u},D=function(e){let t=U(e,1),l=t.next();return l.done?0:(m(e,l.value),1)};let K={new:function(e){let t=U(e,1),l=o.lua_gettop(e)-1,n=Array(l);for(let t=0;t<l;t++)n[t]=U(e,t+2);return m(e,i(t,n)),1},of:function(e){let t=C(e,1);return o.lua_pushcfunction(e,D),m(e,t),2},createproxy:function(e){s.luaL_checkany(e,1);let t=y(T(e),o.lua_toproxy(e,1));return m(e,t),1},tonumber:function(e){let t=U(e,1);return o.lua_pushnumber(e,+t),1},instanceof:function(e){let t=U(e,1),l=U(e,2);return o.lua_pushboolean(e,t instanceof l),1}},B={__index:function(e){let t=h(e,1),l=U(e,2);return m(e,t[l]),1},__newindex:function(e){let t=h(e,1),l=U(e,2),n=U(e,3);return void 0===n?delete t[l]:t[l]=n,0},__tostring:function(e){let t=h(e,1),l=c(t);return o.lua_pushstring(e,o.to_luastring(l)),1},__call:function(e){let t=h(e,1),l=o.lua_gettop(e)-1,n,s;if(0<l&&(n=U(e,2),0<l--)){s=Array(l);for(let t=0;t<l;t++)s[t]=U(e,t+3)}return m(e,_(t,n,s)),1}};e.exports.checkjs=h,e.exports.testjs=f,e.exports.pushjs=A,e.exports.push=m,e.exports.tojs=U,e.exports.luaopen_js=function(e){return x.set(T(e),new WeakMap),o.lua_atnativeerror(e,O),s.luaL_newlib(e,K),s.luaL_newmetatable(e,g),s.luaL_setfuncs(e,B,0),o.lua_pop(e,1),A(e,null),o.lua_pushvalue(e,-1),o.lua_rawsetp(e,o.LUA_REGISTRYINDEX,null),o.lua_setfield(e,-2,o.to_luastring('null')),m(e,t),o.lua_setfield(e,-2,o.to_luastring('global')),1}}).call(t,l(20))},function(e,t,l){t.markdown=l(62),t.parse=t.markdown.toHTML},function(e,t,l){(function(e){function t(){return'Markdown.mk_block( '+uneval(this.toString())+', '+uneval(this.trailing)+', '+uneval(this.lineNumber)+' )'}function n(){var e=l(22);return'Markdown.mk_block( '+e.inspect(this.toString())+', '+e.inspect(this.trailing)+', '+e.inspect(this.lineNumber)+' )'}function s(e){for(var t=0,l=-1;-1!==(l=e.indexOf('\n',l+1));)t++;return t}function u(e,t){function l(e){this.len_after=e,this.name='close_'+t}var n=e+'_state',s='strong'==e?'em_state':'strong_state';return function(u){if(this[n][0]==t)return this[n].shift(),[u.length,new l(u.length-t.length)];var r=this[s].slice(),o=this[n].slice();this[n].unshift(t);var _=this.processInline(u.substr(t.length)),i=_[_.length-1],c=this[n].shift();if(i instanceof l){_.pop();var d=u.length-i.len_after;return[d,[e].concat(_)]}return this[s]=r,this[n]=o,[t.length,t]}}function r(e){for(var t=e.split(''),l=[''],n=!1;t.length;){var s=t.shift();switch(s){case' ':n?l[l.length-1]+=s:l.push('');break;case'\'':case'"':n=!n;break;case'\\':s=t.shift();default:l[l.length-1]+=s;}}return l}function o(e){return L(e)&&1<e.length&&'object'==typeof e[1]&&!L(e[1])?e[1]:void 0}function _(e){return e.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;')}function i(e){if('string'==typeof e)return _(e);var t=e.shift(),l={},n=[];for(e.length&&'object'==typeof e[0]&&!(e[0]instanceof Array)&&(l=e.shift());e.length;)n.push(i(e.shift()));var s='';for(var u in l)s+=' '+u+'="'+_(l[u])+'"';return'img'==t||'br'==t||'hr'==t?'<'+t+s+'/>':'<'+t+s+'>'+n.join('')+'</'+t+'>'}function c(e,t,l){l=l||{};var n=e.slice(0);'function'==typeof l.preprocessTreeNode&&(n=l.preprocessTreeNode(n,t));var s=o(n);if(s){for(var u in n[1]={},s)n[1][u]=s[u];s=n[1]}if('string'==typeof n)return n;switch(n[0]){case'header':n[0]='h'+n[1].level,delete n[1].level;break;case'bulletlist':n[0]='ul';break;case'numberlist':n[0]='ol';break;case'listitem':n[0]='li';break;case'para':n[0]='p';break;case'markdown':n[0]='html',s&&delete s.references;break;case'code_block':n[0]='pre',u=s?2:1;var r=['code'];r.push.apply(r,n.splice(u,n.length-u)),n[u]=r;break;case'inlinecode':n[0]='code';break;case'img':n[1].src=n[1].href,delete n[1].href;break;case'linebreak':n[0]='br';break;case'link':n[0]='a';break;case'link_ref':n[0]='a';var _=t[s.ref];if(_)delete s.ref,s.href=_.href,_.title&&(s.title=_.title),delete s.original;else return s.original;break;case'img_ref':n[0]='img';var _=t[s.ref];if(_)delete s.ref,s.src=_.href,_.title&&(s.title=_.title),delete s.original;else return s.original;}if(u=1,s){for(var i in n[1]){u=2;break}1===u&&n.splice(u,1)}for(;u<n.length;++u)n[u]=c(n[u],t,l);return n}function d(e){for(var t=o(e)?2:1;t<e.length;)'string'==typeof e[t]?t+1<e.length&&'string'==typeof e[t+1]?e[t]+=e.splice(t+1,1)[0]:++t:(d(e[t]),++t)}var g=e.Markdown=function(e){switch(typeof e){case'undefined':this.dialect=g.dialects.Gruber;break;case'object':this.dialect=e;break;default:if(e in g.dialects)this.dialect=g.dialects[e];else throw new Error('Unknown Markdown dialect \''+(e+'\''));}this.em_state=[],this.strong_state=[],this.debug_indent=''};e.parse=function(e,t){var l=new g(t);return l.toTree(e)},e.toHTML=function(t,l,n){var s=e.toHTMLTree(t,l,n);return e.renderJsonML(s)},e.toHTMLTree=function(e,t,l){'string'==typeof e&&(e=this.parse(e,t));var n=o(e),s={};n&&n.references&&(s=n.references);var u=c(e,s,l);return d(u),u};var f=g.mk_block=function(e,l,u){1==arguments.length&&(l='\n\n');var r=new String(e);return r.trailing=l,r.inspect=n,r.toSource=t,void 0!=u&&(r.lineNumber=u),r};g.prototype.split_blocks=function(e){e=e.replace(/(\r\n|\n|\r)/g,'\n');var t=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,l=[],n=1,u;for(null!=(u=/^(\s*\n)/.exec(e))&&(n+=s(u[0]),t.lastIndex=u[0].length);null!==(u=t.exec(e));)'\n#'==u[2]&&(u[2]='\n',t.lastIndex--),l.push(f(u[1],u[2],n)),n+=s(u[0]);return l},g.prototype.processBlock=function(e,t){var l=this.dialect.block,n=l.__order__;if('__call__'in l)return l.__call__.call(this,e,t);for(var s=0,u;s<n.length;s++)if(u=l[n[s]].call(this,e,t),u)return L(u)&&(!(0<u.length)||L(u[0]))||this.debug(n[s],'didn\'t return a proper array'),u;return[]},g.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,e+'')},g.prototype.toTree=function(e,t){var l=e instanceof Array?e:this.split_blocks(e),n=this.tree;try{this.tree=t||this.tree||['markdown'];blocks:for(;l.length;){var s=this.processBlock(l.shift(),l);if(!s.length)continue blocks;this.tree.push.apply(this.tree,s)}return this.tree}finally{t&&(this.tree=n)}},g.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),'undefined'!=typeof print&&print.apply(print,e),'undefined'!=typeof console&&'undefined'!=typeof console.log&&console.log.apply(null,e)},g.prototype.loop_re_over_block=function(e,t,l){for(var n=t.valueOf(),s;n.length&&null!=(s=e.exec(n));)n=n.substr(s[0].length),l.call(this,s);return n},g.dialects={},g.dialects.Gruber={block:{atxHeader:function(e,t){var l=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(l){var n=['header',{level:l[1].length}];return Array.prototype.push.apply(n,this.processInline(l[2])),l[0].length<e.length&&t.unshift(f(e.substr(l[0].length),e.trailing,e.lineNumber+2)),[n]}},setextHeader:function(e,t){var l=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(l){var n='='===l[2]?1:2,s=['header',{level:n},l[1]];return l[0].length<e.length&&t.unshift(f(e.substr(l[0].length),e.trailing,e.lineNumber+2)),[s]}},code:function(e,t){var l=[],n=/^(?: {0,3}\t| {4})(.*)\n?/;if(e.match(n)){block_search:do{var s=this.loop_re_over_block(n,e.valueOf(),function(e){l.push(e[1])});if(s.length){t.unshift(f(s,e.trailing));break block_search}else if(t.length){if(!t[0].match(n))break block_search;l.push(e.trailing.replace(/[^\n]/g,'').substring(2)),e=t.shift()}else break block_search}while(!0);return[['code_block',l.join('\n')]]}},horizRule:function(e,t){var l=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(l){var n=[['hr']];return l[1]&&n.unshift.apply(n,this.processBlock(l[1],[])),l[3]&&t.unshift(f(l[3])),n}},lists:function(){function e(e){return new RegExp('(?:^('+i+'{0,'+e+'} {0,3})('+l+')\\s+)|(^'+i+'{0,'+(e-1)+'}[ ]{0,4})')}function t(e){return e.replace(/ {0,3}\t/g,'    ')}function n(e,t,l,n){if(t)return void e.push(['para'].concat(l));var s=e[e.length-1]instanceof Array&&'para'==e[e.length-1][0]?e[e.length-1]:e;n&&1<e.length&&l.unshift(n);for(var u=0;u<l.length;u++){var r=l[u];'string'==typeof r&&1<s.length&&'string'==typeof s[s.length-1]?s[s.length-1]+=r:s.push(r)}}function s(e,t){for(var l=new RegExp('^('+i+'{'+e+'}.*?\\n?)*$'),n=new RegExp('^'+i+'{'+e+'}','gm'),s=[];0<t.length&&l.exec(t[0]);){var u=t.shift(),r=u.replace(n,'');s.push(f(r,u.trailing,u.lineNumber))}return s}function u(e,t,l){var n=e.list,s=n[n.length-1];if(!(s[1]instanceof Array&&'para'==s[1][0]))if(t+1==l.length)s.push(['para'].concat(s.splice(1,s.length-1)));else{var u=s.pop();s.push(['para'].concat(s.splice(1,s.length-1)),u)}}var l='[*+-]|\\d+\\.',r=/[*+-]/,o=/\d+\./,_=/^( {0,3})([*+-]|\d+\.)[ 	]+/,i='(?: {0,3}\\t| {4})';return function(o,c){function d(e){var t=r.exec(e[2])?['bulletlist']:['numberlist'];return f.push({list:t,indent:e[1]}),t}var g=o.match(_);if(g){var f=[],L=d(g),A=!1,T=[f[0].list],x,O;loose_search:for(;;){var i=o.split(/(?=\n)/),m='';tight_search:for(var U=0;U<i.length;U++){var E='',b=i[U].replace(/^\n/,function(e){return E=e,''}),l=e(f.length);if(g=b.match(l),void 0!==g[1]){m.length&&(n(x,A,this.processInline(m),E),A=!1,m=''),g[1]=t(g[1]);var v=Math.floor(g[1].length/4)+1;if(v>f.length)L=d(g),x.push(L),x=L[1]=['listitem'];else{var k=!1;for(O=0;O<f.length;O++)if(f[O].indent==g[1]){L=f[O].list,f.splice(O+1,f.length-(O+1)),k=!0;break}k||(v++,v<=f.length?(f.splice(v,f.length-v),L=f[v-1].list):(L=d(g),x.push(L))),x=['listitem'],L.push(x)}E=''}b.length>g[0].length&&(m+=E+b.substr(g[0].length))}m.length&&(n(x,A,this.processInline(m),E),A=!1,m='');var R=s(f.length,c);0<R.length&&(h(f,u,this),x.push.apply(x,this.toTree(R,[])));var S=c[0]&&c[0].valueOf()||'';if(S.match(_)||S.match(/^ /)){o=c.shift();var I=this.dialect.block.horizRule(o,c);if(I){T.push.apply(T,I);break}h(f,u,this),A=!0;continue loose_search}break}return T}}}(),blockquote:function(e,t){if(e.match(/^>/m)){var l=[];if('>'!=e[0]){for(var n=e.split(/\n/),s=[],u=e.lineNumber;n.length&&'>'!=n[0][0];)s.push(n.shift()),u++;var r=f(s.join('\n'),'\n',e.lineNumber);l.push.apply(l,this.processBlock(r,[])),e=f(n.join('\n'),e.trailing,u)}for(;t.length&&'>'==t[0][0];){var _=t.shift();e=f(e+e.trailing+_,_.trailing,e.lineNumber)}var i=e.replace(/^> ?/gm,''),c=this.tree,d=this.toTree(i,['blockquote']),g=o(d);return g&&g.references&&(delete g.references,A(g)&&d.splice(1,1)),l.push(d),l}},referenceDefn:function(e,t){var l=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(e.match(l)){o(this.tree)||this.tree.splice(1,0,{});var n=o(this.tree);void 0===n.references&&(n.references={});var s=this.loop_re_over_block(l,e,function(e){e[2]&&'<'==e[2][0]&&'>'==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1));var t=n.references[e[1].toLowerCase()]={href:e[2]};void 0===e[4]?void 0!==e[5]&&(t.title=e[5]):t.title=e[4]});return s.length&&t.unshift(f(s,e.trailing)),[]}},para:function(e){return[['para'].concat(this.processInline(e))]}}},g.dialects.Gruber.inline={__oneElement__:function(e,t,l){var n,s;t=t||this.dialect.inline.__patterns__;var u=new RegExp('([\\s\\S]*?)('+(t.source||t)+')');if(n=u.exec(e),!n)return[e.length,e];if(n[1])return[n[1].length,n[1]];var s;return n[2]in this.dialect.inline&&(s=this.dialect.inline[n[2]].call(this,e.substr(n.index),n,l||[])),s=s||[n[2].length,n[2]],s},__call__:function(e,t){function l(e){'string'==typeof e&&'string'==typeof n[n.length-1]?n[n.length-1]+=e:n.push(e)}for(var n=[],s;0<e.length;)s=this.dialect.inline.__oneElement__.call(this,e,t,n),e=e.substr(s.shift()),h(s,l);return n},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(e){return this.dialect.inline.__escape__.exec(e)?[2,e.charAt(1)]:[1,'\\']},"![":function(e){var t=e.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(t){t[2]&&'<'==t[2][0]&&'>'==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1)),t[2]=this.dialect.inline.__call__.call(this,t[2],/\\/)[0];var l={alt:t[1],href:t[2]||''};return void 0!==t[4]&&(l.title=t[4]),[t[0].length,['img',l]]}return t=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),t?[t[0].length,['img_ref',{alt:t[1],ref:t[2].toLowerCase(),original:t[0]}]]:[2,'![']},"[":function(e){var t=e+'',l=g.DialectHelpers.inline_until_char.call(this,e.substr(1),']');if(!l)return[1,'['];var n=1+l[0],s=l[1],u,r;e=e.substr(n);var o=e.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(o){var _=o[1];if(n+=o[0].length,_&&'<'==_[0]&&'>'==_[_.length-1]&&(_=_.substring(1,_.length-1)),!o[3])for(var i=1,c=0;c<_.length;c++)switch(_[c]){case'(':i++;break;case')':0==--i&&(n-=_.length-c,_=_.substring(0,c));}return _=this.dialect.inline.__call__.call(this,_,/\\/)[0],r={href:_||''},void 0!==o[3]&&(r.title=o[3]),u=['link',r].concat(s),[n,u]}return o=e.match(/^\s*\[(.*?)\]/),o?(n+=o[0].length,r={ref:(o[1]||s+'').toLowerCase(),original:t.substr(0,n)},u=['link_ref',r].concat(s),[n,u]):1==s.length&&'string'==typeof s[0]?(r={ref:s[0].toLowerCase(),original:t.substr(0,n)},u=['link_ref',r,s[0]],[n,u]):[1,'[']},"<":function(e){var t;return null==(t=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?[1,'<']:t[3]?[t[0].length,['link',{href:'mailto:'+t[3]},t[3]]]:'mailto'==t[2]?[t[0].length,['link',{href:t[1]},t[1].substr(7)]]:[t[0].length,['link',{href:t[1]},t[1]]]},"`":function(e){var t=e.match(/(`+)(([\s\S]*?)\1)/);return t&&t[2]?[t[1].length+t[2].length,['inlinecode',t[3]]]:[1,'`']},"  \n":function(){return[3,['linebreak']]}},g.dialects.Gruber.inline['**']=u('strong','**'),g.dialects.Gruber.inline.__=u('strong','__'),g.dialects.Gruber.inline['*']=u('em','*'),g.dialects.Gruber.inline._=u('em','_'),g.buildBlockOrder=function(e){var t=[];for(var l in e)'__order__'!=l&&'__call__'!=l&&t.push(l);e.__order__=t},g.buildInlinePatterns=function(e){var t=[];for(var n in e)if(!n.match(/^__.*__$/)){var s=n.replace(/([\\.*+?|()\[\]{}])/g,'\\$1').replace(/\n/,'\\n');t.push(1==n.length?s:'(?:'+s+')')}t=t.join('|'),e.__patterns__=t;var l=e.__call__;e.__call__=function(e,n){return void 0==n?l.call(this,e,t):l.call(this,e,n)}},g.DialectHelpers={},g.DialectHelpers.inline_until_char=function(e,t){for(var l=0,n=[];;){if(e.charAt(l)==t)return l++,[l,n];if(l>=e.length)return null;var s=this.dialect.inline.__oneElement__.call(this,e.substr(l));l+=s[0],n.push.apply(n,s.slice(1))}},g.subclassDialect=function(e){function t(){}function l(){}return t.prototype=e.block,l.prototype=e.inline,{block:new t,inline:new l}},g.buildBlockOrder(g.dialects.Gruber.block),g.buildInlinePatterns(g.dialects.Gruber.inline),g.dialects.Maruku=g.subclassDialect(g.dialects.Gruber),g.dialects.Maruku.processMetaHash=function(e){for(var t=r(e),l={},n=0;n<t.length;++n)if(/^#/.test(t[n]))l.id=t[n].substring(1);else if(/^\./.test(t[n]))l['class']?l['class']+=t[n].replace(/./,' '):l['class']=t[n].substring(1);else if(/\=/.test(t[n])){var u=t[n].split(/\=/);l[u[0]]=u[1]}return l},g.dialects.Maruku.block.document_meta=function(e){if(!(1<e.lineNumber)&&e.match(/^(?:\w+:.*\n)*\w+:.*$/)){o(this.tree)||this.tree.splice(1,0,{});var t=e.split(/\n/);for(p in t){var l=t[p].match(/(\w+):\s*(.*)$/),n=l[1].toLowerCase(),s=l[2];this.tree[1][n]=s}return[]}},g.dialects.Maruku.block.block_meta=function(e){var t=e.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(t){var l=this.dialect.processMetaHash(t[2]),n;if(''===t[1]){var s=this.tree[this.tree.length-1];if(n=o(s),'string'==typeof s)return;for(a in n||(n={},s.splice(1,0,n)),l)n[a]=l[a];return[]}var u=e.replace(/\n.*$/,''),r=this.processBlock(u,[]);for(a in n=o(r[0]),n||(n={},r[0].splice(1,0,n)),l)n[a]=l[a];return r}},g.dialects.Maruku.block.definition_list=function(e,t){var l=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,n=['dl'],s,u;if(u=e.match(l)){for(var r=[e];t.length&&l.exec(t[0]);)r.push(t.shift());for(var o=0;o<r.length;++o){var u=r[o].match(l),_=u[1].replace(/\n$/,'').split(/\n/),i=u[2].split(/\n:\s+/);for(s=0;s<_.length;++s)n.push(['dt',_[s]]);for(s=0;s<i.length;++s)n.push(['dd'].concat(this.processInline(i[s].replace(/(\n)\s+/,'$1'))))}}else return;return[n]},g.dialects.Maruku.block.table=function(e){var t=function(e,t){t=t||'\\s',t.match(/^[\\|\[\]{}?*.+^$]$/)&&(t='\\'+t);for(var l=[],n=new RegExp('^((?:\\\\.|[^\\\\'+t+'])*)'+t+'(.*)'),s;s=e.match(n);)l.push(s[1]),e=s[2];return l.push(e),l},l=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,n=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/,s,u;if(u=e.match(l))u[3]=u[3].replace(/^\s*\|/gm,'');else if(!(u=e.match(n)))return;var r=['table',['thead',['tr']],['tbody']];u[2]=u[2].replace(/\|\s*$/,'').split('|');var o=[];for(h(u[2],function(e){e.match(/^\s*-+:\s*$/)?o.push({align:'right'}):e.match(/^\s*:-+\s*$/)?o.push({align:'left'}):e.match(/^\s*:-+:\s*$/)?o.push({align:'center'}):o.push({})}),u[1]=t(u[1].replace(/\|\s*$/,''),'|'),s=0;s<u[1].length;s++)r[1][1].push(['th',o[s]||{}].concat(this.processInline(u[1][s].trim())));return h(u[3].replace(/\|\s*$/mg,'').split('\n'),function(e){var l=['tr'];for(e=t(e,'|'),s=0;s<e.length;s++)l.push(['td',o[s]||{}].concat(this.processInline(e[s].trim())));r[2].push(l)},this),[r]},g.dialects.Maruku.inline['{:']=function(e,t,l){if(!l.length)return[2,'{:'];var n=l[l.length-1];if('string'==typeof n)return[2,'{:'];var s=e.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!s)return[2,'{:'];var u=this.dialect.processMetaHash(s[1]),r=o(n);for(var _ in r||(r={},n.splice(1,0,r)),u)r[_]=u[_];return[s[0].length,'']},g.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,g.buildBlockOrder(g.dialects.Maruku.block),g.buildInlinePatterns(g.dialects.Maruku.inline);var L=Array.isArray||function(e){return'[object Array]'==Object.prototype.toString.call(e)},h;h=Array.prototype.forEach?function(e,t,l){return e.forEach(t,l)}:function(e,t,l){for(var n=0;n<e.length;n++)t.call(l||e,e[n],n,e)};var A=function(e){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0};e.renderJsonML=function(e,t){t=t||{},t.root=t.root||!1;var l=[];if(t.root)l.push(i(e));else for(e.shift(),e.length&&'object'==typeof e[0]&&!(e[0]instanceof Array)&&e.shift();e.length;)l.push(i(e.shift()));return l.join('\n\n')}})(function(){return t}())}]);