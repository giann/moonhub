var moonhub=function(e){function t(l){if(a[l])return a[l].exports;var u=a[l]={i:l,l:!1,exports:{}};return e[l].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,l){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var a=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(a,'a',a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=38)}([function(e,t,a){'use strict';(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function l(e,t){if(e===t)return 0;for(var a=e.length,l=t.length,u=0,s=Math.min(a,l);u<s;++u)if(e[u]!==t[u]){a=e[u],l=t[u];break}return a<l?-1:l<a?1:0}function u(e){return t.Buffer&&'function'==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!!(null!=e&&e._isBuffer)}function s(e){return Object.prototype.toString.call(e)}function n(e){return!u(e)&&!('function'!=typeof t.ArrayBuffer)&&('function'==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(!!(e instanceof DataView)||e.buffer&&e.buffer instanceof ArrayBuffer))}function r(e){if(x.isFunction(e)){if(m)return e.name;var t=e.toString(),a=t.match(v);return a&&a[1]}}function o(e,t){return'string'==typeof e?e.length<t?e:e.slice(0,t):e}function _(e){if(m||!x.isFunction(e))return x.inspect(e);var t=r(e),a=t?': '+t:'';return'[Function'+a+']'}function i(e){return o(_(e.actual),128)+' '+e.operator+' '+o(_(e.expected),128)}function p(e,t,a,l,u){throw new E.AssertionError({message:a,actual:e,expected:t,operator:l,stackStartFunction:u})}function c(e,t){e||p(e,!0,t,'==',E.ok)}function d(e,t,a,r){if(e===t)return!0;if(u(e)&&u(t))return 0===l(e,t);if(x.isDate(e)&&x.isDate(t))return e.getTime()===t.getTime();if(x.isRegExp(e)&&x.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if((null===e||'object'!=typeof e)&&(null===t||'object'!=typeof t))return a?e==t:e==t;if(n(e)&&n(t)&&s(e)===s(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===l(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(u(e)!==u(t))return!1;r=r||{actual:[],expected:[]};var o=r.actual.indexOf(e);return-1!==o&&o===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),L(e,t,a,r))}function g(e){return'[object Arguments]'==Object.prototype.toString.call(e)}function L(e,t,a,l){if(null===e||e===void 0||null===t||t===void 0)return!1;if(x.isPrimitive(e)||x.isPrimitive(t))return e===t;if(a&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var u=g(e),s=g(t);if(u&&!s||!u&&s)return!1;if(u)return e=U.call(e),t=U.call(t),d(e,t,a);var n=k(e),r=k(t),o,_;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),_=n.length-1;0<=_;_--)if(n[_]!==r[_])return!1;for(_=n.length-1;0<=_;_--)if(o=n[_],!d(e[o],t[o],a,l))return!1;return!0}function f(e,t,a){d(e,t,!0)&&p(e,t,a,'notDeepStrictEqual',f)}function A(e,t){if(!e||!t)return!1;if('[object RegExp]'==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(t){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function T(e){var t;try{e()}catch(a){t=a}return t}function h(e,t,a,l){var u;if('function'!=typeof t)throw new TypeError('"block" argument must be a function');'string'==typeof a&&(l=a,a=null),u=T(t),l=(a&&a.name?' ('+a.name+').':'.')+(l?' '+l:'.'),e&&!u&&p(u,a,'Missing expected exception'+l);var s='string'==typeof l,n=!e&&x.isError(u),r=!e&&u&&!a;if((n&&s&&A(u,a)||r)&&p(u,a,'Got unwanted exception'+l),e&&u&&a&&!A(u,a)||!e&&u)throw u}var x=a(24),O=Object.prototype.hasOwnProperty,U=Array.prototype.slice,m=function(){return'foo'===function(){}.name}(),E=e.exports=c,v=/\s*function\s+([^\(\s]*)\s*/;E.AssertionError=function(e){this.name='AssertionError',this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var t=e.stackStartFunction||p;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var a=new Error;if(a.stack){var l=a.stack,u=r(t),s=l.indexOf('\n'+u);if(0<=s){var n=l.indexOf('\n',s+1);l=l.substring(n+1)}this.stack=l}}},x.inherits(E.AssertionError,Error),E.fail=p,E.ok=c,E.equal=function(e,t,a){e!=t&&p(e,t,a,'==',E.equal)},E.notEqual=function(e,t,a){e==t&&p(e,t,a,'!=',E.notEqual)},E.deepEqual=function(e,t,a){d(e,t,!1)||p(e,t,a,'deepEqual',E.deepEqual)},E.deepStrictEqual=function(e,t,a){d(e,t,!0)||p(e,t,a,'deepStrictEqual',E.deepStrictEqual)},E.notDeepEqual=function(e,t,a){d(e,t,!1)&&p(e,t,a,'notDeepEqual',E.notDeepEqual)},E.notDeepStrictEqual=f,E.strictEqual=function(e,t,a){e!==t&&p(e,t,a,'===',E.strictEqual)},E.notStrictEqual=function(e,t,a){e===t&&p(e,t,a,'!==',E.notStrictEqual)},E.throws=function(e,t,a){h(!0,e,t,a)},E.doesNotThrow=function(e,t,a){h(!1,e,t,a)},E.ifError=function(e){if(e)throw e};var k=Object.keys||function(e){var t=[];for(var a in e)O.call(e,a)&&t.push(a);return t}}).call(t,a(20))},function(e,t,a){'use strict';var l=String.fromCharCode;const u=a(0),s=a(10),n=[];for(let u=0;127>u;u++)n[l(u)]=u;e.exports.char=n;const r='5',o='3',_='4',i='Lua '+r+'.'+o,p=i+'.'+_,c=p+'  Copyright (C) 1994-2017 Lua.org, PUC-Rio',d='0',g='0',L='1',f='Fengari '+d+'.'+g,A=f+'.'+L,T='B. Giannangeli, Daurnimator',h='_'+r+'_'+o,x='LUA_INIT',O={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};O.LUA_TSHRSTR=O.LUA_TSTRING|0,O.LUA_TLNGSTR=O.LUA_TSTRING|16,O.LUA_TNUMFLT=O.LUA_TNUMBER|0,O.LUA_TNUMINT=O.LUA_TNUMBER|16,O.LUA_TLCL=O.LUA_TFUNCTION|0,O.LUA_TLCF=O.LUA_TFUNCTION|16,O.LUA_TCCL=O.LUA_TFUNCTION|32;const U=-s.LUAI_MAXSTACK-1e3,m=2;const E=function(e){return Array.isArray(e)},v={},b=0,k=1,R=2,S=3;e.exports.LUA_PATH_SEP=';';e.exports.LUA_PATH_MARK='?';e.exports.LUA_EXEC_DIR='!';const I=r+'.'+o;e.exports.LUA_VDIR=I;{e.exports.LUA_DIRSEP='/';e.exports.LUA_LDIR='./lua/'+I+'/';e.exports.LUA_CDIR='./lua/'+I+'/';e.exports.LUA_PATH_DEFAULT='?.lua;?/init.lua';e.exports.LUA_CPATH_DEFAULT='?.js;loadall.js'}e.exports.CT=O,e.exports.FENGARI_AUTHORS=T,e.exports.FENGARI_COPYRIGHT=A+'  Copyright (C) 2017 '+T+'\nBased on: '+c,e.exports.FENGARI_RELEASE=A,e.exports.FENGARI_VERSION=f,e.exports.FENGARI_VERSION_MAJOR=d,e.exports.FENGARI_VERSION_MINOR=g,e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE=L,e.exports.LUA_AUTHORS='R. Ierusalimschy, L. H. de Figueiredo, W. Celes',e.exports.LUA_COPYRIGHT=c,e.exports.LUA_HOOKCALL=b,e.exports.LUA_HOOKCOUNT=S,e.exports.LUA_HOOKLINE=R,e.exports.LUA_HOOKRET=k,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_INITVARVERSION=x+h,e.exports.LUA_INIT_VAR=x,e.exports.LUA_MASKCALL=1<<b,e.exports.LUA_MASKCOUNT=1<<S,e.exports.LUA_MASKLINE=1<<R,e.exports.LUA_MASKRET=1<<k,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=U,e.exports.LUA_RELEASE=p,e.exports.LUA_RIDX_GLOBALS=m,e.exports.LUA_RIDX_LAST=m,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.LUA_SIGNATURE='\x1BLua',e.exports.LUA_VERSION=i,e.exports.LUA_VERSION_MAJOR=r,e.exports.LUA_VERSION_MINOR=o,e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE=_,e.exports.LUA_VERSUFFIX=h,e.exports.constant_types=O,e.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},e.exports.lua_upvalueindex=function(e){return U-e},e.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6},e.exports.is_luastring=E,e.exports.to_jsstring=function(e,t,a){u(E(e),'jsstring expect a array of bytes');let s=0,n,r,o,_,i,p;e=e.slice(t?t:0,a);for(var c='';;){if(n=e[s++],0===n){c+='\0';continue}if(!n)return c;if(!(128&n)){c+=l(n);continue}if(r=63&e[s++],192==(224&n)){c+=l((31&n)<<6|r);continue}if(o=63&e[s++],224==(240&n)?n=(15&n)<<12|r<<6|o:(_=63&e[s++],240==(248&n)?n=(7&n)<<18|r<<12|o<<6|_:(i=63&e[s++],248==(252&n)?n=(3&n)<<24|r<<18|o<<12|_<<6|i:(p=63&e[s++],n=(1&n)<<30|r<<24|o<<18|_<<12|i<<6|p))),65536>n)c+=l(n);else{var d=n-65536;c+=l(55296|d>>10,56320|1023&d)}}},e.exports.to_luastring=function(e,t){if(u('string'==typeof e,'to_luastring expect a js string'),t){let t=v[e];if(E(t))return t}let a=[],l=0;for(let s=0,n;s<e.length;++s)n=e.codePointAt(s),55296<=n&&s++,127>=n?a[l++]=n:2047>=n?(a[l++]=192|n>>6,a[l++]=128|63&n):65535>=n?(a[l++]=224|n>>12,a[l++]=128|63&n>>6,a[l++]=128|63&n):2097151>=n?(a[l++]=240|n>>18,a[l++]=128|63&n>>12,a[l++]=128|63&n>>6,a[l++]=128|63&n):67108863>=n?(a[l++]=248|n>>24,a[l++]=128|63&n>>18,a[l++]=128|63&n>>12,a[l++]=128|63&n>>6,a[l++]=128|63&n):(a[l++]=252|n>>30,a[l++]=128|63&n>>24,a[l++]=128|63&n>>18,a[l++]=128|63&n>>12,a[l++]=128|63&n>>6,a[l++]=128|63&n);return t&&(v[e]=a),a}},function(e,t,a){'use strict';const l=a(1),u=a(22),s=a(11),n=a(7),r=a(13);e.exports.FENGARI_AUTHORS=l.FENGARI_AUTHORS,e.exports.FENGARI_COPYRIGHT=l.FENGARI_COPYRIGHT,e.exports.FENGARI_RELEASE=l.FENGARI_RELEASE,e.exports.FENGARI_VERSION=l.FENGARI_VERSION,e.exports.FENGARI_VERSION_MAJOR=l.FENGARI_VERSION_MAJOR,e.exports.FENGARI_VERSION_MINOR=l.FENGARI_VERSION_MINOR,e.exports.FENGARI_VERSION_NUM=l.FENGARI_VERSION_NUM,e.exports.FENGARI_VERSION_RELEASE=l.FENGARI_VERSION_RELEASE,e.exports.LUA_AUTHORS=l.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=l.LUA_COPYRIGHT,e.exports.LUA_ERRERR=l.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=l.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=l.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=l.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=l.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=l.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=l.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=l.LUA_HOOKLINE,e.exports.LUA_HOOKRET=l.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=l.LUA_HOOKTAILCALL,e.exports.LUA_INITVARVERSION=l.LUA_INITVARVERSION,e.exports.LUA_INIT_VAR=l.LUA_INIT_VAR,e.exports.LUA_MASKCALL=l.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=l.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=l.LUA_MASKLINE,e.exports.LUA_MASKRET=l.LUA_MASKRET,e.exports.LUA_MINSTACK=l.LUA_MINSTACK,e.exports.LUA_MULTRET=l.LUA_MULTRET,e.exports.LUA_NUMTAGS=l.LUA_NUMTAGS,e.exports.LUA_OK=l.thread_status.LUA_OK,e.exports.LUA_OPADD=l.LUA_OPADD,e.exports.LUA_OPBAND=l.LUA_OPBAND,e.exports.LUA_OPBNOT=l.LUA_OPBNOT,e.exports.LUA_OPBOR=l.LUA_OPBOR,e.exports.LUA_OPBXOR=l.LUA_OPBXOR,e.exports.LUA_OPDIV=l.LUA_OPDIV,e.exports.LUA_OPEQ=l.LUA_OPEQ,e.exports.LUA_OPIDIV=l.LUA_OPIDIV,e.exports.LUA_OPLE=l.LUA_OPLE,e.exports.LUA_OPLT=l.LUA_OPLT,e.exports.LUA_OPMOD=l.LUA_OPMOD,e.exports.LUA_OPMUL=l.LUA_OPMUL,e.exports.LUA_OPPOW=l.LUA_OPPOW,e.exports.LUA_OPSHL=l.LUA_OPSHL,e.exports.LUA_OPSHR=l.LUA_OPSHR,e.exports.LUA_OPSUB=l.LUA_OPSUB,e.exports.LUA_OPUNM=l.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=l.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=l.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=l.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=l.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=l.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=l.LUA_SIGNATURE,e.exports.LUA_TNONE=l.CT.LUA_TNONE,e.exports.LUA_TNIL=l.CT.LUA_TNIL,e.exports.LUA_TBOOLEAN=l.CT.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=l.CT.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=l.CT.LUA_TNUMBER,e.exports.LUA_TSTRING=l.CT.LUA_TSTRING,e.exports.LUA_TTABLE=l.CT.LUA_TTABLE,e.exports.LUA_TFUNCTION=l.CT.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=l.CT.LUA_TUSERDATA,e.exports.LUA_TTHREAD=l.CT.LUA_TTHREAD,e.exports.LUA_VERSION=l.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=l.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=l.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=l.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=l.LUA_VERSION_RELEASE,e.exports.LUA_VERSUFFIX=l.LUA_VERSUFFIX,e.exports.LUA_YIELD=l.thread_status.LUA_YIELD,e.exports.lua_Debug=l.lua_Debug,e.exports.lua_upvalueindex=l.lua_upvalueindex,e.exports.to_jsstring=l.to_jsstring,e.exports.to_luastring=l.to_luastring,e.exports.LUA_CDIR=l.LUA_CDIR,e.exports.LUA_CPATH_DEFAULT=l.LUA_CPATH_DEFAULT,e.exports.LUA_EXEC_DIR=l.LUA_EXEC_DIR,e.exports.LUA_LDIR=l.LUA_LDIR,e.exports.LUA_PATH_DEFAULT=l.LUA_PATH_DEFAULT,e.exports.LUA_PATH_MARK=l.LUA_PATH_MARK,e.exports.LUA_PATH_SEP=l.LUA_PATH_SEP,e.exports.LUA_ROOT=l.LUA_ROOT,e.exports.LUA_SHRDIR=l.LUA_SHRDIR,e.exports.LUA_VDIR=l.LUA_VDIR,e.exports.LUA_DIRSEP=l.LUA_DIRSEP,e.exports.lua_absindex=u.lua_absindex,e.exports.lua_arith=u.lua_arith,e.exports.lua_atpanic=u.lua_atpanic,e.exports.lua_atnativeerror=u.lua_atnativeerror,e.exports.lua_call=u.lua_call,e.exports.lua_callk=u.lua_callk,e.exports.lua_checkstack=u.lua_checkstack,e.exports.lua_close=r.lua_close,e.exports.lua_compare=u.lua_compare,e.exports.lua_concat=u.lua_concat,e.exports.lua_copy=u.lua_copy,e.exports.lua_createtable=u.lua_createtable,e.exports.lua_dump=u.lua_dump,e.exports.lua_error=u.lua_error,e.exports.lua_gc=u.lua_gc,e.exports.lua_getallocf=u.lua_getallocf,e.exports.lua_getextraspace=u.lua_getextraspace,e.exports.lua_getfield=u.lua_getfield,e.exports.lua_getglobal=u.lua_getglobal,e.exports.lua_gethook=s.lua_gethook,e.exports.lua_gethookcount=s.lua_gethookcount,e.exports.lua_gethookmask=s.lua_gethookmask,e.exports.lua_geti=u.lua_geti,e.exports.lua_getinfo=s.lua_getinfo,e.exports.lua_getlocal=s.lua_getlocal,e.exports.lua_getmetatable=u.lua_getmetatable,e.exports.lua_getstack=s.lua_getstack,e.exports.lua_gettable=u.lua_gettable,e.exports.lua_gettop=u.lua_gettop,e.exports.lua_getupvalue=u.lua_getupvalue,e.exports.lua_getuservalue=u.lua_getuservalue,e.exports.lua_insert=u.lua_insert,e.exports.lua_isboolean=u.lua_isboolean,e.exports.lua_iscfunction=u.lua_iscfunction,e.exports.lua_isfunction=u.lua_isfunction,e.exports.lua_isinteger=u.lua_isinteger,e.exports.lua_islightuserdata=u.lua_islightuserdata,e.exports.lua_isnil=u.lua_isnil,e.exports.lua_isnone=u.lua_isnone,e.exports.lua_isnoneornil=u.lua_isnoneornil,e.exports.lua_isnumber=u.lua_isnumber,e.exports.lua_isproxy=u.lua_isproxy,e.exports.lua_isstring=u.lua_isstring,e.exports.lua_istable=u.lua_istable,e.exports.lua_isthread=u.lua_isthread,e.exports.lua_isuserdata=u.lua_isuserdata,e.exports.lua_isyieldable=n.lua_isyieldable,e.exports.lua_len=u.lua_len,e.exports.lua_load=u.lua_load,e.exports.lua_newstate=r.lua_newstate,e.exports.lua_newtable=u.lua_newtable,e.exports.lua_newthread=r.lua_newthread,e.exports.lua_newuserdata=u.lua_newuserdata,e.exports.lua_next=u.lua_next,e.exports.lua_pcall=u.lua_pcall,e.exports.lua_pcallk=u.lua_pcallk,e.exports.lua_pop=u.lua_pop,e.exports.lua_pushboolean=u.lua_pushboolean,e.exports.lua_pushcclosure=u.lua_pushcclosure,e.exports.lua_pushcfunction=u.lua_pushcfunction,e.exports.lua_pushfstring=u.lua_pushfstring,e.exports.lua_pushglobaltable=u.lua_pushglobaltable,e.exports.lua_pushinteger=u.lua_pushinteger,e.exports.lua_pushjsclosure=u.lua_pushjsclosure,e.exports.lua_pushjsfunction=u.lua_pushjsfunction,e.exports.lua_pushlightuserdata=u.lua_pushlightuserdata,e.exports.lua_pushliteral=u.lua_pushliteral,e.exports.lua_pushlstring=u.lua_pushlstring,e.exports.lua_pushnil=u.lua_pushnil,e.exports.lua_pushnumber=u.lua_pushnumber,e.exports.lua_pushstring=u.lua_pushstring,e.exports.lua_pushthread=u.lua_pushthread,e.exports.lua_pushvalue=u.lua_pushvalue,e.exports.lua_pushvfstring=u.lua_pushvfstring,e.exports.lua_rawequal=u.lua_rawequal,e.exports.lua_rawget=u.lua_rawget,e.exports.lua_rawgeti=u.lua_rawgeti,e.exports.lua_rawgetp=u.lua_rawgetp,e.exports.lua_rawlen=u.lua_rawlen,e.exports.lua_rawset=u.lua_rawset,e.exports.lua_rawseti=u.lua_rawseti,e.exports.lua_rawsetp=u.lua_rawsetp,e.exports.lua_register=u.lua_register,e.exports.lua_remove=u.lua_remove,e.exports.lua_replace=u.lua_replace,e.exports.lua_resume=n.lua_resume,e.exports.lua_rotate=u.lua_rotate,e.exports.lua_setallof=n.lua_setallof,e.exports.lua_setfield=u.lua_setfield,e.exports.lua_setglobal=u.lua_setglobal,e.exports.lua_sethook=s.lua_sethook,e.exports.lua_seti=u.lua_seti,e.exports.lua_setlocal=s.lua_setlocal,e.exports.lua_setmetatable=u.lua_setmetatable,e.exports.lua_settable=u.lua_settable,e.exports.lua_settop=u.lua_settop,e.exports.lua_setupvalue=u.lua_setupvalue,e.exports.lua_setuservalue=u.lua_setuservalue,e.exports.lua_status=u.lua_status,e.exports.lua_stringtonumber=u.lua_stringtonumber,e.exports.lua_toboolean=u.lua_toboolean,e.exports.lua_todataview=u.lua_todataview,e.exports.lua_tointeger=u.lua_tointeger,e.exports.lua_tointegerx=u.lua_tointegerx,e.exports.lua_tojsstring=u.lua_tojsstring,e.exports.lua_toljsstring=u.lua_toljsstring,e.exports.lua_tolstring=u.lua_tolstring,e.exports.lua_tonumber=u.lua_tonumber,e.exports.lua_tonumberx=u.lua_tonumberx,e.exports.lua_topointer=u.lua_topointer,e.exports.lua_toproxy=u.lua_toproxy,e.exports.lua_tostring=u.lua_tostring,e.exports.lua_tothread=u.lua_tothread,e.exports.lua_touserdata=u.lua_touserdata,e.exports.lua_type=u.lua_type,e.exports.lua_typename=u.lua_typename,e.exports.lua_upvalueid=u.lua_upvalueid,e.exports.lua_upvaluejoin=u.lua_upvaluejoin,e.exports.lua_version=u.lua_version,e.exports.lua_xmove=u.lua_xmove,e.exports.lua_yield=n.lua_yield,e.exports.lua_yieldk=n.lua_yieldk,e.exports.lua_tocfunction=u.lua_tocfunction},function(e,t,a){'use strict';var l=Math.floor,u=String.fromCharCode;const s=a(0),n=a(1),o=a(26),r=a(11),_=a(7),p=a(12),c=a(13),i=a(9),d=a(8),g=a(10),f=a(15),A=a(5),T=a(14),h=n.constant_types,x=n.char,L=h.LUA_NUMTAGS,O=h.LUA_NUMTAGS+1;class U{constructor(e,t){this.type=e,this.value=t}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(e){return this.type===e}checktype(e){return this.ttnov()===e}ttisnumber(){return this.checktype(h.LUA_TNUMBER)}ttisfloat(){return this.checktag(h.LUA_TNUMFLT)}ttisinteger(){return this.checktag(h.LUA_TNUMINT)}ttisnil(){return this.checktag(h.LUA_TNIL)}ttisboolean(){return this.checktag(h.LUA_TBOOLEAN)}ttislightuserdata(){return this.checktag(h.LUA_TLIGHTUSERDATA)}ttisstring(){return this.checktype(h.LUA_TSTRING)}ttisshrstring(){return this.checktag(h.LUA_TSHRSTR)}ttislngstring(){return this.checktag(h.LUA_TLNGSTR)}ttistable(){return this.checktag(h.LUA_TTABLE)}ttisfunction(){return this.checktype(h.LUA_TFUNCTION)}ttisclosure(){return(31&this.type)===h.LUA_TFUNCTION}ttisCclosure(){return this.checktag(h.LUA_TCCL)}ttisLclosure(){return this.checktag(h.LUA_TLCL)}ttislcf(){return this.checktag(h.LUA_TLCF)}ttisfulluserdata(){return this.checktag(h.LUA_TUSERDATA)}ttisthread(){return this.checktag(h.LUA_TTHREAD)}ttisdeadkey(){return this.checktag(O)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(e){this.type=h.LUA_TNUMFLT,this.value=e}chgfltvalue(e){s(this.type==h.LUA_TNUMFLT),this.value=e}setivalue(e){this.type=h.LUA_TNUMINT,this.value=e}chgivalue(e){s(this.type==h.LUA_TNUMINT),this.value=e}setnilvalue(){this.type=h.LUA_TNIL,this.value=void 0}setfvalue(e){this.type=h.LUA_TLCF,this.value=e}setpvalue(e){this.type=h.LUA_TLIGHTUSERDATA,this.value=e}setbvalue(e){this.type=h.LUA_TBOOLEAN,this.value=e}setsvalue(e){this.type=h.LUA_TLNGSTR,this.value=e}setuvalue(e){this.type=h.LUA_TUSERDATA,this.value=e}setthvalue(e){this.type=h.LUA_TTHREAD,this.value=e}setclLvalue(e){this.type=h.LUA_TLCL,this.value=e}setclCvalue(e){this.type=h.LUA_TCCL,this.value=e}sethvalue(e){this.type=h.LUA_TTABLE,this.value=e}setdeadvalue(){this.type=O,this.value=null}setfrom(e){this.type=e.type,this.value=e.value}tsvalue(){return s(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(e,t){return n.to_jsstring(this.svalue(),e,t)}}const m=function(e,t,a){e.stack[t].setsvalue(a)},E=new U(h.LUA_TNIL,null);Object.freeze(E),e.exports.luaO_nilobject=E;class b{constructor(e,t){this.id=e.l_G.id_counter++,this.p=null,this.nupvalues=t,this.upvals=Array(t)}}class k{constructor(e,t,a){for(this.id=e.l_G.id_counter++,this.f=t,this.nupvalues=a,this.upvalue=Array(a);a--;)this.upvalue[a]=new U(h.LUA_TNIL,null)}}class R{constructor(e,t){this.id=e.l_G.id_counter++,this.metatable=null,this.uservalue=new U(h.LUA_TNIL,null),this.len=t,this.data=Object.create(null)}}const v=n.to_luastring('...',!0),S=n.to_luastring('[string "'),I=n.to_luastring('"]'),N=function(e){return o.lisdigit(e)?e-x[0]:u(e).toLowerCase().charCodeAt(0)-x.a+10},P=8,M=function(t){let a=0,l=x[g.lua_getlocaledecpoint()],u=0,s=0,n=0,_=0,e=!1,i;for(;o.lisspace(t[a]);)a++;if((i=t[a]===x['-'])?a++:t[a]===x['+']&&a++,t[a]!==x[0]||t[a+1]!==x.x&&t[a+1]!==x.X)return null;for(a+=2;;a++)if(t[a]===l){if(e)break;else e=!0;}else if(o.lisxdigit(t[a]))0==s&&t[a]===x[0]?n++:++s<=30?u=16*u+N(t[a]):_++,e&&_--;else break;if(0==n+s)return null;if(_*=4,t[a]===x.p||t[a]===x.P){let e=0,l;if(a++,(l=t[a]===x['-'])?a++:t[a]===x['+']&&a++,!o.lisdigit(t[a]))return null;for(;o.lisdigit(t[a]);)e=10*e+t[a++]-x[0];l&&(e=-e),_+=e}for(i&&(u=-u);o.lisspace(t[a]);)a++;return a===t.length?g.ldexp(u,_):null},y=function(e){let t=n.to_jsstring(e);if(!/^[\t\v\f \n\r]*[\+\-]?([0-9]+\.?[0-9]*|\.[0-9]*)([eE][\+\-]?[0-9]+)?[\t\v\f \n\r]*$/.test(t))return null;let a=parseFloat(t);return isNaN(a)?null:a},C=function(e,t){return'x'===t?M(e):y(e)},D=function(e){let t=/[.xXnN]/g.exec(u(...e));t=t?t.index:null;let a=t?e[t]:null,l=a?u(a).toLowerCase():0;if('n'===l)return null;let s=C(e,l);return null===s,s},K=l(A.MAX_INT/10),B=A.MAX_INT%10,w=function(e){let t=0,l=0,u=!0,s;for(;o.lisspace(e[t]);)t++;if((s=e[t]===x['-'])?t++:e[t]===x['+']&&t++,e[t]===x[0]&&(e[t+1]===x.x||e[t+1]===x.X))for(t+=2;o.lisxdigit(e[t]);t++)l=0|16*l+N(e[t]),u=!1;else for(;o.lisdigit(e[t]);t++){let a=e[t]-x[0];if(l>=K&&(l>K||a>B+s))return null;l=0|10*l+a,u=!1}for(;o.lisspace(e[t]);)t++;return u||t!==e.length?null:0|(s?-l:l)},G=function(e,t){let a;if(t.ttisinteger())a=n.to_luastring(g.lua_integer2str(t.value));else{let e=g.lua_number2str(t.value);a=n.to_luastring(e),/^[-0123456789]+$/.test(e)&&(a.push(x[g.lua_getlocaledecpoint()]),a.push(x[0]))}t.setsvalue(i.luaS_bless(e,a))},V=function(e,t){_.luaD_inctop(e),m(e,e.top-1,i.luaS_new(e,t))},F=function(t,l,u){let s=0,g=0,i=0,a;for(;a=l.indexOf(x['%'],g),-1!=a;){switch(V(t,l.slice(g,a)),l[a+1]){case x.s:let e=u[i++];null===e&&(e=n.to_luastring('(null)',!0)),V(t,e);break;case x.c:let s=u[i++];o.lisprint(s)?V(t,[s]):X(t,n.to_luastring('<\\%d>',!0),s);break;case x.d:case x.I:_.luaD_inctop(t),t.stack[t.top-1].setivalue(u[i++]),G(t,t.stack[t.top-1]);break;case x.f:_.luaD_inctop(t),t.stack[t.top-1].setfltvalue(u[i++]),G(t,t.stack[t.top-1]);break;case x.p:let L=u[i++];L instanceof c.lua_State||L instanceof d.Table||L instanceof R||L instanceof b||L instanceof k||L instanceof p.UpVal?V(t,n.to_luastring('0x'+L.id.toString(16))):V(t,n.to_luastring('<id NYI>'));break;case x.U:V(t,n.to_luastring(String.fromCodePoint(u[i++])));break;case x['%']:V(t,[x['%']]);break;default:r.luaG_runerror(t,n.to_luastring('invalid option \'%%%c\' to \'lua_pushfstring\''),l[a+1]);}s+=2,g=a+2}return _.luaD_checkstack(t,1),V(t,l.slice(g)),0<s&&f.luaV_concat(t,s+1),t.stack[t.top-1].svalue()},X=function(e,t,...a){return F(e,t,a)},j=function(e,t,a,l){switch(t){case n.LUA_OPADD:return 0|a+l;case n.LUA_OPSUB:return 0|a-l;case n.LUA_OPMUL:return Math.imul(a,l);case n.LUA_OPMOD:return f.luaV_mod(e,a,l);case n.LUA_OPIDIV:return f.luaV_div(e,a,l);case n.LUA_OPBAND:return a&l;case n.LUA_OPBOR:return a|l;case n.LUA_OPBXOR:return a^l;case n.LUA_OPSHL:return f.luaV_shiftl(a,l);case n.LUA_OPSHR:return f.luaV_shiftl(a,-l);case n.LUA_OPUNM:return 0|0-a;case n.LUA_OPBNOT:return -1^a;default:s(0);}},H=function(e,t,a,u){switch(t){case n.LUA_OPADD:return a+u;case n.LUA_OPSUB:return a-u;case n.LUA_OPMUL:return a*u;case n.LUA_OPDIV:return a/u;case n.LUA_OPPOW:return Math.pow(a,u);case n.LUA_OPIDIV:return l(a/u);case n.LUA_OPUNM:return-a;case n.LUA_OPMOD:return A.luai_nummod(e,a,u);default:s(0);}};e.exports.CClosure=k,e.exports.LClosure=b,e.exports.LUA_TDEADKEY=O,e.exports.LUA_TPROTO=L,e.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},e.exports.TValue=U,e.exports.Udata=R,e.exports.UTF8BUFFSZ=P,e.exports.luaO_arith=function(e,t,a,l,u){let r='number'==typeof u?e.stack[u]:u;switch(t){case n.LUA_OPBAND:case n.LUA_OPBOR:case n.LUA_OPBXOR:case n.LUA_OPSHL:case n.LUA_OPSHR:case n.LUA_OPBNOT:{let u,s;if(!1!==(u=f.tointeger(a))&&!1!==(s=f.tointeger(l)))return void r.setivalue(j(e,t,u,s));break}case n.LUA_OPDIV:case n.LUA_OPPOW:{let u,s;if(!1!==(u=f.tonumber(a))&&!1!==(s=f.tonumber(l)))return void r.setfltvalue(H(e,t,u,s));break}default:{let u,s;if(a.ttisinteger()&&l.ttisinteger())return void r.setivalue(j(e,t,a.value,l.value));if(!1!==(u=f.tonumber(a))&&!1!==(s=f.tonumber(l)))return void r.setfltvalue(H(e,t,u,s));break}}s(null!==e),T.luaT_trybinTM(e,a,l,u,t-n.LUA_OPADD+T.TMS.TM_ADD)},e.exports.luaO_chunkid=function(e,t){let a=e.length,l;if(e[0]===x['='])l=a<t?e.slice(1):e.slice(1,t);else if(e[0]===x['@'])a<=t?l=e.slice(1):(t-=v.length,l=v.concat(e.slice(1+a-t)));else{let u=e.indexOf(x['\n']);l=S,t-=S.length+v.length+I.length+1,a<t&&-1===u?l=l.concat(e,I):(-1!==u&&(a=u),a>t&&(a=t),l=l.concat(e.slice(0,a),v,I))}return l},e.exports.luaO_hexavalue=N,e.exports.luaO_int2fb=function(t){let a=0;if(8>t)return t;for(;t>=128;)t=t+15>>4,a+=4;for(;t>=16;)t=t+1>>1,a++;return a+1<<3|t-8},e.exports.luaO_pushfstring=X,e.exports.luaO_pushvfstring=F,e.exports.luaO_str2num=function(e){let t=w(e);return null===t?(t=D(e),null!==t&&new U(h.LUA_TNUMFLT,t)):new U(h.LUA_TNUMINT,t)},e.exports.luaO_tostring=G,e.exports.luaO_utf8desc=function(e,t){let a=1;if(s(1114111>=t),128>t)e[P-1]=t;else{let l=63;do e[P-a++]=128|63&t,t>>=6,l>>=1;while(t>l);e[P-a]=~l<<1|t}return a},e.exports.luaO_utf8esc=function(e){let t=[],a=1;if(s(1114111>=e),128>e)t[P-1]=e;else{let l=63;do t[P-a++]=128|63&e,e>>=6,l>>=1;while(e>l);t[P-a]=~l<<1|e}return{buff:t,n:a}},e.exports.numarith=H,e.exports.pushobj2s=function(e,t){e.stack[e.top++]=new U(t.type,t.value)},e.exports.pushsvalue2s=function(e,t){e.stack[e.top++]=new U(h.LUA_TLNGSTR,t)},e.exports.setobjs2s=function(e,t,a){e.stack[t].setfrom(e.stack[a])},e.exports.setobj2s=function(e,t,a){e.stack[t].setfrom(a)},e.exports.setsvalue2s=m},function(e){e.exports=function(){throw new Error('define cannot be used indirect')}},function(e){'use strict';e.exports.LUAI_MAXCCALLS=200;e.exports.LUA_MAXINTEGER=2147483647;e.exports.LUA_MININTEGER=-2147483648;e.exports.luai_nummod=function(e,t,a){let l=t%a;return 0>l*a&&(l+=a),l};e.exports.MAX_INT=2147483647;e.exports.MIN_INT=-2147483648},function(e,t,a){'use strict';(function(t){const u=a(2),l='_LOADED',s=u.to_luastring('FILE*',!0),n=72;const r=10,o=11,_=function(e,t,a){if(0===a||!u.lua_istable(e,-1))return 0;for(u.lua_pushnil(e);u.lua_next(e,-2);){if(u.lua_type(e,-2)===u.LUA_TSTRING){if(u.lua_rawequal(e,t,-1))return u.lua_pop(e,1),1;if(_(e,t,a-1))return u.lua_remove(e,-2),u.lua_pushliteral(e,'.'),u.lua_insert(e,-2),u.lua_concat(e,3),1}u.lua_pop(e,1)}return 0},i=function(e,t){let a=u.lua_gettop(e);if(u.lua_getinfo(e,[102],t),u.lua_getfield(e,u.LUA_REGISTRYINDEX,u.to_luastring(l,!0)),_(e,a+1,2)){let t=u.lua_tostring(e,-1);return u.to_jsstring(t).startsWith('_G.')&&(u.lua_pushstring(e,t.slice(3)),u.lua_remove(e,-2)),u.lua_copy(e,-1,a+1),u.lua_pop(e,2),1}return u.lua_settop(e,a),0},p=function(e,t){i(e,t)?(u.lua_pushfstring(e,u.to_luastring('function \'%s\''),u.lua_tostring(e,-1)),u.lua_remove(e,-2)):0===t.namewhat.length?t.what&&t.what[0]===109?u.lua_pushliteral(e,'main chunk'):t.what&&t.what[0]!=67?u.lua_pushfstring(e,u.to_luastring('function <%s:%d>'),t.short_src,t.linedefined):u.lua_pushliteral(e,'?'):u.lua_pushfstring(e,u.to_luastring('%s \'%s\''),t.namewhat,t.name)},c=function(e){let t=new u.lua_Debug,a=1,l=1;for(;u.lua_getstack(e,l,t);)a=l,l*=2;for(;a<l;){let s=Math.floor((a+l)/2);u.lua_getstack(e,s,t)?a=s+1:l=s}return l-1},d=function(e){throw new Error(`PANIC: unprotected error in call to Lua API (${u.lua_tojsstring(e,-1)})`)},g=function(e,t,a){let l=new u.lua_Debug;return u.lua_getstack(e,0,l)?(u.lua_getinfo(e,[110],l),'method'===u.to_jsstring(l.namewhat)&&(t--,0===t))?T(e,u.to_luastring('calling \'%s\' on bad self (%s)'),l.name,a):(null===l.name&&(l.name=i(e,l)?u.lua_tostring(e,-1):[63]),T(e,u.to_luastring('bad argument #%d to \'%s\' (%s)'),t,l.name,a)):T(e,u.to_luastring('bad argument #%d (%s)'),t,a)},f=function(e,t,a){let l=V(e,t,u.to_luastring('__name',!0))===u.LUA_TSTRING?u.lua_tostring(e,-1):u.lua_type(e,t)===u.LUA_TLIGHTUSERDATA?u.to_luastring('light userdata',!0):m(e,t);let s=u.lua_pushfstring(e,u.to_luastring('%s expected, got %s'),a,l);return g(e,t,s)},A=function(e,t){let a=new u.lua_Debug;return u.lua_getstack(e,t,a)&&(u.lua_getinfo(e,u.to_luastring('Sl',!0),a),0<a.currentline)?void u.lua_pushfstring(e,u.to_luastring('%s:%d: '),a.short_src,a.currentline):void u.lua_pushstring(e,[])},T=function(e,t,...a){return A(e,1),u.lua_pushvfstring(e,t,a),u.lua_concat(e,2),u.lua_error(e)},h=function(t,a,l,s){return a?(u.lua_pushboolean(t,1),1):(u.lua_pushnil(t),l?u.lua_pushstring(t,u.to_luastring(`${u.to_jsstring(l)}: ${s.message}`)):u.lua_pushstring(t,u.to_luastring(s.message)),u.lua_pushinteger(t,-s.errno),3)},x=function(e,t){return u.lua_getfield(e,u.LUA_REGISTRYINDEX,t)},O=function(e,t,a){let l=u.lua_touserdata(e,t);return null!==l&&u.lua_getmetatable(e,t)?(x(e,a),u.lua_rawequal(e,-1,-2)||(l=null),u.lua_pop(e,2),l):null},U=function(e,t,a){f(e,t,u.lua_typename(e,a))},m=function(e,t){return u.lua_typename(e,u.lua_type(e,t))},E=function(e,t){return v(e,t,null)},v=function(e,t){let a=u.lua_tolstring(e,t);return(null===a||void 0===a)&&U(e,t,u.LUA_TSTRING),a},L=function(e,t,a){return 0>=u.lua_type(e,t)?a:v(e,t)},b=L,k=function(e,t){u.lua_isnumber(e,t)?g(e,t,u.to_luastring('number has no integer representation',!0)):U(e,t,u.LUA_TNUMBER)},R=function(e,t){let a=u.lua_tonumberx(e,t);return!1===a&&U(e,t,u.LUA_TNUMBER),a},S=function(e,t){let a=u.lua_tointeger(e,t);return!1===a&&k(e,t),a},I=function(e){return e},N=function(e,t){t.L=e,t.b=[]},P=function(e,t,a){e.b=e.b.concat(t.slice(0,a))},M=P,y=function(e){let t=e.L;u.lua_pushstring(t,e.b)},C=function(e,t){e.n+=t},D=function(e,t,a,l){return 0>=u.lua_type(e,a)?l:t(e,a)},K=function(e,t){let a=t.string;return t.string=null,a},B=function(e,t,a,l,s){return u.lua_load(e,K,{string:t},l,s)},w=function(e,t,a,l){return B(e,t,a,l,null)},G=function(e,t){return w(e,t,t.length,t)},V=function(e,t,a){if(!u.lua_getmetatable(e,t))return u.LUA_TNIL;u.lua_pushstring(e,a);let l=u.lua_rawget(e,-2);return l===u.LUA_TNIL&&u.lua_pop(e,2),l},F=function(e,t,a){return(t=u.lua_absindex(e,t),V(e,t,a)!==u.LUA_TNIL)&&(u.lua_pushvalue(e,t),u.lua_call(e,1,1),!0)},X=function(e,t,a){var u=a>>>0,s=t.length,n=e.length+1-s;loop:for(;u<n;u++){for(let a=0;a<s;a++)if(e[u+a]!==t[a])continue loop;return u}return-1},j=function(e,t,a){return!(u.lua_getfield(e,t,a)!==u.LUA_TTABLE)||(u.lua_pop(e,1),t=u.lua_absindex(e,t),u.lua_newtable(e),u.lua_pushvalue(e,-1),u.lua_setfield(e,t,a),!1)},H=function(e,t,a){for(let l in Y(e,a,u.to_luastring('too many upvalues',!0)),t){for(let t=0;t<a;t++)u.lua_pushvalue(e,-a);u.lua_pushcclosure(e,t[l],a),u.lua_setfield(e,-(a+2),u.to_luastring(l))}u.lua_pop(e,a)},Y=function(e,t,a){u.lua_checkstack(e,t)||(a?T(e,u.to_luastring('stack overflow (%s)'),a):T(e,u.to_luastring('stack overflow',!0)))},z=-1,Z=function(e,t,a,l){let s=l.message,n=u.lua_tostring(e,a).slice(1);return u.lua_pushstring(e,u.to_luastring(`cannot ${t} ${u.to_jsstring(n)}: ${s}`)),u.lua_remove(e,a),u.LUA_ERRFILE};let J=function(){return null};const q=[239,187,191],W=function(e){e.n=0;let t=0,a;do{if(a=J(e),null===a||a!==q[t])return a;t++,e.buff[e.n++]=a}while(t<q.length);return e.n=0,J(e)},Q=function(e){let t=W(e);if(t===35){do t=J(e);while(t&&t!==10);return{skipped:!0,c:J(e)}}return{skipped:!1,c:t}};class ${constructor(){this.n=NaN,this.f=null,this.buff=Array(1024),this.pos=0,this.err=void 0}}{const t=function(e,t){let a=t;if(null!==a.f&&0<a.n){let e=a.n;return a.n=0,a.f=a.f.slice(a.pos),a.buff.slice(0,e)}let l=a.f;return a.f=null,l};J=function(e){return e.pos<e.f.length?e.f[e.pos++]:null};const a=function(e,a,l){let s=new $,n=u.lua_gettop(e)+1;if(null===a)throw new Error(`Can't read stdin in the browser`);else{let t=u.to_jsstring(a);u.lua_pushliteral(e,`@${t}`);let l=new XMLHttpRequest;if(l.open('GET',t,!1),l.send(),200===l.status)s.f=u.to_luastring(l.response);else return s.err=l.status,Z(e,'open',n,{message:`${l.status}: ${l.statusText}`})}let r=Q(s);r.c===u.LUA_SIGNATURE.charCodeAt(0)&&a||r.skipped&&(s.buff[s.n++]=10),null!==r.c&&(s.buff[s.n++]=r.c);let o=u.lua_load(e,t,s,u.lua_tostring(e,-1),l),_=s.err;return _?(u.lua_settop(e,n),Z(e,'read',n,_)):(u.lua_remove(e,n),o)},l=function(e,t){return a(e,t,null)};e.exports.luaL_dofile=function(e,t){return l(e,t)||u.lua_pcall(e,0,u.LUA_MULTRET,0)},e.exports.luaL_loadfilex=a,e.exports.luaL_loadfile=l}e.exports.LUA_FILEHANDLE=s,e.exports.LUA_LOADED_TABLE=l,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE='_PRELOAD',e.exports.LUA_REFNIL=z,e.exports.luaL_Buffer=class{constructor(){this.b=null,this.L=null}},e.exports.luaL_addchar=function(e,t){e.b.push(t)},e.exports.luaL_addlstring=P,e.exports.luaL_addsize=C,e.exports.luaL_addstring=M,e.exports.luaL_addvalue=function(e){let t=e.L,a=u.lua_tostring(t,-1);M(e,a),u.lua_remove(t,-1)},e.exports.luaL_argcheck=function(e,t,a,l){t||g(e,a,l)},e.exports.luaL_argerror=g,e.exports.luaL_buffinit=N,e.exports.luaL_buffinitsize=function(e,t){return N(e,t),t},e.exports.luaL_callmeta=F,e.exports.luaL_checkany=function(e,t){u.lua_type(e,t)===u.LUA_TNONE&&g(e,t,u.to_luastring('value expected',!0))},e.exports.luaL_checkinteger=S,e.exports.luaL_checklstring=v,e.exports.luaL_checknumber=R,e.exports.luaL_checkoption=function(e,t,a,l){let s=a?b(e,t,a):E(e,t);for(let u=0;l[u];u++)if(l[u].join('|')===s.join('|'))return u;return g(e,t,u.lua_pushfstring(e,u.to_luastring('invalid option \'%s\''),s))},e.exports.luaL_checkstack=Y,e.exports.luaL_checkstring=E,e.exports.luaL_checktype=function(e,a,l){u.lua_type(e,a)!==l&&U(e,a,l)},e.exports.luaL_checkudata=function(e,t,a){let l=O(e,t,a);return null===l&&f(e,t,a),l},e.exports.luaL_checkversion=function(e){let t=u.LUA_VERSION_NUM,a=u.lua_version(e);n!=n,a==u.lua_version(null)?a!==t&&T(e,u.to_luastring('version mismatch: app. needs %f, Lua core provides %f'),t,a):T(e,u.to_luastring('multiple Lua VMs detected'))},e.exports.luaL_dostring=function(e,t){return G(e,t)||u.lua_pcall(e,0,u.LUA_MULTRET,0)},e.exports.luaL_error=T,e.exports.luaL_execresult=function(t,a){let e,l;if(null===a)return u.lua_pushboolean(t,1),u.lua_pushliteral(t,'exit'),u.lua_pushinteger(t,0),3;if(a.status)e='exit',l=a.status;else if(a.signal)e='signal',l=a.signal;else return h(t,0,null,a);return u.lua_pushnil(t),u.lua_pushliteral(t,e),u.lua_pushinteger(t,l),3},e.exports.luaL_fileresult=h,e.exports.luaL_getmetafield=V,e.exports.luaL_getmetatable=x,e.exports.luaL_getsubtable=j,e.exports.luaL_gsub=function(e,t,a,l){let s=[],n;for(;0<=(n=X(t,a));)s.push(...t.slice(0,n)),s.push(...l),t=t.slice(n+a.length);return s.push(...t),u.lua_pushstring(e,s),u.lua_tostring(e,-1)},e.exports.luaL_len=function(e,t){u.lua_len(e,t);let a=u.lua_tointegerx(e,-1);return!1===a&&T(e,u.to_luastring('object length is not an integer',!0)),u.lua_pop(e,1),a},e.exports.luaL_loadbuffer=w,e.exports.luaL_loadbufferx=B,e.exports.luaL_loadstring=G,e.exports.luaL_newlib=function(e,t){u.lua_createtable(e),H(e,t,0)},e.exports.luaL_newlibtable=function(e){u.lua_createtable(e)},e.exports.luaL_newmetatable=function(e,t){return x(e,t)===u.LUA_TNIL?(u.lua_pop(e,1),u.lua_createtable(e,0,2),u.lua_pushstring(e,t),u.lua_setfield(e,-2,u.to_luastring('__name')),u.lua_pushvalue(e,-1),u.lua_setfield(e,u.LUA_REGISTRYINDEX,t),1):0},e.exports.luaL_newstate=function(){let e=u.lua_newstate();return e&&u.lua_atpanic(e,d),e},e.exports.luaL_opt=D,e.exports.luaL_optinteger=function(e,t,a){return D(e,S,t,a)},e.exports.luaL_optlstring=L,e.exports.luaL_optnumber=function(e,t,a){return D(e,R,t,a)},e.exports.luaL_optstring=b,e.exports.luaL_prepbuffer=function(e){return I(e,8192)},e.exports.luaL_prepbuffsize=I,e.exports.luaL_pushresult=y,e.exports.luaL_pushresultsize=function(e,t){C(e,t),y(e)},e.exports.luaL_ref=function(e,a){let t;return u.lua_isnil(e,-1)?(u.lua_pop(e,1),z):(a=u.lua_absindex(e,a),u.lua_rawgeti(e,a,0),t=u.lua_tointeger(e,-1),u.lua_pop(e,1),0===t?t=u.lua_rawlen(e,a)+1:(u.lua_rawgeti(e,a,t),u.lua_rawseti(e,a,0)),u.lua_rawseti(e,a,t),t)},e.exports.luaL_requiref=function(e,t,a,s){j(e,u.LUA_REGISTRYINDEX,u.to_luastring(l)),u.lua_getfield(e,-1,t),u.lua_toboolean(e,-1)||(u.lua_pop(e,1),u.lua_pushcfunction(e,a),u.lua_pushstring(e,t),u.lua_call(e,1,1),u.lua_pushvalue(e,-1),u.lua_setfield(e,-3,t)),u.lua_remove(e,-2),s&&(u.lua_pushvalue(e,-1),u.lua_setglobal(e,t))},e.exports.luaL_setfuncs=H,e.exports.luaL_setmetatable=function(e,t){x(e,t),u.lua_setmetatable(e,-2)},e.exports.luaL_testudata=O,e.exports.luaL_tolstring=function(e,a){if(F(e,a,u.to_luastring('__tostring',!0)))u.lua_isstring(e,-1)||T(e,u.to_luastring('\'__tostring\' must return a string',!0));else{let l=u.lua_type(e,a);switch(l){case u.LUA_TNUMBER:{u.lua_isinteger(e,a)?u.lua_pushfstring(e,u.to_luastring('%I'),u.lua_tointeger(e,a)):u.lua_pushfstring(e,u.to_luastring('%f'),u.lua_tonumber(e,a));break}case u.LUA_TSTRING:u.lua_pushvalue(e,a);break;case u.LUA_TBOOLEAN:u.lua_pushliteral(e,u.lua_toboolean(e,a)?'true':'false');break;case u.LUA_TNIL:u.lua_pushliteral(e,'nil');break;default:let t=V(e,a,u.to_luastring('__name',!0)),s=t===u.LUA_TSTRING?u.lua_tostring(e,-1):m(e,a);u.lua_pushfstring(e,u.to_luastring('%s: %p'),s,u.lua_topointer(e,a)),t!==u.LUA_TNIL&&u.lua_remove(e,-2);}}return u.lua_tolstring(e,-1)},e.exports.luaL_traceback=function(e,t,a,l){let s=new u.lua_Debug,n=u.lua_gettop(e),_=c(t),i=_-l>r+o?r:-1;for(a&&u.lua_pushfstring(e,u.to_luastring('%s\n'),a),Y(e,10,null),u.lua_pushliteral(e,'stack traceback:');u.lua_getstack(t,l++,s);)0==i--?(u.lua_pushliteral(e,'\n\t...'),l=_-o+1):(u.lua_getinfo(t,u.to_luastring('Slnt',!0),s),u.lua_pushfstring(e,u.to_luastring('\n\t%s:'),s.short_src),0<s.currentline&&u.lua_pushliteral(e,`${s.currentline}:`),u.lua_pushliteral(e,' in '),p(e,s),s.istailcall&&u.lua_pushliteral(e,'\n\t(...tail calls..)'),u.lua_concat(e,u.lua_gettop(e)-n));u.lua_concat(e,u.lua_gettop(e)-n)},e.exports.luaL_typename=m,e.exports.luaL_unref=function(e,a,t){0<=t&&(a=u.lua_absindex(e,a),u.lua_rawgeti(e,a,0),u.lua_rawseti(e,a,t),u.lua_pushinteger(e,t),u.lua_rawseti(e,a,0))},e.exports.luaL_where=A,e.exports.lua_writestringerror=function(e){t.stderr?t.stderr.write(e):console.error(e)}}).call(t,a(19))},function(e,t,a){'use strict';const l=a(0),u=a(1),s=a(22),r=a(11),n=a(12),o=a(5),_=a(3),i=a(16),d=a(27),c=a(13),p=a(9),g=a(14),f=a(10),A=a(42),T=a(15),L=a(21),h=u.constant_types,O=u.thread_status,x=function(e,t){if(e.top<t)for(;e.top<t;)e.stack[e.top++]=new _.TValue(h.LUA_TNIL,null);else for(;e.top>t;)delete e.stack[--e.top]},U=function(e,t,a){let l=e.top;for(;e.top<a+1;)e.stack[e.top++]=new _.TValue(h.LUA_TNIL,null);switch(t){case O.LUA_ERRMEM:{_.setsvalue2s(e,a,p.luaS_newliteral(e,'not enough memory'));break}case O.LUA_ERRERR:{_.setsvalue2s(e,a,p.luaS_newliteral(e,'error in error handling'));break}default:_.setobjs2s(e,a,l-1);}for(;e.top>a+1;)delete e.stack[--e.top]},m=f.LUAI_MAXSTACK+200,E=function(e,t){l(t<=f.LUAI_MAXSTACK||t==m),l(e.stack_last==e.stack.length-c.EXTRA_STACK),e.stack.length=t,e.stack_last=t-c.EXTRA_STACK},v=function(e,t){let a=e.stack.length;if(a>f.LUAI_MAXSTACK)B(e,O.LUA_ERRERR);else{let l=e.top+t+c.EXTRA_STACK,s=2*a;s>f.LUAI_MAXSTACK&&(s=f.LUAI_MAXSTACK),s<l&&(s=l),s>f.LUAI_MAXSTACK?(E(e,m),r.luaG_runerror(e,u.to_luastring('stack overflow',!0))):E(e,s)}},b=function(e,t){e.stack_last-e.top<=t&&v(e,t)},k=function(e){let t=e.top;for(let a=e.ci;null!==a;a=a.previous)t<a.top&&(t=a.top);return l(t<=e.stack_last),t+1},R=function(e){let t=k(e),a=t+Math.floor(t/8)+2*c.EXTRA_STACK;a>f.LUAI_MAXSTACK&&(a=f.LUAI_MAXSTACK),e.stack.length>f.LUAI_MAXSTACK&&c.luaE_freeCI(e),t<=f.LUAI_MAXSTACK-c.EXTRA_STACK&&a<e.stack.length&&E(e,a)},S=function(e,t,a){let s=e.stack[t];switch(s.type){case h.LUA_TCCL:case h.LUA_TLCF:{let r=s.type===h.LUA_TCCL?s.value.f:s.value;b(e,u.LUA_MINSTACK);let o=c.luaE_extendCI(e);o.funcOff=t,o.nresults=a,o.func=s,o.top=e.top+u.LUA_MINSTACK,l(o.top<=e.stack_last),o.callstatus=0,e.hookmask&u.LUA_MASKCALL&&P(e,u.LUA_HOOKCALL,-1);let _=r(e);return l('number'==typeof _&&0<=_&&(0|_)===_,'invalid return value from JS function (expected integer)'),l(_<e.top-e.ci.funcOff,'not enough elements in the stack'),I(e,o,e.top-_,_),!0}case h.LUA_TLCL:{let l=s.value.p,r=e.top-t-1,n=l.maxstacksize,o;if(b(e,n),l.is_vararg)o=y(e,l,r);else{for(;r<l.numparams;r++)e.stack[e.top++]=new _.TValue(h.LUA_TNIL,null);o=t+1}let i=c.luaE_extendCI(e);return i.funcOff=t,i.nresults=a,i.func=s,i.l_base=o,i.top=o+n,x(e,i.top),i.l_code=l.code,i.l_savedpc=0,i.callstatus=c.CIST_LUA,e.hookmask&u.LUA_MASKCALL&&M(e,i),!1}default:return b(e,1),C(e,t,s),S(e,t,a);}},I=function(e,t,a,l){let s=t.nresults;e.hookmask&(u.LUA_MASKRET|u.LUA_MASKLINE)&&(e.hookmask&u.LUA_MASKRET&&P(e,u.LUA_HOOKRET,-1),e.oldpc=t.previous.l_savedpc);let n=t.funcOff;return e.ci=t.previous,e.ci.next=null,N(e,a,n,l,s)},N=function(e,t,a,l,s){switch(s){case 0:break;case 1:{0===l?e.stack[a].setnilvalue():_.setobjs2s(e,a,t);break}case u.LUA_MULTRET:{for(let u=0;u<l;u++)_.setobjs2s(e,a+u,t+u);for(let t=e.top;t>=a+l;t--)delete e.stack[t];return e.top=a+l,!1}default:{let u;if(s<=l)for(u=0;u<s;u++)_.setobjs2s(e,a+u,t+u);else{for(u=0;u<l;u++)_.setobjs2s(e,a+u,t+u);for(;u<s;u++)a+u>=e.top?e.stack[a+u]=new _.TValue(h.LUAT_NIL,null):e.stack[a+u].setnilvalue()}break}}let n=a+s;for(let u=e.top;u>=n;u--)delete e.stack[u];return e.top=n,!0},P=function(e,t,a){let s=e.hook;if(s&&e.allowhook){let n=e.ci,r=e.top,o=n.top,_=new u.lua_Debug;_.event=t,_.currentline=a,_.i_ci=n,b(e,u.LUA_MINSTACK),n.top=e.top+u.LUA_MINSTACK,l(n.top<=e.stack_last),e.allowhook=0,n.callstatus|=c.CIST_HOOKED,s(e,_),l(!e.allowhook),e.allowhook=1,n.top=o,x(e,r),n.callstatus&=~c.CIST_HOOKED}},M=function(e,t){let a=u.LUA_HOOKCALL;t.l_savedpc++,t.previous.callstatus&c.CIST_LUA&&t.previous.l_code[t.previous.l_savedpc-1].opcode==i.OpCodesI.OP_TAILCALL&&(t.callstatus|=c.CIST_TAIL,a=u.LUA_HOOKTAILCALL),P(e,a,-1),t.l_savedpc--},y=function(e,t,a){let l=t.numparams,u=e.top-a,s=e.top,n;for(n=0;n<l&&n<a;n++)_.pushobj2s(e,e.stack[u+n]),e.stack[u+n].setnilvalue();for(;n<l;n++)e.stack[e.top++]=new _.TValue(h.LUA_TNIL,null);return s},C=function(e,t,a){let l=g.luaT_gettmbyobj(e,a,g.TMS.TM_CALL);l.ttisfunction(l)||r.luaG_typeerror(e,a,u.to_luastring('call',!0)),_.pushobj2s(e,e.stack[e.top-1]);for(let l=e.top-2;l>t;l--)_.setobjs2s(e,l,l-1);_.setobj2s(e,t,l)},D=function(e){e.nCcalls===o.LUAI_MAXCCALLS?r.luaG_runerror(e,u.to_luastring('JS stack overflow',!0)):e.nCcalls>=o.LUAI_MAXCCALLS+(o.LUAI_MAXCCALLS>>3)&&B(e,O.LUA_ERRERR)},K=function(e,t,a){++e.nCcalls>=o.LUAI_MAXCCALLS&&D(e),S(e,t,a)||T.luaV_execute(e),e.nCcalls--},B=function(e,t){if(e.errorJmp)throw e.errorJmp.status=t,e.errorJmp;else{let a=e.l_G;if(e.status=t,a.mainthread.errorJmp)a.mainthread.stack[a.mainthread.top++]=e.stack[e.top-1],B(a.mainthread,t);else{let l=a.panic;throw l&&(U(e,t,e.top),e.ci.top<e.top&&(e.ci.top=e.top),l(e)),new Error(`Aborted ${t}`)}}},w=function(t,e,a){let l=t.nCcalls,u={status:O.LUA_OK,previous:t.errorJmp};t.errorJmp=u;try{e(t,a)}catch(a){if(u.status===O.LUA_OK){let e=t.l_G.atnativeerror;if(e)try{if(u.status=O.LUA_OK,s.lua_pushcfunction(t,e),s.lua_pushlightuserdata(t,a),z(t,t.top-2,1),0!==t.errfunc){let e=t.errfunc;_.pushobj2s(t,t.stack[t.top-1]),_.setobjs2s(t,t.top-2,e),z(t,t.top-2,1)}u.status=O.LUA_ERRRUN}catch(e){u.status===O.LUA_OK&&(u.status=-1)}else u.status=-1}}return t.errorJmp=u.previous,t.nCcalls=l,u.status},G=function(e,t){let a=e.ci;l(null!==a.c_k&&0===e.nny),l(a.callstatus&c.CIST_YPCALL||t===O.LUA_YIELD),a.callstatus&O.CIST_YPCALL&&(a.callstatus&=~O.CIST_YPCALL,e.errfunc=a.c_old_errfunc),a.nresults===u.LUA_MULTRET&&e.ci.top<e.top&&(e.ci.top=e.top);let s=a.c_k,r=s(e,t,a.c_ctx);l(r<e.top-e.ci.funcOff,'not enough elements in the stack'),I(e,a,e.top-r,r)},V=function(e,t){for(null!==t&&G(e,t);e.ci!==e.base_ci;)e.ci.callstatus&c.CIST_LUA?(T.luaV_finishOp(e),T.luaV_execute(e)):G(e,O.LUA_YIELD)},F=function(e){for(let t=e.ci;null!==t;t=t.previous)if(t.callstatus&c.CIST_YPCALL)return t;return null},X=function(e,t){let a=F(e);if(null===a)return 0;let l=a.extra;return n.luaF_close(e,l),U(e,t,l),e.ci=a,e.allowhook=a.callstatus&c.CIST_OAH,e.nny=0,R(e),e.errfunc=a.c_old_errfunc,1},j=function(e,t,a){let u=p.luaS_newliteral(e,t);if(0===a)_.pushsvalue2s(e,u),l(e.top<=e.ci.top,'stack overflow');else{for(let t=1;t<a;t++)delete e.stack[--e.top];_.setsvalue2s(e,e.top-1,u)}return O.LUA_ERRRUN},H=function(e,t){let a=e.top-t,s=e.ci;e.status===O.LUA_OK?!S(e,a-1,u.LUA_MULTRET)&&T.luaV_execute(e):(l(e.status===O.LUA_YIELD),e.status=O.LUA_OK,s.funcOff=s.extra,s.func=e.stack[s.funcOff],s.callstatus&c.CIST_LUA?T.luaV_execute(e):(null!==s.c_k&&(t=s.c_k(e,O.LUA_YIELD,s.c_ctx),l(t<e.top-e.ci.funcOff,'not enough elements in the stack'),a=e.top-t),I(e,s,a,t)),V(e,null))},Y=function(e,t,a,s){let n=e.ci;return l(t<e.top-e.ci.funcOff,'not enough elements in the stack'),0<e.nny&&(e===e.l_G.mainthread?r.luaG_runerror(e,u.to_luastring('attempt to yield from outside a coroutine',!0)):r.luaG_runerror(e,u.to_luastring('attempt to yield across a JS-call boundary',!0))),e.status=O.LUA_YIELD,n.extra=n.funcOff,n.callstatus&c.CIST_LUA?l(null===s,'hooks cannot continue after yielding'):(n.c_k=s,null!==s&&(n.c_ctx=a),n.funcOff=e.top-t-1,n.func=e.stack[n.funcOff],B(e,O.LUA_YIELD)),l(n.callstatus&c.CIST_HOOKED),0},Z=function(e,t,a,l,u){let s=e.ci,r=e.allowhook,o=e.nny,_=e.errfunc;e.errfunc=u;let i=w(e,t,a);return i!==O.LUA_OK&&(n.luaF_close(e,l),U(e,i,l),e.ci=s,e.allowhook=r,e.nny=o,R(e)),e.errfunc=_,i},z=function(e,t,a){e.nny++,K(e,t,a),e.nny--};class J{constructor(e,t,a){this.z=e,this.buff=new L.MBuffer,this.dyd=new d.Dyndata,this.mode=a,this.name=t}}const q=function(e,t,a){t&&-1===t.indexOf(a[0])&&(s.lua_pushstring(e,u.to_luastring(`attempt to load a ${u.to_jsstring(a)} chunk (mode is '${u.to_jsstring(t)}')`)),B(e,O.LUA_ERRSYNTAX))},W=function(e,t){let a=t.z.zgetc(),s;a===u.LUA_SIGNATURE.charCodeAt(0)?(q(e,t.mode,u.to_luastring('binary',!0)),s=A.luaU_undump(e,t.z,t.name)):(q(e,t.mode,u.to_luastring('text',!0)),s=d.luaY_parser(e,t.z,t.buff,t.dyd,t.name,a)),l(s.nupvalues===s.p.upvalues.length),n.luaF_initupvals(e,s)};e.exports.adjust_top=x,e.exports.luaD_call=K,e.exports.luaD_callnoyield=z,e.exports.luaD_checkstack=b,e.exports.luaD_growstack=v,e.exports.luaD_hook=P,e.exports.luaD_inctop=function(e){b(e,1),e.stack[e.top++]=new _.TValue(h.LUA_TNIL,null)},e.exports.luaD_pcall=Z,e.exports.luaD_poscall=I,e.exports.luaD_precall=S,e.exports.luaD_protectedparser=function(e,t,a,l){let u=new J(t,a,l);e.nny++;let s=Z(e,W,u,e.top,e.errfunc);return e.nny--,s},e.exports.luaD_rawrunprotected=w,e.exports.luaD_reallocstack=E,e.exports.luaD_throw=B,e.exports.lua_isyieldable=function(e){return 0===e.nny},e.exports.lua_resume=function(e,t,a){let u=e.nny;if(e.status===O.LUA_OK){if(e.ci!==e.base_ci)return j(e,'cannot resume non-suspended coroutine',a);}else if(e.status!==O.LUA_YIELD)return j(e,'cannot resume dead coroutine',a);if(e.nCcalls=t?t.nCcalls+1:1,e.nCcalls>=o.LUAI_MAXCCALLS)return j(e,'JS stack overflow',a);e.nny=0,l((e.status===O.LUA_OK?a+1:a)<e.top-e.ci.funcOff,'not enough elements in the stack');let s=w(e,H,a);if(-1===s)s=O.LUA_ERRRUN;else{for(;s>O.LUA_YIELD&&X(e,s);)s=w(e,V,s);s>O.LUA_YIELD?(e.status=s,U(e,s,e.top),e.ci.top=e.top):l(s===e.status)}return e.nny=u,e.nCcalls--,l(e.nCcalls===(t?t.nCcalls:0)),s},e.exports.lua_yield=function(e,t){Y(e,t,0,null)},e.exports.lua_yieldk=Y},function(e,t,a){'use strict';const l=a(0),u=a(1),s=a(11),n=a(3),r=a(9),o=a(13),_=u.constant_types;let i=new WeakMap;const p=function(e){let t=i.get(e);return t||(t={},i.set(e,t)),t},c=function(e,t){switch(t.type){case _.LUA_TNIL:return s.luaG_runerror(e,u.to_luastring('table index is nil',!0));case _.LUA_TNUMFLT:if(isNaN(t.value))return s.luaG_runerror(e,u.to_luastring('table index is NaN',!0));case _.LUA_TNUMINT:case _.LUA_TBOOLEAN:case _.LUA_TTABLE:case _.LUA_TLCL:case _.LUA_TLCF:case _.LUA_TCCL:case _.LUA_TUSERDATA:case _.LUA_TTHREAD:return t.value;case _.LUA_TSHRSTR:case _.LUA_TLNGSTR:return r.luaS_hashlongstr(t.tsvalue());case _.LUA_TLIGHTUSERDATA:let a=t.value;switch(typeof a){case'string':return'*'+a;case'number':return'#'+a;case'boolean':return a?'?true':'?false';case'function':return p(a);case'object':if(a instanceof o.lua_State&&a.l_G===e.l_G||a instanceof d||a instanceof n.Udata||a instanceof n.LClosure||a instanceof n.CClosure)return p(a);default:return a;}default:throw new Error('unknown key type: '+t.type);}};class d{constructor(e){this.id=e.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}}const g=function(e,t,a,l){e.dead_strong.clear(),e.dead_weak=void 0;let u=null,s={key:a,value:l,p:u=e.l,n:void 0};e.f||(e.f=s),u&&(u.n=s),e.strong.set(t,s),e.l=s},L=function(e){return'object'==typeof e?null!==e:'function'==typeof e},f=function(a,t){let l=a.strong.get(t);if(l){l.key.setdeadvalue(),l.value=void 0;let e=l.n,u=l.p;l.p=void 0,u&&(u.n=e),e&&(e.p=u),a.f===l&&(a.f=e),a.l===l&&(a.l=u),a.strong.delete(t),L(t)?(!a.dead_weak&&(a.dead_weak=new WeakMap),a.dead_weak.set(t,l)):a.dead_strong.set(t,l)}},A=function(e,t){let a=e.strong.get(t);return a?a.value:n.luaO_nilobject},T=function(e,t){return l('number'==typeof t&&(0|t)===t),A(e,t)},h=function(e,t,a){let l=e.strong.get(t);if(l)return l.value;let u=a.value;a=a.ttisfloat()&&(0|u)===u?new n.TValue(_.LUA_TNUMINT,u):new n.TValue(a.type,u);let s=new n.TValue(_.LUA_TNIL,null);return g(e,t,a,s),s};e.exports.invalidateTMcache=function(e){e.flags=0},e.exports.luaH_delete=function(e,a,t){l(t instanceof n.TValue);let u=c(e,t);return f(a,u)},e.exports.luaH_get=function(e,a,t){return l(t instanceof n.TValue),t.ttisnil()||t.ttisfloat()&&isNaN(t.value)?n.luaO_nilobject:A(a,c(e,t))},e.exports.luaH_getint=T,e.exports.luaH_getn=function(e){let t=0,a=e.strong.size+1;for(;1<a-t;){let l=Math.floor((t+a)/2);T(e,l).ttisnil()?a=l:t=l}return t},e.exports.luaH_getstr=function(e,t){return l(t instanceof r.TString),A(e,r.luaS_hashlongstr(t))},e.exports.luaH_set=function(e,a,t){l(t instanceof n.TValue);let u=c(e,t);return h(a,u,t)},e.exports.luaH_setint=function(e,t,a){l('number'==typeof t&&(0|t)===t&&a instanceof n.TValue);let u=t;if(a.ttisnil())return void f(e,u);let s=e.strong.get(u);if(s){let e=s.value;e.setfrom(a)}else{let l=new n.TValue(_.LUA_TNUMINT,t),s=new n.TValue(a.type,a.value);g(e,u,l,s)}},e.exports.luaH_new=function(e){return new d(e)},e.exports.luaH_next=function(e,t,a){let l=e.stack[a],r;if(l.type!==_.LUA_TNIL){let a=c(e,l);if(r=t.strong.get(a),!r){if(r=t.dead_weak&&t.dead_weak.get(a)||t.dead_strong.get(a),!r)return s.luaG_runerror(e,u.to_luastring('invalid key to \'next\''));do if(r=r.n,!r)return!1;while(r.key.ttisdeadkey())}else if(r=r.n,!r)return!1}else if(r=t.f,!r)return!1;return n.setobj2s(e,a,r.key),n.setobj2s(e,a+1,r.value),!0},e.exports.Table=d},function(e,t,a){'use strict';const l=a(0),u=a(1);class s{constructor(e,t){this.hash=null,this.realstring=t}getstr(){return this.realstring}tsslen(){return this.realstring.length}}const n=function(e){return l(u.is_luastring(e)),e.map((t)=>`${t}|`).join('')},r=function(e,t){return new s(e,t)};e.exports.luaS_eqlngstr=function(e,t){return l(e instanceof s),l(t instanceof s),e==t||e.realstring.length==t.realstring.length&&e.realstring.join()==t.realstring.join()},e.exports.luaS_hash=n,e.exports.luaS_hashlongstr=function(e){return l(e instanceof s),null===e.hash&&(e.hash=n(e.getstr())),e.hash},e.exports.luaS_bless=r,e.exports.luaS_new=function(e,t){return r(e,t.slice(0))},e.exports.luaS_newliteral=function(e,t){return r(e,u.to_luastring(t))},e.exports.TString=s},function(e,t,a){'use strict';const l=a(5),u=a(25).sprintf,s='',r=`%${s}d`,o='%.14g',n=function(e,t){for(var a=Math.min(3,Math.ceil(Math.abs(t)/1023)),l=e,u=0;u<a;u++)l*=Math.pow(2,Math.floor((t+u)/a));return l};e.exports.frexp=function(e){if(0===e)return[e,0];var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);var a=2047&t.getUint32(0)>>>20;0==a&&(t.setFloat64(0,18446744073709552000*e),a=(2047&t.getUint32(0)>>>20)-64);var l=a-1022,u=n(e,-l);return[u,l]},e.exports.ldexp=n,e.exports.LUAI_MAXSTACK=1e5,e.exports.LUA_IDSIZE=60,e.exports.LUA_INTEGER_FMT=r,e.exports.LUA_INTEGER_FRMLEN=s,e.exports.LUA_NUMBER_FMT=o,e.exports.LUA_NUMBER_FRMLEN='',e.exports.lua_getlocaledecpoint=function(){return 1.1.toLocaleString().substring(1,2)},e.exports.lua_integer2str=function(e){return u(r,e)},e.exports.lua_number2str=function(e){return u(o,e)},e.exports.lua_numbertointeger=function(e){return e>=l.MIN_INT&&e<-l.MIN_INT&&e}},function(e,t,a){'use strict';const l=a(0),u=a(1),s=a(7),o=a(12),r=a(3),n=a(16),_=a(13),p=a(8),c=a(14),i=a(10),d=a(15),g=u.constant_types,f=u.thread_status,A=function(e){return l(e.callstatus&_.CIST_LUA),e.l_savedpc-1},T=function(e){return 0===e.func.value.p.lineinfo.length?-1:e.func.value.p.lineinfo[A(e)]},h=function(e){if(e.status===f.LUA_YIELD){let t=e.ci,a=t.funcOff;t.func=e.stack[t.extra],t.funcOff=t.extra,t.extra=a}},L=function(e,t){l(t<e.upvalues.length);let a=e.upvalues[t].name;return null===a?[63]:a.getstr()},x=function(e,t){let a=e.func.value.p.numparams;return t>=e.l_base-e.funcOff-a?null:{pos:e.funcOff+a+t,name:u.to_luastring('(*vararg)',!0)}},O=function(e,t,a){let l=null,s;if(t.callstatus&_.CIST_LUA){if(0>a)return x(t,-a);s=t.l_base,l=o.luaF_getlocalname(t.func.value.p,a,A(t))}else s=t.funcOff+1;if(null===l){let n=t===e.ci?e.top:t.next.funcOff;if(n-s>=a&&0<a)l=u.to_luastring('(*temporary)',!0);else return null}return{pos:s+(a-1),name:l}},U=function(e,t){if(null===t||t instanceof r.CClosure)e.source=u.to_luastring('=[JS]',!0),e.linedefined=-1,e.lastlinedefined=-1,e.what=[74];else{let a=t.p;e.source=a.source?a.source.getstr():u.to_luastring('=?',!0),e.linedefined=a.linedefined,e.lastlinedefined=a.lastlinedefined,e.what=0===e.linedefined?u.to_luastring('main',!0):u.to_luastring('Lua',!0)}e.short_src=r.luaO_chunkid(e.source,i.LUA_IDSIZE)},m=function(e,a){if(null===a||a instanceof r.CClosure)e.stack[e.top]=new r.TValue(g.LUA_TNIL,null),e.top++,l(e.top<=e.ci.top,'stack overflow');else{let u=a.p.lineinfo,s=p.luaH_new(e);e.stack[e.top]=new r.TValue(g.LUA_TTABLE,s),e.top++,l(e.top<=e.ci.top,'stack overflow');let t=new r.TValue(g.LUA_TBOOLEAN,!0);for(let e=0;e<u.length;e++)p.luaH_setint(s,u[e],t)}},E=function(e,t){let a={name:null,funcname:null};return null===t?null:t.callstatus&_.CIST_FIN?(a.name=u.to_luastring('__gc',!0),a.funcname=u.to_luastring('metamethod',!0),a):!(t.callstatus&_.CIST_TAIL)&&t.previous.callstatus&_.CIST_LUA?I(e,t.previous):null},v=function(e,t,a,l,u){let s=1;for(;0<t.length;t=t.slice(1))switch(String.fromCharCode(t[0])){case'S':{U(a,l);break}case'l':{a.currentline=u&&u.callstatus&_.CIST_LUA?T(u):-1;break}case'u':{a.nups=null===l?0:l.nupvalues,null===l||l instanceof r.CClosure?(a.isvararg=!0,a.nparams=0):(a.isvararg=l.p.is_vararg,a.nparams=l.p.numparams);break}case't':{a.istailcall=u?u.callstatus&_.CIST_TAIL:0;break}case'n':{let t=E(e,u);null===t?(a.namewhat=[],a.name=null):(a.namewhat=t.funcname,a.name=t.name);break}case'L':case'f':break;default:s=0;}return s},b=function(e,t,a){let l={name:null,funcname:null};if(n.ISK(a)){let t=e.k[n.INDEXK(a)];if(t.ttisstring())return l.name=t.svalue(),l}else{let l=S(e,t,a);if(l&&99===l.funcname[0])return l}return l.name=[u.char['?']],l},k=function(e,t){return e<t?-1:e},R=function(e,t,l){let u=-1,s=0,r=n.OpCodesI;for(let o=0;o<t;o++){let _=e.code[o],i=_.A;switch(_.opcode){case r.OP_LOADNIL:{let e=_.B;i<=l&&l<=i+e&&(u=k(o,s));break}case r.OP_TFORCALL:{l>=i+2&&(u=k(o,s));break}case r.OP_CALL:case r.OP_TAILCALL:{l>=i&&(u=k(o,s));break}case r.OP_JMP:{let e=_.sBx,a=o+1+e;o<a&&a<=t&&a>s&&(s=a);break}default:n.testAMode(_.opcode)&&l===i&&(u=k(o,s));}}return u},S=function(e,t,a){let l={name:o.luaF_getlocalname(e,a+1,t),funcname:null};if(l.name)return l.funcname=u.to_luastring('local',!0),l;let s=R(e,t,a),r=n.OpCodesI;if(-1!==s){let a=e.code[s];switch(a.opcode){case r.OP_MOVE:{let t=a.B;if(t<a.A)return S(e,s,t);break}case r.OP_GETTABUP:case r.OP_GETTABLE:{let n=a.C,_=a.B,t=a.opcode===r.OP_GETTABLE?o.luaF_getlocalname(e,_+1,s):L(e,_);return l.name=b(e,s,n).name,l.funcname=t&&'_ENV'===u.to_jsstring(t)?u.to_luastring('global',!0):u.to_luastring('field',!0),l}case r.OP_GETUPVAL:return l.name=L(e,a.B),l.funcname=u.to_luastring('upvalue',!0),l;case r.OP_LOADK:case r.OP_LOADKX:{let t=a.opcode===r.OP_LOADK?a.Bx:e.code[s+1].Ax;if(e.k[t].ttisstring())return l.name=e.k[t].svalue(),l.funcname=u.to_luastring('constant',!0),l;break}case r.OP_SELF:{let t=a.C;return l.name=b(e,s,t).name,l.funcname=u.to_luastring('method',!0),l}default:}}return null},I=function(e,t){let a={name:null,funcname:null},l=0,s=t.func.value.p,r=A(t),o=s.code[r],i=n.OpCodesI;if(t.callstatus&_.CIST_HOOKED)return a.name=[u.char['?']],a.funcname=u.to_luastring('hook',!0),a;switch(o.opcode){case i.OP_CALL:case i.OP_TAILCALL:return S(s,r,o.A);case i.OP_TFORCALL:return a.name=u.to_luastring('for iterator',!0),a.funcname=u.to_luastring('for iterator',!0),a;case i.OP_SELF:case i.OP_GETTABUP:case i.OP_GETTABLE:l=c.TMS.TM_INDEX;break;case i.OP_SETTABUP:case i.OP_SETTABLE:l=c.TMS.TM_NEWINDEX;break;case i.OP_ADD:l=c.TMS.TM_ADD;break;case i.OP_SUB:l=c.TMS.TM_SUB;break;case i.OP_MUL:l=c.TMS.TM_MUL;break;case i.OP_MOD:l=c.TMS.TM_MOD;break;case i.OP_POW:l=c.TMS.TM_POW;break;case i.OP_DIV:l=c.TMS.TM_DIV;break;case i.OP_IDIV:l=c.TMS.TM_IDIV;break;case i.OP_BAND:l=c.TMS.TM_BAND;break;case i.OP_BOR:l=c.TMS.TM_BOR;break;case i.OP_BXOR:l=c.TMS.TM_BXOR;break;case i.OP_SHL:l=c.TMS.TM_SHL;break;case i.OP_SHR:l=c.TMS.TM_SHR;break;case i.OP_UNM:l=c.TMS.TM_UNM;break;case i.OP_BNOT:l=c.TMS.TM_BNOT;break;case i.OP_LEN:l=c.TMS.TM_LEN;break;case i.OP_CONCAT:l=c.TMS.TM_CONCAT;break;case i.OP_EQ:l=c.TMS.TM_EQ;break;case i.OP_LT:l=c.TMS.TM_LT;break;case i.OP_LE:l=c.TMS.TM_LE;break;default:return null;}return a.name=e.l_G.tmname[l].getstr(),a.funcname=u.to_luastring('metamethod',!0),a},N=function(e,t,a){for(let l=t.l_base;l<t.top;l++)if(e.stack[l]===a)return l;return!1},P=function(e,t,a){let l=t.func.value;for(let s=0;s<l.nupvalues;s++)if(l.upvals[s].v===a)return{name:L(l.p,s),funcname:u.to_luastring('upvalue',!0)};return null},M=function(e,t){let a=e.ci,l=null;if(a.callstatus&_.CIST_LUA){l=P(e,a,t);let u=N(e,a,t);!l&&u&&(l=S(a.func.value.p,A(a),u-a.l_base))}return l?r.luaO_pushfstring(e,u.to_luastring(' (%s \'%s\')',!0),l.funcname,l.name):u.to_luastring('',!0)},y=function(e,a,l){let s=c.luaT_objtypename(e,a);D(e,u.to_luastring('attempt to %s a %s value%s',!0),l,s,M(e,a))},C=function(e,t,a,l){let s;return s=a?r.luaO_chunkid(a.getstr(),i.LUA_IDSIZE):[63],r.luaO_pushfstring(e,u.to_luastring('%s:%d: %s',!0),s,l,t)},D=function(e,t,...a){let l=e.ci,u=r.luaO_pushvfstring(e,t,a);l.callstatus&_.CIST_LUA&&C(e,u,l.func.value.p.source,T(l)),K(e)},K=function(e){if(0!==e.errfunc){let t=e.errfunc;r.pushobj2s(e,e.stack[e.top-1]),r.setobjs2s(e,e.top-2,t),s.luaD_callnoyield(e,e.top-2,1)}s.luaD_throw(e,f.LUA_ERRRUN)};e.exports.luaG_addinfo=C,e.exports.luaG_concaterror=function(e,t,a){(t.ttisstring()||d.cvt2str(t))&&(t=a),y(e,t,u.to_luastring('concatenate',!0))},e.exports.luaG_errormsg=K,e.exports.luaG_opinterror=function(e,t,a,l){!1===d.tonumber(t)&&(a=t),y(e,a,l)},e.exports.luaG_ordererror=function(e,t,a){let l=c.luaT_objtypename(e,t),s=c.luaT_objtypename(e,a);l.join()===s.join()?D(e,u.to_luastring('attempt to compare two %s values',!0),l):D(e,u.to_luastring('attempt to compare %s with %s',!0),l,s)},e.exports.luaG_runerror=D,e.exports.luaG_tointerror=function(e,t,a){let l=d.tointeger(t);!1===l&&(a=t),D(e,u.to_luastring('number%s has no integer representation',!0),M(e,a))},e.exports.luaG_traceexec=function(e){let t=e.ci,a=e.hookmask,l=0==--e.hookcount&&a&u.LUA_MASKCOUNT;if(l)e.hookcount=e.basehookcount;else if(!(a&u.LUA_MASKLINE))return;if(t.callstatus&_.CIST_HOOKYIELD)return void(t.callstatus&=~_.CIST_HOOKYIELD);if(l&&s.luaD_hook(e,u.LUA_HOOKCOUNT,-1),a&u.LUA_MASKLINE){let a=t.func.value.p,l=t.l_savedpc-1,n=0===a.lineinfo.length?-1:a.lineinfo[l];(0==l||t.l_savedpc<=e.oldpc||n!==(0===a.lineinfo.length?-1:a.lineinfo[e.oldpc-1]))&&s.luaD_hook(e,u.LUA_HOOKLINE,n)}e.oldpc=t.l_savedpc,e.status===f.LUA_YIELD&&(l&&(e.hookcount=1),t.l_savedpc--,t.callstatus|=_.CIST_HOOKYIELD,t.funcOff=e.top-1,t.func=e.stack[t.funcOff],s.luaD_throw(e,f.LUA_YIELD))},e.exports.luaG_typeerror=y,e.exports.lua_gethook=function(e){return e.hook},e.exports.lua_gethookcount=function(e){return e.basehookcount},e.exports.lua_gethookmask=function(e){return e.hookmask},e.exports.lua_getinfo=function(e,t,a){let u,s,n,o;return h(e),62===t[0]?(n=null,o=e.stack[e.top-1],l(e,o.ttisfunction(),'function expected'),t=t.slice(1),e.top--):(n=a.i_ci,o=n.func,l(n.func.ttisfunction())),s=o.ttisclosure()?o.value:null,u=v(e,t,a,s,n),0<=t.indexOf(102)&&(r.pushobj2s(e,o),l(e.top<=e.ci.top,'stack overflow')),h(e),0<=t.indexOf(76)&&m(e,s),u},e.exports.lua_getlocal=function(e,t,a){let u;if(h(e),null===t)u=e.stack[e.top-1].ttisLclosure()?o.luaF_getlocalname(e.stack[e.top-1].value.p,a,0):null;else{let s=O(e,t.i_ci,a);s?(u=s.name,r.pushobj2s(e,e.stack[s.pos]),l(e.top<=e.ci.top,'stack overflow')):u=null}return h(e),u},e.exports.lua_getstack=function(e,t,a){let l,u;if(0>t)return 0;for(l=e.ci;0<t&&l!==e.base_ci;l=l.previous)t--;return 0===t&&l!==e.base_ci?(u=1,a.i_ci=l):u=0,u},e.exports.lua_sethook=function(e,t,a,l){(null===t||0===a)&&(a=0,t=null),e.ci.callstatus&_.CIST_LUA&&(e.oldpc=e.ci.l_savedpc),e.hook=t,e.basehookcount=l,e.hookcount=e.basehookcount,e.hookmask=a},e.exports.lua_setlocal=function(e,t,a){let l;h(e);let u=O(e,t.i_ci,a);return u?(l=u.name,r.setobjs2s(e,u.pos,e.top-1),delete e.stack[--e.top]):l=null,h(e),l}},function(e,t,a){'use strict';const l=a(0),u=a(1),s=a(3),n=u.constant_types;class r{constructor(e){this.id=e.l_G.id_counter++,this.v=void 0,this.vOff=void 0,this.refcount=0,this.open_next=null}isopen(){return void 0!==this.vOff}}e.exports.MAXUPVAL=255,e.exports.Proto=class{constructor(e){this.id=e.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},e.exports.UpVal=r,e.exports.luaF_findupval=function(e,t){let a=e.openupval,u;for(;null!==a&&a.vOff>=t;){if(l(a.isopen()),a.vOff===t)return a;u=a,a=a.open_next}let s=new r(e);return s.open_next=a,u?u.open_next=s:e.openupval=s,s.v=e.stack[t],s.vOff=t,s},e.exports.luaF_close=function(e,t){for(;null!==e.openupval&&e.openupval.vOff>=t;){let t=e.openupval;if(l(t.isopen()),e.openupval=t.open_next,0===t.refcount)t.v=void 0,t.open_next=null;else{let e=t.v;t.v=new s.TValue(e.type,e.value)}t.vOff=void 0}},e.exports.luaF_getlocalname=function(e,t,a){for(let l=0;l<e.locvars.length&&e.locvars[l].startpc<=a;l++)if(a<e.locvars[l].endpc&&(t--,0===t))return e.locvars[l].varname.getstr();return null},e.exports.luaF_initupvals=function(e,t){for(let a=0,l;a<t.nupvalues;a++)l=new r(e),l.refcount=1,l.v=new s.TValue(n.LUA_TNIL,null),t.upvals[a]=l},e.exports.luaF_newLclosure=function(e,t){let a=new s.LClosure(e,t);return a}},function(e,t,a){'use strict';const l=a(0),u=a(1),s=a(3),n=a(7),r=a(22),o=a(8),_=a(12),i=a(14),p=u.constant_types,c=u.thread_status,d=p.LUA_NUMTAGS,g=5,L=2*u.LUA_MINSTACK;class f{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}}class A{constructor(e){this.id=e.id_counter++,this.base_ci=new f,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=e,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.openupval=null,this.nny=1,this.status=c.LUA_OK,this.errfunc=0}}class T{constructor(){this.id_counter=0,this.mainthread=null,this.l_registry=new s.TValue(p.LUA_TNIL,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=Array(i.TMS.TM_N),this.mt=Array(d)}}const h=function(e){let t=e.ci;t.next=null},x=function(e){e.stack=Array(L),e.top=0,e.stack_last=L-g;let t=e.base_ci;t.next=t.previous=null,t.callstatus=0,t.funcOff=e.top,t.func=e.stack[e.top],e.stack[e.top++]=new s.TValue(p.LUA_TNIL,null),t.top=e.top+u.LUA_MINSTACK,e.ci=t},O=function(e){e.ci=e.base_ci,h(e),e.stack=null},U=function(e,t){let a=o.luaH_new(e);t.l_registry.sethvalue(a),o.luaH_setint(a,u.LUA_RIDX_MAINTHREAD,new s.TValue(p.LUA_TTHREAD,e)),o.luaH_setint(a,u.LUA_RIDX_GLOBALS,new s.TValue(p.LUA_TTABLE,o.luaH_new(e)))},m=function(e){let t=e.l_G;x(e,e),U(e,t),i.luaT_init(e),t.version=r.lua_version(null)},E=function(e){_.luaF_close(e,e.stack),O(e)};e.exports.lua_State=A,e.exports.CallInfo=f,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=g,e.exports.lua_close=function(e){e=e.l_G.mainthread,E(e)},e.exports.lua_newstate=function(){let e=new T,t=new A(e);return e.mainthread=t,n.luaD_rawrunprotected(t,m,null)!==c.LUA_OK&&(t=null),t},e.exports.lua_newthread=function(e){let t=e.l_G,a=new A(t);return e.stack[e.top]=new s.TValue(p.LUA_TTHREAD,a),e.top++,l(e.top<=e.ci.top,'stack overflow'),a.hookmask=e.hookmask,a.basehookcount=e.basehookcount,a.hook=e.hook,a.hookcount=a.basehookcount,x(a,e),a},e.exports.luaE_extendCI=function(e){let t=new f;return e.ci.next=t,t.previous=e.ci,t.next=null,e.ci=t,t},e.exports.luaE_freeCI=h,e.exports.luaE_freethread=function(e,t){_.luaF_close(t,t.stack),O(t)}},function(e,t,a){'use strict';const l=a(0),u=a(1),s=a(3),n=a(7),r=a(13),o=a(9),_=a(8),i=a(11),p=a(15),c=u.constant_types,d=['no value','nil','boolean','userdata','number','string','table','function','userdata','thread','proto'].map((t)=>u.to_luastring(t)),g=function(e){return d[e+1]},f={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},A=u.to_luastring('__name',!0),T=function(e,t,a,l,u,o){let _=e.top;if(s.pushobj2s(e,t),s.pushobj2s(e,a),s.pushobj2s(e,l),o||s.pushobj2s(e,u),e.ci.callstatus&r.CIST_LUA?n.luaD_call(e,_,o):n.luaD_callnoyield(e,_,o),o){let t=e.stack[e.top-1];delete e.stack[--e.top],u.setfrom(t)}},h=function(e,t,a,l,u){let s=x(e,t,u);return(s.ttisnil()&&(s=x(e,a,u)),!s.ttisnil())&&(T(e,s,t,a,l,1),!0)},L=function(e,t,a){const u=_.luaH_getstr(e,a);return l(t<=f.TM_EQ),u.ttisnil()?(e.flags|=1<<t,null):u},x=function(e,t,a){let l;switch(t.ttnov()){case c.LUA_TTABLE:case c.LUA_TUSERDATA:l=t.value.metatable;break;default:l=e.l_G.mt[t.ttnov()];}return l?_.luaH_getstr(l,e.l_G.tmname[a]):s.luaO_nilobject};e.exports.fasttm=function(t,a,l){return null===a?null:a.flags&1<<l?null:L(a,l,t.l_G.tmname[l])},e.exports.TMS=f,e.exports.luaT_callTM=T,e.exports.luaT_callbinTM=h,e.exports.luaT_trybinTM=function(e,t,a,l,s){if(!h(e,t,a,l,s))switch(s){case f.TM_CONCAT:i.luaG_concaterror(e,t,a);case f.TM_BAND:case f.TM_BOR:case f.TM_BXOR:case f.TM_SHL:case f.TM_SHR:case f.TM_BNOT:{let l=p.tonumber(t),s=p.tonumber(a);!1!==l&&!1!==s?i.luaG_tointerror(e,t,a):i.luaG_opinterror(e,t,a,u.to_luastring('perform bitwise operation on',!0))}default:i.luaG_opinterror(e,t,a,u.to_luastring('perform arithmetic on',!0));}},e.exports.luaT_callorderTM=function(e,t,a,l){let u=new s.TValue;return h(e,t,a,u,l)?!u.l_isfalse():null},e.exports.luaT_gettm=L,e.exports.luaT_gettmbyobj=x,e.exports.luaT_init=function(e){e.l_G.tmname[f.TM_INDEX]=new o.luaS_new(e,u.to_luastring('__index',!0)),e.l_G.tmname[f.TM_NEWINDEX]=new o.luaS_new(e,u.to_luastring('__newindex',!0)),e.l_G.tmname[f.TM_GC]=new o.luaS_new(e,u.to_luastring('__gc',!0)),e.l_G.tmname[f.TM_MODE]=new o.luaS_new(e,u.to_luastring('__mode',!0)),e.l_G.tmname[f.TM_LEN]=new o.luaS_new(e,u.to_luastring('__len',!0)),e.l_G.tmname[f.TM_EQ]=new o.luaS_new(e,u.to_luastring('__eq',!0)),e.l_G.tmname[f.TM_ADD]=new o.luaS_new(e,u.to_luastring('__add',!0)),e.l_G.tmname[f.TM_SUB]=new o.luaS_new(e,u.to_luastring('__sub',!0)),e.l_G.tmname[f.TM_MUL]=new o.luaS_new(e,u.to_luastring('__mul',!0)),e.l_G.tmname[f.TM_MOD]=new o.luaS_new(e,u.to_luastring('__mod',!0)),e.l_G.tmname[f.TM_POW]=new o.luaS_new(e,u.to_luastring('__pow',!0)),e.l_G.tmname[f.TM_DIV]=new o.luaS_new(e,u.to_luastring('__div',!0)),e.l_G.tmname[f.TM_IDIV]=new o.luaS_new(e,u.to_luastring('__idiv',!0)),e.l_G.tmname[f.TM_BAND]=new o.luaS_new(e,u.to_luastring('__band',!0)),e.l_G.tmname[f.TM_BOR]=new o.luaS_new(e,u.to_luastring('__bor',!0)),e.l_G.tmname[f.TM_BXOR]=new o.luaS_new(e,u.to_luastring('__bxor',!0)),e.l_G.tmname[f.TM_SHL]=new o.luaS_new(e,u.to_luastring('__shl',!0)),e.l_G.tmname[f.TM_SHR]=new o.luaS_new(e,u.to_luastring('__shr',!0)),e.l_G.tmname[f.TM_UNM]=new o.luaS_new(e,u.to_luastring('__unm',!0)),e.l_G.tmname[f.TM_BNOT]=new o.luaS_new(e,u.to_luastring('__bnot',!0)),e.l_G.tmname[f.TM_LT]=new o.luaS_new(e,u.to_luastring('__lt',!0)),e.l_G.tmname[f.TM_LE]=new o.luaS_new(e,u.to_luastring('__le',!0)),e.l_G.tmname[f.TM_CONCAT]=new o.luaS_new(e,u.to_luastring('__concat',!0)),e.l_G.tmname[f.TM_CALL]=new o.luaS_new(e,u.to_luastring('__call',!0))},e.exports.luaT_objtypename=function(e,t){let a;if(t.ttistable()&&null!==(a=t.value.metatable)||t.ttisfulluserdata()&&null!==(a=t.value.metatable)){let t=_.luaH_getstr(a,o.luaS_bless(e,A));if(t.ttisstring())return t.svalue()}return g(t.ttnov())},e.exports.ttypename=g},function(e,t,a){'use strict';var l=Math.floor;const u=a(0),s=a(1),r=a(16),o=a(10),_=a(3),n=a(12),p=a(13),i=a(9),c=a(5),d=a(7),g=a(14),f=a(8),A=a(11),T=s.constant_types,h=s.LUA_MULTRET,x=function(e,t,a){return t+a.A},O=function(e,t,a){return t+a.B},U=function(e,t,a,l){return r.ISK(l.B)?a[r.INDEXK(l.B)]:e.stack[t+l.B]},m=function(e,t,a,l){return r.ISK(l.C)?a[r.INDEXK(l.C)]:e.stack[t+l.C]},E=function(t,l,u,s){let e=u.A;0!==e&&n.luaF_close(t,l.l_base+e-1),l.l_savedpc+=u.sBx+s},v=function(e,t){E(e,t,t.l_code[t.l_savedpc],1)},b=function(e,t,a){if(t.ttisnumber()&&a.ttisnumber())return P(t,a)?1:0;if(t.ttisstring()&&a.ttisstring())return 0>y(t.tsvalue(),a.tsvalue())?1:0;let l=g.luaT_callorderTM(e,t,a,g.TMS.TM_LT);return null===l&&A.luaG_ordererror(e,t,a),l?1:0},R=function(e,t,a){let l;return t.ttisnumber()&&a.ttisnumber()?M(t,a)?1:0:t.ttisstring()&&a.ttisstring()?0>=y(t.tsvalue(),a.tsvalue())?1:0:(l=g.luaT_callorderTM(e,t,a,g.TMS.TM_LE),null!==l)?l?1:0:(e.ci.callstatus|=p.CIST_LEQ,l=g.luaT_callorderTM(e,a,t,g.TMS.TM_LT),e.ci.callstatus^=p.CIST_LEQ,null===l&&A.luaG_ordererror(e,t,a),l?0:1)},S=function(e,t,a){if(t.ttype()!==a.ttype())return t.ttnov()!==a.ttnov()||t.ttnov()!==T.LUA_TNUMBER?0:t.value===a.value?1:0;let l;switch(t.ttype()){case T.LUA_TNIL:return 1;case T.LUA_TBOOLEAN:return t.value==a.value?1:0;case T.LUA_TLIGHTUSERDATA:case T.LUA_TNUMINT:case T.LUA_TNUMFLT:case T.LUA_TLCF:return t.value===a.value?1:0;case T.LUA_TSHRSTR:case T.LUA_TLNGSTR:return i.luaS_eqlngstr(t.tsvalue(),a.tsvalue())?1:0;case T.LUA_TUSERDATA:case T.LUA_TTABLE:if(t.value===a.value)return 1;if(null===e)return 0;l=g.fasttm(e,t.value.metatable,g.TMS.TM_EQ),null===l&&(l=g.fasttm(e,a.value.metatable,g.TMS.TM_EQ));break;default:return t.value===a.value?1:0;}if(null===l)return 0;let u=new _.TValue;return g.luaT_callTM(e,l,t,a,u,1),u.l_isfalse()?0:1},k=function(e,t){let a=!1,l=L(e,0>t?2:1);if(!1===l){let u=N(e);if(!1===u)return!1;0<u?(l=c.LUA_MAXINTEGER,0>t&&(a=!0)):(l=c.LUA_MININTEGER,0<=t&&(a=!0))}return{stopnow:a,ilimit:l}},L=function(e,t){if(e.ttisfloat()){let a=e.value,u=l(a);if(a!==u){if(0===t)return!1;1<t&&(u+=1)}return o.lua_numbertointeger(u)}if(e.ttisinteger())return e.value;if(X(e)){let a=_.luaO_str2num(e.svalue());if(!1!==a)return L(a,t)}return!1},I=function(e){return e.ttisinteger()?e.value:L(e,0)},N=function(e){if(e.ttnov()===T.LUA_TNUMBER)return e.value;if(X(e)){let t=_.luaO_str2num(e.svalue());if(!1!==t)return t.value}return!1},P=function(e,t){return e.value<t.value},M=function(e,t){return e.value<=t.value},y=function(e,t){let a=i.luaS_hashlongstr(e),l=i.luaS_hashlongstr(t);return a===l?0:a<l?-1:1},C=function(e,t,a){let l;switch(a.ttype()){case T.LUA_TTABLE:{let u=a.value;if(l=g.fasttm(e,u.metatable,g.TMS.TM_LEN),null!==l)break;return void t.setivalue(f.luaH_getn(u))}case T.LUA_TSHRSTR:case T.LUA_TLNGSTR:return void t.setivalue(a.vslen());default:{l=g.luaT_gettmbyobj(e,a,g.TMS.TM_LEN),l.ttisnil()&&A.luaG_typeerror(e,a,s.to_luastring('get length of',!0));break}}g.luaT_callTM(e,l,a,a,t,1)},D=function(e,t,a){return 0===a&&A.luaG_runerror(e,s.to_luastring('attempt to divide by zero')),0|l(t/a)},K=function(e,t,a){return 0===a&&A.luaG_runerror(e,s.to_luastring('attempt to perform \'n%%0\'')),0|t-l(t/a)*a},B=32,w=function(e,t){return 0>t?t<=-B?0:e>>>-t:t>=B?0:e<<t},G=function(e,t,a,l){let u=e.cache;if(null!==u){let s=e.upvalues,n=s.length;for(let e=0,r;e<n;e++)if(r=s[e].instack?a[l+s[e].idx]:t[s[e].idx].v,u.upvals[e].v!==r)return null}return u},V=function(e,t,a,l,u){let s=t.upvalues.length,r=t.upvalues,o=new _.LClosure(e,s);o.p=t,e.stack[u].setclLvalue(o);for(let _=0;_<s;_++)o.upvals[_]=r[_].instack?n.luaF_findupval(e,l+r[_].idx):a[r[_].idx],o.upvals[_].refcount++;t.cache=o},F=function(e){return e.ttisnumber()},X=function(e){return e.ttisstring()},j=function(e,t){let a=e.stack[t];return!!a.ttisstring()||!!F(a)&&(_.luaO_tostring(e,a),!0)},H=function(e){return e.ttisstring()&&0===e.vslen()},Y=function(e,t){u(2<=t);do{let a=e.top,l=2;if(!(e.stack[a-2].ttisstring()||F(e.stack[a-2]))||!j(e,a-1))g.luaT_trybinTM(e,e.stack[a-2],e.stack[a-1],e.stack[a-2],g.TMS.TM_CONCAT);else if(H(e.stack[a-1]))j(e,a-2);else if(H(e.stack[a-2]))_.setobjs2s(e,a-2,a-1);else{let u=Array(t);for(u[t-1]=e.stack[a-1].svalue(),l=1;l<t;l++){if(!j(e,a-l-1)){u=u.slice(t-l);break}u[t-l-1]=e.stack[a-l-1].svalue()}let s=i.luaS_bless(e,Array.prototype.concat.apply([],u));_.setsvalue2s(e,a-l,s)}for(t-=l-1;e.top>a-(l-1);)delete e.stack[--e.top]}while(1<t)},z=2e3,Z=function(e,a,t,l){for(let u=0;u<z;u++){let u;if(!a.ttistable())u=g.luaT_gettmbyobj(e,a,g.TMS.TM_INDEX),u.ttisnil()&&A.luaG_typeerror(e,a,s.to_luastring('index',!0));else{let s=f.luaH_get(e,a.value,t);if(!s.ttisnil())return void _.setobj2s(e,l,s);if(u=g.fasttm(e,a.value.metatable,g.TMS.TM_INDEX),null===u)return void e.stack[l].setnilvalue()}if(u.ttisfunction())return void g.luaT_callTM(e,u,a,t,e.stack[l],1);a=u}A.luaG_runerror(e,s.to_luastring('\'__index\' chain too long; possible loop',!0))},J=function(e,a,t,l){for(let u=0;u<z;u++){let u;if(a.ttistable()){let s=a.value,n=f.luaH_set(e,s,t);if(!n.ttisnil()||null===(u=g.fasttm(e,s.metatable,g.TMS.TM_NEWINDEX)))return l.ttisnil()?f.luaH_delete(e,s,t):n.setfrom(l),void f.invalidateTMcache(s)}else(u=g.luaT_gettmbyobj(e,a,g.TMS.TM_NEWINDEX)).ttisnil()&&A.luaG_typeerror(e,a,s.to_luastring('index',!0));if(u.ttisfunction())return void g.luaT_callTM(e,u,a,t,l,0);a=u}A.luaG_runerror(e,s.to_luastring('\'__newindex\' chain too long; possible loop',!0))};e.exports.cvt2str=F,e.exports.cvt2num=X,e.exports.luaV_gettable=Z,e.exports.luaV_concat=Y,e.exports.luaV_div=D,e.exports.luaV_equalobj=S,e.exports.luaV_execute=function(e){const t=r.OpCodesI;let a=e.ci;a.callstatus|=p.CIST_FRESH;newframe:for(;;){u(a===e.ci);let o=a.func.value,L=o.p.k,T=a.l_base,P=a.l_code[a.l_savedpc++];e.hookmask&(s.LUA_MASKLINE|s.LUA_MASKCOUNT)&&A.luaG_traceexec(e);let i=x(e,T,P),M=P.opcode;switch(M){case t.OP_MOVE:{_.setobjs2s(e,i,O(e,T,P));break}case t.OP_LOADK:{let t=L[P.Bx];_.setobj2s(e,i,t);break}case t.OP_LOADKX:{u(a.l_code[a.l_savedpc].opcode===t.OP_EXTRAARG);let l=L[a.l_code[a.l_savedpc++].Ax];_.setobj2s(e,i,l);break}case t.OP_LOADBOOL:{e.stack[i].setbvalue(0!==P.B),0!==P.C&&a.l_savedpc++;break}case t.OP_LOADNIL:{for(let t=0;t<=P.B;t++)e.stack[i+t].setnilvalue();break}case t.OP_GETUPVAL:{let t=P.B;_.setobj2s(e,i,o.upvals[t].v);break}case t.OP_GETTABUP:{let t=o.upvals[P.B].v,a=m(e,T,L,P);Z(e,t,a,i);break}case t.OP_GETTABLE:{let t=e.stack[O(e,T,P)],a=m(e,T,L,P);Z(e,t,a,i);break}case t.OP_SETTABUP:{let t=o.upvals[P.A].v,a=U(e,T,L,P),l=m(e,T,L,P);J(e,t,a,l);break}case t.OP_SETUPVAL:{let t=o.upvals[P.B];t.v.setfrom(e.stack[i]);break}case t.OP_SETTABLE:{let t=e.stack[i],a=U(e,T,L,P),l=m(e,T,L,P);J(e,t,a,l);break}case t.OP_NEWTABLE:{e.stack[i].sethvalue(f.luaH_new(e));break}case t.OP_SELF:{let t=O(e,T,P),a=m(e,T,L,P);_.setobjs2s(e,i+1,t),Z(e,e.stack[t],a,i);break}case t.OP_ADD:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;t.ttisinteger()&&a.ttisinteger()?e.stack[i].setivalue(0|t.value+a.value):!1!==(l=N(t))&&!1!==(u=N(a))?e.stack[i].setfltvalue(l+u):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_ADD);break}case t.OP_SUB:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;t.ttisinteger()&&a.ttisinteger()?e.stack[i].setivalue(0|t.value-a.value):!1!==(l=N(t))&&!1!==(u=N(a))?e.stack[i].setfltvalue(l-u):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_SUB);break}case t.OP_MUL:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;t.ttisinteger()&&a.ttisinteger()?e.stack[i].setivalue(Math.imul(t.value,a.value)):!1!==(l=N(t))&&!1!==(u=N(a))?e.stack[i].setfltvalue(l*u):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_MUL);break}case t.OP_MOD:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;t.ttisinteger()&&a.ttisinteger()?e.stack[i].setivalue(K(e,t.value,a.value)):!1!==(l=N(t))&&!1!==(u=N(a))?e.stack[i].setfltvalue(c.luai_nummod(e,l,u)):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_MOD);break}case t.OP_POW:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;!1!==(l=N(t))&&!1!==(u=N(a))?e.stack[i].setfltvalue(Math.pow(l,u)):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_POW);break}case t.OP_DIV:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;!1!==(l=N(t))&&!1!==(u=N(a))?e.stack[i].setfltvalue(l/u):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_DIV);break}case t.OP_IDIV:{let t=U(e,T,L,P),a=m(e,T,L,P),u,s;t.ttisinteger()&&a.ttisinteger()?e.stack[i].setivalue(D(e,t.value,a.value)):!1!==(u=N(t))&&!1!==(s=N(a))?e.stack[i].setfltvalue(l(u/s)):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_IDIV);break}case t.OP_BAND:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;!1!==(l=I(t))&&!1!==(u=I(a))?e.stack[i].setivalue(l&u):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_BAND);break}case t.OP_BOR:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;!1!==(l=I(t))&&!1!==(u=I(a))?e.stack[i].setivalue(l|u):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_BOR);break}case t.OP_BXOR:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;!1!==(l=I(t))&&!1!==(u=I(a))?e.stack[i].setivalue(l^u):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_BXOR);break}case t.OP_SHL:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;!1!==(l=I(t))&&!1!==(u=I(a))?e.stack[i].setivalue(w(l,u)):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_SHL);break}case t.OP_SHR:{let t=U(e,T,L,P),a=m(e,T,L,P),l,u;!1!==(l=I(t))&&!1!==(u=I(a))?e.stack[i].setivalue(w(l,-u)):g.luaT_trybinTM(e,t,a,e.stack[i],g.TMS.TM_SHR);break}case t.OP_UNM:{let t=e.stack[O(e,T,P)],a;t.ttisinteger()?e.stack[i].setivalue(0|-t.value):!1===(a=N(t))?g.luaT_trybinTM(e,t,t,e.stack[i],g.TMS.TM_UNM):e.stack[i].setfltvalue(-a);break}case t.OP_BNOT:{let t=e.stack[O(e,T,P)];t.ttisinteger()?e.stack[i].setivalue(~t.value):g.luaT_trybinTM(e,t,t,e.stack[i],g.TMS.TM_BNOT);break}case t.OP_NOT:{let t=e.stack[O(e,T,P)];e.stack[i].setbvalue(t.l_isfalse());break}case t.OP_LEN:{C(e,e.stack[i],e.stack[O(e,T,P)]);break}case t.OP_CONCAT:{let t=P.B,l=P.C;e.top=T+l+1,Y(e,l-t+1);_.setobjs2s(e,i,T+t),d.adjust_top(e,a.top);break}case t.OP_JMP:{E(e,a,P,0);break}case t.OP_EQ:{S(e,U(e,T,L,P),m(e,T,L,P))===P.A?v(e,a):a.l_savedpc++;break}case t.OP_LT:{b(e,U(e,T,L,P),m(e,T,L,P))===P.A?v(e,a):a.l_savedpc++;break}case t.OP_LE:{R(e,U(e,T,L,P),m(e,T,L,P))===P.A?v(e,a):a.l_savedpc++;break}case t.OP_TEST:{(P.C?e.stack[i].l_isfalse():!e.stack[i].l_isfalse())?a.l_savedpc++:v(e,a);break}case t.OP_TESTSET:{let t=O(e,T,P),l=e.stack[t];(P.C?l.l_isfalse():!l.l_isfalse())?a.l_savedpc++:(_.setobjs2s(e,i,t),v(e,a));break}case t.OP_CALL:{let t=P.B,l=P.C-1;if(0!==t&&d.adjust_top(e,i+t),d.luaD_precall(e,i,l))0<=l&&d.adjust_top(e,a.top);else{a=e.ci;continue newframe}break}case t.OP_TAILCALL:{let t=P.B;if(0!==t&&d.adjust_top(e,i+t),d.luaD_precall(e,i,h));else{let t=e.ci,l=t.previous,s=t.func,r=t.funcOff,i=l.funcOff,c=t.l_base+s.value.p.numparams;0<o.p.p.length&&n.luaF_close(e,l.l_base);for(let t=0;r+t<c;t++)_.setobjs2s(e,i+t,r+t);l.l_base=i+(t.l_base-r),l.top=i+(e.top-r),d.adjust_top(e,l.top),l.l_code=t.l_code,l.l_savedpc=t.l_savedpc,l.callstatus|=p.CIST_TAIL,l.next=null,a=e.ci=l,u(e.top===l.l_base+e.stack[i].value.p.maxstacksize);continue newframe}break}case t.OP_RETURN:{0<o.p.p.length&&n.luaF_close(e,T);let l=d.luaD_poscall(e,a,i,0===P.B?e.top-i:P.B-1);if(a.callstatus&p.CIST_FRESH)return;a=e.ci,l&&d.adjust_top(e,a.top),u(a.callstatus&p.CIST_LUA),u(a.l_code[a.l_savedpc-1].opcode===t.OP_CALL);continue newframe}case t.OP_FORLOOP:{if(e.stack[i].ttisinteger()){let t=e.stack[i+2].value,l=0|e.stack[i].value+t,u=e.stack[i+1].value;(0<t?l<=u:u<=l)&&(a.l_savedpc+=P.sBx,e.stack[i].chgivalue(l),e.stack[i+3].setivalue(l))}else{let t=e.stack[i+2].value,l=e.stack[i].value+t,u=e.stack[i+1].value;(0<t?l<=u:u<=l)&&(a.l_savedpc+=P.sBx,e.stack[i].chgfltvalue(l),e.stack[i+3].setfltvalue(l))}break}case t.OP_FORPREP:{let t=e.stack[i],l=e.stack[i+1],u=e.stack[i+2],n;if(t.ttisinteger()&&u.ttisinteger()&&(n=k(l,u.value))){let e=n.stopnow?0:t.value;l.value=n.ilimit,t.value=0|e-u.value}else{let a,n,r;!1===(a=N(l))&&A.luaG_runerror(e,s.to_luastring('\'for\' limit must be a number',!0)),e.stack[i+1].setfltvalue(a),!1===(n=N(u))&&A.luaG_runerror(e,s.to_luastring('\'for\' step must be a number',!0)),e.stack[i+2].setfltvalue(n),!1===(r=N(t))&&A.luaG_runerror(e,s.to_luastring('\'for\' initial value must be a number',!0)),e.stack[i].setfltvalue(r-n)}a.l_savedpc+=P.sBx;break}case t.OP_TFORCALL:{let l=i+3;_.setobjs2s(e,l+2,i+2),_.setobjs2s(e,l+1,i+1),_.setobjs2s(e,l,i),d.adjust_top(e,l+3),d.luaD_call(e,l,P.C),d.adjust_top(e,a.top),P=a.l_code[a.l_savedpc++],i=x(e,T,P),u(P.opcode===t.OP_TFORLOOP)}case t.OP_TFORLOOP:{e.stack[i+1].ttisnil()||(_.setobjs2s(e,i,i+1),a.l_savedpc+=P.sBx);break}case t.OP_SETLIST:{let l=P.B,s=P.C;0===l&&(l=e.top-i-1),0===s&&(u(a.l_code[a.l_savedpc].opcode===t.OP_EXTRAARG),s=a.l_code[a.l_savedpc++].Ax);for(let t=e.stack[i].value,a=(s-1)*r.LFIELDS_PER_FLUSH+l;0<l;l--)f.luaH_setint(t,a--,e.stack[i+l]);d.adjust_top(e,a.top);break}case t.OP_CLOSURE:{let t=o.p.p[P.Bx],a=G(t,o.upvals,e.stack,T);null===a?V(e,t,o.upvals,T,i):e.stack[i].setclLvalue(a);break}case t.OP_VARARG:{let t=P.B-1,l=T-a.funcOff-o.p.numparams-1,u;for(0>l&&(l=0),0>t&&(t=l,d.luaD_checkstack(e,l),d.adjust_top(e,i+l)),u=0;u<t&&u<l;u++)_.setobjs2s(e,i+u,T-l+u);for(;u<t;u++)e.stack[i+u].setnilvalue();break}case t.OP_EXTRAARG:throw Error('invalid opcode');}}},e.exports.luaV_finishOp=function(e){let t=e.ci,a=r.OpCodesI,l=t.l_base,s=t.l_code[t.l_savedpc-1],n=s.opcode;switch(n){case a.OP_ADD:case a.OP_SUB:case a.OP_MUL:case a.OP_DIV:case a.OP_IDIV:case a.OP_BAND:case a.OP_BOR:case a.OP_BXOR:case a.OP_SHL:case a.OP_SHR:case a.OP_MOD:case a.OP_POW:case a.OP_UNM:case a.OP_BNOT:case a.OP_LEN:case a.OP_GETTABUP:case a.OP_GETTABLE:case a.OP_SELF:{_.setobjs2s(e,l+s.A,e.top-1),delete e.stack[--e.top];break}case a.OP_LE:case a.OP_LT:case a.OP_EQ:{let l=!e.stack[e.top-1].l_isfalse();delete e.stack[--e.top],t.callstatus&p.CIST_LEQ&&(u(n===a.OP_LE),t.callstatus^=p.CIST_LEQ,l=!l),u(t.l_code[t.l_savedpc].opcode===a.OP_JMP),l!=!!s.A&&t.l_savedpc++;break}case a.OP_CONCAT:{let a=e.top-1,u=s.B,n=a-1-(l+u);_.setobjs2s(e,a-2,a),1<n&&(e.top=a-1,Y(e,n)),_.setobjs2s(e,t.l_base+s.A,e.top-1),d.adjust_top(e,t.top);break}case a.OP_TFORCALL:{u(t.l_code[t.l_savedpc].opcode===a.OP_TFORLOOP),d.adjust_top(e,t.top);break}case a.OP_CALL:{0<=s.C-1&&d.adjust_top(e,t.top);break}}},e.exports.luaV_lessequal=R,e.exports.luaV_lessthan=b,e.exports.luaV_mod=K,e.exports.luaV_objlen=C,e.exports.luaV_rawequalobj=function(e,t){return S(null,e,t)},e.exports.luaV_shiftl=w,e.exports.luaV_tointeger=L,e.exports.settable=J,e.exports.tointeger=I,e.exports.tonumber=N},function(e){'use strict';const t=0,a=1,l=2,u=3,s=0,n=1,r=2,o=3,_=[64|l<<4|t<<2|s,64|u<<4|t<<2|n,64|t<<4|t<<2|n,64|a<<4|a<<2|s,64|a<<4|t<<2|s,64|a<<4|t<<2|s,64|a<<4|u<<2|s,64|l<<4|u<<2|s,0|u<<4|u<<2|s,0|a<<4|t<<2|s,0|u<<4|u<<2|s,64|a<<4|a<<2|s,64|l<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|u<<4|u<<2|s,64|l<<4|t<<2|s,64|l<<4|t<<2|s,64|l<<4|t<<2|s,64|l<<4|t<<2|s,64|l<<4|l<<2|s,0|l<<4|t<<2|r,128|u<<4|u<<2|s,128|u<<4|u<<2|s,128|u<<4|u<<2|s,128|t<<4|a<<2|s,192|l<<4|a<<2|s,64|a<<4|a<<2|s,64|a<<4|a<<2|s,0|a<<4|t<<2|s,64|l<<4|t<<2|r,64|l<<4|t<<2|r,0|t<<4|a<<2|s,64|l<<4|t<<2|r,0|a<<4|a<<2|s,64|a<<4|t<<2|n,64|a<<4|t<<2|s,0|a<<4|a<<2|o],p=9,c=9,d=p+c,g=8,L=p+c+g,f=6,A=0,T=A+f,h=T+g,x=h+p,O=h,U=T,i=(1<<d)-1,m=i>>1,E=(1<<g)-1,v=1<<c-1,b=function(e,t){return~(-1<<e)<<t},k=function(e,t){return~b(e,t)},R=function(e,t,a,l){return e.code=e.code&k(l,a)|t<<a&b(l,a),I(e)},S=function(e,t){return R(e,t,O,d)},I=function(e){if('number'==typeof e)return{code:e,opcode:e>>A&b(f,0),A:e>>T&b(g,0),B:e>>x&b(c,0),C:e>>h&b(p,0),Bx:e>>O&b(d,0),Ax:e>>U&b(L,0),sBx:(e>>O&b(d,0))-m};let t=e.code;return e.opcode=t>>A&b(f,0),e.A=t>>T&b(g,0),e.B=t>>x&b(c,0),e.C=t>>h&b(p,0),e.Bx=t>>O&b(d,0),e.Ax=t>>U&b(L,0),e.sBx=(t>>O&b(d,0))-m,e};e.exports.BITRK=v,e.exports.CREATE_ABC=function(e,t,a,l){return I(e<<A|t<<T|a<<x|l<<h)},e.exports.CREATE_ABx=function(e,t,a){return I(e<<A|t<<T|a<<O)},e.exports.CREATE_Ax=function(e,t){return I(e<<A|t<<U)},e.exports.GET_OPCODE=function(e){return e.opcode},e.exports.GETARG_A=function(e){return e.A},e.exports.GETARG_B=function(e){return e.B},e.exports.GETARG_C=function(e){return e.C},e.exports.GETARG_Bx=function(e){return e.Bx},e.exports.GETARG_Ax=function(e){return e.Ax},e.exports.GETARG_sBx=function(e){return e.sBx},e.exports.INDEXK=function(e){return e&~v},e.exports.ISK=function(e){return e&v},e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=E,e.exports.MAXARG_Ax=(1<<L)-1,e.exports.MAXARG_B=(1<<c)-1,e.exports.MAXARG_Bx=i,e.exports.MAXARG_C=(1<<p)-1,e.exports.MAXARG_sBx=m,e.exports.MAXINDEXRK=v-1,e.exports.NO_REG=E,e.exports.OpArgK=u,e.exports.OpArgN=t,e.exports.OpArgR=l,e.exports.OpArgU=a,e.exports.OpCodes=['MOVE','LOADK','LOADKX','LOADBOOL','LOADNIL','GETUPVAL','GETTABUP','GETTABLE','SETTABUP','SETUPVAL','SETTABLE','NEWTABLE','SELF','ADD','SUB','MUL','MOD','POW','DIV','IDIV','BAND','BOR','BXOR','SHL','SHR','UNM','BNOT','NOT','LEN','CONCAT','JMP','EQ','LT','LE','TEST','TESTSET','CALL','TAILCALL','RETURN','FORLOOP','FORPREP','TFORCALL','TFORLOOP','SETLIST','CLOSURE','VARARG','EXTRAARG'],e.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},e.exports.POS_A=T,e.exports.POS_Ax=U,e.exports.POS_B=x,e.exports.POS_Bx=O,e.exports.POS_C=h,e.exports.POS_OP=A,e.exports.RKASK=function(e){return e|v},e.exports.SETARG_A=function(e,t){return R(e,t,T,g)},e.exports.SETARG_Ax=function(e,t){return R(e,t,U,L)},e.exports.SETARG_B=function(e,t){return R(e,t,x,c)},e.exports.SETARG_Bx=S,e.exports.SETARG_C=function(e,t){return R(e,t,h,p)},e.exports.SETARG_sBx=function(e,t){return S(e,t+m)},e.exports.SET_OPCODE=function(e,t){return e.code=e.code&k(f,A)|t<<A&b(f,A),I(e)},e.exports.SIZE_A=g,e.exports.SIZE_Ax=L,e.exports.SIZE_B=c,e.exports.SIZE_Bx=d,e.exports.SIZE_C=p,e.exports.SIZE_OP=f,e.exports.fullins=I,e.exports.getBMode=function(e){return 3&_[e]>>4},e.exports.getCMode=function(e){return 3&_[e]>>2},e.exports.getOpMode=function(e){return 3&_[e]},e.exports.iABC=s,e.exports.iABx=n,e.exports.iAsBx=r,e.exports.iAx=o,e.exports.testAMode=function(e){return _[e]&64},e.exports.testTMode=function(e){return _[e]&128}},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e){function t(){throw new Error('setTimeout has not been defined')}function a(){throw new Error('clearTimeout has not been defined')}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===t||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function u(e){if(p===clearTimeout)return clearTimeout(e);if((p===a||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function s(){d&&L&&(d=!1,L.length?c=L.concat(c):g=-1,c.length&&n())}function n(){if(!d){var e=l(s);d=!0;for(var t=c.length;t;){for(L=c,c=[];++g<t;)L&&L[g].run();g=-1,t=c.length}L=null,d=!1,u(e)}}function r(e,t){this.fun=e,this.array=t}function o(){}var _=e.exports={},i,p;(function(){try{i='function'==typeof setTimeout?setTimeout:t}catch(a){i=t}try{p='function'==typeof clearTimeout?clearTimeout:a}catch(t){p=a}})();var c=[],d=!1,g=-1,L;_.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new r(e,t)),1!==c.length||d||l(n)},r.prototype.run=function(){this.fun.apply(null,this.array)},_.title='browser',_.browser=!0,_.env={},_.argv=[],_.version='',_.versions={},_.on=o,_.addListener=o,_.once=o,_.off=o,_.removeListener=o,_.removeAllListeners=o,_.emit=o,_.prependListener=o,_.prependOnceListener=o,_.listeners=function(){return[]},_.binding=function(){throw new Error('process.binding is not supported')},_.cwd=function(){return'/'},_.chdir=function(){throw new Error('process.chdir is not supported')},_.umask=function(){return 0}},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(a){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,a){'use strict';const l=a(0);const u=-1,s=function(e){let t=e.reader(e.L,e.data),a;return null===t?u:(t instanceof DataView?(e.buffer=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.off=0,a=t.byteLength-t.byteOffset):(l('string'!=typeof t,'Should only load binary of array of bytes'),e.buffer=t,e.off=0,a=t.length),0===a)?u:(e.n=a-1,e.buffer[e.off++])};e.exports.EOZ=u,e.exports.luaZ_buffremove=function(e,t){e.n-=t},e.exports.luaZ_fill=s,e.exports.luaZ_read=function(e,t,a,l){for(;l;){if(0===e.n){if(s(e)===u)return l;e.n++,e.off--}let n=l<=e.n?l:e.n;for(let l=0;l<n;l++)t[a++]=e.buffer[e.off++];e.n-=n,0===e.n&&(e.buffer=null),l-=n}return 0},e.exports.luaZ_resetbuffer=function(e){e.n=0,e.buffer=[]},e.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},e.exports.ZIO=class{constructor(e,t,a){this.L=e,l('function'==typeof t,'ZIO requires a reader'),this.reader=t,this.data=a,this.n=0,this.buffer=null,this.off=0}zgetc(){return 0<this.n--?this.buffer[this.off++]:s(this)}}},function(e,t,a){'use strict';const l=a(0),u=a(1),s=a(11),r=a(7),n=a(43),o=a(12),_=a(3),i=a(13),p=a(9),c=a(14),d=a(10),g=a(15),A=a(8),f=a(21),T=o.MAXUPVAL,h=u.constant_types,x=u.thread_status,O=_.TValue,U=_.CClosure,E=function(e){return e!==_.luaO_nilobject},m=function(e,t){let a=e.ci;if(0<t){let u=a.funcOff+t;return l(t<=a.top-(a.funcOff+1),'unacceptable index'),u>=e.top?_.luaO_nilobject:e.stack[u]}return t>u.LUA_REGISTRYINDEX?(l(0!=t&&-t<=e.top,'invalid index'),e.stack[e.top+t]):t===u.LUA_REGISTRYINDEX?e.l_G.l_registry:(t=u.LUA_REGISTRYINDEX-t,l(t<=T+1,'upvalue index too large'),a.func.ttislcf()?_.luaO_nilobject:t<=a.func.value.nupvalues?a.func.value.upvalue[t-1]:_.luaO_nilobject)},v=function(e,t){let a=e.ci;if(0<t){let u=a.funcOff+t;return l(t<=a.top-(a.funcOff+1),'unacceptable index'),u>=e.top?null:u}if(t>u.LUA_REGISTRYINDEX)return l(0!=t&&-t<=e.top,'invalid index'),e.top+t;throw Error('attempt to use pseudo-index')},b=function(e,t){let a=e.ci.funcOff,u;0<=t?(l(t<=e.stack_last-(a+1),'new top too large'),u=a+1+t):(l(-(t+1)<=e.top-(a+1),'invalid new top'),u=e.top+t+1),r.adjust_top(e,u)},k=function(e,t){b(e,-t-1)},R=function(e,t,a){for(;t<a;t++,a--){let l=e.stack[t],u=new O(l.type,l.value);_.setobjs2s(e,t,a),_.setobj2s(e,a,u)}},S=function(e,a,s){let r=e.top-1,t=v(e,a),o=e.stack[t];l(E(o)&&a>u.LUA_REGISTRYINDEX,'index not in the stack'),l((0<=s?s:-s)<=r-t+1,'invalid \'n\'');let _=0<=s?r-s:t-s-1;R(e,t,_),R(e,_+1,e.top-1),R(e,t,e.top-1)},I=function(e,t,a){let l=m(e,t);m(e,a).setfrom(l)},N=function(e,t,a){if(l('function'==typeof t),l('number'==typeof a),0===a)e.stack[e.top]=new O(h.LUA_TLCF,t);else{l(a<e.top-e.ci.funcOff,'not enough elements in the stack'),l(a<=T,'upvalue index too large');let u=new U(e,t,a);for(let t=0;t<a;t++)u.upvalue[t].setfrom(e.stack[e.top-a+t]);for(let t=1;t<a;t++)delete e.stack[--e.top];0<a&&--e.top,e.stack[e.top].setclCvalue(u)}e.top++,l(e.top<=e.ci.top,'stack overflow')},P=function(e,t){N(e,t,0)},M=function(e,a,t){l(u.is_luastring(t),'key must be an array of bytes');let s=p.luaS_new(e,t);l(1<e.top-e.ci.funcOff,'not enough elements in the stack'),_.pushsvalue2s(e,s),l(e.top<=e.ci.top,'stack overflow'),g.settable(e,a,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},y=function(e,t){M(e,A.luaH_getint(e.l_G.l_registry.value,u.LUA_RIDX_GLOBALS),t)},C=function(e,a,t){l(u.is_luastring(t),'key must be an array of bytes');let s=p.luaS_new(e,t);return _.pushsvalue2s(e,s),l(e.top<=e.ci.top,'stack overflow'),g.luaV_gettable(e,a,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},D=function(e,a,u){let s=m(e,a);return l(s.ttistable(),'table expected'),_.pushobj2s(e,A.luaH_getint(s.value,u)),l(e.top<=e.ci.top,'stack overflow'),e.stack[e.top-1].ttnov()},K=function(e){let a=new _.TValue(h.LUA_TTABLE,A.luaH_new(e));e.stack[e.top]=a,e.top++,l(e.top<=e.ci.top,'stack overflow')},B=function(e,t){return new _.Udata(e,t)},w=function(e,t,a){switch(t.ttype()){case h.LUA_TCCL:{let e=t.value;return 1<=a&&a<=e.nupvalues?{name:[],val:e.upvalue[a-1]}:null}case h.LUA_TLCL:{let e=t.value,l=e.p;if(!(1<=a&&a<=l.upvalues.length))return null;let s=l.upvalues[a-1].name;return{name:s?s.getstr():u.to_luastring('(*no name)',!0),val:e.upvals[a-1].v}}default:return null;}},L=function(e,t){let a=m(e,t);if(!a.ttisstring()){if(!g.cvt2str(a))return null;_.luaO_tostring(e,a)}return a.svalue()},G=function(e,t){let a=m(e,t);if(!a.ttisstring()){if(!g.cvt2str(a))return null;_.luaO_tostring(e,a)}return a.jsstring()},V=new WeakMap,F=function(e,t,a){let u=function(u){l(u instanceof i.lua_State&&e===u.l_G,'must be from same global state'),u.stack[u.top]=new O(t,a),u.top++,l(u.top<=u.ci.top,'stack overflow')};return V.set(u,e),u},X=function(e,t){r.luaD_callnoyield(e,t.funcOff,t.nresults)},j=function(e,t){let a=m(e,t);return E(a)?a.ttnov():h.LUA_TNONE},H=function(e,t,a,s,n){l(null===n||!(e.ci.callstatus&i.CIST_LUA),'cannot use continuations inside hooks'),l(t+1<e.top-e.ci.funcOff,'not enough elements in the stack'),l(e.status===x.LUA_OK,'cannot do calls on non-normal thread'),l(t===u.LUA_MULTRET||e.ci.top-e.top>=t-a,'results from function overflow current stack size');let o=e.top-(t+1);null!==n&&0===e.nny?(e.ci.c_k=n,e.ci.c_ctx=s,r.luaD_call(e,o,a)):r.luaD_callnoyield(e,o,a),a===u.LUA_MULTRET&&e.ci.top<e.top&&(e.ci.top=e.top)},Y=function(e,t,a,s,n,o){l(t+1<e.top-e.ci.funcOff,'not enough elements in the stack'),l(e.status===x.LUA_OK,'cannot do calls on non-normal thread'),l(t===u.LUA_MULTRET||e.ci.top-e.top>=t-a,'results from function overflow current stack size');let _={func:null,funcOff:NaN,nresults:NaN},p,c;if(c=0===s?0:v(e,s),_.funcOff=e.top-(t+1),_.func=e.stack[_.funcOff],null===o||0<e.nny)_.nresults=a,p=r.luaD_pcall(e,X,_,_.funcOff,c);else{let t=e.ci;t.c_k=o,t.c_ctx=n,t.extra=_.funcOff,t.c_old_errfunc=e.errfunc,e.errfunc=c,t.callstatus&=~i.CIST_OAH|e.allowhook,t.callstatus|=i.CIST_YPCALL,r.luaD_call(e,_.funcOff,a),t.callstatus&=~i.CIST_YPCALL,e.errfunc=t.c_old_errfunc,p=x.LUA_OK}return a===u.LUA_MULTRET&&e.ci.top<e.top&&(e.ci.top=e.top),p},z=function(e,t,a){let u=m(e,t);l(u.ttisLclosure(),'Lua function expected');let s=u.value;return l(1<=a&&a<=s.p.upvalues.length,'invalid upvalue index'),{closure:s,upval:s.upvals[a-1],upvalOff:a-1}};e.exports.index2addr=m,e.exports.index2addr_=v,e.exports.lua_absindex=function(e,t){return 0<t||t<=u.LUA_REGISTRYINDEX?t:e.top-e.ci.funcOff+t},e.exports.lua_arith=function(e,t){t!==u.LUA_OPUNM&&t!==u.LUA_OPBNOT?l(2<e.top-e.ci.funcOff,'not enough elements in the stack'):(l(1<e.top-e.ci.funcOff,'not enough elements in the stack'),_.pushobj2s(e,e.stack[e.top-1]),l(e.top<=e.ci.top,'stack overflow')),_.luaO_arith(e,t,e.stack[e.top-2],e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top]},e.exports.lua_atpanic=function(e,t){let a=e.l_G.panic;return e.l_G.panic=t,a},e.exports.lua_atnativeerror=function(e,t){let a=e.l_G.atnativeerror;return e.l_G.atnativeerror=t,a},e.exports.lua_call=function(e,t,a){H(e,t,a,0,null)},e.exports.lua_callk=H,e.exports.lua_checkstack=function(e,t){let a=e.ci,u;if(l(0<=t,'negative \'n\''),e.stack_last-e.top>t)u=!0;else{let a=e.top+i.EXTRA_STACK;a>d.LUAI_MAXSTACK-t?u=!1:(r.luaD_growstack(e,t),u=!0)}return u&&a.top<e.top+t&&(a.top=e.top+t),u},e.exports.lua_compare=function(e,t,a,s){let n=m(e,t),r=m(e,a),o=0;return E(n)&&E(r)&&(s===u.LUA_OPEQ?o=g.luaV_equalobj(e,n,r):s===u.LUA_OPLT?o=g.luaV_lessthan(e,n,r):s===u.LUA_OPLE?o=g.luaV_lessequal(e,n,r):l(!1,'invalid option')),o},e.exports.lua_concat=function(e,t){l(t<e.top-e.ci.funcOff,'not enough elements in the stack'),2<=t?g.luaV_concat(e,t):0===t&&(_.pushsvalue2s(e,p.luaS_bless(e,[])),l(e.top<=e.ci.top,'stack overflow'))},e.exports.lua_copy=I,e.exports.lua_createtable=K,e.exports.lua_dump=function(e,t,a,u){l(1<e.top-e.ci.funcOff,'not enough elements in the stack');let s=e.stack[e.top-1];return s.ttisLclosure()?n.luaU_dump(e,s.value.p,t,a,u):1},e.exports.lua_error=function(e){l(1<e.top-e.ci.funcOff,'not enough elements in the stack'),s.luaG_errormsg(e)},e.exports.lua_gc=function(){},e.exports.lua_getallocf=function(){return console.warn('lua_getallocf is not available'),0},e.exports.lua_getextraspace=function(){return console.warn('lua_getextraspace is not available'),0},e.exports.lua_getfield=function(e,t,a){return C(e,m(e,t),a)},e.exports.lua_getglobal=function(e,t){return C(e,A.luaH_getint(e.l_G.l_registry.value,u.LUA_RIDX_GLOBALS),t)},e.exports.lua_geti=function(e,a,u){l('number'==typeof u&&(0|u)===u);let s=m(e,a);return e.stack[e.top]=new O(h.LUA_TNUMINT,u),e.top++,l(e.top<=e.ci.top,'stack overflow'),g.luaV_gettable(e,s,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_getmetatable=function(e,t){let a=m(e,t),u=!1,s;switch(a.ttnov()){case h.LUA_TTABLE:case h.LUA_TUSERDATA:s=a.value.metatable;break;default:s=e.l_G.mt[a.ttnov()];}return null!==s&&void 0!==s&&(e.stack[e.top]=new O(h.LUA_TTABLE,s),e.top++,l(e.top<=e.ci.top,'stack overflow'),u=!0),u},e.exports.lua_gettable=function(e,a){let l=m(e,a);return g.luaV_gettable(e,l,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_gettop=function(e){return e.top-(e.ci.funcOff+1)},e.exports.lua_getupvalue=function(e,t,a){let u=w(e,m(e,t),a);if(u){let t=u.name,a=u.val;return _.pushobj2s(e,a),l(e.top<=e.ci.top,'stack overflow'),t}return null},e.exports.lua_getuservalue=function(e,t){let a=m(e,t);l(e,a.ttisfulluserdata(),'full userdata expected');let u=a.value.uservalue;return e.stack[e.top]=new O(u.type,u.value),e.top++,l(e.top<=e.ci.top,'stack overflow'),e.stack[e.top-1].ttnov()},e.exports.lua_insert=function(e,t){S(e,t,1)},e.exports.lua_isboolean=function(e,t){return j(e,t)===h.LUA_TBOOLEAN},e.exports.lua_iscfunction=function(e,t){let a=m(e,t);return a.ttislcf(a)||a.ttisCclosure()},e.exports.lua_isfunction=function(e,t){return j(e,t)===h.LUA_TFUNCTION},e.exports.lua_isinteger=function(e,t){return m(e,t).ttisinteger()},e.exports.lua_islightuserdata=function(e,t){return j(e,t)===h.LUA_TLIGHTUSERDATA},e.exports.lua_isnil=function(e,t){return j(e,t)===h.LUA_TNIL},e.exports.lua_isnone=function(e,t){return j(e,t)===h.LUA_TNONE},e.exports.lua_isnoneornil=function(e,t){return 0>=j(e,t)},e.exports.lua_isnumber=function(e,t){return!1!==g.tonumber(m(e,t))},e.exports.lua_isproxy=function(e,t){let a=V.get(e);return!!a&&(null===t||t.l_G===a)},e.exports.lua_isstring=function(e,t){let a=m(e,t);return a.ttisstring()||g.cvt2str(a)},e.exports.lua_istable=function(e,t){return m(e,t).ttistable()},e.exports.lua_isthread=function(e,t){return j(e,t)===h.LUA_TTHREAD},e.exports.lua_isuserdata=function(e,t){let a=m(e,t);return a.ttisfulluserdata(a)||a.ttislightuserdata()},e.exports.lua_len=function(e,a){let u=m(e,a),t=new O;g.luaV_objlen(e,t,u),e.stack[e.top]=t,e.top++,l(e.top<=e.ci.top,'stack overflow')},e.exports.lua_load=function(e,t,a,s,n){l(u.is_luastring(s),'lua_load expect an array of byte as chunkname'),l(!n||u.is_luastring(n),'lua_load expect an array of byte as mode'),s||(s=[u.char['?']]);let o=new f.ZIO(e,t,a),_=r.luaD_protectedparser(e,o,s,n);if(_===x.LUA_OK){let t=e.stack[e.top-1].value;if(1<=t.nupvalues){let a=A.luaH_getint(e.l_G.l_registry.value,u.LUA_RIDX_GLOBALS);t.upvals[0].v.setfrom(a)}}return _},e.exports.lua_newtable=function(e){K(e,0,0)},e.exports.lua_newuserdata=function(e,t){let a=B(e,t);return e.stack[e.top]=new _.TValue(h.LUA_TUSERDATA,a),e.top++,l(e.top<=e.ci.top,'stack overflow'),a.data},e.exports.lua_next=function(e,a){let u=m(e,a);l(u.ttistable(),'table expected'),e.stack[e.top]=new O;let t=A.luaH_next(e,u.value,e.top-1);return t?(e.top++,l(e.top<=e.ci.top,'stack overflow'),1):(delete e.stack[e.top],delete e.stack[--e.top],0)},e.exports.lua_pcall=function(e,t,a,l){return Y(e,t,a,l,0,null)},e.exports.lua_pcallk=Y,e.exports.lua_pop=k,e.exports.lua_pushboolean=function(e,t){e.stack[e.top]=new O(h.LUA_TBOOLEAN,!!t),e.top++,l(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushcclosure=N,e.exports.lua_pushcfunction=P,e.exports.lua_pushfstring=function(e,t,...a){return l(u.is_luastring(t)),_.luaO_pushvfstring(e,t,a)},e.exports.lua_pushglobaltable=function(e){D(e,u.LUA_REGISTRYINDEX,u.LUA_RIDX_GLOBALS)},e.exports.lua_pushinteger=function(e,t){l('number'==typeof t&&(0|t)===t),e.stack[e.top]=new O(h.LUA_TNUMINT,t),e.top++,l(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushjsclosure=N,e.exports.lua_pushjsfunction=P,e.exports.lua_pushlightuserdata=function(e,t){e.stack[e.top]=new O(h.LUA_TLIGHTUSERDATA,t),e.top++,l(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushliteral=function(e,t){if(l('string'==typeof t||void 0===t||null===t,'lua_pushliteral expects a JS string'),void 0===t||null===t)e.stack[e.top]=new O(h.LUA_TNIL,null),e.top++;else{let a=p.luaS_newliteral(e,t);_.pushsvalue2s(e,a),t=a.getstr()}return l(e.top<=e.ci.top,'stack overflow'),t},e.exports.lua_pushlstring=function(e,t,a){l('number'==typeof a);let s;return 0===a?s=p.luaS_bless(e,[]):(l(u.is_luastring(t)&&t.length>=a,'lua_pushlstring expects array of byte'),s=p.luaS_bless(e,t.slice(0,a))),_.pushsvalue2s(e,s),l(e.top<=e.ci.top,'stack overflow'),s.value},e.exports.lua_pushnil=function(e){e.stack[e.top]=new O(h.LUA_TNIL,null),e.top++,l(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushnumber=function(e,t){l('number'==typeof t),e.stack[e.top]=new O(h.LUA_TNUMFLT,t),e.top++,l(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushstring=function(e,t){if(l(u.is_luastring(t)||void 0===t||null===t,'lua_pushstring expects array of byte'),void 0===t||null===t)e.stack[e.top]=new O(h.LUA_TNIL,null),e.top++;else{let a=p.luaS_new(e,t);_.pushsvalue2s(e,a),t=a.getstr()}return l(e.top<=e.ci.top,'stack overflow'),t},e.exports.lua_pushthread=function(e){return e.stack[e.top]=new O(h.LUA_TTHREAD,e),e.top++,l(e.top<=e.ci.top,'stack overflow'),e.l_G.mainthread===e},e.exports.lua_pushvalue=function(e,t){_.pushobj2s(e,m(e,t)),l(e.top<=e.ci.top,'stack overflow')},e.exports.lua_pushvfstring=function(e,t,a){return l(u.is_luastring(t)),_.luaO_pushvfstring(e,t,a)},e.exports.lua_rawequal=function(e,t,a){let l=m(e,t),u=m(e,a);return E(l)&&E(u)?g.luaV_equalobj(null,l,u):0},e.exports.lua_rawget=function(e,a){let u=m(e,a);return l(u.ttistable(u),'table expected'),_.setobj2s(e,e.top-1,A.luaH_get(e,u.value,e.stack[e.top-1])),e.stack[e.top-1].ttnov()},e.exports.lua_rawgeti=D,e.exports.lua_rawgetp=function(e,a,u){let s=m(e,a);l(s.ttistable(),'table expected');let t=new O(h.LUA_TLIGHTUSERDATA,u);return _.pushobj2s(e,A.luaH_get(e,s.value,t)),l(e.top<=e.ci.top,'stack overflow'),e.stack[e.top-1].ttnov()},e.exports.lua_rawlen=function(e,t){let a=m(e,t);switch(a.ttype()){case h.LUA_TSHRSTR:case h.LUA_TLNGSTR:return a.vslen();case h.LUA_TUSERDATA:return a.value.len;case h.LUA_TTABLE:return A.luaH_getn(a.value);default:return 0;}},e.exports.lua_rawset=function(e,t){l(2<e.top-e.ci.funcOff,'not enough elements in the stack');let a=m(e,t);l(a.ttistable(),'table expected');let u=e.stack[e.top-2],s=e.stack[e.top-1];if(s.ttisnil())A.luaH_delete(e,a.value,u);else{let t=A.luaH_set(e,a.value,u);t.setfrom(s)}A.invalidateTMcache(a.value),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_rawseti=function(e,t,a){l(2<e.top-e.ci.funcOff,'not enough elements in the stack');let u=m(e,t);l(u.ttistable(),'table expected'),A.luaH_setint(u.value,a,e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_rawsetp=function(e,t,a){l(1<e.top-e.ci.funcOff,'not enough elements in the stack');let u=m(e,t);l(e,u.ttistable(),'table expected');let s=new O(h.LUA_TLIGHTUSERDATA,a),n=e.stack[e.top-1];if(n.ttisnil())A.luaH_delete(e,u.value,s);else{let t=A.luaH_set(e,u.value,s);t.setfrom(n)}delete e.stack[--e.top]},e.exports.lua_register=function(e,t,a){P(e,a),y(e,t)},e.exports.lua_remove=function(e,t){S(e,t,-1),k(e,1)},e.exports.lua_replace=function(e,t){I(e,-1,t),k(e,1)},e.exports.lua_rotate=S,e.exports.lua_setallocf=function(){return console.warn('lua_setallocf is not available'),0},e.exports.lua_setfield=function(e,t,a){M(e,m(e,t),a)},e.exports.lua_setglobal=y,e.exports.lua_seti=function(e,a,u){l('number'==typeof u&&(0|u)===u),l(1<e.top-e.ci.funcOff,'not enough elements in the stack');let s=m(e,a);e.stack[e.top]=new O(h.LUA_TNUMINT,u),e.top++,l(e.top<=e.ci.top,'stack overflow'),g.settable(e,s,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_setmetatable=function(e,t){l(1<e.top-e.ci.funcOff,'not enough elements in the stack');let a=m(e,t),u;switch(e.stack[e.top-1].ttisnil()?u=null:(l(e.stack[e.top-1].ttistable(),'table expected'),u=e.stack[e.top-1].value),a.ttnov()){case h.LUA_TUSERDATA:case h.LUA_TTABLE:{a.value.metatable=u;break}default:{e.l_G.mt[a.ttnov()]=u;break}}return delete e.stack[--e.top],!0},e.exports.lua_settable=function(e,a){l(2<e.top-e.ci.funcOff,'not enough elements in the stack');let u=m(e,a);g.settable(e,u,e.stack[e.top-2],e.stack[e.top-1]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_settop=b,e.exports.lua_setupvalue=function(e,t,a){let u=m(e,t);l(1<e.top-e.ci.funcOff,'not enough elements in the stack');let s=w(e,u,a);if(s){let t=s.name,a=s.val;return a.setfrom(e.stack[e.top-1]),delete e.stack[--e.top],t}return null},e.exports.lua_setuservalue=function(e,t){l(1<e.top-e.ci.funcOff,'not enough elements in the stack');let a=m(e,t);l(e,a.ttisfulluserdata(),'full userdata expected'),a.value.uservalue.setfrom(e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_status=function(e){return e.status},e.exports.lua_stringtonumber=function(e,t){let a=_.luaO_str2num(t);return a?(e.stack[e.top]=a,e.top++,l(e.top<=e.ci.top,'stack overflow'),t.length+1):0},e.exports.lua_toboolean=function(e,t){let a=m(e,t);return!a.l_isfalse()},e.exports.lua_tocfunction=function(e,t){let a=m(e,t);return a.ttislcf()||a.ttisCclosure()?a.value:null},e.exports.lua_todataview=function(e,t){let a=m(e,t);if(!a.ttisstring()){if(!g.cvt2str(a))return null;_.luaO_tostring(e,a)}let l=new DataView(new ArrayBuffer(a.vslen()));return a.svalue().forEach((t,e)=>l.setUint8(e,t,!0)),l},e.exports.lua_tointeger=function(e,t){return g.tointeger(m(e,t))},e.exports.lua_tointegerx=function(e,t){return g.tointeger(m(e,t))},e.exports.lua_tojsstring=G,e.exports.lua_toljsstring=G,e.exports.lua_tolstring=L,e.exports.lua_tonumber=function(e,t){let a=g.tonumber(m(e,t));return!1===a?0:a},e.exports.lua_tonumberx=function(e,t){return g.tonumber(m(e,t))},e.exports.lua_topointer=function(e,t){let a=m(e,t);switch(a.ttype()){case h.LUA_TTABLE:case h.LUA_TLCL:case h.LUA_TCCL:case h.LUA_TLCF:case h.LUA_TTHREAD:case h.LUA_TUSERDATA:case h.LUA_TLIGHTUSERDATA:return a.value;default:return null;}},e.exports.lua_toproxy=function(e,t){let a=m(e,t);return F(e.l_G,a.type,a.value)},e.exports.lua_tostring=L,e.exports.lua_tothread=function(e,t){let a=m(e,t);return a.ttisthread()?a.value:null},e.exports.lua_touserdata=function(e,t){let a=m(e,t);switch(a.ttnov()){case h.LUA_TUSERDATA:return a.value.data;case h.LUA_TLIGHTUSERDATA:return a.value;default:return null;}},e.exports.lua_type=j,e.exports.lua_typename=function(e,a){return l(h.LUA_TNONE<=a&&a<h.LUA_NUMTAGS,'invalid tag'),c.ttypename(a)},e.exports.lua_upvalueid=function(e,t,a){let u=m(e,t);switch(u.ttype()){case h.LUA_TLCL:return z(e,t,a).upval;case h.LUA_TCCL:{let e=u.value;return l(1<=a&&a<=e.nupvalues,'invalid upvalue index'),e.upvalue[a-1]}default:return l(!1,'closure expected'),null;}},e.exports.lua_upvaluejoin=function(e,t,a,u,s){let n=z(e,t,a),r=z(e,u,s),o=n.upval,_=r.upval,i=n.closure;l(0<o.refcount),o.refcount--,i.upvals[n.upvalOff]=_,_.refcount++},e.exports.lua_version=function(e){return null===e?u.LUA_VERSION_NUM:e.l_G.version},e.exports.lua_xmove=function(e,t,a){if(e!==t){l(a<e.top-e.ci.funcOff,'not enough elements in the stack'),l(e.l_G===t.l_G,'moving among independent states'),l(t.ci.top-t.top>=a,'stack overflow'),e.top-=a;for(let l=0;l<a;l++)t.stack[t.top]=new _.TValue,_.setobj2s(t,t.top,e.stack[e.top+l]),delete e.stack[e.top+l],t.top++}}},function(e,t,a){'use strict';const l=a(2),u=a(6),s=a(29);e.exports.lua=l,e.exports.lauxlib=u,e.exports.lualib=s},function(e,t,a){(function(e,l){function u(e,a){var l={seen:[],stylize:n};return 3<=arguments.length&&(l.depth=arguments[2]),4<=arguments.length&&(l.colors=arguments[3]),L(a)?l.showHidden=a:a&&t._extend(l,a),h(l.showHidden)&&(l.showHidden=!1),h(l.depth)&&(l.depth=2),h(l.colors)&&(l.colors=!1),h(l.customInspect)&&(l.customInspect=!0),l.colors&&(l.stylize=s),o(l,e,l.depth)}function s(e,t){var a=u.styles[t];return a?'\x1B['+u.colors[a][0]+'m'+e+'\x1B['+u.colors[a][1]+'m':e}function n(e){return e}function r(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function o(e,a,l){if(e.customInspect&&a&&E(a.inspect)&&a.inspect!==t.inspect&&!(a.constructor&&a.constructor.prototype===a)){var u=a.inspect(l,e);return T(u)||(u=o(e,u,l)),u}var s=_(e,a);if(s)return s;var L=Object.keys(a),f=r(L);if(e.showHidden&&(L=Object.getOwnPropertyNames(a)),m(a)&&(0<=L.indexOf('message')||0<=L.indexOf('description')))return i(a);if(0===L.length){if(E(a)){var A=a.name?': '+a.name:'';return e.stylize('[Function'+A+']','special')}if(x(a))return e.stylize(RegExp.prototype.toString.call(a),'regexp');if(U(a))return e.stylize(Date.prototype.toString.call(a),'date');if(m(a))return i(a)}var h='',O=!1,v=['{','}'];if(g(a)&&(O=!0,v=['[',']']),E(a)){var b=a.name?': '+a.name:'';h=' [Function'+b+']'}if(x(a)&&(h=' '+RegExp.prototype.toString.call(a)),U(a)&&(h=' '+Date.prototype.toUTCString.call(a)),m(a)&&(h=' '+i(a)),0===L.length&&(!O||0==a.length))return v[0]+h+v[1];if(0>l)return x(a)?e.stylize(RegExp.prototype.toString.call(a),'regexp'):e.stylize('[Object]','special');e.seen.push(a);var n;return n=O?p(e,a,l,f,L):L.map(function(t){return c(e,a,l,f,t,O)}),e.seen.pop(),d(n,h,v)}function _(e,t){if(h(t))return e.stylize('undefined','undefined');if(T(t)){var a='\''+JSON.stringify(t).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return e.stylize(a,'string')}return f(t)?e.stylize(''+t,'number'):L(t)?e.stylize(''+t,'boolean'):A(t)?e.stylize('null','null'):void 0}function i(e){return'['+Error.prototype.toString.call(e)+']'}function p(e,t,a,u,s){for(var n=[],r=0,o=t.length;r<o;++r)R(t,r+'')?n.push(c(e,t,a,u,r+'',!0)):n.push('');return s.forEach(function(l){l.match(/^\d+$/)||n.push(c(e,t,a,u,l,!0))}),n}function c(e,t,a,l,u,s){var n,r,_;if(_=Object.getOwnPropertyDescriptor(t,u)||{value:t[u]},_.get?_.set?r=e.stylize('[Getter/Setter]','special'):r=e.stylize('[Getter]','special'):_.set&&(r=e.stylize('[Setter]','special')),R(l,u)||(n='['+u+']'),r||(0>e.seen.indexOf(_.value)?(r=A(a)?o(e,_.value,null):o(e,_.value,a-1),-1<r.indexOf('\n')&&(s?r=r.split('\n').map(function(e){return'  '+e}).join('\n').substr(2):r='\n'+r.split('\n').map(function(e){return'   '+e}).join('\n'))):r=e.stylize('[Circular]','special')),h(n)){if(s&&u.match(/^\d+$/))return r;n=JSON.stringify(''+u),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=e.stylize(n,'name')):(n=n.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),n=e.stylize(n,'string'))}return n+': '+r}function d(e,t,a){var l=0,u=e.reduce(function(e,t){return l++,0<=t.indexOf('\n')&&l++,e+t.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<u?a[0]+(''===t?'':t+'\n ')+' '+e.join(',\n  ')+' '+a[1]:a[0]+t+' '+e.join(', ')+' '+a[1]}function g(e){return Array.isArray(e)}function L(e){return'boolean'==typeof e}function A(e){return null===e}function f(e){return'number'==typeof e}function T(e){return'string'==typeof e}function h(e){return void 0===e}function x(e){return O(e)&&'[object RegExp]'===v(e)}function O(e){return'object'==typeof e&&null!==e}function U(e){return O(e)&&'[object Date]'===v(e)}function m(t){return O(t)&&('[object Error]'===v(t)||t instanceof Error)}function E(e){return'function'==typeof e}function v(e){return Object.prototype.toString.call(e)}function b(e){return 10>e?'0'+e.toString(10):e.toString(10)}function k(){var e=new Date,t=[b(e.getHours()),b(e.getMinutes()),b(e.getSeconds())].join(':');return[e.getDate(),P[e.getMonth()],t].join(' ')}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var S=/%[sdj%]/g;t.format=function(e){if(!T(e)){for(var t=[],a=0;a<arguments.length;a++)t.push(u(arguments[a]));return t.join(' ')}for(var a=1,l=arguments,s=l.length,n=(e+'').replace(S,function(e){if('%%'===e)return'%';if(a>=s)return e;switch(e){case'%s':return l[a++]+'';case'%d':return+l[a++];case'%j':try{return JSON.stringify(l[a++])}catch(e){return'[Circular]'}default:return e;}}),r=l[a];a<s;r=l[++a])n+=A(r)||!O(r)?' '+r:' '+u(r);return n},t.deprecate=function(a,u){if(h(e.process))return function(){return t.deprecate(a,u).apply(this,arguments)};if(!0===l.noDeprecation)return a;var s=!1;return function(){if(!s){if(l.throwDeprecation)throw new Error(u);else l.traceDeprecation?console.trace(u):console.error(u);s=!0}return a.apply(this,arguments)}};var I={},N;t.debuglog=function(e){if(h(N)&&(N=l.env.NODE_DEBUG||''),e=e.toUpperCase(),!I[e])if(new RegExp('\\b'+e+'\\b','i').test(N)){var a=l.pid;I[e]=function(){var l=t.format.apply(t,arguments);console.error('%s %d: %s',e,a,l)}}else I[e]=function(){};return I[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey',null:'bold',string:'green',date:'magenta',regexp:'red'},t.isArray=g,t.isBoolean=L,t.isNull=A,t.isNullOrUndefined=function(e){return null==e},t.isNumber=f,t.isString=T,t.isSymbol=function(e){return'symbol'==typeof e},t.isUndefined=h,t.isRegExp=x,t.isObject=O,t.isDate=U,t.isError=m,t.isFunction=E,t.isPrimitive=function(e){return null===e||'boolean'==typeof e||'number'==typeof e||'string'==typeof e||'symbol'==typeof e||'undefined'==typeof e},t.isBuffer=a(39);var P=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];t.log=function(){console.log('%s - %s',k(),t.format.apply(t,arguments))},t.inherits=a(40),t._extend=function(e,t){if(!t||!O(t))return e;for(var a=Object.keys(t),l=a.length;l--;)e[a[l]]=t[a[l]];return e}}).call(t,a(20),a(19))},function(e,t,a){var l;!function(){'use strict';function u(e){return n(r(e),arguments)}function s(e,t){return u.apply(null,[e].concat(t||[]))}function n(e,t){var a=1,l=e.length,s='',n,r,_,i,p,c,d,g,L;for(r=0;r<l;r++)if('string'==typeof e[r])s+=e[r];else if(Array.isArray(e[r])){if(i=e[r],i[2])for(n=t[a],_=0;_<i[2].length;_++){if(!n.hasOwnProperty(i[2][_]))throw new Error(u('[sprintf] property "%s" does not exist',i[2][_]));n=n[i[2][_]]}else n=i[1]?t[i[1]]:t[a++];if(o.not_type.test(i[8])&&o.not_primitive.test(i[8])&&n instanceof Function&&(n=n()),o.numeric_arg.test(i[8])&&'number'!=typeof n&&isNaN(n))throw new TypeError(u('[sprintf] expecting number but found %T',n));switch(o.number.test(i[8])&&(g=0<=n),i[8]){case'b':n=parseInt(n,10).toString(2);break;case'c':n=String.fromCharCode(parseInt(n,10));break;case'd':case'i':n=parseInt(n,10);break;case'j':n=JSON.stringify(n,null,i[6]?parseInt(i[6]):0);break;case'e':n=i[7]?parseFloat(n).toExponential(i[7]):parseFloat(n).toExponential();break;case'f':n=i[7]?parseFloat(n).toFixed(i[7]):parseFloat(n);break;case'g':n=i[7]?+n.toPrecision(i[7])+'':parseFloat(n);break;case'o':n=(parseInt(n,10)>>>0).toString(8);break;case's':n+='',n=i[7]?n.substring(0,i[7]):n;break;case't':n=!!n+'',n=i[7]?n.substring(0,i[7]):n;break;case'T':n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=i[7]?n.substring(0,i[7]):n;break;case'u':n=parseInt(n,10)>>>0;break;case'v':n=n.valueOf(),n=i[7]?n.substring(0,i[7]):n;break;case'x':n=(parseInt(n,10)>>>0).toString(16);break;case'X':n=(parseInt(n,10)>>>0).toString(16).toUpperCase();}o.json.test(i[8])?s+=n:(o.number.test(i[8])&&(!g||i[3])?(L=g?'+':'-',n=n.toString().replace(o.sign,'')):L='',c=i[4]?'0'===i[4]?'0':i[4].charAt(1):' ',d=i[6]-(L+n).length,p=i[6]?0<d?c.repeat(d):'':'',s+=i[5]?L+n+p:'0'===c?L+p+n:p+L+n)}return s}function r(e){if(_[e])return _[e];for(var t=e,a=[],l=0,u;t;){if(null!==(u=o.text.exec(t)))a.push(u[0]);else if(null!==(u=o.modulo.exec(t)))a.push('%');else if(null!==(u=o.placeholder.exec(t))){if(u[2]){l|=1;var s=[],n=u[2],r=[];if(null!==(r=o.key.exec(n))){for(s.push(r[1]);''!==(n=n.substring(r[0].length));)if(null!==(r=o.key_access.exec(n)))s.push(r[1]);else if(null!==(r=o.index_access.exec(n)))s.push(r[1]);else throw new SyntaxError('[sprintf] failed to parse named argument key');}else throw new SyntaxError('[sprintf] failed to parse named argument key');u[2]=s}else l|=2;if(3==l)throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported');a.push(u)}else throw new SyntaxError('[sprintf] unexpected placeholder');t=t.substring(u[0].length)}return _[e]=a}var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},_=Object.create(null);t.sprintf=u,t.vsprintf=s,'undefined'!=typeof window&&(window.sprintf=u,window.vsprintf=s,l=function(){return{sprintf:u,vsprintf:s}}.call(t,a,t,e),!(l!==void 0&&(e.exports=l)))}()},function(e){'use strict';var t=String.fromCharCode;e.exports.lisdigit=function(e){return /^\d$/.test(t(e))},e.exports.lislalnum=function(e){return /^[_a-zA-Z0-9]$/.test(t(e))},e.exports.lislalpha=function(e){return /^[_a-zA-Z]$/.test(t(e))},e.exports.lisprint=function(e){return /^[\x20-\x7E]$/.test(t(e))},e.exports.lisspace=function(e){return /^\s$/.test(t(e))},e.exports.lisxdigit=function(e){return /^[0-9a-fA-F]$/.test(t(e))}},function(e,t,a){'use strict';const l=a(0),u=a(1),r=a(41),s=a(7),n=a(12),o=a(28),_=a(5),p=a(3),i=a(16),c=a(9),d=a(8),g=r.BinOpr,L=i.OpCodesI,A=n.Proto,T=o.RESERVED,f=r.UnOpr,h=u.char,x=function(e){return e===m.VCALL||e===m.VVARARG},O=function(e,t){return c.luaS_eqlngstr(e,t)};class U{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}}const m={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},E=function(e){return m.VLOCAL<=e&&e<=m.VINDEXED};class k{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(t){this.k=t.k,this.u=t.u,this.t=t.t,this.f=t.f}}class v{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}}class b{constructor(){this.idx=NaN}}class R{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}}class S{constructor(){this.arr=[],this.n=NaN,this.size=NaN}}const I=function(e,t){e.t.token=0,o.luaX_syntaxerror(e,t)},N=function(e,t){o.luaX_syntaxerror(e,p.luaO_pushfstring(e.L,u.to_luastring('%s expected',!0),o.luaX_token2str(e,t)))},P=function(e,t,a){let l=e.ls.L,s=e.f.linedefined,n=0===s?u.to_luastring('main function',!0):p.luaO_pushfstring(l,u.to_luastring('function at line %d',!0),s),r=p.luaO_pushfstring(l,u.to_luastring('too many %s (limit is %d) in %s',!0),a,t,n);o.luaX_syntaxerror(e.ls,r)},M=function(e,t,a,l){t>a&&P(e,a,l)},y=function(e,t){return!(e.t.token!==t)&&(o.luaX_next(e),!0)},C=function(e,t){e.t.token!==t&&N(e,t)},D=function(e,t){C(e,t),o.luaX_next(e)},K=function(e,t,a){t||o.luaX_syntaxerror(e,a)},B=function(e,t,a,l){y(e,t)||(l===e.linenumber?N(e,t):o.luaX_syntaxerror(e,p.luaO_pushfstring(e.L,u.to_luastring('%s expected (to close %s at line %d)'),o.luaX_token2str(e,t),o.luaX_token2str(e,a),l)))},w=function(e){C(e,T.TK_NAME);let t=e.t.seminfo.ts;return o.luaX_next(e),t},G=function(t,e,a){t.f=t.t=r.NO_JUMP,t.k=e,t.u.info=a},V=function(t,a,e){G(a,m.VK,r.luaK_stringK(t.fs,e))},F=function(t,a){V(t,a,w(t))},X=function(e,t){let a=e.fs,l=a.f;return l.locvars[a.nlocvars]=new p.LocVar,l.locvars[a.nlocvars].varname=t,a.nlocvars++},j=function(e,t){let a=e.fs,l=e.dyd,s=X(e,t);M(a,l.actvar.n+1-a.firstlocal,200,u.to_luastring('local variables',!0)),l.actvar.arr[l.actvar.n]=new b,l.actvar.arr[l.actvar.n].idx=s,l.actvar.n++},H=function(e,t){j(e,o.luaX_newstring(e,u.to_luastring(t,!0)))},Y=function(e,t){let a=e.ls.dyd.actvar.arr[e.firstlocal+t].idx;return l(a<e.nlocvars),e.f.locvars[a]},z=function(e,t){let a=e.fs;for(a.nactvar+=t;t;t--)Y(a,a.nactvar-t).startpc=a.pc},Z=function(e,t){for(e.ls.dyd.actvar.n-=e.nactvar-t;e.nactvar>t;)Y(e,--e.nactvar).endpc=e.pc},J=function(e,t){let a=e.f.upvalues;for(let l=0;l<e.nups;l++)if(O(a[l].name,t))return l;return-1},q=function(e,t,a){let l=e.f;return M(e,e.nups+1,n.MAXUPVAL,u.to_luastring('upvalues',!0)),l.upvalues[e.nups]={instack:a.k===m.VLOCAL,idx:a.u.info,name:t},e.nups++},W=function(e,t){for(let a=e.nactvar-1;0<=a;a--)if(O(t,Y(e,a).varname))return a;return-1},Q=function(e,t){let a=e.bl;for(;a.nactvar>t;)a=a.previous;a.upval=1},$=function(e,t,a,l){if(null===e)G(a,m.VVOID,0);else{let u=W(e,t);if(0<=u)G(a,m.VLOCAL,u),l||Q(e,u);else{let l=J(e,t);if(0>l){if($(e.prev,t,a,0),a.k===m.VVOID)return;l=q(e,t,a)}G(a,m.VUPVAL,l)}}},ee=function(e,t){let a=w(e),u=e.fs;if($(u,a,t,1),t.k===m.VVOID){let s=new k;$(u,e.envn,t,1),l(t.k!==m.VVOID),V(e,s,a),r.luaK_indexed(u,t,s)}},te=function(t,a,l,u){let e=t.fs,s=a-l;if(x(u.k))s++,0>s&&(s=0),r.luaK_setreturns(e,u,s),1<s&&r.luaK_reserveregs(e,s-1);else if(u.k!==m.VVOID&&r.luaK_exp2nextreg(e,u),0<s){let t=e.freereg;r.luaK_reserveregs(e,s),r.luaK_nil(e,t,s)}l>a&&(t.fs.freereg-=l-a)},ae=function(e){let t=e.L;++t.nCcalls,M(e.fs,t.nCcalls,_.LUAI_MAXCCALLS,u.to_luastring('JS levels',!0))},le=function(e){return e.L.nCcalls--},ue=function(e,t,a){let s=e.fs,n=e.dyd.gt,o=n.arr[t];if(l(O(o.name,a.name)),o.nactvar<a.nactvar){let t=Y(s,o.nactvar).varname,a=p.luaO_pushfstring(e.L,u.to_luastring('<goto %s> at line %d jumps into the scope of local \'%s\''),o.name.getstr(),o.line,t.getstr());I(e,a)}r.luaK_patchlist(s,o.pc,a.pc);for(let l=t;l<n.n-1;l++)n.arr[l]=n.arr[l+1];n.n--},se=function(e,t){let a=e.fs.bl,l=e.dyd,u=l.gt.arr[t];for(let s=a.firstlabel,n;s<l.label.n;s++)if(n=l.label.arr[s],O(n.name,u.name))return u.nactvar>n.nactvar&&(a.upval||l.label.n>a.firstlabel)&&r.luaK_patchclose(e.fs,u.pc,n.nactvar),ue(e,t,n),!0;return!1},ne=function(e,t,a,l,u){let s=t.n;return t.arr[s]=new R,t.arr[s].name=a,t.arr[s].line=l,t.arr[s].nactvar=e.fs.nactvar,t.arr[s].pc=u,t.n=s+1,s},re=function(e,t){for(let a=e.dyd.gt,l=e.fs.bl.firstgoto;l<a.n;)O(a.arr[l].name,t.name)?ue(e,l,t):l++},oe=function(e,t){for(let a=t.firstgoto,l=e.ls.dyd.gt;a<l.n;){let u=l.arr[a];u.nactvar>t.nactvar&&(t.upval&&r.luaK_patchclose(e,u.pc,t.nactvar),u.nactvar=t.nactvar),se(e.ls,a)||a++}},_e=function(e,t,a){t.isloop=a,t.nactvar=e.nactvar,t.firstlabel=e.ls.dyd.label.n,t.firstgoto=e.ls.dyd.gt.n,t.upval=0,t.previous=e.bl,e.bl=t,l(e.freereg===e.nactvar)},ie=function(e){let t=c.luaS_newliteral(e.L,'break'),a=ne(e,e.dyd.label,t,0,e.fs.pc);re(e,e.dyd.label.arr[a])},pe=function(e,t){let a=o.isreserved(t.name)?'<%s> at line %d not inside a loop':'no visible label \'%s\' for <goto> at line %d';a=p.luaO_pushfstring(e.L,u.to_luastring(a),t.name.getstr(),t.line),I(e,a)},ce=function(e){let t=e.L,a=new A(t),l=e.fs,u=l.f;return u.p[l.np++]=a,a},de=function(e,t){let a=e.fs.prev;G(t,m.VRELOCABLE,r.luaK_codeABx(a,L.OP_CLOSURE,0,a.np-1)),r.luaK_exp2nextreg(a,t)},ge=function(e,t,a){t.prev=e.fs,t.ls=e,e.fs=t,t.pc=0,t.lasttarget=0,t.jpc=r.NO_JUMP,t.freereg=0,t.nk=0,t.np=0,t.nups=0,t.nlocvars=0,t.nactvar=0,t.firstlocal=e.dyd.actvar.n,t.bl=null;let l=new A(e.L);l=t.f,l.source=e.source,l.maxstacksize=2,_e(t,a,!1)},Le=function(e){let t=e.bl,a=e.ls;if(t.previous&&t.upval){let a=r.luaK_jump(e);r.luaK_patchclose(e,a,t.nactvar),r.luaK_patchtohere(e,a)}t.isloop&&ie(a),e.bl=t.previous,Z(e,t.nactvar),l(t.nactvar===e.nactvar),e.freereg=e.nactvar,a.dyd.label.n=t.firstlabel,t.previous?oe(e,t):t.firstgoto<a.dyd.gt.n&&pe(a,a.dyd.gt.arr[t.firstgoto])},fe=function(e){let t=e.fs;r.luaK_ret(t,0,0),Le(t),l(null===t.bl),e.fs=t.prev},Ae=function(e,t){switch(e.t.token){case T.TK_ELSE:case T.TK_ELSEIF:case T.TK_END:case T.TK_EOS:return!0;case T.TK_UNTIL:return t;default:return!1;}},Te=function(e){for(;!Ae(e,1);){if(e.t.token===T.TK_RETURN)return void it(e);it(e)}},he=function(e,t){let a=e.fs,l=new k;r.luaK_exp2anyregup(a,t),o.luaX_next(e),F(e,l),r.luaK_indexed(a,t,l)},xe=function(e,t){o.luaX_next(e),we(e,t),r.luaK_exp2val(e.fs,t),D(e,h[']'])};class Oe{constructor(){this.v=new k,this.t=new k,this.nh=NaN,this.na=NaN,this.tostore=NaN}}const Ue=function(e,t){let a=e.fs,l=e.fs.freereg,s=new k,n=new k;e.t.token===T.TK_NAME?(M(a,t.nh,_.MAX_INT,u.to_luastring('items in a constructor',!0)),F(e,s)):xe(e,s),t.nh++,D(e,h['=']);let o=r.luaK_exp2RK(a,s);we(e,n),r.luaK_codeABC(a,L.OP_SETTABLE,t.t.u.info,o,r.luaK_exp2RK(a,n)),a.freereg=l},me=function(e,t){t.v.k===m.VVOID||(r.luaK_exp2nextreg(e,t.v),t.v.k=m.VVOID,t.tostore===i.LFIELDS_PER_FLUSH&&(r.luaK_setlist(e,t.t.u.info,t.na,t.tostore),t.tostore=0))},Ee=function(e,t){0===t.tostore||(x(t.v.k)?(r.luaK_setmultret(e,t.v),r.luaK_setlist(e,t.t.u.info,t.na,u.LUA_MULTRET),t.na--):(t.v.k!==m.VVOID&&r.luaK_exp2nextreg(e,t.v),r.luaK_setlist(e,t.t.u.info,t.na,t.tostore)))},ve=function(e,t){we(e,t.v),M(e.fs,t.na,_.MAX_INT,u.to_luastring('items in a constructor',!0)),t.na++,t.tostore++},be=function(e,t){switch(e.t.token){case T.TK_NAME:{o.luaX_lookahead(e)===h['=']?Ue(e,t):ve(e,t);break}case h['[']:{Ue(e,t);break}default:{ve(e,t);break}}},ke=function(e,a){let t=e.fs,u=e.linenumber,s=r.luaK_codeABC(t,L.OP_NEWTABLE,0,0,0),n=new Oe;n.na=n.nh=n.tostore=0,n.t=a,G(a,m.VRELOCABLE,s),G(n.v,m.VVOID,0),r.luaK_exp2nextreg(e.fs,a),D(e,h['{']);do{if(l(n.v.k===m.VVOID||0<n.tostore),e.t.token===h['}'])break;me(t,n),be(e,n)}while(y(e,h[','])||y(e,h[';']));B(e,h['}'],h['{'],u),Ee(t,n),i.SETARG_B(t.f.code[s],p.luaO_int2fb(n.na)),i.SETARG_C(t.f.code[s],p.luaO_int2fb(n.nh))},Re=function(e){let t=e.fs,a=t.f,l=0;if(a.is_vararg=!1,e.t.token!==h[')'])do switch(e.t.token){case T.TK_NAME:{j(e,w(e)),l++;break}case T.TK_DOTS:{o.luaX_next(e),a.is_vararg=!0;break}default:o.luaX_syntaxerror(e,u.to_luastring('<name> or \'...\' expected',!0));}while(!a.is_vararg&&y(e,h[',']));z(e,l),a.numparams=t.nactvar,r.luaK_reserveregs(t,t.nactvar)},Se=function(t,a,e,l){let u=new v,s=new U;u.f=ce(t),u.f.linedefined=l,ge(t,u,s),D(t,h['(']),e&&(H(t,'self'),z(t,1)),Re(t),D(t,h[')']),Te(t),u.f.lastlinedefined=t.linenumber,B(t,T.TK_END,T.TK_FUNCTION,l),de(t,a),fe(t)},Ie=function(e,t){let a=1;for(we(e,t);y(e,h[',']);)r.luaK_exp2nextreg(e.fs,t),we(e,t),a++;return a},Ne=function(e,t,a){let s=e.fs,n=new k;switch(e.t.token){case h['(']:{o.luaX_next(e),e.t.token===h[')']?n.k=m.VVOID:(Ie(e,n),r.luaK_setmultret(s,n)),B(e,h[')'],h['('],a);break}case h['{']:{ke(e,n);break}case T.TK_STRING:{V(e,n,e.t.seminfo.ts),o.luaX_next(e);break}default:o.luaX_syntaxerror(e,u.to_luastring('function arguments expected',!0));}l(t.k===m.VNONRELOC);let _=t.u.info,i;x(n.k)?i=u.LUA_MULTRET:(n.k!==m.VVOID&&r.luaK_exp2nextreg(s,n),i=s.freereg-(_+1)),G(t,m.VCALL,r.luaK_codeABC(s,L.OP_CALL,_,i+1,2)),r.luaK_fixline(s,a),s.freereg=_+1},Pe=function(e,t){switch(e.t.token){case h['(']:{let a=e.linenumber;return o.luaX_next(e),we(e,t),B(e,h[')'],h['('],a),void r.luaK_dischargevars(e.fs,t)}case T.TK_NAME:return void ee(e,t);default:o.luaX_syntaxerror(e,u.to_luastring('unexpected symbol',!0));}},Me=function(e,t){let a=e.fs,l=e.linenumber;for(Pe(e,t);;)switch(e.t.token){case h['.']:{he(e,t);break}case h['[']:{let l=new k;r.luaK_exp2anyregup(a,t),xe(e,l),r.luaK_indexed(a,t,l);break}case h[':']:{let u=new k;o.luaX_next(e),F(e,u),r.luaK_self(a,t,u),Ne(e,t,l);break}case h['(']:case T.TK_STRING:case h['{']:{r.luaK_exp2nextreg(a,t),Ne(e,t,l);break}default:return;}},ye=function(e,t){switch(e.t.token){case T.TK_FLT:{G(t,m.VKFLT,0),t.u.nval=e.t.seminfo.r;break}case T.TK_INT:{G(t,m.VKINT,0),t.u.ival=e.t.seminfo.i;break}case T.TK_STRING:{V(e,t,e.t.seminfo.ts);break}case T.TK_NIL:{G(t,m.VNIL,0);break}case T.TK_TRUE:{G(t,m.VTRUE,0);break}case T.TK_FALSE:{G(t,m.VFALSE,0);break}case T.TK_DOTS:{let a=e.fs;K(e,a.f.is_vararg,u.to_luastring('cannot use \'...\' outside a vararg function',!0)),G(t,m.VVARARG,r.luaK_codeABC(a,L.OP_VARARG,0,1,0));break}case h['{']:return void ke(e,t);case T.TK_FUNCTION:return o.luaX_next(e),void Se(e,t,0,e.linenumber);default:return void Me(e,t);}o.luaX_next(e)},Ce=function(e){return e===T.TK_NOT?f.OPR_NOT:e===h['-']?f.OPR_MINUS:e===h['~']?f.OPR_BNOT:e===h['#']?f.OPR_LEN:f.OPR_NOUNOPR},De=function(e){return e===h['+']?g.OPR_ADD:e===h['-']?g.OPR_SUB:e===h['*']?g.OPR_MUL:e===h['%']?g.OPR_MOD:e===h['^']?g.OPR_POW:e===h['/']?g.OPR_DIV:e===T.TK_IDIV?g.OPR_IDIV:e===h['&']?g.OPR_BAND:e===h['|']?g.OPR_BOR:e===h['~']?g.OPR_BXOR:e===T.TK_SHL?g.OPR_SHL:e===T.TK_SHR?g.OPR_SHR:e===T.TK_CONCAT?g.OPR_CONCAT:e===T.TK_NE?g.OPR_NE:e===T.TK_EQ?g.OPR_EQ:e===h['<']?g.OPR_LT:e===T.TK_LE?g.OPR_LE:e===h['>']?g.OPR_GT:e===T.TK_GE?g.OPR_GE:e===T.TK_AND?g.OPR_AND:e===T.TK_OR?g.OPR_OR:g.OPR_NOBINOPR},Ke=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],Be=function(e,t,a){ae(e);let l=Ce(e.t.token);if(l!==f.OPR_NOUNOPR){let a=e.linenumber;o.luaX_next(e),Be(e,t,12),r.luaK_prefix(e.fs,l,t,a)}else ye(e,t);let u=De(e.t.token);for(;u!==g.OPR_NOBINOPR&&Ke[u].left>a;){let a=new k,l=e.linenumber;o.luaX_next(e),r.luaK_infix(e.fs,u,t);let s=Be(e,a,Ke[u].right);r.luaK_posfix(e.fs,u,t,a,l),u=s}return le(e),u},we=function(e,t){Be(e,t,0)},Ge=function(e){let t=e.fs,a=new U;_e(t,a,0),Te(e),Le(t)};class Ve{constructor(){this.prev=null,this.v=new k}}const Fe=function(e,t,a){let l=e.fs,u=l.freereg,s=!1;for(;t;t=t.prev)t.v.k===m.VINDEXED&&(t.v.u.ind.vt===a.k&&t.v.u.ind.t===a.u.info&&(s=!0,t.v.u.ind.vt=m.VLOCAL,t.v.u.ind.t=u),a.k===m.VLOCAL&&t.v.u.ind.idx===a.u.info&&(s=!0,t.v.u.ind.idx=u));if(s){let e=a.k===m.VLOCAL?L.OP_MOVE:L.OP_GETUPVAL;r.luaK_codeABC(l,e,u,a.u.info,0),r.luaK_reserveregs(l,1)}},Xe=function(t,a,l){let s=new k;if(K(t,E(a.v.k),u.to_luastring('syntax error',!0)),y(t,h[','])){let e=new Ve;e.prev=a,Me(t,e.v),e.v.k!==m.VINDEXED&&Fe(t,a,e.v),M(t.fs,l+t.L.nCcalls,_.LUAI_MAXCCALLS,u.to_luastring('JS levels',!0)),Xe(t,e,l+1)}else{D(t,h['=']);let e=Ie(t,s);if(e!==l)te(t,l,e,s);else return r.luaK_setoneret(t.fs,s),void r.luaK_storevar(t.fs,a.v,s)}G(s,m.VNONRELOC,t.fs.freereg-1),r.luaK_storevar(t.fs,a.v,s)},je=function(e){let t=new k;return we(e,t),t.k===m.VNIL&&(t.k=m.VFALSE),r.luaK_goiftrue(e.fs,t),t.f},He=function(e,t){let a=e.linenumber,l;y(e,T.TK_GOTO)?l=w(e):(o.luaX_next(e),l=c.luaS_newliteral(e.L,'break'));let u=ne(e,e.dyd.gt,l,a,t);se(e,u)},Ye=function(e,t,a){for(let l=e.bl.firstlabel;l<t.n;l++)if(O(a,t.arr[l].name)){let s=p.luaO_pushfstring(e.ls.L,u.to_luastring('label \'%s\' already defined on line %d',!0),a.getstr(),t.arr[l].line);I(e.ls,s)}},ze=function(e){for(;e.t.token===h[';']||e.t.token===T.TK_DBCOLON;)it(e)},Ze=function(e,t,a){let u=e.fs,s=e.dyd.label,n;Ye(u,s,t),D(e,T.TK_DBCOLON),n=ne(e,s,t,a,r.luaK_getlabel(u)),ze(e),Ae(e,0)&&(s.arr[n].nactvar=u.bl.nactvar),re(e,s.arr[n])},Je=function(e,t){let a=e.fs,l=new U;o.luaX_next(e);let u=r.luaK_getlabel(a),s=je(e);_e(a,l,1),D(e,T.TK_DO),Ge(e),r.luaK_jumpto(a,u),B(e,T.TK_END,T.TK_WHILE,t),Le(a),r.luaK_patchtohere(a,s)},qe=function(e,t){let a=e.fs,l=r.luaK_getlabel(a),u=new U,s=new U;_e(a,u,1),_e(a,s,0),o.luaX_next(e),Te(e),B(e,T.TK_UNTIL,T.TK_REPEAT,t);let n=je(e);s.upval&&r.luaK_patchclose(a,n,s.nactvar),Le(a),r.luaK_patchlist(a,n,l),Le(a)},We=function(t){let a=new k;we(t,a),r.luaK_exp2nextreg(t.fs,a),l(a.k===m.VNONRELOC);let e=a.u.info;return e},Qe=function(e,t,a,l,u){let s=new U,n=e.fs,o;z(e,3),D(e,T.TK_DO);let _=u?r.luaK_codeAsBx(n,L.OP_FORPREP,t,r.NO_JUMP):r.luaK_jump(n);_e(n,s,0),z(e,l),r.luaK_reserveregs(n,l),Ge(e),Le(n),r.luaK_patchtohere(n,_),u?o=r.luaK_codeAsBx(n,L.OP_FORLOOP,t,r.NO_JUMP):(r.luaK_codeABC(n,L.OP_TFORCALL,t,0,l),r.luaK_fixline(n,a),o=r.luaK_codeAsBx(n,L.OP_TFORLOOP,t+2,r.NO_JUMP)),r.luaK_patchlist(n,o,_+1),r.luaK_fixline(n,a)},$e=function(e,t,a){let l=e.fs,u=l.freereg;H(e,'(for index)'),H(e,'(for limit)'),H(e,'(for step)'),j(e,t),D(e,h['=']),We(e),D(e,h[',']),We(e),y(e,h[','])?We(e):(r.luaK_codek(l,l.freereg,r.luaK_intK(l,1)),r.luaK_reserveregs(l,1)),Qe(e,u,a,1,1)},et=function(t,a){let l=t.fs,u=new k,e=4,s=l.freereg;for(H(t,'(for generator)'),H(t,'(for state)'),H(t,'(for control)'),j(t,a);y(t,h[',']);)j(t,w(t)),e++;D(t,T.TK_IN);let n=t.linenumber;te(t,3,Ie(t,u),u),r.luaK_checkstack(l,3),Qe(t,s,n,e-3,0)},tt=function(e,t){let a=e.fs,l=new U;_e(a,l,1),o.luaX_next(e);let s=w(e);switch(e.t.token){case h['=']:$e(e,s,t);break;case h[',']:case T.TK_IN:et(e,s);break;default:o.luaX_syntaxerror(e,u.to_luastring('\'=\' or \'in\' expected',!0));}B(e,T.TK_END,T.TK_FOR,t),Le(a)},at=function(e,t){let a=new U,l=e.fs,u=new k,s;if(o.luaX_next(e),we(e,u),D(e,T.TK_THEN),e.t.token===T.TK_GOTO||e.t.token===T.TK_BREAK){for(r.luaK_goiffalse(e.fs,u),_e(l,a,!1),He(e,u.t);y(e,h[';']););if(Ae(e,0))return Le(l),t;s=r.luaK_jump(l)}else r.luaK_goiftrue(e.fs,u),_e(l,a,!1),s=u.f;return Te(e),Le(l),(e.t.token===T.TK_ELSE||e.t.token===T.TK_ELSEIF)&&(t=r.luaK_concat(l,t,r.luaK_jump(l))),r.luaK_patchtohere(l,s),t},lt=function(e,t){let a=e.fs,l=r.NO_JUMP;for(l=at(e,l);e.t.token===T.TK_ELSEIF;)l=at(e,l);y(e,T.TK_ELSE)&&Ge(e),B(e,T.TK_END,T.TK_IF,t),r.luaK_patchtohere(a,l)},ut=function(e){let t=new k,a=e.fs;j(e,w(e)),z(e,1),Se(e,t,0,e.linenumber),Y(a,t.u.info).startpc=a.pc},st=function(t){let a=0,l=new k,e;do j(t,w(t)),a++;while(y(t,h[',']));y(t,h['='])?e=Ie(t,l):(l.k=m.VVOID,e=0),te(t,a,e,l),z(t,a)},nt=function(e,t){let a=0;for(ee(e,t);e.t.token===h['.'];)he(e,t);return e.t.token===h[':']&&(a=1,he(e,t)),a},rt=function(e,t){let a=new k,l=new k;o.luaX_next(e);let u=nt(e,a);Se(e,l,u,t),r.luaK_storevar(e.fs,a,l),r.luaK_fixline(e.fs,t)},ot=function(e){let t=e.fs,a=new Ve;Me(e,a.v),e.t.token===h['=']||e.t.token===h[',']?(a.prev=null,Xe(e,a,1)):(K(e,a.v.k===m.VCALL,u.to_luastring('syntax error',!0)),i.SETARG_C(r.getinstruction(t,a.v),1))},_t=function(t){let a=t.fs,s=new k,e,n;Ae(t,1)||t.t.token===h[';']?e=n=0:(n=Ie(t,s),x(s.k)?(r.luaK_setmultret(a,s),s.k===m.VCALL&&1===n&&(i.SET_OPCODE(r.getinstruction(a,s),L.OP_TAILCALL),l(r.getinstruction(a,s).A===a.nactvar)),e=a.nactvar,n=u.LUA_MULTRET):1===n?e=r.luaK_exp2anyreg(a,s):(r.luaK_exp2nextreg(a,s),e=a.nactvar,l(n==a.freereg-e))),r.luaK_ret(a,e,n),y(t,h[';'])},it=function(e){let t=e.linenumber;switch(ae(e),e.t.token){case h[';']:{o.luaX_next(e);break}case T.TK_IF:{lt(e,t);break}case T.TK_WHILE:{Je(e,t);break}case T.TK_DO:{o.luaX_next(e),Ge(e),B(e,T.TK_END,T.TK_DO,t);break}case T.TK_FOR:{tt(e,t);break}case T.TK_REPEAT:{qe(e,t);break}case T.TK_FUNCTION:{rt(e,t);break}case T.TK_LOCAL:{o.luaX_next(e),y(e,T.TK_FUNCTION)?ut(e):st(e);break}case T.TK_DBCOLON:{o.luaX_next(e),Ze(e,w(e),t);break}case T.TK_RETURN:{o.luaX_next(e),_t(e);break}case T.TK_BREAK:case T.TK_GOTO:{He(e,r.luaK_jump(e.fs));break}default:{ot(e);break}}l(e.fs.f.maxstacksize>=e.fs.freereg&&e.fs.freereg>=e.fs.nactvar),e.fs.freereg=e.fs.nactvar,le(e)},pt=function(e,t){let a=new U,l=new k;ge(e,t,a),t.f.is_vararg=!0,G(l,m.VLOCAL,0),q(t,e.envn,l),o.luaX_next(e),Te(e),C(e,T.TK_EOS),fe(e)};e.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new S,this.label=new S}},e.exports.expkind=m,e.exports.expdesc=k,e.exports.luaY_parser=function(e,t,a,u,r,_){let i=new o.LexState,p=new v,g=n.luaF_newLclosure(e,1);return s.luaD_inctop(e),e.stack[e.top-1].setclLvalue(g),i.h=d.luaH_new(e),s.luaD_inctop(e),e.stack[e.top-1].sethvalue(i.h),p.f=g.p=new A(e),p.f.source=c.luaS_new(e,r),i.buff=a,i.dyd=u,u.actvar.n=u.gt.n=u.label.n=0,o.luaX_setinput(e,i,t,p.f.source,_),pt(i,p),l(!p.prev&&1===p.nups&&!i.fs),l(0===u.actvar.n&&0===u.gt.n&&0===u.label.n),delete e.stack[--e.top],g},e.exports.vkisinreg=function(e){return e===m.VNONRELOC||e===m.VLOCAL}},function(e,t,a){'use strict';const l=a(0),u=a(1),s=a(11),n=a(7),o=a(26),_=a(3),r=a(9),i=a(8),p=a(5),d=a(21),c=u.thread_status,g=u.char,L=257,f={TK_AND:L,TK_BREAK:L+1,TK_DO:L+2,TK_ELSE:L+3,TK_ELSEIF:L+4,TK_END:L+5,TK_FALSE:L+6,TK_FOR:L+7,TK_FUNCTION:L+8,TK_GOTO:L+9,TK_IF:L+10,TK_IN:L+11,TK_LOCAL:L+12,TK_NIL:L+13,TK_NOT:L+14,TK_OR:L+15,TK_REPEAT:L+16,TK_RETURN:L+17,TK_THEN:L+18,TK_TRUE:L+19,TK_UNTIL:L+20,TK_WHILE:L+21,TK_IDIV:L+22,TK_CONCAT:L+23,TK_DOTS:L+24,TK_EQ:L+25,TK_GE:L+26,TK_LE:L+27,TK_NE:L+28,TK_SHL:L+29,TK_SHR:L+30,TK_DBCOLON:L+31,TK_EOS:L+32,TK_FLT:L+33,TK_INT:L+34,TK_NAME:L+35,TK_STRING:L+36},A=f,T=['and','break','do','else','elseif','end','false','for','function','goto','if','in','local','nil','not','or','repeat','return','then','true','until','while','//','..','...','==','>=','<=','~=','<<','>>','::','<eof>','<number>','<integer>','<name>','<string>'];class h{constructor(){this.r=NaN,this.i=NaN,this.ts=null}}class x{constructor(){this.token=NaN,this.seminfo=new h}}const O=function(e,t){let a=e.buff;a.n+1>a.buffer.length&&a.buffer.length>=p.MAX_INT/2&&P(e,u.to_luastring('lexical element too long',!0),0),a.buffer[a.n++]=0>t?255+t+1:t},U=function(e,t){if(t<L)return _.luaO_pushfstring(e.L,u.to_luastring('\'%c\'',!0),t);let a=T[t-L];return t<A.TK_EOS?_.luaO_pushfstring(e.L,u.to_luastring('\'%s\'',!0),u.to_luastring(a)):u.to_luastring(a)},m=function(e){return e.current===g['\n']||e.current===g['\r']},E=function(e){e.current=e.z.zgetc()},v=function(e){O(e,e.current),E(e)},b=function(e,t){let a=e.L,s=r.luaS_new(a,t),n=i.luaH_set(a,e.h,new _.TValue(u.CT.LUA_TLNGSTR,s));if(n.ttisnil())n.setbvalue(!0);else{let t=e.h.strong.get(r.luaS_hashlongstr(s));l(t.value==n),s=t.key.tsvalue()}return s},k=function(e){let t=e.current;l(m(e)),E(e),m(e)&&e.current!==t&&E(e),++e.linenumber>=p.MAX_INT&&P(e,u.to_luastring('chunk has too many lines',!0),0)},R=function(e,t){return!(e.current!==t.charCodeAt(0))&&(E(e),!0)},S=function(e,t){return(e.current===t[0].charCodeAt(0)||e.current===t[1].charCodeAt(0))&&(v(e),!0)},I=function(e,t){let a='Ee',s=e.current;for(l(o.lisdigit(e.current)),v(e),s===g[0]&&S(e,'xX')&&(a='Pp');;)if(S(e,a)&&S(e,'-+'),o.lisxdigit(e.current))v(e);else if(e.current===g['.'])v(e);else break;let n=_.luaO_str2num(e.buff.buffer);return!1===n&&P(e,u.to_luastring('malformed number',!0),A.TK_FLT),n.ttisinteger()?(t.i=n.value,A.TK_INT):(l(n.ttisfloat()),t.r=n.value,A.TK_FLT)},N=function(e,t){return t===A.TK_NAME||t===A.TK_STRING||t===A.TK_FLT||t===A.TK_INT?_.luaO_pushfstring(e.L,u.to_luastring('\'%s\'',!0),e.buff.buffer):U(e,t)},P=function(e,t,a){t=s.luaG_addinfo(e.L,t,e.source,e.linenumber),a&&_.luaO_pushfstring(e.L,u.to_luastring('%s near %s'),t,N(e,a)),n.luaD_throw(e.L,c.LUA_ERRSYNTAX)},M=function(e){let t=0,a=e.current;for(l(a===g['[']||a===g[']']),v(e);e.current===g['='];)v(e),t++;return e.current===a?t:-t-1},y=function(e,t,a){let l=e.linenumber;v(e),m(e)&&k(e);for(let s=!1;!s;)switch(e.current){case d.EOZ:{let a=t?'string':'comment',s=`unfinished long ${a} (starting at line ${l})`;P(e,u.to_luastring(s),A.TK_EOS);break}case g[']']:{M(e)===a&&(v(e),s=!0);break}case g['\n']:case g['\r']:{O(e,g['\n']),k(e),t||d.luaZ_resetbuffer(e.buff);break}default:t?v(e):E(e);}t&&(t.ts=b(e,e.buff.buffer.slice(2+a,2+a-2*(2+a))))},C=function(e,t,a){t||(e.current!==d.EOZ&&v(e),P(e,a,A.TK_STRING))},D=function(e){return v(e),C(e,o.lisxdigit(e.current),u.to_luastring('hexadecimal digit expected',!0)),_.luaO_hexavalue(e.current)},K=function(e){let t=D(e);return t=(t<<4)+D(e),d.luaZ_buffremove(e.buff,2),t},B=function(e){let t=4;v(e),C(e,e.current===g['{'],u.to_luastring('missing \'{\'',!0));let a=D(e);for(v(e);o.lisxdigit(e.current);)t++,a=(a<<4)+_.luaO_hexavalue(e.current),C(e,1114111>=a,u.to_luastring('UTF-8 value too large',!0)),v(e);return C(e,e.current===g['}'],u.to_luastring('missing \'}\'',!0)),E(e),d.luaZ_buffremove(e.buff,t),a},w=function(e){let t=_.luaO_utf8esc(B(e)),a=t.buff;for(let l=t.n;0<l;l--)O(e,a[_.UTF8BUFFSZ-l])},G=function(e){let t=0,a;for(a=0;3>a&&o.lisdigit(e.current);a++)t=10*t+e.current-g[0],v(e);return C(e,255>=t,u.to_luastring('decimal escape too large',!0)),d.luaZ_buffremove(e.buff,a),t},V=function(e,t,a){for(v(e);e.current!==t;)switch(e.current){case d.EOZ:P(e,u.to_luastring('unfinished string',!0),A.TK_EOS);break;case g['\n']:case g['\r']:P(e,u.to_luastring('unfinished string',!0),A.TK_STRING);break;case g['\\']:{v(e);let t,a;switch(e.current){case g.a:a=7,t='read_save';break;case g.b:a=g['\b'],t='read_save';break;case g.f:a=g['\f'],t='read_save';break;case g.n:a=g['\n'],t='read_save';break;case g.r:a=g['\r'],t='read_save';break;case g.t:a=g['\t'],t='read_save';break;case g.v:a=g['\x0B'],t='read_save';break;case g.x:a=K(e),t='read_save';break;case g.u:w(e),t='no_save';break;case g['\n']:case g['\r']:k(e),a=g['\n'],t='only_save';break;case g['\\']:case g['"']:case g['\'']:a=e.current,t='read_save';break;case d.EOZ:t='no_save';break;case g.z:{for(d.luaZ_buffremove(e.buff,1),E(e);o.lisspace(e.current);)m(e)?k(e):E(e);t='no_save';break}default:{C(e,o.lisdigit(e.current),u.to_luastring('invalid escape sequence',!0)),a=G(e),t='only_save';break}}'read_save'===t&&E(e),('read_save'===t||'only_save'===t)&&(d.luaZ_buffremove(e.buff,1),O(e,a));break}default:v(e);}v(e),a.ts=b(e,e.buff.buffer.slice(1,e.buff.n-1))},F=Object.create(null);T.forEach((t,e)=>F[r.luaS_hash(u.to_luastring(t))]=e);const X=function(e,t){for(d.luaZ_resetbuffer(e.buff);;)switch(l('number'==typeof e.current),e.current){case g['\n']:case g['\r']:{k(e);break}case g[' ']:case g['\f']:case g['\t']:case g['\x0B']:{E(e);break}case g['-']:{if(E(e),e.current!==g['-'])return g['-'];if(E(e),e.current===g['[']){let t=M(e);if(d.luaZ_resetbuffer(e.buff),0<=t){y(e,null,t),d.luaZ_resetbuffer(e.buff);break}}for(;!m(e)&&e.current!==d.EOZ;)E(e);break}case g['[']:{let a=M(e);return 0<=a?(y(e,t,a),A.TK_STRING):(-1!==a&&P(e,u.to_luastring('invalid long string delimiter',!0),A.TK_STRING),g['['])}case g['=']:return E(e),R(e,'=')?A.TK_EQ:g['='];case g['<']:return E(e),R(e,'=')?A.TK_LE:R(e,'<')?A.TK_SHL:g['<'];case g['>']:return E(e),R(e,'=')?A.TK_GE:R(e,'>')?A.TK_SHR:g['>'];case g['/']:return E(e),R(e,'/')?A.TK_IDIV:g['/'];case g['~']:return E(e),R(e,'=')?A.TK_NE:g['~'];case g[':']:return E(e),R(e,':')?A.TK_DBCOLON:g[':'];case g['"']:case g['\'']:return V(e,e.current,t),A.TK_STRING;case g['.']:return v(e),R(e,'.')?R(e,'.')?A.TK_DOTS:A.TK_CONCAT:o.lisdigit(e.current)?I(e,t):g['.'];case g[0]:case g[1]:case g[2]:case g[3]:case g[4]:case g[5]:case g[6]:case g[7]:case g[8]:case g[9]:return I(e,t);case d.EOZ:return A.TK_EOS;default:{if(o.lislalpha(e.current)){do v(e);while(o.lislalnum(e.current));let a=b(e,e.buff.buffer);t.ts=a;let l=F[r.luaS_hashlongstr(a)];return void 0!==l&&22>=l?l+L:A.TK_NAME}let a=e.current;return E(e),a}}};e.exports.FIRST_RESERVED=L,e.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new x,this.lookahead=new x,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},e.exports.RESERVED=f,e.exports.isreserved=function(e){let t=F[r.luaS_hashlongstr(e)];return void 0!==t&&22>=t},e.exports.luaX_lookahead=function(e){return l(e.lookahead.token===A.TK_EOS),e.lookahead.token=X(e,e.lookahead.seminfo),e.lookahead.token},e.exports.luaX_newstring=b,e.exports.luaX_next=function(e){e.lastline=e.linenumber,e.lookahead.token===A.TK_EOS?e.t.token=X(e,e.t.seminfo):(e.t.token=e.lookahead.token,e.t.seminfo.i=e.lookahead.seminfo.i,e.t.seminfo.r=e.lookahead.seminfo.r,e.t.seminfo.ts=e.lookahead.seminfo.ts,e.lookahead.token=A.TK_EOS)},e.exports.luaX_setinput=function(e,t,a,l,u){t.t={token:0,seminfo:new h},t.L=e,t.current=u,t.lookahead={token:A.TK_EOS,seminfo:new h},t.z=a,t.fs=null,t.linenumber=1,t.lastline=1,t.source=l,t.envn=r.luaS_newliteral(e,'_ENV')},e.exports.luaX_syntaxerror=function(e,t){P(e,t,e.t.token)},e.exports.luaX_token2str=U,e.exports.luaX_tokens=T},function(e,t,a){'use strict';const l=a(2),u=a(44),s='_'+l.LUA_VERSION_MAJOR+'_'+l.LUA_VERSION_MINOR;e.exports.LUA_VERSUFFIX=s;e.exports.LUA_COLIBNAME='coroutine',e.exports.luaopen_coroutine=a(30).luaopen_coroutine;e.exports.LUA_TABLIBNAME='table',e.exports.luaopen_table=a(33).luaopen_table;e.exports.LUA_OSLIBNAME='os',e.exports.luaopen_os=a(36).luaopen_os;e.exports.LUA_STRLIBNAME='string',e.exports.luaopen_string=a(32).luaopen_string;e.exports.LUA_UTF8LIBNAME='utf8',e.exports.luaopen_utf8=a(34).luaopen_utf8;e.exports.LUA_BITLIBNAME='bit32';e.exports.LUA_MATHLIBNAME='math',e.exports.luaopen_math=a(31).luaopen_math;e.exports.LUA_DBLIBNAME='debug',e.exports.luaopen_debug=a(35).luaopen_debug;e.exports.LUA_LOADLIBNAME='package',e.exports.luaopen_package=a(37).luaopen_package,e.exports.luaL_openlibs=u.luaL_openlibs},function(e,t,a){'use strict';const l=a(2),u=a(6),s=function(e){let t=l.lua_tothread(e,1);return u.luaL_argcheck(e,t,1,l.to_luastring('thread expected',!0)),t},n=function(e,t,a){if(!l.lua_checkstack(t,a))return l.lua_pushliteral(e,'too many arguments to resume'),-1;if(l.lua_status(t)===l.LUA_OK&&0===l.lua_gettop(t))return l.lua_pushliteral(e,'cannot resume dead coroutine'),-1;l.lua_xmove(e,t,a);let u=l.lua_resume(t,e,a);if(u===l.LUA_OK||u===l.LUA_YIELD){let a=l.lua_gettop(t);return l.lua_checkstack(e,a+1)?(l.lua_xmove(t,e,a),a):(l.lua_pop(t,a),l.lua_pushliteral(e,'too many results to resume'),-1)}return l.lua_xmove(t,e,1),-1},r=function(e){let t=l.lua_tothread(e,l.lua_upvalueindex(1)),a=n(e,t,l.lua_gettop(e));return 0>a?(l.lua_type(e,-1)===l.LUA_TSTRING&&(u.luaL_where(e,1),l.lua_insert(e,-2),l.lua_concat(e,2)),l.lua_error(e)):a},o=function(e){u.luaL_checktype(e,1,l.LUA_TFUNCTION);let t=l.lua_newthread(e);return l.lua_pushvalue(e,1),l.lua_xmove(e,t,1),1},_={create:o,isyieldable:function(e){return l.lua_pushboolean(e,l.lua_isyieldable(e)),1},resume:function(e){let t=s(e),a=n(e,t,l.lua_gettop(e)-1);return 0>a?(l.lua_pushboolean(e,0),l.lua_insert(e,-2),2):(l.lua_pushboolean(e,1),l.lua_insert(e,-(a+1)),a+1)},running:function(e){return l.lua_pushboolean(e,l.lua_pushthread(e)),2},status:function(e){let t=s(e);if(e===t)l.lua_pushliteral(e,'running');else switch(l.lua_status(t)){case l.LUA_YIELD:l.lua_pushliteral(e,'suspended');break;case l.LUA_OK:{let a=new l.lua_Debug;0<l.lua_getstack(t,0,a)?l.lua_pushliteral(e,'normal'):0===l.lua_gettop(t)?l.lua_pushliteral(e,'dead'):l.lua_pushliteral(e,'suspended');break}default:l.lua_pushliteral(e,'dead');}return 1},wrap:function(e){return o(e),l.lua_pushcclosure(e,r,1),1},yield:function(e){return l.lua_yield(e,l.lua_gettop(e))}};e.exports.luaopen_coroutine=function(e){return u.luaL_newlib(e,_),1}},function(e,t,a){'use strict';var l=Math.PI,u=Math.log,s=Math.ceil,n=Math.abs,o=Math.floor;const r=a(50),_=a(2),i=a(6),p=a(5),c=a(10);var d=r();const g=function(e,t){let a=c.lua_numbertointeger(t);!1===a?_.lua_pushnumber(e,t):_.lua_pushinteger(e,a)},f={abs:function(e){if(_.lua_isinteger(e,1)){let t=_.lua_tointeger(e,1);0>t&&(t=0|-t),_.lua_pushinteger(e,t)}else _.lua_pushnumber(e,n(i.luaL_checknumber(e,1)));return 1},acos:function(e){return _.lua_pushnumber(e,Math.acos(i.luaL_checknumber(e,1))),1},asin:function(e){return _.lua_pushnumber(e,Math.asin(i.luaL_checknumber(e,1))),1},atan:function(e){let t=i.luaL_checknumber(e,1),a=i.luaL_optnumber(e,2,1);return _.lua_pushnumber(e,Math.atan2(t,a)),1},ceil:function(e){return _.lua_isinteger(e,1)?_.lua_settop(e,1):g(e,s(i.luaL_checknumber(e,1))),1},cos:function(e){return _.lua_pushnumber(e,Math.cos(i.luaL_checknumber(e,1))),1},deg:function(e){return _.lua_pushnumber(e,i.luaL_checknumber(e,1)*(180/l)),1},exp:function(e){return _.lua_pushnumber(e,Math.exp(i.luaL_checknumber(e,1))),1},floor:function(e){return _.lua_isinteger(e,1)?_.lua_settop(e,1):g(e,o(i.luaL_checknumber(e,1))),1},fmod:function(e){if(_.lua_isinteger(e,1)&&_.lua_isinteger(e,2)){let t=_.lua_tointeger(e,2);0===t?i.luaL_argerror(e,2,_.to_luastring('zero',!0)):_.lua_pushinteger(e,0|_.lua_tointeger(e,1)%t)}else{let t=i.luaL_checknumber(e,1),a=i.luaL_checknumber(e,2);_.lua_pushnumber(e,t%a)}return 1},log:function(e){let t=i.luaL_checknumber(e,1),a;if(_.lua_isnoneornil(e,2))a=u(t);else{let l=i.luaL_checknumber(e,2);a=2===l?Math.log2(t):10===l?Math.log10(t):u(t)/u(l)}return _.lua_pushnumber(e,a),1},max:function(e){let t=_.lua_gettop(e),a=1;i.luaL_argcheck(e,1<=t,1,_.to_luastring('value expected',!0));for(let l=2;l<=t;l++)_.lua_compare(e,a,l,_.LUA_OPLT)&&(a=l);return _.lua_pushvalue(e,a),1},min:function(e){let t=_.lua_gettop(e),a=1;i.luaL_argcheck(e,1<=t,1,_.to_luastring('value expected',!0));for(let l=2;l<=t;l++)_.lua_compare(e,l,a,_.LUA_OPLT)&&(a=l);return _.lua_pushvalue(e,a),1},modf:function(e){if(_.lua_isinteger(e,1))_.lua_settop(e,1),_.lua_pushnumber(e,0);else{let t=i.luaL_checknumber(e,1),a=0>t?s(t):o(t);g(e,a),_.lua_pushnumber(e,t===a?0:t-a)}return 2},rad:function(e){return _.lua_pushnumber(e,i.luaL_checknumber(e,1)*(l/180)),1},random:function(e){let t=d(),a,l;switch(_.lua_gettop(e)){case 0:return _.lua_pushnumber(e,t),1;case 1:{a=1,l=i.luaL_checkinteger(e,1);break}case 2:{a=i.luaL_checkinteger(e,1),l=i.luaL_checkinteger(e,2);break}default:return i.luaL_error(e,_.to_luastring('wrong number of arguments',!0));}return i.luaL_argcheck(e,a<=l,1,_.to_luastring('interval is empty',!0)),i.luaL_argcheck(e,0<=a||l<=p.MAX_INT+a,1,_.to_luastring('interval too large',!0)),t*=l-a+1,_.lua_pushinteger(e,o(t)+a),1},randomseed:function(e){return d=r(n(i.luaL_checknumber(e,1))),0},sin:function(e){return _.lua_pushnumber(e,Math.sin(i.luaL_checknumber(e,1))),1},sqrt:function(e){return _.lua_pushnumber(e,Math.sqrt(i.luaL_checknumber(e,1))),1},tan:function(e){return _.lua_pushnumber(e,Math.tan(i.luaL_checknumber(e,1))),1},tointeger:function(e){let t=_.lua_tointegerx(e,1);return!1===t?(i.luaL_checkany(e,1),_.lua_pushnil(e)):_.lua_pushinteger(e,t),1},type:function(e){return _.lua_type(e,1)===_.LUA_TNUMBER?_.lua_isinteger(e,1)?_.lua_pushliteral(e,'integer'):_.lua_pushliteral(e,'float'):(i.luaL_checkany(e,1),_.lua_pushnil(e)),1},ult:function(e){let t=i.luaL_checkinteger(e,1),a=i.luaL_checkinteger(e,2);return _.lua_pushboolean(e,0<=t?0>a||t<a:0>a&&t<a),1}};e.exports.luaopen_math=function(e){return i.luaL_newlib(e,f),_.lua_pushnumber(e,Math.PI),_.lua_setfield(e,-2,_.to_luastring('pi',!0)),_.lua_pushnumber(e,Infinity),_.lua_setfield(e,-2,_.to_luastring('huge',!0)),_.lua_pushinteger(e,p.MAX_INT),_.lua_setfield(e,-2,_.to_luastring('maxinteger',!0)),_.lua_pushinteger(e,p.MIN_INT),_.lua_setfield(e,-2,_.to_luastring('mininteger',!0)),1}},function(e,t,a){'use strict';var l=String.fromCharCode;const u=a(0),r=a(25).sprintf,_=a(6),c=a(2),s=a(10),o=a(5),n='%'.charCodeAt(0),i=2147483647,p=function(e){let t=e.indexOf(0);return-1<t?t:e.length},d=function(e,t){return 0<=e?e:0-e>t?0:t+e+1},g=function(e,t,a,l){return l.push(...t.slice(0,a)),0},f=s.LUA_NUMBER_FRMLEN.length+1,L=1,A=function(e,t,a){let l=Math.floor(a);return e[t]=10>l?l+48:l-10+97,a-l},T=function(t){if(Object.is(t,Infinity))return c.to_luastring('inf',!0).slice(0);if(Object.is(t,-Infinity))return c.to_luastring('-inf',!0).slice(0);if(Number.isNaN(t))return c.to_luastring('nan',!0).slice(0);if(0===t){let e=r(s.LUA_NUMBER_FMT+'x0p+0',t);return Object.is(t,-0)&&(e='-'+e),c.to_luastring(e)}let a=[],l=s.frexp(t),u=l[0],o=l[1],e=0;if(0>u&&(a[e++]=45,u=-u),a[e++]=48,a[e++]=120,u=A(a,e++,u*(1<<L)),o-=L,0<u){a[e++]=s.lua_getlocaledecpoint().charCodeAt(0);do u=A(a,e++,16*u);while(0<u)}let n=c.to_luastring(r('p%+d',o));return a.concat(n)},h=function(e,t,a){let u=T(a);if(t[f]===65)for(let e=0;e<u.length;e++)u[e]=l(u[e]).toUpperCase().charCodeAt(0);else 97!==t[f]&&_.luaL_error(e,c.to_luastring('modifiers for format \'%%a\'/\'%%A\' not implemented'));return u},x=[45,43,32,35,48],O=(t)=>97<=t&&t<=122||t>=65&&t<=90,U=(t)=>48<=t&&t<=57,m=(t)=>0<=t&&31>=t||127===t,E=(t)=>32<t&&127>t,v=(t)=>/^[a-z]$/.test(l(t)),b=(t)=>/^[A-Z]$/.test(l(t)),k=(t)=>/^[a-zA-Z0-9]$/.test(l(t)),R=(t)=>E(t)&&!k(t),S=(t)=>/^\s$/.test(l(t)),I=(t)=>/^[0-9A-Fa-f]$/.test(l(t)),N=function(e,t){for(let a=0;a<t.length;a++)e.push(t[a])},P=function(e,t){e.push(34);for(let a=t.length;a--;){if(t[0]===34||t[0]===92||t[0]===10)e.push(92),e.push(t[0]);else if(m(t[0])){let a=[];a=U(t[1])?c.to_luastring(r('\\%03d',t[0])):c.to_luastring(r('\\%d',t[0])),N(e,a)}else e.push(t[0]);t=t.slice(1)}e.push(34)},M=function(e){if(0>e.indexOf(46)){let t=s.lua_getlocaledecpoint().charCodeAt(0),a=e.indexOf(t);a&&(e[a]='.')}},y=function(e,t,a){switch(c.lua_type(e,a)){case c.LUA_TSTRING:{let l=c.lua_tostring(e,a);P(t,l,l.length);break}case c.LUA_TNUMBER:{if(!c.lua_isinteger(e,a)){let l=c.lua_tonumber(e,a);N(t,h(e,c.to_luastring(`%${s.LUA_INTEGER_FRMLEN}a`),l)),M(t)}else{let l=c.lua_tointeger(e,a),u=l===o.LUA_MININTEGER?'0x%'+s.LUA_INTEGER_FRMLEN+'x':s.LUA_INTEGER_FMT;N(t,c.to_luastring(r(u,l)))}break}case c.LUA_TNIL:case c.LUA_TBOOLEAN:{N(t,_.luaL_tolstring(e,a));break}default:_.luaL_argerror(e,a,c.to_luastring('value has no literal form',!0));}},C=function(e,t,a){let l=t;for(;0!==l[0]&&0<=x.indexOf(l[0]);)l=l.slice(1);t.length-l.length>=x.length&&_.luaL_error(e,c.to_luastring('invalid format (repeated flags)',!0)),U(l[0])&&(l=l.slice(1)),U(l[0])&&(l=l.slice(1)),l[0]===46&&(l=l.slice(1),U(l[0])&&(l=l.slice(1)),U(l[0])&&(l=l.slice(1))),U(l[0])&&_.luaL_error(e,c.to_luastring('invalid format (width or precision too long)',!0)),a[0]=37;for(let u=0;u<t.length-l.length+1;u++)a[u+1]=t[u];return{form:a,p:l}},D=function(e,t){let a=e.length,l=t.length,u=e[a-1];for(let l=0;l<t.length;l++)e[l+a-1]=t[l];return e[a+l-1]=u,e},K=0,B=16,w=4,G=8,V=(1<<G)-1;class F{constructor(e){this.L=e,this.islittle=!0,this.maxalign=1}}const X={Kint:0,Kuint:1,Kfloat:2,Kchar:3,Kstring:4,Kzstr:5,Kpadding:6,Kpaddalign:7,Knop:8},j=function(e){return 48<=e&&e<=57},H=function(e,t){if(e.off>=e.s.length||!j(e.s[e.off]))return t;let l=0;do l=10*l+(e.s[e.off++]-48);while(e.off<e.s.length&&j(e.s[e.off])&&l<=(i-9)/10);return l},Y=function(e,t,a){let l=H(t,a);return(l>B||0>=l)&&_.luaL_error(e.L,c.to_luastring('integral size (%d) out of limits [1,%d]'),l,B),l},z=function(e,t){let a={opt:NaN,size:NaN,opt:t.s[t.off++],size:0};switch(a.opt){case 98:return a.size=1,a.opt=X.Kint,a;case 66:return a.size=1,a.opt=X.Kuint,a;case 104:return a.size=2,a.opt=X.Kint,a;case 72:return a.size=2,a.opt=X.Kuint,a;case 108:return a.size=4,a.opt=X.Kint,a;case 76:return a.size=4,a.opt=X.Kuint,a;case 106:return a.size=4,a.opt=X.Kint,a;case 74:return a.size=4,a.opt=X.Kuint,a;case 84:return a.size=4,a.opt=X.Kuint,a;case 102:return a.size=4,a.opt=X.Kfloat,a;case 100:return a.size=8,a.opt=X.Kfloat,a;case 110:return a.size=8,a.opt=X.Kfloat,a;case 105:return a.size=Y(e,t,4),a.opt=X.Kint,a;case 73:return a.size=Y(e,t,4),a.opt=X.Kuint,a;case 115:return a.size=Y(e,t,4),a.opt=X.Kstring,a;case 99:return a.size=H(t,-1),-1===a.size&&_.luaL_error(e.L,c.to_luastring('missing size for format option \'c\'')),a.opt=X.Kchar,a;case 122:return a.opt=X.Kzstr,a;case 120:return a.size=1,a.opt=X.Kpadding,a;case 88:return a.opt=X.Kpaddalign,a;case 32:break;case 60:e.islittle=!0;break;case 62:e.islittle=!1;break;case 61:e.islittle=!0;break;case 33:e.maxalign=Y(e,t,8);break;default:_.luaL_error(e.L,c.to_luastring('invalid format option \'%c\''),a.opt);}return a.opt=X.Knop,a},Z=function(e,t,a){let l={opt:NaN,size:NaN,ntoalign:NaN},u=z(e,a);l.size=u.size,l.opt=u.opt;let s=l.size;if(l.opt===X.Kpaddalign)if(a.off>=a.s.length||0===a.s[a.off])_.luaL_argerror(e.L,1,c.to_luastring('invalid next option for option \'X\'',!0));else{let t=z(e,a);s=t.size,t=t.opt,(t===X.Kchar||0===s)&&_.luaL_argerror(e.L,1,c.to_luastring('invalid next option for option \'X\'',!0))}return 1>=s||l.opt===X.Kchar?l.ntoalign=0:(s>e.maxalign&&(s=e.maxalign),0!=(s&s-1)&&_.luaL_argerror(e.L,1,c.to_luastring('format asks for alignment not power of 2',!0)),l.ntoalign=s-(t&s-1)&s-1),l},J=function(e,t,a,l,u){let s=Array(l);s[a?0:l-1]=t&V;for(let n=1;n<l;n++)t>>=G,s[a?n:l-1-n]=t&V;if(u&&l>w)for(let e=w;e<l;e++)s[a?e:l-1-e]=V;e.push(...s)},q=function(e,t,a,l){let u=new DataView(new ArrayBuffer(l));4===l?u.setFloat32(0,t,a):u.setFloat64(0,t,a);for(let s=0;s<l;s++)e.push(u.getUint8(s,a))},W=function(e,t,a,l,u){let s=0,n=l<=w?l:w;for(let r=n-1;0<=r;r--)s<<=G,s|=t[a?r:l-1-r];if(l<w){if(u){let e=1<<l*G-1;s=(s^e)-e}}else if(l>w){let r=!u||0<=s?0:V;for(let u=n;u<l;u++)t[a?u:l-1-u]!==r&&_.luaL_error(e,c.to_luastring('%d-byte integer does not fit into Lua Integer'),l)}return s},Q=function(e,t,a,l){u(t.length>=l);let s=new DataView(new ArrayBuffer(l));for(let u=0;u<l;u++)s.setUint8(u,t[u],a);return 4==l?s.getFloat32(0,a):s.getFloat64(0,a)},$=-1,ee=-2,te=200,ae=[94,36,42,43,63,46,40,91,37,45];class le{constructor(e){this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=e,this.matchdepth=NaN,this.level=NaN,this.capture=[]}}const ue=function(e,t){return t-=49,0>t||t>=e.level||e.capture[t].len===$?_.luaL_error(e.L,c.to_luastring('invalid capture index %%%d'),t+1):t},se=function(e){let t=e.level;for(t--;0<=t;t--)if(e.capture[t].len===$)return t;return _.luaL_error(e.L,c.to_luastring('invalid pattern capture'))},ne=function(e,t){switch(e.p[t++]){case n:return t===e.p_end&&_.luaL_error(e.L,c.to_luastring('malformed pattern (ends with \'%%\')')),t+1;case 91:{e.p[t]===94&&t++;do t===e.p_end&&_.luaL_error(e.L,c.to_luastring('malformed pattern (missing \']\')')),e.p[t++]===n&&t<e.p_end&&t++;while(e.p[t]!==93);return t+1}default:return t;}},re=function(e,t){let a;switch(l(t).toLowerCase().charCodeAt(0)){case 97:a=O(e);break;case 99:a=m(e);break;case 100:a=U(e);break;case 103:a=E(e);break;case 108:a=v(e);break;case 112:a=R(e);break;case 115:a=S(e);break;case 117:a=b(e);break;case 119:a=k(e);break;case 120:a=I(e);break;case 122:a=0===e;break;default:return t===e;}return v(t)?a:!a},oe=function(e,t,a,l){let u=!0;for(94===e.p[a+1]&&(u=!1,a++);++a<l;)if(e.p[a]===n){if(a++,re(t,e.p[a]))return u;}else if(45===e.p[a+1]&&a+2<l){if(a+=2,e.p[a-2]<=t&&t<=e.p[a])return u;}else if(e.p[a]===t)return u;return!u},_e=function(e,t,a,l){if(t>=e.src_end)return!1;let u=e.src[t];switch(e.p[a]){case 46:return!0;case n:return re(u,e.p[a+1]);case 91:return oe(e,u,a,l-1);default:return e.p[a]===u;}},ie=function(t,a,l){if(l>=t.p_end-1&&_.luaL_error(t.L,c.to_luastring('malformed pattern (missing arguments to \'%%b\'')),t.src[a]!==t.p[l])return null;for(let u=t.p[l],s=t.p[l+1],e=1;++a<t.src_end;)if(t.src[a]!==s)t.src[a]===u&&e++;else if(0==--e)return a+1;return null},pe=function(e,t,a,l){let u=0;for(;_e(e,t+u,a,l);)u++;for(;0<=u;){let a=Ae(e,t+u,l+1);if(a)return a;u--}return null},ce=function(e,t,a,l){for(;;){let u=Ae(e,t,l+1);if(null!==u)return u;if(_e(e,t,a,l))t++;else return null}},de=function(e,t,a,l){let u=e.level;u>=32&&_.luaL_error(e.L,c.to_luastring('too many captures',!0)),e.capture[u]=e.capture[u]?e.capture[u]:{},e.capture[u].init=t,e.capture[u].len=l,e.level=u+1;let s;return null===(s=Ae(e,t,a))&&e.level--,s},ge=function(e,t,a){let u=se(e);e.capture[u].len=t-e.capture[u].init;let l;return null===(l=Ae(e,t,a))&&(e.capture[u].len=$),l},Le=function(e,t,a,l,u){for(let s=t+u;t<s;t++,l++)if(e[t]!==a[l])return!1;return!0},fe=function(e,t,a){a=ue(e,a);let l=e.capture[a].len;return e.src_end-t>=l&&Le(e.src,e.capture[a].init,e.src,t,l)?t+l:null},Ae=function(e,t,a){let l=!1,u=!0;for(0==e.matchdepth--&&_.luaL_error(e.L,c.to_luastring('pattern too complex',!0));u||l;)if(u=!1,a!==e.p_end)switch(l?120:e.p[a]){case 40:{t=41===e.p[a+1]?de(e,t,a+2,ee):de(e,t,a+1,$);break}case 41:{t=ge(e,t,a+1);break}case 36:{if(a+1!==e.p_end){l=!0;break}t=0===e.src.slice(t).length?t:null;break}case n:{switch(e.p[a+1]){case 98:{t=ie(e,t,a+2),null!==t&&(a+=4,u=!0);break}case 102:{a+=2,91!==e.p[a]&&_.luaL_error(e.L,c.to_luastring('missing \'[\' after \'%%f\' in pattern'));let l=ne(e,a),s=t===e.src_init?0:e.src[t-1];if(!oe(e,s,a,l-1)&&oe(e,t===e.src_end?0:e.src[t],a,l-1)){a=l,u=!0;break}t=null;break}case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:{t=fe(e,t,e.p[a+1]),null!==t&&(a+=2,u=!0);break}default:l=!0;}break}default:{l=!1;let s=ne(e,a);if(!!_e(e,t,a,s))switch(e.p[s]){case 63:{let l;null===(l=Ae(e,t+1,s+1))?(a=s+1,u=!0):t=l;break}case 43:t++;case 42:t=pe(e,t,a,s);break;case 45:t=ce(e,t,a,s);break;default:t++,a=s,u=!0;}else if(42===e.p[s]||63===e.p[s]||45===e.p[s]){a=s+1,u=!0;break}else t=null;break}}return e.matchdepth++,t},Te=function(t,a,l,u){if(a>=t.level)0===a?c.lua_pushlstring(t.L,t.src.slice(l,u),u-l):_.luaL_error(t.L,c.to_luastring('invalid capture index %%%d'),a+1);else{let e=t.capture[a].len;e===$&&_.luaL_error(t.L,c.to_luastring('unfinished capture',!0)),e===ee?c.lua_pushinteger(t.L,t.capture[a].init-t.src_init+1):c.lua_pushlstring(t.L,t.src.slice(t.capture[a].init),e)}},he=function(t,a,l){let e=0===t.level&&t.src.slice(a)?1:t.level;_.luaL_checkstack(t.L,e,c.to_luastring('too many catpures',!0));for(let u=0;u<e;u++)Te(t,u,a,l);return e},xe=function(e,t){let a=0;do{let t=!1,l=e.slice(a);for(let e=0;e<ae.length;e++)if(-1<l.indexOf(ae[e])){t=!0;break}if(t)return!1;++a}while(a<=t);return!0},Oe=function(e,t,a,l,u,s){e.L=t,e.matchdepth=te,e.src=a,e.src_init=0,e.src_end=l,e.p=u,e.p_end=s},Ue=function(e){e.level=0,u(e.matchdepth===te)},me=function(e,t,a){var u=a>>>0,s=t.length,n=e.length+1-s;loop:for(;u<n;u++){for(let a=0;a<s;a++)if(e[u+a]!==t[a])continue loop;return u}return-1},Ee=function(e,t){let a=_.luaL_checkstring(e,1),l=_.luaL_checkstring(e,2),u=a.length,s=l.length,n=d(_.luaL_optinteger(e,3,1),u);if(1>n)n=1;else if(n>u+1)return c.lua_pushnil(e),1;if(t&&(c.lua_toboolean(e,4)||xe(l,s))){let t=me(a.slice(n-1),l,0);if(-1<t)return c.lua_pushinteger(e,n+t),c.lua_pushinteger(e,n+t+s-1),2}else{let r=new le(e),o=n-1,_=94===l[0];_&&(l=l.slice(1),s--),Oe(r,e,a,u,l,s);do{let a;if(Ue(r),null!==(a=Ae(r,o,0)))return t?(c.lua_pushinteger(e,o+1),c.lua_pushinteger(e,a),he(r,null,0)+2):he(r,o,a)}while(o++<r.src_end&&!_)}return c.lua_pushnil(e),1};class ve{constructor(){this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new le}}const be=function(e){let t=c.lua_touserdata(e,c.lua_upvalueindex(3));t.ms.L=e;for(let a=t.src;a<=t.ms.src_end;a++){Ue(t.ms);let l;if(null!==(l=Ae(t.ms,a,t.p))&&l!==t.lastmatch)return t.src=t.lastmatch=l,he(t.ms,a,l)}return 0},ke=function(t,a,u,s){let e=t.L,r=c.lua_tostring(e,3),o=r.length;for(let l=0;l<o;l++)r[l]===n?(l++,U(r[l])?48===r[l]?_.luaL_addlstring(a,t.src.slice(u),s-u):(Te(t,r[l]-49,u,s),_.luaL_tolstring(e,-1),c.lua_remove(e,-2),_.luaL_addvalue(a)):(r[l]!==n&&_.luaL_error(e,c.to_luastring('invalid use of \'%c\' in replacement string'),n),_.luaL_addchar(a,r[l]))):_.luaL_addchar(a,r[l])},Re=function(t,a,l,u,e){let s=t.L;switch(e){case c.LUA_TFUNCTION:{c.lua_pushvalue(s,3);let e=he(t,l,u);c.lua_call(s,e,1);break}case c.LUA_TTABLE:{Te(t,0,l,u),c.lua_gettable(s,3);break}default:return void ke(t,a,l,u);}c.lua_toboolean(s,-1)?!c.lua_isstring(s,-1)&&_.luaL_error(s,c.to_luastring('invalid replacement value (a %s)'),_.luaL_typename(s,-1)):(c.lua_pop(s,1),c.lua_pushlstring(s,t.src.slice(l,u),u-l)),_.luaL_addvalue(a)},Se={byte:function(e){let t=_.luaL_checkstring(e,1),a=t.length,l=d(_.luaL_optinteger(e,2,1),a),u=d(_.luaL_optinteger(e,3,l),a);if(1>l&&(l=1),u>a&&(u=a),l>u)return 0;if(u-l>=o.MAX_INT)return _.luaL_error(e,c.to_luastring('string slice too long',!0));let s=u-l+1;_.luaL_checkstack(e,s,c.to_luastring('string slice too long',!0));for(let a=0;a<s;a++)c.lua_pushinteger(e,t[l+a-1]);return s},char:function(e){let t=c.lua_gettop(e),a=[];for(let l=1,u;l<=t;l++)u=_.luaL_checkinteger(e,l),_.luaL_argcheck(e,0<=u&&255>=u,'value out of range'),a.push(u);return c.lua_pushstring(e,a),1},dump:function(e){let t=[],a=c.lua_toboolean(e,2);return(_.luaL_checktype(e,1,c.LUA_TFUNCTION),c.lua_settop(e,1),0!==c.lua_dump(e,g,t,a))?_.luaL_error(e,c.to_luastring('unable to dump given function')):(c.lua_pushstring(e,t),1)},find:function(e){return Ee(e,1)},format:function(e){let t=c.lua_gettop(e),a=1,u=_.luaL_checkstring(e,a),o=[];for(;0<u.length;)if(u[0]!==n)o.push(u[0]),u=u.slice(1);else if((u=u.slice(1))[0]===n)o.push(u[0]),u=u.slice(1);else{let i=[];++a>t&&_.luaL_argerror(e,a,c.to_luastring('no value',!0));let n=C(e,u,i);switch(u=n.p,i=n.form,l(u[0])){case'c':{u=u.slice(1),o.push(_.luaL_checkinteger(e,a));break}case'd':case'i':case'o':case'u':case'x':case'X':{u=u.slice(1);let t=_.luaL_checkinteger(e,a);i=D(i,s.LUA_INTEGER_FRMLEN.split('').map((t)=>t.charCodeAt(0))),N(o,c.to_luastring(r(l(...i),t)));break}case'a':case'A':{u=u.slice(1),i=D(i,s.LUA_INTEGER_FRMLEN.split('').map((t)=>t.charCodeAt(0))),N(o,h(e,i,_.luaL_checknumber(e,a)));break}case'e':case'E':case'f':case'g':case'G':{u=u.slice(1);let t=_.luaL_checknumber(e,a);i=D(i,s.LUA_INTEGER_FRMLEN.split('').map((t)=>t.charCodeAt(0))),N(o,c.to_luastring(r(l(...i),t)));break}case'q':{u=u.slice(1),y(e,o,a);break}case's':{u=u.slice(1);let t=_.luaL_tolstring(e,a);2>=i.length||0===i[2]?(N(o,t),c.lua_pop(e,1)):(_.luaL_argcheck(e,t.length===p(t),a,c.to_luastring('string contains zeros',!0)),0>i.indexOf(46)&&100<=t.length?(N(o,t),c.lua_pop(e,1)):(N(o,c.to_luastring(r(l(...i),c.to_jsstring(t)))),c.lua_pop(e,1)));break}default:return _.luaL_error(e,c.to_luastring('invalid option \'%%%c\' to \'format\''),u[0]);}}return c.lua_pushstring(e,o),1},gmatch:function(e){let t=_.luaL_checkstring(e,1),a=_.luaL_checkstring(e,2),l=t.length,u=a.length;c.lua_settop(e,2);let s=new ve;return c.lua_pushlightuserdata(e,s),Oe(s.ms,e,t,l,a,u),s.src=0,s.p=0,s.lastmatch=null,c.lua_pushcclosure(e,be,3),1},gsub:function(e){let t=_.luaL_checkstring(e,1),a=t.length,l=_.luaL_checkstring(e,2),u=l.length,s=null,r=c.lua_type(e,3),o=_.luaL_optinteger(e,4,a+1),i=94===l[0],p=0,n=new le(e),d=new _.luaL_Buffer;for(_.luaL_argcheck(e,r===c.LUA_TNUMBER||r===c.LUA_TSTRING||r===c.LUA_TFUNCTION||r===c.LUA_TTABLE,3,c.to_luastring('string/function/table expected',!0)),_.luaL_buffinit(e,d),i&&(l=l.slice(1),u--),Oe(n,e,t,a,l,u),t=0,l=0;p<o;){let a;if(Ue(n),null!==(a=Ae(n,t,l))&&a!==s)p++,Re(n,d,t,a,r),t=s=a;else if(t<n.src_end)_.luaL_addchar(d,n.src[t++]);else break;if(i)break}return _.luaL_addlstring(d,n.src.slice(t),n.src_end-t),_.luaL_pushresult(d),c.lua_pushinteger(e,p),2},len:function(e){return c.lua_pushinteger(e,_.luaL_checkstring(e,1).length),1},lower:function(e){return c.lua_pushstring(e,c.to_luastring(c.to_jsstring(_.luaL_checkstring(e,1)).toLowerCase())),1},match:function(e){return Ee(e,0)},pack:function(e){let t=[],a=new F(e),l={s:_.luaL_checkstring(e,1),off:0},u=1,n=0;for(c.lua_pushnil(e);l.off<l.s.length;){let s=Z(a,n,l),r=s.opt,o=s.size,i=s.ntoalign;for(n+=i+o;0<i--;)t.push(K);switch(u++,r){case X.Kint:{let l=_.luaL_checkinteger(e,u);if(o<w){let t=1<<8*o-1;_.luaL_argcheck(e,-t<=l&&l<t,u,c.to_luastring('integer overflow',!0))}J(t,l,a.islittle,o,0>l);break}case X.Kuint:{let l=_.luaL_checkinteger(e,u);o<w&&_.luaL_argcheck(e,l>>>0<1<<o*G,u,c.to_luastring('unsigned overflow',!0)),J(t,l>>>0,a.islittle,o,!1);break}case X.Kfloat:{let l=_.luaL_checknumber(e,u);q(t,l,a.islittle,o);break}case X.Kchar:{let a=_.luaL_checkstring(e,u),l=a.length;for(_.luaL_argcheck(e,l<=o,u,c.to_luastring('string longer than given size',!0)),t.push(...a);l++<o;)t.push(K);break}case X.Kstring:{let l=_.luaL_checkstring(e,u),s=l.length;_.luaL_argcheck(e,4<=o||s<1<<o*G,u,c.to_luastring('string length does not fit in given size',!0)),J(t,s,a.islittle,o,0),t.push(...l),n+=s;break}case X.Kzstr:{let a=_.luaL_checkstring(e,u),l=a.length;_.luaL_argcheck(e,0>a.indexOf(0),u,c.to_luastring('strings contains zeros',!0)),t.push(...a),t.push(0),n+=l+1;break}case X.Kpadding:t.push(K);case X.Kpaddalign:case X.Knop:u--;}}return c.lua_pushstring(e,t),1},packsize:function(e){let t=new F(e),a={s:_.luaL_checkstring(e,1),off:0},l=0;for(;a.off<a.s.length;){let u=Z(t,l,a),s=u.opt,n=u.size,r=u.ntoalign;switch(n+=r,_.luaL_argcheck(e,l<=i-n,1,c.to_luastring('format result too large',!0)),l+=n,s){case X.Kstring:case X.Kzstr:_.luaL_argerror(e,1,c.to_luastring('variable-length format',!0));default:}}return c.lua_pushinteger(e,l),1},rep:function(e){let t=_.luaL_checkstring(e,1),a=_.luaL_checkinteger(e,2),l=_.luaL_optstring(e,3,[]);if(t.length+l.length<t.length||t.length+l.length>i/a)return _.luaL_error(e,c.to_luastring('resulting string too large',!0));let u=[];for(let s=0;s<a-1;s++)u=u.concat(t.concat(l));return u=u.concat(t),c.lua_pushstring(e,0<a?u:[]),1},reverse:function(e){return c.lua_pushstring(e,_.luaL_checkstring(e,1).slice(0).reverse()),1},sub:function(e){let t=_.luaL_checkstring(e,1),a=t.length,l=d(_.luaL_checkinteger(e,2),a),u=d(_.luaL_optinteger(e,3,-1),a);return 1>l&&(l=1),u>a&&(u=a),l<=u?c.lua_pushstring(e,t.slice(l-1,l-1+(u-l+1))):c.lua_pushliteral(e,''),1},unpack:function(e){let t=new F(e),a={s:_.luaL_checkstring(e,1),off:0},l=_.luaL_checkstring(e,2),u=l.length,s=d(_.luaL_optinteger(e,3,1),u)-1,r=0;for(_.luaL_argcheck(e,s<=u&&0<=s,3,c.to_luastring('initial position out of string',!0));a.off<a.s.length;){let n=Z(t,s,a),o=n.opt,i=n.size,p=n.ntoalign;switch(s+p+i>u&&_.luaL_argerror(e,2,c.to_luastring('data string too short',!0)),s+=p,_.luaL_checkstack(e,2,c.to_luastring('too many results',!0)),r++,o){case X.Kint:case X.Kuint:{let a=W(e,l.slice(s),t.islittle,i,o===X.Kint);c.lua_pushinteger(e,a);break}case X.Kfloat:{let a=Q(e,l.slice(s),t.islittle,i);c.lua_pushnumber(e,a);break}case X.Kchar:{c.lua_pushstring(e,l.slice(s,s+i));break}case X.Kstring:{let a=W(e,l.slice(s),t.islittle,i,0);_.luaL_argcheck(e,s+a+i<=u,2,c.to_luastring('data string too short',!0)),c.lua_pushstring(e,l.slice(s+i,s+i+a)),s+=a;break}case X.Kzstr:{let t=l.slice(s).indexOf(0);c.lua_pushstring(e,l.slice(s,s+t)),s+=t+1;break}case X.Kpaddalign:case X.Kpadding:case X.Knop:r--;}s+=i}return c.lua_pushinteger(e,s+1),r+1},upper:function(e){return c.lua_pushstring(e,c.to_luastring(c.to_jsstring(_.luaL_checkstring(e,1)).toUpperCase())),1}},Ie=function(e){c.lua_createtable(e,0,1),c.lua_pushliteral(e,''),c.lua_pushvalue(e,-2),c.lua_setmetatable(e,-2),c.lua_pop(e,1),c.lua_pushvalue(e,-2),c.lua_setfield(e,-2,c.to_luastring('__index',!0)),c.lua_pop(e,1)};e.exports.luaopen_string=function(e){return _.luaL_newlib(e,Se),Ie(e),1}},function(e,t,a){'use strict';var l=Math.floor;const u=a(0),s=a(2),r=a(6),o=a(5),_=1,i=2,p=4,c=_|i,d=function(e,t,a){return s.lua_pushstring(e,t),s.lua_rawget(e,-a)!==s.LUA_TNIL},g=function(e,t,a){if(s.lua_type(e,t)!==s.LUA_TTABLE){let l=1;s.lua_getmetatable(e,t)&&(!(a&_)||d(e,s.to_luastring('__index',!0),++l))&&(!(a&i)||d(e,s.to_luastring('__newindex',!0),++l))&&(!(a&p)||d(e,s.to_luastring('__len',!0),++l))?s.lua_pop(e,l):r.luaL_checktype(e,t,s.LUA_TTABLE)}},f=function(e,t,a){return g(e,t,a|p),r.luaL_len(e,t)},n=function(e,t,a){s.lua_geti(e,1,a),s.lua_isstring(e,-1)||r.luaL_error(e,s.to_luastring('invalid value (%s) at index %d in table for \'concat\''),r.luaL_typename(e,-1),a),r.luaL_addvalue(t)},A=function(){return l(1*Math.random()<<32)},T=function(e,t,a){s.lua_seti(e,1,t),s.lua_seti(e,1,a)},h=function(e,t,a){if(s.lua_isnil(e,2))return s.lua_compare(e,t,a,s.LUA_OPLT);s.lua_pushvalue(e,2),s.lua_pushvalue(e,t-1),s.lua_pushvalue(e,a-2),s.lua_call(e,2,1);let l=s.lua_toboolean(e,-1);return s.lua_pop(e,1),l},x=function(e,t,a){for(let l=t,u=a-1;;){for(;s.lua_geti(e,1,++l),h(e,-1,-2);)l==a-1&&r.luaL_error(e,s.to_luastring('invalid order function for sorting')),s.lua_pop(e,1);for(;s.lua_geti(e,1,--u),h(e,-3,-1);)u<l&&r.luaL_error(e,s.to_luastring('invalid order function for sorting')),s.lua_pop(e,1);if(u<l)return s.lua_pop(e,1),T(e,a-1,l),l;T(e,l,u)}},O=function(e,t,a){let s=l((t-e)/4),n=a%(2*s)+(e+s);return u(e+s<=n&&n<=t-s),n},U=function(e,t,a,u){for(;t<a;){if(s.lua_geti(e,1,t),s.lua_geti(e,1,a),h(e,-1,-2)?T(e,t,a):s.lua_pop(e,2),1==a-t)return;let r;if(r=a-t<100||0===u?l((t+a)/2):O(t,a,u),s.lua_geti(e,1,r),s.lua_geti(e,1,t),h(e,-2,-1)?T(e,r,t):(s.lua_pop(e,1),s.lua_geti(e,1,a),h(e,-1,-2)?T(e,r,a):s.lua_pop(e,2)),2==a-t)return;s.lua_geti(e,1,r),s.lua_pushvalue(e,-1),s.lua_geti(e,1,a-1),T(e,r,a-1),r=x(e,t,a);let o;r-t<a-r?(U(e,t,r-1,u),o=r-t,t=r+1):(U(e,r+1,a,u),o=a-r,a=r-1),(a-t)/128>o&&(u=A())}},m={concat:function(e){let t=f(e,1,_),a=r.luaL_optlstring(e,2,[]),l=r.luaL_optinteger(e,3,1);t=r.luaL_optinteger(e,4,t);let u=new r.luaL_Buffer;for(r.luaL_buffinit(e,u);l<t;l++)n(e,u,l),r.luaL_addlstring(u,a);return l===t&&n(e,u,l),r.luaL_pushresult(u),1},insert:function(t){let a=f(t,1,c)+1,e;switch(s.lua_gettop(t)){case 2:e=a;break;case 3:{e=r.luaL_checkinteger(t,2),r.luaL_argcheck(t,1<=e&&e<=a,2,s.to_luastring('position out of bounds',!0));for(let l=a;l>e;l--)s.lua_geti(t,1,l-1),s.lua_seti(t,1,l);break}default:return r.luaL_error(t,s.to_luastring('wrong number of arguments to \'insert\'',!0));}return s.lua_seti(t,1,e),0},move:function(a){let l=r.luaL_checkinteger(a,2),u=r.luaL_checkinteger(a,3),e=r.luaL_checkinteger(a,4),t=s.lua_isnoneornil(a,5)?1:5;if(g(a,1,_),g(a,t,i),u>=l){r.luaL_argcheck(a,0<l||u<o.LUA_MAXINTEGER+l,3,s.to_luastring('too many elements to move',!0));let _=u-l+1;if(r.luaL_argcheck(a,e<=o.LUA_MAXINTEGER-_+1,4,s.to_luastring('destination wrap around',!0)),e>u||e<=l||1!=t&&1!==s.lua_compare(a,1,t,s.LUA_OPEQ))for(let u=0;u<_;u++)s.lua_geti(a,1,l+u),s.lua_seti(a,t,e+u);else for(let u=_-1;0<=u;u--)s.lua_geti(a,1,l+u),s.lua_seti(a,t,e+u)}return s.lua_pushvalue(a,t),1},pack:function(e){let t=s.lua_gettop(e);s.lua_createtable(e,t,1),s.lua_insert(e,1);for(let a=t;1<=a;a--)s.lua_seti(e,1,a);return s.lua_pushinteger(e,t),s.lua_setfield(e,1,[110]),1},remove:function(e){let t=f(e,1,c),a=r.luaL_optinteger(e,2,t);for(a!==t&&r.luaL_argcheck(e,1<=a&&a<=t+1,1,s.to_luastring('position out of bounds',!0)),s.lua_geti(e,1,a);a<t;a++)s.lua_geti(e,1,a+1),s.lua_seti(e,1,a);return s.lua_pushnil(e),s.lua_seti(e,1,a),1},sort:function(e){let t=f(e,1,c);return 1<t&&(r.luaL_argcheck(e,t<o.MAX_INT,1,s.to_luastring('array too big',!0)),!s.lua_isnoneornil(e,2)&&r.luaL_checktype(e,2,s.LUA_TFUNCTION),s.lua_settop(e,2),U(e,1,t,0)),0},unpack:function(t){let a=r.luaL_optinteger(t,2,1),l=r.luaL_opt(t,r.luaL_checkinteger,3,r.luaL_len(t,1));if(a>l)return 0;let e=l-a;if(e>=o.MAX_INT||!s.lua_checkstack(t,++e))return r.luaL_error(t,s.to_luastring('too many results to unpack',!0));for(;a<l;a++)s.lua_geti(t,1,a);return s.lua_geti(t,1,l),e}};e.exports.luaopen_table=function(e){return r.luaL_newlib(e,m),1}},function(e,t,a){'use strict';const l=a(2),u=a(6),r=a(5),n=1114111,o=function(e){return 128==(192&e)},_=function(e,t){return 0<=e?e:0-e>t?0:t+e+1},i=[255,127,2047,65535],p=function(e,t){let a=e[t],l=0;if(128>a)l=a;else{let u=0;for(;64&a;){let s=e[t+ ++u];if(128!=(192&s))return null;l=l<<6|63&s,a<<=1}if(l|=(127&a)<<5*u,3<u||l>n||l<=i[u])return null;t+=u}return{code:l,pos:t+1}},s=function(e,t){let a=u.luaL_checkinteger(e,t);u.luaL_argcheck(e,0<=a&&a<=n,t,l.to_luastring('value out of range',!0)),l.lua_pushstring(e,l.to_luastring(String.fromCodePoint(a)))},c=function(e){let t=u.luaL_checkstring(e,1),a=t.length,s=l.lua_tointeger(e,2)-1;if(0>s)s=0;else if(s<a)for(s++;o(t[s]);)s++;if(s>=a)return 0;let n=p(t,s);return null===n||o(t[n.pos])?u.luaL_error(e,l.to_luastring('invalid UTF-8 code',!0)):(l.lua_pushinteger(e,s+1),l.lua_pushinteger(e,n.code),2)},d={char:function(e){let t=l.lua_gettop(e);if(1===t)s(e,1);else{let a=new u.luaL_Buffer;u.luaL_buffinit(e,a);for(let l=1;l<=t;l++)s(e,l),u.luaL_addvalue(a);u.luaL_pushresult(a)}return 1},codepoint:function(e){let t=u.luaL_checkstring(e,1),a=_(u.luaL_optinteger(e,2,1),t.length),s=_(u.luaL_optinteger(e,3,a),t.length);if(u.luaL_argcheck(e,1<=a,2,l.to_luastring('out of range',!0)),u.luaL_argcheck(e,s<=t.length,3,l.to_luastring('out of range',!0)),a>s)return 0;if(s-a>=r.MAX_INT)return u.luaL_error(e,l.to_luastring('string slice too long',!0));let o=s-a+1;for(u.luaL_checkstack(e,o,l.to_luastring('string slice too long',!0)),o=0,a-=1;a<s;){let s=p(t,a);if(null===s)return u.luaL_error(e,l.to_luastring('invalid UTF-8 code',!0));l.lua_pushinteger(e,s.code),a=s.pos,o++}return o},codes:function(e){return u.luaL_checkstring(e,1),l.lua_pushcfunction(e,c),l.lua_pushvalue(e,1),l.lua_pushinteger(e,0),3},len:function(e){let t=0,a=u.luaL_checkstring(e,1),s=a.length,n=_(u.luaL_optinteger(e,2,1),s),r=_(u.luaL_optinteger(e,3,-1),s);for(u.luaL_argcheck(e,1<=n&&--n<=s,2,l.to_luastring('initial position out of string')),u.luaL_argcheck(e,--r<s,3,l.to_luastring('final position out of string'));n<=r;){let u=p(a,n);if(null===u)return l.lua_pushnil(e),l.lua_pushinteger(e,n+1),2;n=u.pos,t++}return l.lua_pushinteger(e,t),1},offset:function(e){let t=u.luaL_checkstring(e,1),a=u.luaL_checkinteger(e,2),s=0<=a?1:t.length+1;if(s=_(u.luaL_optinteger(e,3,s),t.length),u.luaL_argcheck(e,1<=s&&--s<=t.length,3,l.to_luastring('position out of range',!0)),0===a)for(;0<s&&o(t[s]);)s--;else if(o(t[s])&&u.luaL_error(e,l.to_luastring('initial position is a continuation byte',!0)),0>a)for(;0>a&&0<s;){do s--;while(0<s&&o(t[s]));a++}else for(a--;0<a&&s<t.length;){do s++;while(o(t[s]));a--}return 0===a?l.lua_pushinteger(e,s+1):l.lua_pushnil(e),1}},g=[91,0,45,127,194,45,244,93,91,128,45,191,93,42];e.exports.luaopen_utf8=function(e){return u.luaL_newlib(e,d),l.lua_pushstring(e,g),l.lua_setfield(e,-2,l.to_luastring('charpattern',!0)),1}},function(e,t,a){'use strict';const l=a(0),u=a(2),s=a(6),n=function(e,t,a){e===t||u.lua_checkstack(t,a)||s.luaL_error(e,u.to_luastring('stack overflow',!0))},r=function(e){return u.lua_isthread(e,1)?{arg:1,thread:u.lua_tothread(e,1)}:{arg:0,thread:e}},o=function(e,t,a){u.lua_pushstring(e,a),u.lua_setfield(e,-2,t)},_=function(e,t,a){u.lua_pushinteger(e,a),u.lua_setfield(e,-2,t)},i=function(e,t,a){u.lua_pushboolean(e,a),u.lua_setfield(e,-2,t)},p=function(e,t,a){e==t?u.lua_rotate(e,-2,1):u.lua_xmove(t,e,1),u.lua_setfield(e,-2,a)},c=function(e,t){let a=s.luaL_checkinteger(e,2);s.luaL_checktype(e,1,u.LUA_TFUNCTION);let l=t?u.lua_getupvalue(e,1,a):u.lua_setupvalue(e,1,a);return null===l?0:(u.lua_pushstring(e,l),u.lua_insert(e,-(t+1)),t+1)},d=function(e,t,a){let l=s.luaL_checkinteger(e,a);return s.luaL_checktype(e,t,u.LUA_TFUNCTION),s.luaL_argcheck(e,null!==u.lua_getupvalue(e,t,l),a,u.to_luastring('invalid upvalue index',!0)),l},g=u.to_luastring('__hooks__',!0),f=['call','return','line','count','tail call'].map((t)=>u.to_luastring(t)),A=function(e,t){u.lua_rawgetp(e,u.LUA_REGISTRYINDEX,g),u.lua_pushthread(e),u.lua_rawget(e,-2)===u.LUA_TFUNCTION&&(u.lua_pushstring(e,f[t.event]),0<=t.currentline?u.lua_pushinteger(e,t.currentline):u.lua_pushnil(e),l(u.lua_getinfo(e,[108,83],t)),u.lua_call(e,2,0))},T=function(e,t){let a=0;return-1<e.indexOf(99)&&(a|=u.LUA_MASKCALL),-1<e.indexOf(114)&&(a|=u.LUA_MASKRET),-1<e.indexOf(108)&&(a|=u.LUA_MASKLINE),0<t&&(a|=u.LUA_MASKCOUNT),a},h=function(e,t){let a=0;return e&u.LUA_MASKCALL&&(t[a++]=99),e&u.LUA_MASKRET&&(t[a++]=114),e&u.LUA_MASKLINE&&(t[a++]=108),t},x={gethook:function(e){let t=r(e),a=t.thread,l=u.lua_gethookmask(a),s=u.lua_gethook(a);return null===s?u.lua_pushnil(e):s===A?(u.lua_rawgetp(e,u.LUA_REGISTRYINDEX,g),n(e,a,1),u.lua_pushthread(a),u.lua_xmove(a,e,1),u.lua_rawget(e,-2),u.lua_remove(e,-2)):u.lua_pushliteral(e,'external hook'),u.lua_pushstring(e,h(l,[])),u.lua_pushinteger(e,u.lua_gethookcount(a)),3},getinfo:function(e){let t=new u.lua_Debug,a=r(e),l=a.arg,c=a.thread,d=s.luaL_optstring(e,l+2,u.to_luastring('flnStu',!0));if(n(e,c,3),u.lua_isfunction(e,l+1))d=u.lua_pushfstring(e,u.to_luastring('>%s'),d),u.lua_pushvalue(e,l+1),u.lua_xmove(e,c,1);else if(!u.lua_getstack(c,s.luaL_checkinteger(e,l+1),t))return u.lua_pushnil(e),1;return u.lua_getinfo(c,d,t)||s.luaL_argerror(e,l+2,u.to_luastring('invalid option',!0)),u.lua_newtable(e),-1<d.indexOf(83)&&(o(e,u.to_luastring('source',!0),t.source),o(e,u.to_luastring('short_src',!0),t.short_src),_(e,u.to_luastring('linedefined',!0),t.linedefined),_(e,u.to_luastring('lastlinedefined',!0),t.lastlinedefined),o(e,u.to_luastring('what',!0),t.what)),-1<d.indexOf(108)&&_(e,u.to_luastring('currentline',!0),t.currentline),-1<d.indexOf(117)&&(_(e,u.to_luastring('nups',!0),t.nups),_(e,u.to_luastring('nparams',!0),t.nparams),i(e,u.to_luastring('isvararg',!0),t.isvararg)),-1<d.indexOf(110)&&(o(e,u.to_luastring('name',!0),t.name),o(e,u.to_luastring('namewhat',!0),t.namewhat)),-1<d.indexOf(116)&&i(e,u.to_luastring('istailcall',!0),t.istailcall),-1<d.indexOf(76)&&p(e,c,u.to_luastring('activelines',!0)),-1<d.indexOf(102)&&p(e,c,u.to_luastring('func',!0)),1},getlocal:function(e){let t=r(e),a=t.thread,l=t.arg,o=new u.lua_Debug,_=s.luaL_checkinteger(e,l+2);if(u.lua_isfunction(e,l+1))return u.lua_pushvalue(e,l+1),u.lua_pushstring(e,u.lua_getlocal(e,null,_)),1;let i=s.luaL_checkinteger(e,l+1);if(!u.lua_getstack(a,i,o))return s.luaL_argerror(e,l+1,u.to_luastring('level out of range',!0));n(e,a,1);let p=u.lua_getlocal(a,o,_);return p?(u.lua_xmove(a,e,1),u.lua_pushstring(e,p),u.lua_rotate(e,-2,1),2):(u.lua_pushnil(e),1)},getmetatable:function(e){return s.luaL_checkany(e,1),u.lua_getmetatable(e,1)||u.lua_pushnil(e),1},getregistry:function(e){return u.lua_pushvalue(e,u.LUA_REGISTRYINDEX),1},getupvalue:function(e){return c(e,1)},getuservalue:function(e){return u.lua_type(e,1)===u.LUA_TUSERDATA?u.lua_getuservalue(e,1):u.lua_pushnil(e),1},sethook:function(e){let t=r(e),a=t.thread,l=t.arg,o,_,i;if(u.lua_isnoneornil(e,l+1))u.lua_settop(e,l+1),i=null,o=0,_=0;else{const t=s.luaL_checkstring(e,l+2);s.luaL_checktype(e,l+1,u.LUA_TFUNCTION),_=s.luaL_optinteger(e,l+3,0),i=A,o=T(t,_)}return u.lua_rawgetp(e,u.LUA_REGISTRYINDEX,g)===u.LUA_TNIL&&(u.lua_createtable(e,0,2),u.lua_pushvalue(e,-1),u.lua_rawsetp(e,u.LUA_REGISTRYINDEX,g),u.lua_pushstring(e,[107]),u.lua_setfield(e,-2,u.to_luastring('__mode',!0)),u.lua_pushvalue(e,-1),u.lua_setmetatable(e,-2)),n(e,a,1),u.lua_pushthread(a),u.lua_xmove(a,e,1),u.lua_pushvalue(e,l+1),u.lua_rawset(e,-3),u.lua_sethook(a,i,o,_),0},setlocal:function(e){let t=r(e),a=t.thread,l=t.arg,o=new u.lua_Debug,_=s.luaL_checkinteger(e,l+1),i=s.luaL_checkinteger(e,l+2);if(!u.lua_getstack(a,_,o))return s.luaL_argerror(e,l+1,'level out of range');s.luaL_checkany(e,l+3),u.lua_settop(e,l+3),n(e,a,1),u.lua_xmove(e,a,1);let p=u.lua_setlocal(a,o,i);return null===p&&u.lua_pop(a,1),u.lua_pushstring(e,p),1},setmetatable:function(e){const a=u.lua_type(e,2);return s.luaL_argcheck(e,a==u.LUA_TNIL||a==u.LUA_TTABLE,2,u.to_luastring('nil or table expected',!0)),u.lua_settop(e,2),u.lua_setmetatable(e,1),1},setupvalue:function(e){return s.luaL_checkany(e,3),c(e,0)},setuservalue:function(e){return s.luaL_checktype(e,1,u.LUA_TUSERDATA),s.luaL_checkany(e,2),u.lua_settop(e,2),u.lua_setuservalue(e,1),1},traceback:function(e){let t=r(e),a=t.thread,l=t.arg,n=u.lua_tostring(e,l+1);if(null===n&&!u.lua_isnoneornil(e,l+1))u.lua_pushvalue(e,l+1);else{let t=s.luaL_optinteger(e,l+2,e===a?1:0);s.luaL_traceback(e,a,n,t)}return 1},upvalueid:function(e){let t=d(e,1,2);return u.lua_pushlightuserdata(e,u.lua_upvalueid(e,1,t)),1},upvaluejoin:function(e){let t=d(e,1,2),a=d(e,3,4);return s.luaL_argcheck(e,!u.lua_iscfunction(e,1),1,u.to_luastring('Lua function expected',!0)),s.luaL_argcheck(e,!u.lua_iscfunction(e,3),3,u.to_luastring('Lua function expected',!0)),u.lua_upvaluejoin(e,1,t,3,a),0}};e.exports.luaopen_debug=function(e){return s.luaL_newlib(e,x),1}},function(e,t,a){'use strict';var l=Math.floor;(function(t){const u=a(2),n=a(6),s=a(5),r=a(59),o=u.to_luastring('aAbBcdHIjmMpSUwWxXyYZ%',!0),_=u.to_luastring('aAbBcCdDeFgGhHIjmMnprRStTuUVwWxXyYzZ%||EcECExEXEyEYOdOeOHOIOmOMOSOuOUOVOwOWOy',!0),i=u.to_luastring('aAbBcdHIjmMpSUwWxXyYzZ%||#c#x#d#H#I#j#m#M#S#U#w#W#y#Y',!0),p=function(e,t,a){u.lua_pushinteger(e,a),u.lua_setfield(e,-2,u.to_luastring(t,!0))},c=function(e,t,a){p(e,'sec',a?t.getUTCSeconds():t.getSeconds()),p(e,'min',a?t.getUTCMinutes():t.getMinutes()),p(e,'hour',a?t.getUTCHours():t.getHours()),p(e,'day',a?t.getUTCDate():t.getDate()),p(e,'month',a?t.getUTCMonth():t.getMonth()),p(e,'year',a?t.getUTCFullYear():t.getFullYear()),p(e,'wday',a?t.getUTCDay():t.getDay());let u=new Date;p(e,'yday',l((u-new Date(u.getFullYear(),0,0))/86400000))},d=s.MAX_INT/2,g=function(e,a,l,s){let r=u.lua_getfield(e,-1,u.to_luastring(a,!0)),t=u.lua_tointegerx(e,-1);if(!1===t){if(r!==u.LUA_TNIL)return n.luaL_error(e,u.to_luastring('field \'%s\' is not an integer'),a);if(0>l)return n.luaL_error(e,u.to_luastring('field \'%s\' missing in date table'),a);t=l}else{if(!(-d<=t&&t<=d))return n.luaL_error(e,u.to_luastring('field \'%s\' is out-of-bound'),a);t-=s}return u.lua_pop(e,1),t},f=function(e,t,a){for(let l=o,s=1;0<l.length&&s<=t.length;l=l.slice(s))if(l[0]===124)s++;else if(u.to_jsstring(t.slice(0,s))===u.to_jsstring(l.slice(0,s)))return a.push(...t.slice(0,s)),t.slice(s);n.luaL_argerror(e,1,u.lua_pushliteral(e,`invalid conversion specifier '%${t}'`,t))},A=function(e,a){let l=n.luaL_checkinteger(e,a);return l},T={date:function(e){let a=n.luaL_optlstring(e,1,'%c'),l=1e3*n.luaL_opt(e,A,2,new Date().getTime()/1e3),t=new Date(l),s=!1;if(33===a[0]&&(s=!0,a=a.slice(1)),null===t&&n.luaL_error(e,u.to_luastring('time result cannot be represented in this installation',!0)),'*t'===u.to_jsstring(a))u.lua_createtable(e,0,9),c(e,t,s);else{let l=[],s;for(;0<a.length;)s=[37],37===a[0]?(a=a.slice(1),a=f(e,a,s),l.push(...u.to_luastring(r(u.to_jsstring(s),t)))):(l.push(a[0]),a=a.slice(1));u.lua_pushstring(e,l)}return 1},difftime:function(e){let t=A(e,1),a=A(e,2);return u.lua_pushnumber(e,new Date(t)-new Date(a)),1},time:function(e){let a=new Date;return u.lua_isnoneornil(e,1)||(n.luaL_checktype(e,1,u.LUA_TTABLE),u.lua_settop(e,1),a.setSeconds(g(e,'sec',0,0)),a.setMinutes(g(e,'min',0,0)),a.setHours(g(e,'hour',12,0)),a.setDate(g(e,'day',-1,0)),a.setMonth(g(e,'month',-1,1)),a.setFullYear(g(e,'year',-1,0)),c(e,a)),u.lua_pushinteger(e,l(a/1e3)),1}};if(t&&t.exit&&t.env&&t.uptime){T.clock=function(e){return u.lua_pushnumber(e,t.uptime()),1},T.exit=function(e){let a;return a=u.lua_isboolean(e,1)?u.lua_toboolean(e,1)?0:1:n.luaL_optinteger(e,1,0),u.lua_toboolean(e,2)&&u.lua_close(e),e&&t.exit(a),0},T.getenv=function(e){return u.lua_pushliteral(e,t.env[u.to_jsstring(n.luaL_checkstring(e,1))]),1}}e.exports.luaopen_os=function(e){return n.luaL_newlib(e,T),1}}).call(t,a(19))},function(e,t,a){'use strict';(function(t){const u=a(2),l=a(6),s=[45],n=u.to_luastring('__CLIBS__',!0),r='LUA_PATH',o='LUA_CPATH',_=u.LUA_DIRSEP,i=u.LUA_DIRSEP,p=u.to_luastring('luaopen_'),c=u.to_luastring('_'),d='open',g=[1];let f=0?function(a,e){try{return e=u.to_jsstring(e),e.startsWith('.')&&(e=`${t.env.PWD}/${e}`),require(e)}catch(t){return u.lua_pushstring(a,u.to_luastring(t.message)),null}}:function(e,t){let a=new XMLHttpRequest;return a.open('GET',u.to_jsstring(t),!1),a.send(),200===a.status?eval(a.response):(u.lua_pushstring(e,u.to_luastring(`${a.status}: ${a.statusText}`)),null)};const A=function(e,t,a){let l=t[u.to_jsstring(a)];return l&&'function'==typeof l?l:(u.lua_pushfstring(e,u.to_luastring('undefined symbol: %s'),a),null)},T=function(e){u.lua_getfield(e,u.LUA_REGISTRYINDEX,u.to_luastring('LUA_NOENV'));let t=u.lua_toboolean(e,-1);return u.lua_pop(e,1),t};let h=function(e){let t=new XMLHttpRequest;return t.open('GET',u.to_jsstring(e),!1),t.send(),200===t.status};const x=1,O=2,U=function(e,t,a){let l=E(e,t);if(null===l){if(l=f(e,t,42===a[0]),null===l)return x;v(e,t,l)}if(42===a[0])return u.lua_pushboolean(e,1),0;let s=A(e,l,a);return null===s?O:(u.lua_pushcfunction(e,s),0)},L=function(e){let t=l.luaL_checkstring(e,1),a=l.luaL_checkstring(e,2),s=U(e,t,a);return 0===s?1:(u.lua_pushnil(e),u.lua_insert(e,-2),u.lua_pushliteral(e,s===x?d:'init'),3)},m=function(e,a,s,n){let r=u.lua_pushstring(e,u.to_luastring(`${s}${u.LUA_VERSUFFIX}`,!0)),o=t.env[r];o===void 0&&(o=t.env[s]),o===void 0||T(e)?u.lua_pushstring(e,u.to_luastring(n,!0)):(o=l.luaL_gsub(e,u.to_luastring(o),u.to_luastring(u.LUA_PATH_SEP+u.LUA_PATH_SEP,!0),u.to_luastring(u.LUA_PATH_SEP,!0).concat(g).concat(u.to_luastring(u.LUA_PATH_SEP,!0))),l.luaL_gsub(e,o,g,u.to_luastring(n)),u.lua_remove(e,-2)),u.lua_setfield(e,-3,a),u.lua_pop(e,1)},E=function(e,t){u.lua_rawgetp(e,u.LUA_REGISTRYINDEX,n),u.lua_getfield(e,-1,t);let a=u.lua_touserdata(e,-1);return u.lua_pop(e,2),a},v=function(e,t,a){u.lua_rawgetp(e,u.LUA_REGISTRYINDEX,n),u.lua_pushlightuserdata(e,a),u.lua_pushvalue(e,-1),u.lua_setfield(e,-3,t),u.lua_rawseti(e,-2,l.luaL_len(e,-2)+1),u.lua_pop(e,1)},b=function(e,t){for(;t[0]===u.LUA_PATH_SEP.charCodeAt(0);)t=t.slice(1);if(0===t.length)return null;let a=t.indexOf(u.LUA_PATH_SEP.charCodeAt(0));return 0>a&&(a=t.length),u.lua_pushlstring(e,t,a),t.slice(a)},k=function(e,t,a,s,n){let r=new l.luaL_Buffer;for(l.luaL_buffinit(e,r),0!==s[0]&&(t=l.luaL_gsub(e,t,s,n));null!==(a=b(e,a));){let a=l.luaL_gsub(e,u.lua_tostring(e,-1),u.to_luastring(u.LUA_PATH_MARK,!0),t);if(u.lua_remove(e,-2),h(a))return a;u.lua_pushfstring(e,u.to_luastring('\n\tno file \'%s\''),a),u.lua_remove(e,-2),l.luaL_addvalue(r)}return l.luaL_pushresult(r),null},R=function(e){let t=k(e,l.luaL_checkstring(e,1),l.luaL_checkstring(e,2),l.luaL_optstring(e,3,[46]),l.luaL_optstring(e,4,[u.LUA_DIRSEP.charCodeAt(0)]));return null===t?(u.lua_pushnil(e),u.lua_insert(e,-2),2):1},S=function(e,t,a,s){u.lua_getfield(e,u.lua_upvalueindex(1),a);let n=u.lua_tostring(e,-1);return null===n&&l.luaL_error(e,u.to_luastring('\'package.%s\' must be a string'),a),k(e,t,n,[46],s)},I=function(e,t,a){return t?(u.lua_pushstring(e,a),2):l.luaL_error(e,u.to_luastring('error loading module \'%s\' from file \'%s\':\n\t%s'),u.lua_tostring(e,1),a,u.lua_tostring(e,-1))},N=function(e){let t=l.luaL_checkstring(e,1),a=S(e,t,u.to_luastring('path',!0),u.to_luastring(i,!0));return null===a?1:I(e,l.luaL_loadfile(e,a)===u.LUA_OK,a)},P=function(e,t,a){let n;a=l.luaL_gsub(e,a,[46],c);let r=a.indexOf(s[0]);if(0<=r){n=u.lua_pushlstring(e,a,r),n=u.lua_pushfstring(e,u.to_luastring('%s%s'),p,n);let l=U(e,t,n);if(l!==O)return l;a=r+1}return n=u.lua_pushfstring(e,u.to_luastring('%s%s'),p,a),U(e,t,n)},M=function(e){let t=l.luaL_checkstring(e,1),a=S(e,t,u.to_luastring('cpath',!0),u.to_luastring(_,!0));return null===a?1:I(e,0===P(e,a,t),a)},y=function(e){let t=l.luaL_checkstring(e,1),a=t.indexOf(46),s;if(0>a)return 0;u.lua_pushlstring(e,t,a);let n=S(e,u.lua_tostring(e,-1),u.to_luastring('cpath',!0),u.to_luastring(_,!0));return null===n?1:0===(s=P(e,n,t))?(u.lua_pushstring(e,n),2):s==O?(u.lua_pushstring(e,u.to_luastring(`\n\tno module '${u.to_jsstring(t)}' in file '${u.to_jsstring(n)}'`)),1):I(e,0,n)},C=function(e){let t=l.luaL_checkstring(e,1);return u.lua_getfield(e,u.LUA_REGISTRYINDEX,u.to_luastring(l.LUA_PRELOAD_TABLE,!0)),u.lua_getfield(e,-1,t)===u.LUA_TNIL&&u.lua_pushliteral(e,`\n\tno field package.preload['${u.to_jsstring(t)}']`),1},D=function(e,t,a,s){let n=new l.luaL_Buffer;l.luaL_buffinit(e,n),u.lua_getfield(e,u.lua_upvalueindex(1),u.to_luastring('searchers',!0))!==u.LUA_TTABLE&&l.luaL_error(e,u.to_luastring('\'package.searchers\' must be a table'));return K(e,u.LUA_OK,{name:t,i:1,msg:n,ctx:a,k:s})},K=function(e,t,a){for(;;a.i++)if(t===u.LUA_OK?(u.lua_rawgeti(e,3,a.i)===u.LUA_TNIL&&(u.lua_pop(e,1),l.luaL_pushresult(a.msg),l.luaL_error(e,u.to_luastring('module \'%s\' not found:%s'),a.name,u.lua_tostring(e,-1))),u.lua_pushstring(e,a.name),u.lua_callk(e,1,2,a,K)):t=u.LUA_OK,u.lua_isfunction(e,-2))break;else u.lua_isstring(e,-2)?(u.lua_pop(e,1),l.luaL_addvalue(a.msg)):u.lua_pop(e,2);return a.k(e,u.LUA_OK,a.ctx)},B=function(e){let t=l.luaL_checkstring(e,1);if(u.lua_settop(e,1),u.lua_getfield(e,u.LUA_REGISTRYINDEX,u.to_luastring(l.LUA_LOADED_TABLE,!0)),u.lua_getfield(e,2,t),u.lua_toboolean(e,-1))return 1;u.lua_pop(e,1);return D(e,t,t,w)},w=function(e,t,a){return u.lua_pushstring(e,a),u.lua_insert(e,-2),u.lua_callk(e,2,1,a,G),G(e,u.LUA_OK,a)},G=function(e,t,a){let l=a;return u.lua_isnil(e,-1)||u.lua_setfield(e,2,l),u.lua_getfield(e,2,l)==u.LUA_TNIL&&(u.lua_pushboolean(e,1),u.lua_pushvalue(e,-1),u.lua_setfield(e,2,l)),1},V={loadlib:L,searchpath:R},F={require:B},X=function(e){let t=[C,N,M,y,null];u.lua_createtable(e);for(let a=0;t[a];a++)u.lua_pushvalue(e,-2),u.lua_pushcclosure(e,t[a],1),u.lua_rawseti(e,-2,a+1);u.lua_setfield(e,-2,u.to_luastring('searchers',!0))},j=function(e){u.lua_newtable(e),u.lua_createtable(e,0,1),u.lua_setmetatable(e,-2),u.lua_rawsetp(e,u.LUA_REGISTRYINDEX,n)},H=function(e){return j(e),l.luaL_newlib(e,V),X(e),m(e,u.to_luastring('path',!0),r,u.LUA_PATH_DEFAULT),m(e,u.to_luastring('cpath',!0),o,u.LUA_CPATH_DEFAULT),u.lua_pushliteral(e,u.LUA_DIRSEP+'\n'+u.LUA_PATH_SEP+'\n'+u.LUA_PATH_MARK+'\n'+u.LUA_EXEC_DIR+'\n'+s+'\n'),u.lua_setfield(e,-2,u.to_luastring('config',!0)),l.luaL_getsubtable(e,u.LUA_REGISTRYINDEX,u.to_luastring(l.LUA_LOADED_TABLE,!0)),u.lua_setfield(e,-2,u.to_luastring('loaded',!0)),l.luaL_getsubtable(e,u.LUA_REGISTRYINDEX,u.to_luastring(l.LUA_PRELOAD_TABLE,!0)),u.lua_setfield(e,-2,u.to_luastring('preload',!0)),u.lua_pushglobaltable(e),u.lua_pushvalue(e,-2),l.luaL_setfuncs(e,F,1),u.lua_pop(e,1),1};e.exports.luaopen_package=H}).call(t,a(19))},function(e,t,a){'use strict';window.WEB=!0;const l=a(23),u=l.lua,s=l.lauxlib,n=l.lualib,r=a(60),o=s.luaL_newstate();n.luaL_openlibs(o),s.luaL_requiref(o,u.to_luastring('js'),r.luaopen_js,1),u.lua_pop(o,1);let _=s.luaL_loadfile(o,u.to_luastring('moonhub.lua'));if(_===u.LUA_OK&&(_=u.lua_pcall(o,0,0,0)),_!==u.LUA_OK){let e=s.luaL_tolstring(o,-1);u.lua_pop(o,1),console.error(u.to_jsstring(e))}},function(e){e.exports=function(e){return e&&'object'==typeof e&&'function'==typeof e.copy&&'function'==typeof e.fill&&'function'==typeof e.readUInt8}},function(e){e.exports='function'==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},function(e,t,a){'use strict';const l=a(0),u=a(1),s=a(28),n=a(3),r=a(16),o=a(27),_=a(8),i=a(15),p=u.CT,d=r.OpCodesI,c=n.TValue,g=-1,L={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},f={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},A=function(t){return t.t!==t.f},T=function(t,e){let a=o.expkind;if(A(t))return!1;switch(t.k){case a.VKINT:return!e||new c(p.LUA_TNUMINT,t.u.ival);case a.VKFLT:return!e||new c(p.LUA_TNUMFLT,t.u.nval);default:return!1;}},h=function(e,t,a){let u=t+a-1,l;if(e.pc>e.lasttarget&&(l=e.f.code[e.pc-1],l.opcode===d.OP_LOADNIL)){let e=l.A,a=e+l.B;if(e<=t&&t<=a+1||t<=e&&e<=u+1)return e<t&&(t=e),a>u&&(u=a),r.SETARG_A(l,t),void r.SETARG_B(l,u-t)}D(e,d.OP_LOADNIL,t,a-1,0)},x=function(t,a){return t.f.code[a.u.info]},O=function(e,t){let a=e.f.code[t].sBx;return a===g?g:t+1+a},U=function(e,t,a){let n=e.f.code[t],o=a-(t+1);l(a!==g),Math.abs(o)>r.MAXARG_sBx&&s.luaX_syntaxerror(e.ls,u.to_luastring('control structure too long',!0)),r.SETARG_sBx(n,o)},m=function(e,t,a){if(a===g)return t;if(t===g)t=a;else{let l=t,u=O(e,l);for(;u!==g;)l=u,u=O(e,l);U(e,l,a)}return t},E=function(e){let t=e.jpc;e.jpc=g;let a=B(e,d.OP_JMP,0,g);return a=m(e,a,t),a},v=function(e,t,a,l,u){return D(e,t,a,l,u),E(e)},k=function(e){return e.lasttarget=e.pc,e.pc},b=function(e,t){return 1<=t&&r.testTMode(e.f.code[t-1].opcode)?t-1:t},R=function(e,t){return e.f.code[b(e,t)]},S=function(e,t,a){let l=b(e,t),u=e.f.code[l];return!(u.opcode!==d.OP_TESTSET)&&(a!==r.NO_REG&&a!==u.B?r.SETARG_A(u,a):e.f.code[l]=r.CREATE_ABC(d.OP_TEST,u.B,0,u.C),!0)},I=function(e,t){for(;t!==g;t=O(e,t))S(e,t,r.NO_REG)},N=function(e,t,a,l,u){for(;t!==g;){let s=O(e,t);S(e,t,l)?U(e,t,a):U(e,t,u),t=s}},P=function(e){N(e,e.jpc,e.pc,r.NO_REG,e.pc),e.jpc=g},M=function(e,t){k(e),e.jpc=m(e,e.jpc,t)},y=function(e,t,a){a===e.pc?M(e,t):(l(a<e.pc),N(e,t,a,r.NO_REG,a))},C=function(e,t){let a=e.f;return P(e),a.code[e.pc]=t,a.lineinfo[e.pc]=e.ls.lastline,e.pc++},D=function(e,t,u,a,s){return l(r.getOpMode(t)===r.iABC),l(r.getBMode(t)!==r.OpArgN||0===a),l(r.getCMode(t)!==r.OpArgN||0===s),l(u<=r.MAXARG_A&&a<=r.MAXARG_B&&s<=r.MAXARG_C),C(e,r.CREATE_ABC(t,u,a,s))},K=function(e,t,u,a){return l(r.getOpMode(t)===r.iABx||r.getOpMode(t)===r.iAsBx),l(r.getCMode(t)===r.OpArgN),l(u<=r.MAXARG_A&&a<=r.MAXARG_Bx),C(e,r.CREATE_ABx(t,u,a))},B=function(e,t,a,l){return K(e,t,a,l+r.MAXARG_sBx)},w=function(e,t){return l(t<=r.MAXARG_Ax),C(e,r.CREATE_Ax(d.OP_EXTRAARG,t))},G=function(e,t,a){if(a<=r.MAXARG_Bx)return K(e,d.OP_LOADK,t,a);let l=K(e,d.OP_LOADKX,t,0);return w(e,a),l},V=function(e,t){let a=e.freereg+t;a>e.f.maxstacksize&&(a>=255&&s.luaX_syntaxerror(e.ls,u.to_luastring('function or expression needs too many registers',!0)),e.f.maxstacksize=a)},F=function(e,t){V(e,t),e.freereg+=t},X=function(e,t){!r.ISK(t)&&t>=e.nactvar&&(e.freereg--,l(t===e.freereg))},j=function(t,a){a.k===o.expkind.VNONRELOC&&X(t,a.u.info)},H=function(e,t,a){let l=t.k===o.expkind.VNONRELOC?t.u.info:-1,u=a.k===o.expkind.VNONRELOC?a.u.info:-1;l>u?(X(e,l),X(e,u)):(X(e,u),X(e,l))},Y=function(e,t,a){let l=e.f,u=_.luaH_set(e.L,e.ls.h,t);if(u.ttisinteger()){let t=u.value;if(t<e.nk&&l.k[t].ttype()===a.ttype()&&l.k[t].value===a.value)return t}let s=e.nk;return u.setivalue(s),l.k[s]=a,e.nk++,s},z=function(e,t){let a=new c(p.LUA_TLIGHTUSERDATA,t),l=new c(p.LUA_TNUMINT,t);return Y(e,a,l)},Z=function(e,t){let a=new c(p.LUA_TNUMFLT,t);return Y(e,a,a)},J=function(e,t){let a=new c(p.LUA_TBOOLEAN,t);return Y(e,a,a)},q=function(e){let t=new c(p.LUA_TNIL,null),a=new c(p.LUA_TTABLE,e.ls.h);return Y(e,a,t)},W=function(t,a,e){let s=o.expkind;if(a.k===s.VCALL)r.SETARG_C(x(t,a),e+1);else if(a.k===s.VVARARG){let l=x(t,a);r.SETARG_B(l,e+1),r.SETARG_A(l,t.freereg),F(t,1)}else l(e===u.LUA_MULTRET)},Q=function(t,a){let e=o.expkind;a.k===e.VCALL?(l(2===x(t,a).C),a.k=e.VNONRELOC,a.u.info=x(t,a).A):a.k===e.VVARARG&&(r.SETARG_B(x(t,a),2),a.k=e.VRELOCABLE)},$=function(t,a){let e=o.expkind;switch(a.k){case e.VLOCAL:{a.k=e.VNONRELOC;break}case e.VUPVAL:{a.u.info=D(t,d.OP_GETUPVAL,0,a.u.info,0),a.k=e.VRELOCABLE;break}case e.VINDEXED:{let u;X(t,a.u.ind.idx),a.u.ind.vt===e.VLOCAL?(X(t,a.u.ind.t),u=d.OP_GETTABLE):(l(a.u.ind.vt===e.VUPVAL),u=d.OP_GETTABUP),a.u.info=D(t,u,0,a.u.ind.t,a.u.ind.idx),a.k=e.VRELOCABLE;break}case e.VVARARG:case e.VCALL:{Q(t,a);break}default:}},ee=function(e,t,a,l){return k(e),D(e,d.OP_LOADBOOL,t,a,l)},te=function(t,a,e){let u=o.expkind;switch($(t,a),a.k){case u.VNIL:{h(t,e,1);break}case u.VFALSE:case u.VTRUE:{D(t,d.OP_LOADBOOL,e,a.k===u.VTRUE,0);break}case u.VK:{G(t,e,a.u.info);break}case u.VKFLT:{G(t,e,Z(t,a.u.nval));break}case u.VKINT:{G(t,e,z(t,a.u.ival));break}case u.VRELOCABLE:{let l=x(t,a);r.SETARG_A(l,e);break}case u.VNONRELOC:{e!==a.u.info&&D(t,d.OP_MOVE,e,a.u.info,0);break}default:return void l(a.k===u.VJMP);}a.u.info=e,a.k=u.VNONRELOC},ae=function(t,a){a.k!==o.expkind.VNONRELOC&&(F(t,1),te(t,a,t.freereg-1))},le=function(e,t){for(;t!==g;t=O(e,t)){let a=R(e,t);if(a.opcode!==d.OP_TESTSET)return!0}return!1},ue=function(t,a,e){let l=o.expkind;if(te(t,a,e),a.k===l.VJMP&&(a.t=m(t,a.t,a.u.info)),A(a)){let u=g,s=g,n;if(le(t,a.t)||le(t,a.f)){let n=a.k===l.VJMP?g:E(t);u=ee(t,e,0,1),s=ee(t,e,1,0),M(t,n)}n=k(t),N(t,a.f,n,e,u),N(t,a.t,n,e,s)}a.f=a.t=g,a.u.info=e,a.k=l.VNONRELOC},se=function(t,a){$(t,a),j(t,a),F(t,1),ue(t,a,t.freereg-1)},ne=function(t,a){if($(t,a),a.k===o.expkind.VNONRELOC){if(!A(a))return a.u.info;if(a.u.info>=t.nactvar)return ue(t,a,a.u.info),a.u.info}return se(t,a),a.u.info},re=function(t,a){A(a)?ne(t,a):$(t,a)},oe=function(t,a){let e=o.expkind,l=!1;switch(re(t,a),a.k){case e.VTRUE:a.u.info=J(t,!0),l=!0;break;case e.VFALSE:a.u.info=J(t,!1),l=!0;break;case e.VNIL:a.u.info=q(t),l=!0;break;case e.VKINT:a.u.info=z(t,a.u.ival),l=!0;break;case e.VKFLT:a.u.info=Z(t,a.u.nval),l=!0;break;case e.VK:l=!0;break;default:}return l&&(a.k=e.VK,a.u.info<=r.MAXINDEXRK)?r.RKASK(a.u.info):ne(t,a)},_e=function(t,a){let e=R(t,a.u.info);l(r.testTMode(e.opcode)&&e.opcode!==d.OP_TESTSET&&e.opcode!==d.OP_TEST),r.SETARG_A(e,!e.A)},ie=function(t,a,e){if(a.k===o.expkind.VRELOCABLE){let l=x(t,a);if(l.opcode===d.OP_NOT)return t.pc--,v(t,d.OP_TEST,l.B,0,!e)}return ae(t,a),j(t,a),v(t,d.OP_TESTSET,r.NO_REG,a.u.info,e)},pe=function(t,a){let e=o.expkind,l;switch($(t,a),a.k){case e.VJMP:{_e(t,a),l=a.u.info;break}case e.VK:case e.VKFLT:case e.VKINT:case e.VTRUE:{l=g;break}default:{l=ie(t,a,0);break}}a.f=m(t,a.f,l),M(t,a.t),a.t=g},ce=function(t,a){let e=o.expkind,l;switch($(t,a),a.k){case e.VJMP:{l=a.u.info;break}case e.VNIL:case e.VFALSE:{l=g;break}default:{l=ie(t,a,1);break}}a.t=m(t,a.t,l),M(t,a.f),a.f=g},de=function(t,a){let e=o.expkind;switch($(t,a),a.k){case e.VNIL:case e.VFALSE:{a.k=e.VTRUE;break}case e.VK:case e.VKFLT:case e.VKINT:case e.VTRUE:{a.k=e.VFALSE;break}case e.VJMP:{_e(t,a);break}case e.VRELOCABLE:case e.VNONRELOC:{ae(t,a),j(t,a),a.u.info=D(t,d.OP_NOT,0,a.u.info,0),a.k=e.VRELOCABLE;break}}{let e=a.f;a.f=a.t,a.t=e}I(t,a.f),I(t,a.t)},ge=function(e,t,a){return e===u.LUA_OPBAND||e===u.LUA_OPBOR||e===u.LUA_OPBXOR||e===u.LUA_OPSHL||e===u.LUA_OPSHR||e===u.LUA_OPBNOT?!1!==i.tointeger(t)&&!1!==i.tointeger(a):e===u.LUA_OPDIV||e===u.LUA_OPIDIV||e===u.LUA_OPMOD?0!==a.value:1},Le=function(e,t,a){let l=o.expkind,u,s;if(!(u=T(t,!0))||!(s=T(a,!0))||!ge(e,u,s))return 0;let r=new c;if(n.luaO_arith(null,e,u,s,r),r.ttisinteger())t.k=l.VKINT,t.u.ival=r.value;else{let e=r.value;if(isNaN(e)||0===e)return!1;t.k=l.VKFLT,t.u.nval=e}return!0},fe=function(t,a,l,e){let u=ne(t,l);j(t,l),l.u.info=D(t,a,0,u,0),l.k=o.expkind.VRELOCABLE,he(t,e)},Ae=function(e,t,a,l,u){let s=oe(e,l),n=oe(e,a);H(e,a,l),a.u.info=D(e,t,0,n,s),a.k=o.expkind.VRELOCABLE,he(e,u)},Te=function(e,t,a,u){let s=o.expkind,n;a.k===s.VK?n=r.RKASK(a.u.info):(l(a.k===s.VNONRELOC),n=a.u.info);let _=oe(e,u);switch(H(e,a,u),t){case L.OPR_NE:{a.u.info=v(e,d.OP_EQ,0,n,_);break}case L.OPR_GT:case L.OPR_GE:{let l=t-L.OPR_NE+d.OP_EQ;a.u.info=v(e,l,1,_,n);break}default:{let l=t-L.OPR_EQ+d.OP_EQ;a.u.info=v(e,l,1,n,_);break}}a.k=s.VJMP},he=function(e,t){e.f.lineinfo[e.pc-1]=t};e.exports.BinOpr=L,e.exports.NO_JUMP=g,e.exports.UnOpr=f,e.exports.getinstruction=x,e.exports.luaK_checkstack=V,e.exports.luaK_code=C,e.exports.luaK_codeABC=D,e.exports.luaK_codeABx=K,e.exports.luaK_codeAsBx=B,e.exports.luaK_codek=G,e.exports.luaK_concat=m,e.exports.luaK_dischargevars=$,e.exports.luaK_exp2RK=oe,e.exports.luaK_exp2anyreg=ne,e.exports.luaK_exp2anyregup=function(t,a){(a.k!==o.expkind.VUPVAL||A(a))&&ne(t,a)},e.exports.luaK_exp2nextreg=se,e.exports.luaK_exp2val=re,e.exports.luaK_fixline=he,e.exports.luaK_getlabel=k,e.exports.luaK_goiffalse=ce,e.exports.luaK_goiftrue=pe,e.exports.luaK_indexed=function(e,a,t){let u=o.expkind;l(!A(a)&&(o.vkisinreg(a.k)||a.k===u.VUPVAL)),a.u.ind.t=a.u.info,a.u.ind.idx=oe(e,t),a.u.ind.vt=a.k===u.VUPVAL?u.VUPVAL:u.VLOCAL,a.k=u.VINDEXED},e.exports.luaK_infix=function(e,t,a){switch(t){case L.OPR_AND:{pe(e,a);break}case L.OPR_OR:{ce(e,a);break}case L.OPR_CONCAT:{se(e,a);break}case L.OPR_ADD:case L.OPR_SUB:case L.OPR_MUL:case L.OPR_DIV:case L.OPR_IDIV:case L.OPR_MOD:case L.OPR_POW:case L.OPR_BAND:case L.OPR_BOR:case L.OPR_BXOR:case L.OPR_SHL:case L.OPR_SHR:{T(a,!1)||oe(e,a);break}default:{oe(e,a);break}}},e.exports.luaK_intK=z,e.exports.luaK_jump=E,e.exports.luaK_jumpto=function(e,a){return y(e,E(e),a)},e.exports.luaK_nil=h,e.exports.luaK_numberK=Z,e.exports.luaK_patchclose=function(e,t,a){for(a++;t!==g;t=O(e,t)){let u=e.f.code[t];l(u.opcode===d.OP_JMP&&(0===u.A||u.A>=a)),r.SETARG_A(u,a)}},e.exports.luaK_patchlist=y,e.exports.luaK_patchtohere=M,e.exports.luaK_posfix=function(e,t,a,s,n){let _=o.expkind;switch(t){case L.OPR_AND:{l(a.t===g),$(e,s),s.f=m(e,s.f,a.f),a.to(s);break}case L.OPR_OR:{l(a.f===g),$(e,s),s.t=m(e,s.t,a.t),a.to(s);break}case L.OPR_CONCAT:{re(e,s);let t=x(e,s);s.k===_.VRELOCABLE&&t.opcode===d.OP_CONCAT?(l(a.u.info===t.B-1),j(e,a),r.SETARG_B(t,a.u.info),a.k=_.VRELOCABLE,a.u.info=s.u.info):(se(e,s),Ae(e,d.OP_CONCAT,a,s,n));break}case L.OPR_ADD:case L.OPR_SUB:case L.OPR_MUL:case L.OPR_DIV:case L.OPR_IDIV:case L.OPR_MOD:case L.OPR_POW:case L.OPR_BAND:case L.OPR_BOR:case L.OPR_BXOR:case L.OPR_SHL:case L.OPR_SHR:{Le(t+u.LUA_OPADD,a,s)||Ae(e,t+d.OP_ADD,a,s,n);break}case L.OPR_EQ:case L.OPR_LT:case L.OPR_LE:case L.OPR_NE:case L.OPR_GT:case L.OPR_GE:{Te(e,t,a,s);break}}return a},e.exports.luaK_prefix=function(t,a,l,e){let s=new o.expdesc;switch(s.k=o.expkind.VKINT,s.u.ival=s.u.nval=s.u.info=0,s.t=g,s.f=g,a){case f.OPR_MINUS:case f.OPR_BNOT:if(Le(a+u.LUA_OPUNM,l,s))break;case f.OPR_LEN:fe(t,a+d.OP_UNM,l,e);break;case f.OPR_NOT:de(t,l);}},e.exports.luaK_reserveregs=F,e.exports.luaK_ret=function(e,t,a){D(e,d.OP_RETURN,t,a+1,0)},e.exports.luaK_self=function(t,a,e){ne(t,a);let l=a.u.info;j(t,a),a.u.info=t.freereg,a.k=o.expkind.VNONRELOC,F(t,2),D(t,d.OP_SELF,a.u.info,l,oe(t,e)),j(t,e)},e.exports.luaK_setlist=function(e,t,a,n){let o=(a-1)/r.LFIELDS_PER_FLUSH+1,_=n===u.LUA_MULTRET?0:n;l(0!==n&&n<=r.LFIELDS_PER_FLUSH),o<=r.MAXARG_C?D(e,d.OP_SETLIST,t,_,o):o<=r.MAXARG_Ax?(D(e,d.OP_SETLIST,t,_,0),w(e,o)):s.luaX_syntaxerror(e.ls,u.to_luastring('constructor too long',!0)),e.freereg=t+1},e.exports.luaK_setmultret=function(t,a){W(t,a,u.LUA_MULTRET)},e.exports.luaK_setoneret=Q,e.exports.luaK_setreturns=W,e.exports.luaK_storevar=function(t,a,l){let u=o.expkind;switch(a.k){case u.VLOCAL:return j(t,l),void ue(t,l,a.u.info);case u.VUPVAL:{let u=ne(t,l);D(t,d.OP_SETUPVAL,u,a.u.info,0);break}case u.VINDEXED:{let s=a.u.ind.vt===u.VLOCAL?d.OP_SETTABLE:d.OP_SETTABUP,n=oe(t,l);D(t,s,a.u.ind.t,a.u.ind.idx,n);break}}j(t,l)},e.exports.luaK_stringK=function(e,t){let a=new c(p.LUA_TLNGSTR,t);return Y(e,a,a)}},function(e,t,a){'use strict';var l=Math.max;const u=a(0),s=a(1),n=a(7),r=a(12),o=a(3),_=a(16),i=a(9),p=a(21);let c=[25,147,s.char['\r'],s.char['\n'],26,s.char['\n']];class d{constructor(e,t,a){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,u(t instanceof p.ZIO,'BytecodeParser only operates on a ZIO'),u(s.is_luastring(a)),this.name=a[0]==s.char['@']||a[0]==s.char['=']?a.slice(1):a[0]==s.LUA_SIGNATURE.charCodeAt(0)?s.to_luastring('binary string',!0):a,this.L=e,this.Z=t,this.arraybuffer=new ArrayBuffer(l(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(e){let t=new Uint8Array(e);return 0!==p.luaZ_read(this.Z,t,0,e)&&this.error('truncated'),Array.from(t)}readByte(){return 0!==p.luaZ_read(this.Z,this.u8,0,1)&&this.error('truncated'),this.u8[0]}readInteger(){return 0!==p.luaZ_read(this.Z,this.u8,0,this.integerSize)&&this.error('truncated'),this.dv.getInt32(0,!0)}readSize_t(){return this.readInteger()}readInt(){return 0!==p.luaZ_read(this.Z,this.u8,0,this.intSize)&&this.error('truncated'),this.dv.getInt32(0,!0)}readNumber(){return 0!==p.luaZ_read(this.Z,this.u8,0,this.numberSize)&&this.error('truncated'),this.dv.getFloat64(0,!0)}readString(){let e=l(this.readByte()-1,0);return 255===e+1&&(e=this.readSize_t()-1),0===e?null:i.luaS_bless(this.L,this.read(e))}static MASK1(e,t){return~(-1<<e)<<t}static MASK0(e,t){return~d.MASK1(e,t)}readInstruction(){return 0!==p.luaZ_read(this.Z,this.u8,0,this.instructionSize)&&this.error('truncated'),this.dv.getUint32(0,!0)}readCode(e){let t=this.readInt(),a=_,l=d;for(let u=0,s;u<t;u++)s=this.readInstruction(),e.code[u]={code:s,opcode:s>>a.POS_OP&l.MASK1(a.SIZE_OP,0),A:s>>a.POS_A&l.MASK1(a.SIZE_A,0),B:s>>a.POS_B&l.MASK1(a.SIZE_B,0),C:s>>a.POS_C&l.MASK1(a.SIZE_C,0),Bx:s>>a.POS_Bx&l.MASK1(a.SIZE_Bx,0),Ax:s>>a.POS_Ax&l.MASK1(a.SIZE_Ax,0),sBx:(s>>a.POS_Bx&l.MASK1(a.SIZE_Bx,0))-a.MAXARG_sBx}}readUpvalues(e){let t=this.readInt();for(let a=0;a<t;a++)e.upvalues[a]={name:null,instack:this.readByte(),idx:this.readByte()}}readConstants(e){let a=this.readInt();for(let l=0,u;l<a;l++)u=this.readByte(),u===s.CT.LUA_TNIL?e.k.push(new o.TValue(s.CT.LUA_TNIL,null)):u===s.CT.LUA_TBOOLEAN?e.k.push(new o.TValue(s.CT.LUA_TBOOLEAN,0!==this.readByte())):u===s.CT.LUA_TNUMFLT?e.k.push(new o.TValue(s.CT.LUA_TNUMFLT,this.readNumber())):u===s.CT.LUA_TNUMINT?e.k.push(new o.TValue(s.CT.LUA_TNUMINT,this.readInteger())):u===s.CT.LUA_TSHRSTR||u===s.CT.LUA_TLNGSTR?e.k.push(new o.TValue(s.CT.LUA_TLNGSTR,this.readString())):this.error(`unrecognized constant '${u}'`)}readProtos(e){let t=this.readInt();for(let a=0;a<t;a++)e.p[a]=new r.Proto(this.L),this.readFunction(e.p[a],e.source)}readDebug(e){let t=this.readInt();for(let a=0;a<t;a++)e.lineinfo[a]=this.readInt();t=this.readInt();for(let a=0;a<t;a++)e.locvars[a]={varname:this.readString(),startpc:this.readInt(),endpc:this.readInt()};t=this.readInt();for(let a=0;a<t;a++)e.upvalues[a].name=this.readString()}readFunction(e,t){e.source=this.readString(),null===e.source&&(e.source=t),e.linedefined=this.readInt(),e.lastlinedefined=this.readInt(),e.numparams=this.readByte(),e.is_vararg=0!==this.readByte(),e.maxstacksize=this.readByte(),this.readCode(e),this.readConstants(e),this.readUpvalues(e),this.readProtos(e),this.readDebug(e)}checkliteral(e,t){let a=this.read(e.length);a.join()!==e.join()&&this.error(t)}checkHeader(){this.checkliteral(s.to_luastring(s.LUA_SIGNATURE.substring(1)),'not a'),83!==this.readByte()&&this.error('version mismatch in'),0!==this.readByte()&&this.error('format mismatch in'),this.checkliteral(c,'corrupted'),this.intSize=this.readByte(),this.size_tSize=this.readByte(),this.instructionSize=this.readByte(),this.integerSize=this.readByte(),this.numberSize=this.readByte(),this.checksize(this.intSize,4,'int'),this.checksize(this.size_tSize,4,'size_t'),this.checksize(this.instructionSize,4,'instruction'),this.checksize(this.integerSize,4,'integer'),this.checksize(this.numberSize,8,'number'),22136!==this.readInteger()&&this.error('endianness mismatch in'),370.5!==this.readNumber()&&this.error('float format mismatch in')}error(e){o.luaO_pushfstring(this.L,s.to_luastring('%s: %s precompiled chunk'),this.name,s.to_luastring(e)),n.luaD_throw(this.L,s.thread_status.LUA_ERRSYNTAX)}checksize(e,t,a){e!==t&&this.error(`${a} size mismatch in`)}}e.exports.luaU_undump=function(e,t,a){let l=new d(e,t,a);l.checkHeader();let s=r.luaF_newLclosure(e,l.readByte());return n.luaD_inctop(e),e.stack[e.top-1].setclLvalue(s),s.p=new r.Proto(e),l.readFunction(s.p,null),u(s.nupvalues===s.p.upvalues.length),s}},function(e,t,a){'use strict';var l=Number.parseInt;const u=a(1),s=u.constant_types,n=16*l(u.LUA_VERSION_MAJOR)+l(u.LUA_VERSION_MINOR);class r{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}}const o=function(e,t,a){0===a.status&&0<t&&(a.status=a.writer(a.L,e,t,a.data))},_=function(e,t){e=u.to_luastring(e),o(e,e.length,t)},p=function(e,t){o([e],1,t)},c=function(e,a){let l=new DataView(new ArrayBuffer(4));l.setInt32(0,e,!0);let u=[];for(let t=0;4>t;t++)u.push(l.getUint8(t,!0));o(u,4,a)},d=function(e,a){let l=new DataView(new ArrayBuffer(4));l.setInt32(0,e,!0);let u=[];for(let t=0;4>t;t++)u.push(l.getUint8(t,!0));o(u,8,a)},g=function(e,a){let l=new DataView(new ArrayBuffer(8));l.setFloat64(0,e,!0);let u=[];for(let t=0;8>t;t++)u.push(l.getUint8(t,!0));o(u,8,a)},L=function(e,t){if(null===e)p(0,t);else{let a=e.tsslen()+1,l=e.getstr();255>a?p(a,t):(p(255,t),d(a,t)),o(l,a-1,t)}},i=function(e,t){let a=e.code.map((t)=>t.code);c(a.length,t);for(let l=0;l<a.length;l++)c(a[l],t)},A=function(e,t){let a=e.k.length;c(a,t);for(let l=0,u;l<a;l++)switch(u=e.k[l],p(u.ttype(),t),u.ttype()){case s.LUA_TNIL:break;case s.LUA_TBOOLEAN:p(u.value?1:0,t);break;case s.LUA_TNUMFLT:g(u.value,t);break;case s.LUA_TNUMINT:d(u.value,t);break;case s.LUA_TSHRSTR:case s.LUA_TLNGSTR:L(u.tsvalue(),t);}},T=function(e,t){let a=e.p.length;c(a,t);for(let l=0;l<a;l++)O(e.p[l],e.source,t)},h=function(e,t){let a=e.upvalues.length;c(a,t);for(let l=0;l<a;l++)p(e.upvalues[l].instack?1:0,t),p(e.upvalues[l].idx,t)},x=function(e,t){let a=t.strip?0:e.lineinfo.length;c(a,t);for(let l=0;l<a;l++)c(e.lineinfo[l],t);a=t.strip?0:e.locvars.length,c(a,t);for(let l=0;l<a;l++)L(e.locvars[l].varname,t),c(e.locvars[l].startpc,t),c(e.locvars[l].endpc,t);a=t.strip?0:e.upvalues.length,c(a,t);for(let l=0;l<a;l++)L(e.upvalues[l].name,t)},O=function(e,t,a){a.strip||e.source===t?L(null,a):L(e.source,a),c(e.linedefined,a),c(e.lastlinedefined,a),p(e.numparams,a),p(e.is_vararg?1:0,a),p(e.maxstacksize,a),i(e,a),A(e,a),h(e,a),T(e,a),x(e,a)},U=function(e){_(u.LUA_SIGNATURE,e),p(n,e),p(0,e);let t='\x19\x93\r\n\x1A\n'.split('').map((t)=>t.charCodeAt(0));o(t,t.length,e),p(4,e),p(4,e),p(4,e),p(4,e),p(8,e),d(22136,e),g(370.5,e)};e.exports.luaU_dump=function(e,t,a,l,u){let s=new r;return s.L=e,s.writer=a,s.data=l,s.strip=u,s.status=0,U(s),p(t.upvalues.length,s),O(t,null,s),s.status}},function(e,t,a){'use strict';const l=a(2),u=a(6),s=a(45),n=a(30),r=a(31),o=a(32),_=a(33),i=a(34),p=a(35),c=a(36),d=a(37),g=a(29);e.exports.luaL_openlibs=function(e){const t={[g.LUA_LOADLIBNAME]:d.luaopen_package,[g.LUA_COLIBNAME]:n.luaopen_coroutine,[g.LUA_DBLIBNAME]:p.luaopen_debug,[g.LUA_MATHLIBNAME]:r.luaopen_math,[g.LUA_OSLIBNAME]:c.luaopen_os,[g.LUA_STRLIBNAME]:o.luaopen_string,[g.LUA_TABLIBNAME]:_.luaopen_table,[g.LUA_UTF8LIBNAME]:i.luaopen_utf8,_G:s.luaopen_base};for(let a in!1,t)u.luaL_requiref(e,l.to_luastring(a),t[a],1),l.lua_pop(e,1)}},function(e,t,a){'use strict';(function(t,l){const u=a(2),r=a(6),s=['stop','restart','collect','count','step','setpause','setstepmul','isrunning'].map((t)=>u.to_luastring(t)),n=function(e,t,a,l){return r.luaL_checkany(e,1),r.luaL_getmetafield(e,1,t)===u.LUA_TNIL?(u.lua_pushcfunction(e,l),u.lua_pushvalue(e,1),a?u.lua_pushinteger(e,0):u.lua_pushnil(e)):(u.lua_pushvalue(e,1),u.lua_call(e,1,3)),3},o=function(e){return r.luaL_checktype(e,1,u.LUA_TTABLE),u.lua_settop(e,2),u.lua_next(e,1)?2:(u.lua_pushnil(e),1)},_=function(e){let t=r.luaL_checkinteger(e,2)+1;return u.lua_pushinteger(e,t),u.lua_geti(e,1,t)===u.LUA_TNIL?1:2},i=function(e,t){let a=/^[\t\v\f \n\r]*([\+\-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(u.to_jsstring(e));if(!a)return null;let l='-'===a[1],s=a[2],o=0;for(let a=0,l;a<s.length;a++){if(l=/\d/.test(s[a])?s.charCodeAt(a)-48:s[a].toUpperCase().charCodeAt(0)-65+10,l>=t)return null;o=(0|o*t)+l}return 0|(l?-o:o)},p=function(e){let t=r.luaL_optinteger(e,2,1);return u.lua_settop(e,1),u.lua_type(e,1)===u.LUA_TSTRING&&0<t&&(r.luaL_where(e,t),u.lua_pushvalue(e,1),u.lua_concat(e,2)),u.lua_error(e)},c=function(e,t,a){return t!==u.LUA_OK&&t!==u.LUA_YIELD?(u.lua_pushboolean(e,0),u.lua_pushvalue(e,-2),2):u.lua_gettop(e)-a},d=function(e,t,a){return t===u.LUA_OK?(0!==a&&(u.lua_pushvalue(e,a),!u.lua_setupvalue(e,-2,1)&&u.lua_pop(e,1)),1):(u.lua_pushnil(e),u.lua_insert(e,-2),2)},g=5,f=function(e){return(r.luaL_checkstack(e,2,u.to_luastring('too many nested functions',!0)),u.lua_pushvalue(e,1),u.lua_call(e,0,1),u.lua_isnil(e,-1))?(u.lua_pop(e,1),null):(u.lua_isstring(e,-1)||r.luaL_error(e,u.to_luastring('reader function must return a string',!0)),u.lua_replace(e,g),u.lua_tostring(e,g))},A={assert:function(e){return u.lua_toboolean(e,1)?u.lua_gettop(e):(r.luaL_checkany(e,1),u.lua_remove(e,1),u.lua_pushliteral(e,'assertion failed!'),u.lua_settop(e,1),p(e))},collectgarbage:function(e){r.luaL_checkoption(e,1,u.to_luastring('collect'),s),r.luaL_optinteger(e,2,0),r.luaL_error(e,u.to_luastring('lua_gc not implemented'))},error:p,getmetatable:function(e){return(r.luaL_checkany(e,1),!u.lua_getmetatable(e,1))?(u.lua_pushnil(e),1):(r.luaL_getmetafield(e,1,u.to_luastring('__metatable',!0)),1)},ipairs:function(e){return r.luaL_checkany(e,1),u.lua_pushcfunction(e,_),u.lua_pushvalue(e,1),u.lua_pushinteger(e,0),3},load:function(e){let t=u.lua_tostring(e,1),a=r.luaL_optstring(e,3,u.to_luastring('bt',!0)),l=u.lua_isnone(e,4)?0:4,s;if(null!==t){let l=r.luaL_optstring(e,2,t);s=r.luaL_loadbufferx(e,t,t.length,l,a)}else{let t=r.luaL_optstring(e,2,u.to_luastring('=(load)',!0));r.luaL_checktype(e,1,u.LUA_TFUNCTION),u.lua_settop(e,g),s=u.lua_load(e,f,null,t,a)}return d(e,s,l)},next:o,pairs:function(e){return n(e,u.to_luastring('__pairs',!0),0,o)},pcall:function(e){r.luaL_checkany(e,1),u.lua_pushboolean(e,1),u.lua_insert(e,1);let t=u.lua_pcallk(e,u.lua_gettop(e)-2,u.LUA_MULTRET,0,0,c);return c(e,t,0)},print:function(e){let a=u.lua_gettop(e),n=[];u.lua_getglobal(e,u.to_luastring('tostring',!0));for(let t=1;t<=a;t++){u.lua_pushvalue(e,-1),u.lua_pushvalue(e,t),u.lua_call(e,1,1);let a=u.lua_tolstring(e,-1);if(null===a)return r.luaL_error(e,u.to_luastring('\'tostring\' must return a string to \'print\'',!0));1<t&&n.push(9),n=n.concat(a),u.lua_pop(e,1)}return t.stdout?(n.push(10),t.stdout.write(l.from(n))):console.log(u.to_jsstring(n)),0},rawequal:function(e){return r.luaL_checkany(e,1),r.luaL_checkany(e,2),u.lua_pushboolean(e,u.lua_rawequal(e,1,2)),1},rawget:function(e){return r.luaL_checktype(e,1,u.LUA_TTABLE),r.luaL_checkany(e,2),u.lua_settop(e,2),u.lua_rawget(e,1),1},rawlen:function(e){let a=u.lua_type(e,1);return r.luaL_argcheck(e,a===u.LUA_TTABLE||a===u.LUA_TSTRING,1,u.to_luastring('table or string expected',!0)),u.lua_pushinteger(e,u.lua_rawlen(e,1)),1},rawset:function(e){return r.luaL_checktype(e,1,u.LUA_TTABLE),r.luaL_checkany(e,2),r.luaL_checkany(e,3),u.lua_settop(e,3),u.lua_rawset(e,1),1},select:function(e){let t=u.lua_gettop(e);if(u.lua_type(e,1)===u.LUA_TSTRING&&35===u.lua_tostring(e,1)[0])return u.lua_pushinteger(e,t-1),1;let a=r.luaL_checkinteger(e,1);return 0>a?a=t+a:a>t&&(a=t),r.luaL_argcheck(e,1<=a,1,u.to_luastring('index out of range',!0)),t-a},setmetatable:function(e){let a=u.lua_type(e,2);return(r.luaL_checktype(e,1,u.LUA_TTABLE),r.luaL_argcheck(e,a===u.LUA_TNIL||a===u.LUA_TTABLE,2,u.to_luastring('nil or table expected',!0)),r.luaL_getmetafield(e,1,u.to_luastring('__metatable',!0))!==u.LUA_TNIL)?r.luaL_error(e,u.to_luastring('cannot change a protected metatable',!0)):(u.lua_settop(e,2),u.lua_setmetatable(e,1),1)},tonumber:function(e){if(0>=u.lua_type(e,2)){if(r.luaL_checkany(e,1),u.lua_type(e,1)===u.LUA_TNUMBER)return u.lua_settop(e,1),1;let t=u.lua_tostring(e,1);if(null!==t&&u.lua_stringtonumber(e,t)===t.length+1)return 1}else{let t=r.luaL_checkinteger(e,2);r.luaL_checktype(e,1,u.LUA_TSTRING);let a=u.lua_tostring(e,1);r.luaL_argcheck(e,2<=t&&36>=t,2,u.to_luastring('base out of range',!0));let l=i(a,t);if(null!==l)return u.lua_pushinteger(e,l),1}return u.lua_pushnil(e),1},tostring:function(e){return r.luaL_checkany(e,1),r.luaL_tolstring(e,1),1},type:function(e){let a=u.lua_type(e,1);return r.luaL_argcheck(e,a!==u.LUA_TNONE,1,u.to_luastring('value expected',!0)),u.lua_pushstring(e,u.lua_typename(e,a)),1},xpcall:function(e){let t=u.lua_gettop(e);r.luaL_checktype(e,2,u.LUA_TFUNCTION),u.lua_pushboolean(e,1),u.lua_pushvalue(e,1),u.lua_rotate(e,3,2);let a=u.lua_pcallk(e,t-2,u.LUA_MULTRET,2,2,c);return c(e,a,2)}};e.exports.luaopen_base=function(e){return u.lua_pushglobaltable(e),r.luaL_setfuncs(e,A,0),u.lua_pushvalue(e,-1),u.lua_setfield(e,-2,u.to_luastring('_G',!0)),u.lua_pushliteral(e,u.LUA_VERSION),u.lua_setfield(e,-2,u.to_luastring('_VERSION',!0)),1}}).call(t,a(19),a(46).Buffer)},function(e,t,a){'use strict';var l=Math.pow,u=Math.floor,s=String.fromCharCode,n=Math.min;(function(e){function r(){return _.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError('Invalid typed array length');return _.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=_.prototype):(null===e&&(e=new _(t)),e.length=t),e}function _(e,t,a){if(!_.TYPED_ARRAY_SUPPORT&&!(this instanceof _))return new _(e,t,a);if('number'==typeof e){if('string'==typeof t)throw new Error('If encoding is specified then the first argument must be a string');return d(this,e)}return i(this,e,t,a)}function i(e,t,a,l){if('number'==typeof t)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,a,l):'string'==typeof t?g(e,t,a):A(e,t)}function p(e){if('number'!=typeof e)throw new TypeError('"size" argument must be a number');else if(0>e)throw new RangeError('"size" argument must not be negative')}function c(e,t,a,l){return p(t),0>=t?o(e,t):void 0===a?o(e,t):'string'==typeof l?o(e,t).fill(a,l):o(e,t).fill(a)}function d(e,t){if(p(t),e=o(e,0>t?0:0|T(t)),!_.TYPED_ARRAY_SUPPORT)for(var a=0;a<t;++a)e[a]=0;return e}function g(e,t,a){if(('string'!=typeof a||''===a)&&(a='utf8'),!_.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');var l=0|h(t,a);e=o(e,l);var u=e.write(t,a);return u!==l&&(e=e.slice(0,u)),e}function L(e,t){var a=0>t.length?0:0|T(t.length);e=o(e,a);for(var l=0;l<a;l+=1)e[l]=255&t[l];return e}function f(e,t,a,l){if(t.byteLength,0>a||t.byteLength<a)throw new RangeError('\'offset\' is out of bounds');if(t.byteLength<a+(l||0))throw new RangeError('\'length\' is out of bounds');return t=void 0===a&&void 0===l?new Uint8Array(t):void 0===l?new Uint8Array(t,a):new Uint8Array(t,a,l),_.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=_.prototype):e=L(e,t),e}function A(e,t){if(_.isBuffer(t)){var a=0|T(t.length);return(e=o(e,a),0===e.length)?e:(t.copy(e,0,0,a),e)}if(t){if('undefined'!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||'length'in t)return'number'!=typeof t.length||Q(t.length)?o(e,0):L(e,t);if('Buffer'===t.type&&te(t.data))return L(e,t.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function T(e){if(e>=r())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+r().toString(16)+' bytes');return 0|e}function h(e,t){if(_.isBuffer(e))return e.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;'string'!=typeof e&&(e=''+e);var a=e.length;if(0===a)return 0;for(var l=!1;;)switch(t){case'ascii':case'latin1':case'binary':return a;case'utf8':case'utf-8':case void 0:return z(e).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*a;case'hex':return a>>>1;case'base64':return q(e).length;default:if(l)return z(e).length;t=(''+t).toLowerCase(),l=!0;}}function x(e,t,a){var l=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return'';if((void 0===a||a>this.length)&&(a=this.length),0>=a)return'';if(a>>>=0,t>>>=0,a<=t)return'';for(e||(e='utf8');;)switch(e){case'hex':return C(this,t,a);case'utf8':case'utf-8':return N(this,t,a);case'ascii':return M(this,t,a);case'latin1':case'binary':return y(this,t,a);case'base64':return I(this,t,a);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return D(this,t,a);default:if(l)throw new TypeError('Unknown encoding: '+e);e=(e+'').toLowerCase(),l=!0;}}function O(e,t,a){var l=e[t];e[t]=e[a],e[a]=l}function U(e,t,a,l,u){if(0===e.length)return-1;if('string'==typeof a?(l=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648),a=+a,isNaN(a)&&(a=u?0:e.length-1),0>a&&(a=e.length+a),a>=e.length){if(u)return-1;a=e.length-1}else if(0>a)if(u)a=0;else return-1;if('string'==typeof t&&(t=_.from(t,l)),_.isBuffer(t))return 0===t.length?-1:m(e,t,a,l,u);if('number'==typeof t)return t&=255,_.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?u?Uint8Array.prototype.indexOf.call(e,t,a):Uint8Array.prototype.lastIndexOf.call(e,t,a):m(e,[t],a,l,u);throw new TypeError('val must be string, number or Buffer')}function m(e,t,a,l,u){function s(e,t){return 1==n?e[t]:e.readUInt16BE(t*n)}var n=1,r=e.length,o=t.length;if(void 0!==l&&(l=(l+'').toLowerCase(),'ucs2'===l||'ucs-2'===l||'utf16le'===l||'utf-16le'===l)){if(2>e.length||2>t.length)return-1;n=2,r/=2,o/=2,a/=2}var _;if(u){var i=-1;for(_=a;_<r;_++)if(s(e,_)!==s(t,-1==i?0:_-i))-1!=i&&(_-=_-i),i=-1;else if(-1==i&&(i=_),_-i+1===o)return i*n}else for(a+o>r&&(a=r-o),_=a;0<=_;_--){for(var p=!0,c=0;c<o;c++)if(s(e,_+c)!==s(t,c)){p=!1;break}if(p)return _}return-1}function E(e,t,a,l){a=+a||0;var u=e.length-a;l?(l=+l,l>u&&(l=u)):l=u;var s=t.length;if(0!=s%2)throw new TypeError('Invalid hex string');l>s/2&&(l=s/2);for(var n=0,r;n<l;++n){if(r=parseInt(t.substr(2*n,2),16),isNaN(r))return n;e[a+n]=r}return n}function v(e,t,a,l){return W(z(t,e.length-a),e,a,l)}function b(e,t,a,l){return W(Z(t),e,a,l)}function k(e,t,a,l){return b(e,t,a,l)}function R(e,t,a,l){return W(q(t),e,a,l)}function S(e,t,a,l){return W(J(t,e.length-a),e,a,l)}function I(e,t,a){return 0===t&&a===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,a))}function N(e,t,a){a=n(e.length,a);for(var l=[],u=t;u<a;){var s=e[u],r=null,o=239<s?4:223<s?3:191<s?2:1;if(u+o<=a){var _,i,p,c;1==o?128>s&&(r=s):2==o?(_=e[u+1],128==(192&_)&&(c=(31&s)<<6|63&_,127<c&&(r=c))):3==o?(_=e[u+1],i=e[u+2],128==(192&_)&&128==(192&i)&&(c=(15&s)<<12|(63&_)<<6|63&i,2047<c&&(55296>c||57343<c)&&(r=c))):4==o?(_=e[u+1],i=e[u+2],p=e[u+3],128==(192&_)&&128==(192&i)&&128==(192&p)&&(c=(15&s)<<18|(63&_)<<12|(63&i)<<6|63&p,65535<c&&1114112>c&&(r=c))):void 0}null===r?(r=65533,o=1):65535<r&&(r-=65536,l.push(55296|1023&r>>>10),r=56320|1023&r),l.push(r),u+=o}return P(l)}function P(e){var t=e.length;if(t<=ae)return s.apply(String,e);for(var a='',l=0;l<t;)a+=s.apply(String,e.slice(l,l+=ae));return a}function M(e,t,a){var l='';a=n(e.length,a);for(var u=t;u<a;++u)l+=s(127&e[u]);return l}function y(e,t,a){var l='';a=n(e.length,a);for(var u=t;u<a;++u)l+=s(e[u]);return l}function C(e,t,a){var l=e.length;(!t||0>t)&&(t=0),(!a||0>a||a>l)&&(a=l);for(var u='',s=t;s<a;++s)u+=Y(e[s]);return u}function D(e,t,a){for(var l=e.slice(t,a),u='',n=0;n<l.length;n+=2)u+=s(l[n]+256*l[n+1]);return u}function K(e,t,a){if(0!=e%1||0>e)throw new RangeError('offset is not uint');if(e+t>a)throw new RangeError('Trying to access beyond buffer length')}function B(e,t,a,l,u,s){if(!_.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>u||t<s)throw new RangeError('"value" argument is out of bounds');if(a+l>e.length)throw new RangeError('Index out of range')}function w(e,t,a,l){0>t&&(t=65535+t+1);for(var u=0,s=n(e.length-a,2);u<s;++u)e[a+u]=(t&255<<8*(l?u:1-u))>>>8*(l?u:1-u)}function G(e,t,a,l){0>t&&(t=4294967295+t+1);for(var u=0,s=n(e.length-a,4);u<s;++u)e[a+u]=255&t>>>8*(l?u:3-u)}function V(e,t,a,l){if(a+l>e.length)throw new RangeError('Index out of range');if(0>a)throw new RangeError('Index out of range')}function F(e,t,a,l,u){return u||V(e,t,a,4,3.4028234663852886e38,-3.4028234663852886e38),ee.write(e,t,a,l,23,4),a+4}function X(e,t,a,l,u){return u||V(e,t,a,8,1.7976931348623157e308,-1.7976931348623157e308),ee.write(e,t,a,l,52,8),a+8}function j(e){if(e=H(e).replace(le,''),2>e.length)return'';for(;0!=e.length%4;)e+='=';return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,'')}function Y(e){return 16>e?'0'+e.toString(16):e.toString(16)}function z(e,t){t=t||Infinity;for(var a=e.length,l=null,u=[],s=0,n;s<a;++s){if(n=e.charCodeAt(s),55295<n&&57344>n){if(!l){if(56319<n){-1<(t-=3)&&u.push(239,191,189);continue}else if(s+1===a){-1<(t-=3)&&u.push(239,191,189);continue}l=n;continue}if(56320>n){-1<(t-=3)&&u.push(239,191,189),l=n;continue}n=(l-55296<<10|n-56320)+65536}else l&&-1<(t-=3)&&u.push(239,191,189);if(l=null,128>n){if(0>(t-=1))break;u.push(n)}else if(2048>n){if(0>(t-=2))break;u.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;u.push(224|n>>12,128|63&n>>6,128|63&n)}else if(1114112>n){if(0>(t-=4))break;u.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}else throw new Error('Invalid code point')}return u}function Z(e){for(var t=[],a=0;a<e.length;++a)t.push(255&e.charCodeAt(a));return t}function J(e,t){for(var a=[],l=0,u,s,n;l<e.length&&!(0>(t-=2));++l)u=e.charCodeAt(l),s=u>>8,n=u%256,a.push(n),a.push(s);return a}function q(e){return $.toByteArray(j(e))}function W(e,t,a,l){for(var u=0;u<l&&!(u+a>=t.length||u>=e.length);++u)t[u+a]=e[u];return u}function Q(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var $=a(47),ee=a(48),te=a(49);t.Buffer=_,t.SlowBuffer=function(e){return+e!=e&&(e=0),_.alloc(+e)},t.INSPECT_MAX_BYTES=50,_.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT===void 0?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&'function'==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}():e.TYPED_ARRAY_SUPPORT,t.kMaxLength=r(),_.poolSize=8192,_._augment=function(e){return e.__proto__=_.prototype,e},_.from=function(e,t,a){return i(null,e,t,a)},_.TYPED_ARRAY_SUPPORT&&(_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0})),_.alloc=function(e,t,a){return c(null,e,t,a)},_.allocUnsafe=function(e){return d(null,e)},_.allocUnsafeSlow=function(e){return d(null,e)},_.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},_.compare=function(e,t){if(!_.isBuffer(e)||!_.isBuffer(t))throw new TypeError('Arguments must be Buffers');if(e===t)return 0;for(var a=e.length,l=t.length,u=0,s=n(a,l);u<s;++u)if(e[u]!==t[u]){a=e[u],l=t[u];break}return a<l?-1:l<a?1:0},_.isEncoding=function(e){switch((e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},_.concat=function(e,t){if(!te(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return _.alloc(0);var a;if(t===void 0)for(t=0,a=0;a<e.length;++a)t+=e[a].length;var l=_.allocUnsafe(t),u=0;for(a=0;a<e.length;++a){var s=e[a];if(!_.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(l,u),u+=s.length}return l},_.byteLength=h,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var t=0;t<e;t+=2)O(this,t,t+1);return this},_.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var t=0;t<e;t+=4)O(this,t,t+3),O(this,t+1,t+2);return this},_.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var t=0;t<e;t+=8)O(this,t,t+7),O(this,t+1,t+6),O(this,t+2,t+5),O(this,t+3,t+4);return this},_.prototype.toString=function(){var e=0|this.length;return 0==e?'':0===arguments.length?N(this,0,e):x.apply(this,arguments)},_.prototype.equals=function(e){if(!_.isBuffer(e))throw new TypeError('Argument must be a Buffer');return this===e||0===_.compare(this,e)},_.prototype.inspect=function(){var e='',a=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString('hex',0,a).match(/.{2}/g).join(' '),this.length>a&&(e+=' ... ')),'<Buffer '+e+'>'},_.prototype.compare=function(e,t,a,l,u){if(!_.isBuffer(e))throw new TypeError('Argument must be a Buffer');if(void 0===t&&(t=0),void 0===a&&(a=e?e.length:0),void 0===l&&(l=0),void 0===u&&(u=this.length),0>t||a>e.length||0>l||u>this.length)throw new RangeError('out of range index');if(l>=u&&t>=a)return 0;if(l>=u)return-1;if(t>=a)return 1;if(t>>>=0,a>>>=0,l>>>=0,u>>>=0,this===e)return 0;for(var s=u-l,r=a-t,o=n(s,r),p=this.slice(l,u),c=e.slice(t,a),d=0;d<o;++d)if(p[d]!==c[d]){s=p[d],r=c[d];break}return s<r?-1:r<s?1:0},_.prototype.includes=function(e,t,a){return-1!==this.indexOf(e,t,a)},_.prototype.indexOf=function(e,t,a){return U(this,e,t,a,!0)},_.prototype.lastIndexOf=function(e,t,a){return U(this,e,t,a,!1)},_.prototype.write=function(e,t,a,l){if(void 0===t)l='utf8',a=this.length,t=0;else if(void 0===a&&'string'==typeof t)l=t,a=this.length,t=0;else if(isFinite(t))t|=0,isFinite(a)?(a|=0,void 0===l&&(l='utf8')):(l=a,a=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var u=this.length-t;if((void 0===a||a>u)&&(a=u),0<e.length&&(0>a||0>t)||t>this.length)throw new RangeError('Attempt to write outside buffer bounds');l||(l='utf8');for(var s=!1;;)switch(l){case'hex':return E(this,e,t,a);case'utf8':case'utf-8':return v(this,e,t,a);case'ascii':return b(this,e,t,a);case'latin1':case'binary':return k(this,e,t,a);case'base64':return R(this,e,t,a);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return S(this,e,t,a);default:if(s)throw new TypeError('Unknown encoding: '+l);l=(''+l).toLowerCase(),s=!0;}},_.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var ae=4096;_.prototype.slice=function(e,t){var a=this.length;e=~~e,t=t===void 0?a:~~t,0>e?(e+=a,0>e&&(e=0)):e>a&&(e=a),0>t?(t+=a,0>t&&(t=0)):t>a&&(t=a),t<e&&(t=e);var l;if(_.TYPED_ARRAY_SUPPORT)l=this.subarray(e,t),l.__proto__=_.prototype;else{var u=t-e;l=new _(u,void 0);for(var s=0;s<u;++s)l[s]=this[s+e]}return l},_.prototype.readUIntLE=function(e,t,a){e|=0,t|=0,a||K(e,t,this.length);for(var l=this[e],u=1,s=0;++s<t&&(u*=256);)l+=this[e+s]*u;return l},_.prototype.readUIntBE=function(e,t,a){e|=0,t|=0,a||K(e,t,this.length);for(var l=this[e+--t],u=1;0<t&&(u*=256);)l+=this[e+--t]*u;return l},_.prototype.readUInt8=function(e,t){return t||K(e,1,this.length),this[e]},_.prototype.readUInt16LE=function(e,t){return t||K(e,2,this.length),this[e]|this[e+1]<<8},_.prototype.readUInt16BE=function(e,t){return t||K(e,2,this.length),this[e]<<8|this[e+1]},_.prototype.readUInt32LE=function(e,t){return t||K(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},_.prototype.readUInt32BE=function(e,t){return t||K(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},_.prototype.readIntLE=function(e,t,a){e|=0,t|=0,a||K(e,t,this.length);for(var u=this[e],s=1,n=0;++n<t&&(s*=256);)u+=this[e+n]*s;return s*=128,u>=s&&(u-=l(2,8*t)),u},_.prototype.readIntBE=function(e,t,a){e|=0,t|=0,a||K(e,t,this.length);for(var u=t,s=1,n=this[e+--u];0<u&&(s*=256);)n+=this[e+--u]*s;return s*=128,n>=s&&(n-=l(2,8*t)),n},_.prototype.readInt8=function(e,t){return t||K(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},_.prototype.readInt16LE=function(e,t){t||K(e,2,this.length);var a=this[e]|this[e+1]<<8;return 32768&a?4294901760|a:a},_.prototype.readInt16BE=function(e,t){t||K(e,2,this.length);var a=this[e+1]|this[e]<<8;return 32768&a?4294901760|a:a},_.prototype.readInt32LE=function(e,t){return t||K(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},_.prototype.readInt32BE=function(e,t){return t||K(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},_.prototype.readFloatLE=function(e,t){return t||K(e,4,this.length),ee.read(this,e,!0,23,4)},_.prototype.readFloatBE=function(e,t){return t||K(e,4,this.length),ee.read(this,e,!1,23,4)},_.prototype.readDoubleLE=function(e,t){return t||K(e,8,this.length),ee.read(this,e,!0,52,8)},_.prototype.readDoubleBE=function(e,t){return t||K(e,8,this.length),ee.read(this,e,!1,52,8)},_.prototype.writeUIntLE=function(e,t,a,u){if(e=+e,t|=0,a|=0,!u){var s=l(2,8*a)-1;B(this,e,t,a,s,0)}var n=1,r=0;for(this[t]=255&e;++r<a&&(n*=256);)this[t+r]=255&e/n;return t+a},_.prototype.writeUIntBE=function(e,t,a,u){if(e=+e,t|=0,a|=0,!u){var s=l(2,8*a)-1;B(this,e,t,a,s,0)}var n=a-1,r=1;for(this[t+n]=255&e;0<=--n&&(r*=256);)this[t+n]=255&e/r;return t+a},_.prototype.writeUInt8=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,1,255,0),_.TYPED_ARRAY_SUPPORT||(e=u(e)),this[t]=255&e,t+1},_.prototype.writeUInt16LE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},_.prototype.writeUInt16BE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},_.prototype.writeUInt32LE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):G(this,e,t,!0),t+4},_.prototype.writeUInt32BE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},_.prototype.writeIntLE=function(e,t,a,u){if(e=+e,t|=0,!u){var s=l(2,8*a-1);B(this,e,t,a,s-1,-s)}var n=0,r=1,o=0;for(this[t]=255&e;++n<a&&(r*=256);)0>e&&0==o&&0!==this[t+n-1]&&(o=1),this[t+n]=255&(e/r>>0)-o;return t+a},_.prototype.writeIntBE=function(e,t,a,u){if(e=+e,t|=0,!u){var s=l(2,8*a-1);B(this,e,t,a,s-1,-s)}var n=a-1,r=1,o=0;for(this[t+n]=255&e;0<=--n&&(r*=256);)0>e&&0==o&&0!==this[t+n+1]&&(o=1),this[t+n]=255&(e/r>>0)-o;return t+a},_.prototype.writeInt8=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,1,127,-128),_.TYPED_ARRAY_SUPPORT||(e=u(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},_.prototype.writeInt16LE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},_.prototype.writeInt16BE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},_.prototype.writeInt32LE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,4,2147483647,-2147483648),_.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):G(this,e,t,!0),t+4},_.prototype.writeInt32BE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),_.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},_.prototype.writeFloatLE=function(e,t,a){return F(this,e,t,!0,a)},_.prototype.writeFloatBE=function(e,t,a){return F(this,e,t,!1,a)},_.prototype.writeDoubleLE=function(e,t,a){return X(this,e,t,!0,a)},_.prototype.writeDoubleBE=function(e,t,a){return X(this,e,t,!1,a)},_.prototype.copy=function(e,t,a,l){if(a||(a=0),l||0===l||(l=this.length),t>=e.length&&(t=e.length),t||(t=0),0<l&&l<a&&(l=a),l===a)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError('targetStart out of bounds');if(0>a||a>=this.length)throw new RangeError('sourceStart out of bounds');if(0>l)throw new RangeError('sourceEnd out of bounds');l>this.length&&(l=this.length),e.length-t<l-a&&(l=e.length-t+a);var u=l-a,s;if(this===e&&a<t&&t<l)for(s=u-1;0<=s;--s)e[s+t]=this[s+a];else if(1e3>u||!_.TYPED_ARRAY_SUPPORT)for(s=0;s<u;++s)e[s+t]=this[s+a];else Uint8Array.prototype.set.call(e,this.subarray(a,a+u),t);return u},_.prototype.fill=function(e,t,a,l){if('string'==typeof e){if('string'==typeof t?(l=t,t=0,a=this.length):'string'==typeof a&&(l=a,a=this.length),1===e.length){var u=e.charCodeAt(0);256>u&&(e=u)}if(void 0!==l&&'string'!=typeof l)throw new TypeError('encoding must be a string');if('string'==typeof l&&!_.isEncoding(l))throw new TypeError('Unknown encoding: '+l)}else'number'==typeof e&&(e&=255);if(0>t||this.length<t||this.length<a)throw new RangeError('Out of range index');if(a<=t)return this;t>>>=0,a=a===void 0?this.length:a>>>0,e||(e=0);var s;if('number'==typeof e)for(s=t;s<a;++s)this[s]=e;else{var n=_.isBuffer(e)?e:z(new _(e,l).toString()),r=n.length;for(s=0;s<a-t;++s)this[s+t]=n[s%r]}return this};var le=/[^+\/0-9A-Za-z-_]/g}).call(t,a(20))},function(e,t){'use strict';function a(e){var t=e.length;if(0<t%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===e[t-2]?2:'='===e[t-1]?1:0}function l(e){return s[63&e>>18]+s[63&e>>12]+s[63&e>>6]+s[63&e]}function u(e,t,a){for(var u=[],s=t,n;s<a;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],u.push(l(n));return u.join('')}t.byteLength=function(e){return 3*e.length/4-a(e)},t.toByteArray=function(e){var t=e.length,u,s,l,o,_;o=a(e),_=new r(3*t/4-o),s=0<o?t-4:t;var i=0;for(u=0;u<s;u+=4)l=n[e.charCodeAt(u)]<<18|n[e.charCodeAt(u+1)]<<12|n[e.charCodeAt(u+2)]<<6|n[e.charCodeAt(u+3)],_[i++]=255&l>>16,_[i++]=255&l>>8,_[i++]=255&l;return 2===o?(l=n[e.charCodeAt(u)]<<2|n[e.charCodeAt(u+1)]>>4,_[i++]=255&l):1===o&&(l=n[e.charCodeAt(u)]<<10|n[e.charCodeAt(u+1)]<<4|n[e.charCodeAt(u+2)]>>2,_[i++]=255&l>>8,_[i++]=255&l),_},t.fromByteArray=function(e){for(var t=e.length,a=t%3,l='',n=[],r=16383,o=0,_=t-a,i;o<_;o+=r)n.push(u(e,o,o+r>_?_:o+r));return 1==a?(i=e[t-1],l+=s[i>>2],l+=s[63&i<<4],l+='=='):2==a&&(i=(e[t-2]<<8)+e[t-1],l+=s[i>>10],l+=s[63&i>>4],l+=s[63&i<<2],l+='='),n.push(l),n.join('')};for(var s=[],n=[],r='undefined'==typeof Uint8Array?Array:Uint8Array,o='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',_=0,i=o.length;_<i;++_)s[_]=o[_],n[o.charCodeAt(_)]=_;n[45]=62,n[95]=63},function(e,t){var a=Math.pow;t.read=function(t,l,u,n,r){var o=8*r-n-1,_=(1<<o)-1,p=_>>1,c=-7,g=u?r-1:0,i=u?-1:1,d=t[l+g],s,e;for(g+=i,s=d&(1<<-c)-1,d>>=-c,c+=o;0<c;s=256*s+t[l+g],g+=i,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;0<c;e=256*e+t[l+g],g+=i,c-=8);if(0===s)s=1-p;else{if(s===_)return e?NaN:(d?-1:1)*Infinity;e+=a(2,n),s-=p}return(d?-1:1)*e*a(2,s-n)},t.write=function(t,l,u,n,r,o){var _=8*o-r-1,p=(1<<_)-1,g=p>>1,L=23===r?5.960464477539063e-8-6.617444900424222e-24:0,f=n?0:o-1,i=n?1:-1,d=0>l||0===l&&0>1/l?1:0,s,A,T;for(l=Math.abs(l),isNaN(l)||l===Infinity?(A=isNaN(l)?1:0,s=p):(s=Math.floor(Math.log(l)/Math.LN2),1>l*(T=a(2,-s))&&(s--,T*=2),l+=1<=s+g?L/T:L*a(2,1-g),2<=l*T&&(s++,T/=2),s+g>=p?(A=0,s=p):1<=s+g?(A=(l*T-1)*a(2,r),s+=g):(A=l*a(2,g-1)*a(2,r),s=0));8<=r;t[u+f]=255&A,f+=i,A/=256,r-=8);for(s=s<<r|A,_+=r;0<_;t[u+f]=255&s,f+=i,s/=256,_-=8);t[u+f-i]|=128*d}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return'[object Array]'==t.call(e)}},function(e,t,a){var l=a(51),u=a(52),s=a(53),n=a(54),r=a(55),o=a(56),_=a(57);_.alea=l,_.xor128=u,_.xorwow=s,_.xorshift7=n,_.xor4096=r,_.tychei=o,e.exports=_},function(e,t,a){(function(e){var l;(function(e,u){function s(e){var a=this,t=o();a.next=function(){var e=2091639*a.s0+2.3283064365386963e-10*a.c;return a.s0=a.s1,a.s1=a.s2,a.s2=e-(a.c=0|e)},a.c=1,a.s0=t(' '),a.s1=t(' '),a.s2=t(' '),a.s0-=t(e),0>a.s0&&(a.s0+=1),a.s1-=t(e),0>a.s1&&(a.s1+=1),a.s2-=t(e),0>a.s2&&(a.s2+=1),t=null}function n(e,a){return a.c=e.c,a.s0=e.s0,a.s1=e.s1,a.s2=e.s2,a}function r(e,t){var a=new s(e),l=t&&t.state,u=a.next;return u.int32=function(){return 0|4294967296*a.next()},u.double=function(){return u()+1.1102230246251565e-16*(0|2097152*u())},u.quick=u,l&&('object'==typeof l&&n(l,a),u.state=function(){return n(a,{})}),u}function o(){var e=4022871197;return function(t){t=t.toString();for(var a=0;a<t.length;a++){e+=t.charCodeAt(a);var l=0.02519603282416938*e;e=l>>>0,l-=e,l*=e,e=l>>>0,l-=e,e+=4294967296*l}return 2.3283064365386963e-10*(e>>>0)}}u&&u.exports?u.exports=r:a(4)&&a(18)?(l=function(){return r}.call(t,a,t,u),!(l!==void 0&&(u.exports=l))):this.alea=r})(this,'object'==typeof e&&e,a(4))}).call(t,a(17)(e))},function(e,t,a){(function(e){var l;(function(e,u){function s(e){var a=this,t='';a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var e=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^e^e>>>8},e===(0|e)?a.x=e:t+=e;for(var l=0;l<t.length+64;l++)a.x^=0|t.charCodeAt(l),a.next()}function n(e,a){return a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w,a}function r(e,t){var a=new s(e),l=t&&t.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var e=a.next()>>>11,t=(a.next()>>>0)/4294967296,l=(e+t)/2097152;while(0===l);return l},u.int32=a.next,u.quick=u,l&&('object'==typeof l&&n(l,a),u.state=function(){return n(a,{})}),u}u&&u.exports?u.exports=r:a(4)&&a(18)?(l=function(){return r}.call(t,a,t,u),!(l!==void 0&&(u.exports=l))):this.xor128=r})(this,'object'==typeof e&&e,a(4))}).call(t,a(17)(e))},function(e,t,a){(function(e){var l;(function(e,u){function s(e){var a=this,t='';a.next=function(){var e=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,0|(a.d=0|a.d+362437)+(a.v=a.v^a.v<<4^(e^e<<1))},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,e===(0|e)?a.x=e:t+=e;for(var l=0;l<t.length+64;l++)a.x^=0|t.charCodeAt(l),l==t.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function n(e,a){return a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w,a.v=e.v,a.d=e.d,a}function r(e,t){var a=new s(e),l=t&&t.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var e=a.next()>>>11,t=(a.next()>>>0)/4294967296,l=(e+t)/2097152;while(0===l);return l},u.int32=a.next,u.quick=u,l&&('object'==typeof l&&n(l,a),u.state=function(){return n(a,{})}),u}u&&u.exports?u.exports=r:a(4)&&a(18)?(l=function(){return r}.call(t,a,t,u),!(l!==void 0&&(u.exports=l))):this.xorwow=r})(this,'object'==typeof e&&e,a(4))}).call(t,a(17)(e))},function(e,t,a){(function(e){var l;(function(e,u){function s(e){var a=this;a.next=function(){var e=a.x,l=a.i,u,t;return u=e[l],u^=u>>>7,t=u^u<<24,u=e[7&l+1],t^=u^u>>>10,u=e[7&l+3],t^=u^u>>>3,u=e[7&l+4],t^=u^u<<7,u=e[7&l+7],u^=u<<13,t^=u^u<<9,e[l]=t,a.i=7&l+1,t},function(e,t){var a=[],l,u;if(t===(0|t))u=a[0]=t;else for(t=''+t,l=0;l<t.length;++l)a[7&l]=a[7&l]<<15^t.charCodeAt(l)+a[7&l+1]<<13;for(;8>a.length;)a.push(0);for(l=0;8>l&&0===a[l];++l);for(u=8==l?a[7]=-1:a[l],e.x=a,e.i=0,l=256;0<l;--l)e.next()}(a,e)}function n(e,a){return a.x=e.x.slice(),a.i=e.i,a}function r(e,t){null==e&&(e=+new Date);var a=new s(e),l=t&&t.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var e=a.next()>>>11,t=(a.next()>>>0)/4294967296,l=(e+t)/2097152;while(0===l);return l},u.int32=a.next,u.quick=u,l&&(l.x&&n(l,a),u.state=function(){return n(a,{})}),u}u&&u.exports?u.exports=r:a(4)&&a(18)?(l=function(){return r}.call(t,a,t,u),!(l!==void 0&&(u.exports=l))):this.xorshift7=r})(this,'object'==typeof e&&e,a(4))}).call(t,a(17)(e))},function(e,t,a){(function(e){var l;(function(e,u){function s(e){var a=this;a.next=function(){var e=a.w,l=a.X,u=a.i,s,t;return a.w=e=0|e+1640531527,t=l[127&u+34],s=l[u=127&u+1],t^=t<<13,s^=s<<17,t^=t>>>15,s^=s>>>12,t=l[u]=t^s,a.i=u,0|t+(e^e>>>16)},function(e,a){var l=[],u=128,s,t,n,r,o;for(a===(0|a)?(t=a,a=null):(a+='\0',t=0,u=Math.max(u,a.length)),n=0,r=-32;r<u;++r)a&&(t^=a.charCodeAt((r+32)%a.length)),0===r&&(o=t),t^=t<<10,t^=t>>>15,t^=t<<4,t^=t>>>13,0<=r&&(o=0|o+1640531527,s=l[127&r]^=t+o,n=0==s?n+1:0);for(128<=n&&(l[127&(a&&a.length||0)]=-1),n=127,r=512;0<r;--r)t=l[127&n+34],s=l[n=127&n+1],t^=t<<13,s^=s<<17,t^=t>>>15,s^=s>>>12,l[n]=t^s;e.w=o,e.X=l,e.i=n}(a,e)}function n(e,a){return a.i=e.i,a.w=e.w,a.X=e.X.slice(),a}function r(e,t){null==e&&(e=+new Date);var a=new s(e),l=t&&t.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var e=a.next()>>>11,t=(a.next()>>>0)/4294967296,l=(e+t)/2097152;while(0===l);return l},u.int32=a.next,u.quick=u,l&&(l.X&&n(l,a),u.state=function(){return n(a,{})}),u}u&&u.exports?u.exports=r:a(4)&&a(18)?(l=function(){return r}.call(t,a,t,u),!(l!==void 0&&(u.exports=l))):this.xor4096=r})(this,'object'==typeof e&&e,a(4))}).call(t,a(17)(e))},function(e,t,a){(function(e){var l;(function(e,u){function s(e){var t=this,a='';t.next=function(){var e=t.b,l=t.c,u=t.d,s=t.a;return e=e<<25^e>>>7^l,l=0|l-u,u=u<<24^u>>>8^s,s=0|s-e,t.b=e=e<<20^e>>>12^l,t.c=l=0|l-u,t.d=u<<16^l>>>16^s,t.a=0|s-e},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=0|e/4294967296,t.b=0|e):a+=e;for(var l=0;l<a.length+20;l++)t.b^=0|a.charCodeAt(l),t.next()}function n(e,a){return a.a=e.a,a.b=e.b,a.c=e.c,a.d=e.d,a}function r(e,t){var a=new s(e),l=t&&t.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var e=a.next()>>>11,t=(a.next()>>>0)/4294967296,l=(e+t)/2097152;while(0===l);return l},u.int32=a.next,u.quick=u,l&&('object'==typeof l&&n(l,a),u.state=function(){return n(a,{})}),u}u&&u.exports?u.exports=r:a(4)&&a(18)?(l=function(){return r}.call(t,a,t,u),!(l!==void 0&&(u.exports=l))):this.tychei=r})(this,'object'==typeof e&&e,a(4))}).call(t,a(17)(e))},function(e,t,a){var l;(function(u,s){function n(e,t,a){var l=[];t=!0==t?{entropy:!0}:t||{};var n=i(_(t.entropy?[e,c(u)]:null==e?p():e,3),l),O=new r(l),d=function(){for(var e=O.g(L),t=A,a=0;e<T;)e=(e+a)*g,t*=g,a=O.g(1);for(;e>=h;)e/=2,t/=2,a>>>=1;return(e+a)/t};return d.int32=function(){return 0|O.g(4)},d.quick=function(){return O.g(4)/4294967296},d.double=d,i(c(O.S),u),(t.pass||a||function(e,t,a,l){return l&&(l.S&&o(l,O),e.state=function(){return o(O,{})}),a?(s[f]=e,t):e})(d,n,'global'in t?t.global:this==s,t.state)}function r(e){var a=e.length,l=this,u=0,n=l.i=l.j=0,r=l.S=[],s;for(a||(e=[a++]);u<g;)r[u]=u++;for(u=0;u<g;u++)r[u]=r[n=x&n+e[u%a]+(s=r[u])],r[n]=s;(l.g=function(e){for(var a=0,u=l.i,n=l.j,r=l.S,s;e--;)s=r[u=x&u+1],a=a*g+r[x&(r[u]=r[n=x&n+s])+(r[n]=s)];return l.i=u,l.j=n,a})(g)}function o(e,a){return a.i=e.i,a.j=e.j,a.S=e.S.slice(),a}function _(e,t){var a=[],l=typeof e,u;if(t&&'object'==l)for(u in e)try{a.push(_(e[u],t-1))}catch(t){}return a.length?a:'string'==l?e:e+'\0'}function i(e,t){for(var a=e+'',l=0,u;l<a.length;)t[x&l]=x&(u^=19*t[x&l])+a.charCodeAt(l++);return c(t)}function p(){try{var e;return O&&(e=O.randomBytes)?e=e(g):(e=new Uint8Array(g),(d.crypto||d.msCrypto).getRandomValues(e)),c(e)}catch(l){var t=d.navigator,a=t&&t.plugins;return[+new Date,d,a,d.screen,c(u)]}}function c(e){return String.fromCharCode.apply(0,e)}var d=this,g=256,L=6,f='random',A=s.pow(g,L),T=s.pow(2,52),h=2*T,x=g-1,O;if(s['seed'+f]=n,i(s.random(),u),'object'==typeof e&&e.exports){e.exports=n;try{O=a(58)}catch(e){}}else l=function(){return n}.call(t,a,t,e),!(void 0!==l&&(e.exports=l))})([],Math)},function(){},function(e){var t=Math.abs,a=Math.floor;(function(){function l(e,d,g){function L(e,l,_,p){for(var c='',d=null,g=!1,f=e.length,h=!1,x=0,O;x<f;x++){if(O=e.charCodeAt(x),!0==g){if(45===O){d='';continue}else if(95===O){d=' ';continue}else if(48===O){d='0';continue}else if(58===O){h&&i('[WARNING] detected use of unsupported %:: or %::: modifiers to strftime'),h=!0;continue}switch(O){case 37:c+='%';break;case 65:c+=_.days[l.getDay()];break;case 66:c+=_.months[l.getMonth()];break;case 67:c+=u(a(l.getFullYear()/100),d);break;case 68:c+=L(_.formats.D,l,_,p);break;case 70:c+=L(_.formats.F,l,_,p);break;case 72:c+=u(l.getHours(),d);break;case 73:c+=u(n(l.getHours()),d);break;case 76:c+=s(a(p%1e3));break;case 77:c+=u(l.getMinutes(),d);break;case 80:c+=12>l.getHours()?_.am:_.pm;break;case 82:c+=L(_.formats.R,l,_,p);break;case 83:c+=u(l.getSeconds(),d);break;case 84:c+=L(_.formats.T,l,_,p);break;case 85:c+=u(r(l,'sunday'),d);break;case 87:c+=u(r(l,'monday'),d);break;case 88:c+=L(_.formats.X,l,_,p);break;case 89:c+=l.getFullYear();break;case 90:if(T&&0===A)c+='GMT';else{var U=l.toString().match(/\(([\w\s]+)\)/);c+=U&&U[1]||''}break;case 97:c+=_.shortDays[l.getDay()];break;case 98:c+=_.shortMonths[l.getMonth()];break;case 99:c+=L(_.formats.c,l,_,p);break;case 100:c+=u(l.getDate(),d);break;case 101:c+=u(l.getDate(),null==d?' ':d);break;case 104:c+=_.shortMonths[l.getMonth()];break;case 106:var m=new Date(l.getFullYear(),0,1),E=Math.ceil((l.getTime()-m.getTime())/86400000);c+=s(E);break;case 107:c+=u(l.getHours(),null==d?' ':d);break;case 108:c+=u(n(l.getHours()),null==d?' ':d);break;case 109:c+=u(l.getMonth()+1,d);break;case 110:c+='\n';break;case 111:var E=l.getDate();c+=_.ordinalSuffixes?E+''+(_.ordinalSuffixes[E-1]||o(E)):E+''+o(E);break;case 112:c+=12>l.getHours()?_.AM:_.PM;break;case 114:c+=L(_.formats.r,l,_,p);break;case 115:c+=a(p/1e3);break;case 116:c+='\t';break;case 117:var E=l.getDay();c+=0===E?7:E;break;case 118:c+=L(_.formats.v,l,_,p);break;case 119:c+=l.getDay();break;case 120:c+=L(_.formats.x,l,_,p);break;case 121:c+=(''+l.getFullYear()).slice(2);break;case 122:if(T&&0===A)c+=h?'+00:00':'+0000';else{var v=0===A?-l.getTimezoneOffset():A/60000;var b=0>v?'-':'+',k=h?':':'',R=a(t(v/60)),S=t(v%60);c+=b+u(R)+k+u(S)}break;default:g&&(c+='%'),c+=e[x];}d=null,g=!1;continue}if(37===O){g=!0;continue}c+=e[x]}return c}var f=e||c,A=d||0,T=g||!1,h=0,x=function(e,t){var a;if(!t){var l=Date.now();l>h?(h=l,O=new Date(h),a=h,T&&(O=new Date(h+_(O)+A))):a=h,t=O}else if(a=t.getTime(),T){var u=_(t);if(t=new Date(a+u+A),_(t)!==u){var s=_(t);t=new Date(a+s+A)}}return L(e,t,f,a)},O;return x.localize=function(e){return new l(e||f,A,T)},x.localizeByIdentifier=function(e){var t=p[e];return t?x.localize(t):(i('[WARNING] No locale found with identifier "'+e+'".'),x)},x.timezone=function(e){var t=A,a=T,u=typeof e;if('number'==u||'string'==u)if(a=!0,'string'==u){var s='-'===e[0]?-1:1,n=parseInt(e.slice(1,3),10),r=parseInt(e.slice(3,5),10);t=1e3*(60*(s*(60*n+r)))}else'number'==u&&(t=1e3*(60*e));return new l(f,t,a)},x.utc=function(){return new l(f,A,!0)},x}function u(e,t){return''===t||9<e?e:(null==t&&(t='0'),t+e)}function s(e){return 99<e?e:9<e?'0'+e:'00'+e}function n(e){if(0===e)return 12;return 12<e?e-12:e}function r(e,t){t=t||'sunday';var l=e.getDay();'monday'===t&&(0===l?l=6:l--);var u=Date.UTC(e.getFullYear(),0,1),s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=a((s-u)/8.64e7),r=(n+7-l)/7;return a(r)}function o(e){var t=e%10,a=e%100;if(11<=a&&13>=a||0==t||4<=t)return'th';return 1==t?'st':2==t?'nd':3==t?'rd':void 0}function _(e){return 6e4*(e.getTimezoneOffset()||0)}function i(e){'undefined'!=typeof console&&'function'==typeof console.warn&&console.warn(e)}var p={de_DE:{days:['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],shortDays:['So','Mo','Di','Mi','Do','Fr','Sa'],months:['Januar','Februar','M\xE4rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],shortMonths:['Jan','Feb','M\xE4r','Apr','Mai','Jun','Jul','Aug','Sep','Okt','Nov','Dez'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d.%m.%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},en_CA:{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],ordinalSuffixes:['st','nd','rd','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','st','nd','rd','th','th','th','th','th','th','th','st'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}},en_US:{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],ordinalSuffixes:['st','nd','rd','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','st','nd','rd','th','th','th','th','th','th','th','st'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%m/%d/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}},es_MX:{days:['domingo','lunes','martes','mi\xE9rcoles','jueves','viernes','s\xE1bado'],shortDays:['dom','lun','mar','mi\xE9','jue','vie','s\xE1b'],months:['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre',' diciembre'],shortMonths:['ene','feb','mar','abr','may','jun','jul','ago','sep','oct','nov','dic'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},fr_FR:{days:['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi'],shortDays:['dim.','lun.','mar.','mer.','jeu.','ven.','sam.'],months:['janvier','f\xE9vrier','mars','avril','mai','juin','juillet','ao\xFBt','septembre','octobre','novembre','d\xE9cembre'],shortMonths:['janv.','f\xE9vr.','mars','avril','mai','juin','juil.','ao\xFBt','sept.','oct.','nov.','d\xE9c.'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},it_IT:{days:['domenica','luned\xEC','marted\xEC','mercoled\xEC','gioved\xEC','venerd\xEC','sabato'],shortDays:['dom','lun','mar','mer','gio','ven','sab'],months:['gennaio','febbraio','marzo','aprile','maggio','giugno','luglio','agosto','settembre','ottobre','novembre','dicembre'],shortMonths:['pr','mag','giu','lug','ago','set','ott','nov','dic'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},nl_NL:{days:['zondag','maandag','dinsdag','woensdag','donderdag','vrijdag','zaterdag'],shortDays:['zo','ma','di','wo','do','vr','za'],months:['januari','februari','maart','april','mei','juni','juli','augustus','september','oktober','november','december'],shortMonths:['jan','feb','mrt','apr','mei','jun','jul','aug','sep','okt','nov','dec'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},pt_BR:{days:['domingo','segunda','ter\xE7a','quarta','quinta','sexta','s\xE1bado'],shortDays:['Dom','Seg','Ter','Qua','Qui','Sex','S\xE1b'],months:['janeiro','fevereiro','mar\xE7o','abril','maio','junho','julho','agosto','setembro','outubro','novembro','dezembro'],shortMonths:['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},ru_RU:{days:['\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435','\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A','\u0412\u0442\u043E\u0440\u043D\u0438\u043A','\u0421\u0440\u0435\u0434\u0430','\u0427\u0435\u0442\u0432\u0435\u0440\u0433','\u041F\u044F\u0442\u043D\u0438\u0446\u0430','\u0421\u0443\u0431\u0431\u043E\u0442\u0430'],shortDays:['\u0412\u0441','\u041F\u043D','\u0412\u0442','\u0421\u0440','\u0427\u0442','\u041F\u0442','\u0421\u0431'],months:['\u042F\u043D\u0432\u0430\u0440\u044C','\u0424\u0435\u0432\u0440\u0430\u043B\u044C','\u041C\u0430\u0440\u0442','\u0410\u043F\u0440\u0435\u043B\u044C','\u041C\u0430\u0439','\u0418\u044E\u043D\u044C','\u0418\u044E\u043B\u044C','\u0410\u0432\u0433\u0443\u0441\u0442','\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C','\u041E\u043A\u0442\u044F\u0431\u0440\u044C','\u041D\u043E\u044F\u0431\u0440\u044C','\u0414\u0435\u043A\u0430\u0431\u0440\u044C'],shortMonths:['\u044F\u043D\u0432','\u0444\u0435\u0432','\u043C\u0430\u0440','\u0430\u043F\u0440','\u043C\u0430\u0439','\u0438\u044E\u043D','\u0438\u044E\u043B','\u0430\u0432\u0433','\u0441\u0435\u043D','\u043E\u043A\u0442','\u043D\u043E\u044F','\u0434\u0435\u043A'],AM:'AM',PM:'PM',am:'am',pm:'pm',formats:{c:'%a %d %b %Y %X',D:'%d.%m.%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},tr_TR:{days:['Pazar','Pazartesi','Sal\u0131','\xC7ar\u015Famba','Per\u015Fembe','Cuma','Cumartesi'],shortDays:['Paz','Pzt','Sal','\xC7r\u015F','Pr\u015F','Cum','Cts'],months:['Ocak','\u015Eubat','Mart','Nisan','May\u0131s','Haziran','Temmuz','A\u011Fustos','Eyl\xFCl','Ekim','Kas\u0131m','Aral\u0131k'],shortMonths:['Oca','\u015Eub','Mar','Nis','May','Haz','Tem','A\u011Fu','Eyl','Eki','Kas','Ara'],AM:'\xD6\xD6',PM:'\xD6S',am:'\xD6\xD6',pm:'\xD6S',formats:{c:'%a %d %b %Y %X %Z',D:'%d-%m-%Y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%T',x:'%D'}},zh_CN:{days:['\u661F\u671F\u65E5','\u661F\u671F\u4E00','\u661F\u671F\u4E8C','\u661F\u671F\u4E09','\u661F\u671F\u56DB','\u661F\u671F\u4E94','\u661F\u671F\u516D'],shortDays:['\u65E5','\u4E00','\u4E8C','\u4E09','\u56DB','\u4E94','\u516D'],months:['\u4E00\u6708\u4EFD','\u4E8C\u6708\u4EFD','\u4E09\u6708\u4EFD','\u56DB\u6708\u4EFD','\u4E94\u6708\u4EFD','\u516D\u6708\u4EFD','\u4E03\u6708\u4EFD','\u516B\u6708\u4EFD','\u4E5D\u6708\u4EFD','\u5341\u6708\u4EFD','\u5341\u4E00\u6708\u4EFD','\u5341\u4E8C\u6708\u4EFD'],shortMonths:['\u4E00\u6708','\u4E8C\u6708','\u4E09\u6708','\u56DB\u6708','\u4E94\u6708','\u516D\u6708','\u4E03\u6708','\u516B\u6708','\u4E5D\u6708','\u5341\u6708','\u5341\u4E00\u6708','\u5341\u4E8C\u6708'],AM:'\u4E0A\u5348',PM:'\u4E0B\u5348',am:'\u4E0A\u5348',pm:'\u4E0B\u5348',formats:{c:'%a %d %b %Y %X %Z',D:'%d/%m/%y',F:'%Y-%m-%d',R:'%H:%M',r:'%I:%M:%S %p',T:'%H:%M:%S',v:'%e-%b-%Y',X:'%r',x:'%D'}}},c=p.en_US,d=new l(c,0,!1),g;'undefined'!=typeof e?g=e.exports=d:(g=function(){return this||(1,eval)('this')}(),g.strftime=d),'function'!=typeof Date.now&&(Date.now=function(){return+new Date})})()},function(e,t,a){'use strict';(function(t){const l=a(23),n=l.lua,s=l.lauxlib,u=l.lualib;let r;try{r=a(24).inspect.custom}catch(t){}const o=Reflect.apply,_=Reflect.construct,i=function(e){return''+e},p=function(e){return'object'==typeof e?null!==e:'function'==typeof e},c=n.to_luastring('js object'),d=function(e,t){let a=s.luaL_testudata(e,t,c);return a?a.data:void 0},g=function(e,t){return s.luaL_checkudata(e,t,c).data},f=function(e,t){let a=n.lua_newuserdata(e);a.data=t,s.luaL_setmetatable(e,c)},A=function(e){n.lua_rawgeti(e,n.LUA_REGISTRYINDEX,n.LUA_RIDX_MAINTHREAD);let t=n.lua_tothread(e,-1);return n.lua_pop(e,1),t},T=new WeakMap,h=function(e){let t=n.lua_touserdata(e,1);return x(e,t),1},x=function(e,t){switch(typeof t){case'undefined':n.lua_pushnil(e);break;case'number':n.lua_pushnumber(e,t);break;case'string':n.lua_pushstring(e,n.to_luastring(t));break;case'boolean':n.lua_pushboolean(e,t);break;case'symbol':n.lua_pushlightuserdata(e,t);break;case'function':if(n.lua_isproxy(t,e)){t(e);break}case'object':if(null===t){n.lua_rawgetp(e,n.LUA_REGISTRYINDEX,null);break}default:let a=T.get(A(e)),l=a.get(t);l?l(e):(f(e,t),l=n.lua_toproxy(e,-1),a.set(t,l));}},O=function(e,t){switch(n.lua_type(e,t)){case n.LUA_TNONE:case n.LUA_TNIL:return;case n.LUA_TBOOLEAN:return n.lua_toboolean(e,t);case n.LUA_TLIGHTUSERDATA:return n.lua_touserdata(e,t);case n.LUA_TNUMBER:return n.lua_tonumber(e,t);case n.LUA_TSTRING:return n.lua_tojsstring(e,t);case n.LUA_TUSERDATA:let a=d(e,t);if(void 0!==a)return a;case n.LUA_TTABLE:case n.LUA_TFUNCTION:case n.LUA_TTHREAD:default:return I(A(e),n.lua_toproxy(e,t));}},U=function(e,t,a,l,u){s.luaL_checkstack(e,2+l.length),(void 0===u||null===u)&&(u=n.LUA_MULTRET);let r=n.lua_gettop(e);t(e),x(e,a);for(let s=0;s<l.length;s++)x(e,l[s]);n.lua_call(e,1+l.length,u);let o=n.lua_gettop(e)-r,_=Array(o);for(let s=0;s<o;s++)_[s]=O(e,r+s+1);return n.lua_settop(e,r),_},m=function(e,t,a){s.luaL_checkstack(e,2),t(e),x(e,a),n.lua_gettable(e,-2);let l=O(e,-1);return n.lua_pop(e,2),l},E=function(e,t,a){s.luaL_checkstack(e,2),t(e),x(e,a),n.lua_gettable(e,-2);let l=n.lua_isnil(e,-1);return n.lua_pop(e,2),l},b=function(e,t,a,l){s.luaL_checkstack(e,3),t(e),x(e,a),x(e,l),n.lua_settable(e,-3),n.lua_pop(e,1)},v=function(e,t,a){s.luaL_checkstack(e,3),t(e),x(e,a),n.lua_pushnil(e),n.lua_settable(e,-3),n.lua_pop(e,1)},k=function(e,t){s.luaL_checkstack(e,1),t(e);let a=s.luaL_tolstring(e,-1);return n.lua_pop(e,2),n.to_jsstring(a)},R=function(){s.luaL_checkstack(this.L,3);let e=n.lua_gettop(this.L);this.iter(this.L),this.state(this.L),this.last(this.L),n.lua_call(this.L,2,n.LUA_MULTRET),this.last=n.lua_toproxy(this.L,e+1);let t;if(n.lua_isnil(this.L,-1))t={done:!0,value:void 0};else{let a=n.lua_gettop(this.L)-e,l=Array(a);for(let t=0;t<a;t++)l[t]=O(this.L,e+t+1);t={done:!1,value:l}}return n.lua_settop(this.L,e),t},S=function(e,t){s.luaL_requiref(e,n.to_luastring('_G'),u.luaopen_base,0),n.lua_getfield(e,-1,n.to_luastring('pairs')),n.lua_remove(e,-2),t(e),n.lua_call(e,1,3);let a=n.lua_toproxy(e,-3),l=n.lua_toproxy(e,-2),r=n.lua_toproxy(e,-1);return n.lua_pop(e,3),{L:e,iter:a,state:l,last:r,next:R}},I=function(e,t){let a=function(){return U(e,t,this,arguments,1)[0]};return a.apply=function(a,l){return U(e,t,a,l,1)[0]},a.invoke=function(a,l){return U(e,t,a,l,n.LUA_MULTRET)},a.get=function(a){return m(e,t,a)},a.has=function(a){return E(e,t,a)},a.set=function(a,l){return b(e,t,a,l)},a.delete=function(a){return v(e,t,a)},a.toString=function(){return k(e,t)},a[Symbol.toStringTag]='Fengari object',a[Symbol.iterator]=function(){return S(e,t)},Symbol.toPrimitive&&(a[Symbol.toPrimitive]=function(a){if('string'===a)return k(e,t)}),r&&(a[r]=a.toString),a},N={apply:function(e,t,a){return U(e.L,e.p,t,a,1)[0]},get:function(e,t){return m(e.L,e.p,t)},has:function(e,t){return E(e.L,e.p,t)},set:function(e,t,a){return b(e.L,e.p,t,a)},deleteProperty:function(e,t){return v(e.L,e.p,t)}},P=function(e,t){let a=function(){return t(e)};a.p=t,a.L=e;let l=new Proxy(a,N);return l},M=function(e,t){let a=g(e,t),l=a[Symbol.iterator];l||s.luaL_argerror(e,t,n.to_luastring('object not iterable'));let u=o(l,a,[]);return p(u)||s.luaL_argerror(e,t,n.to_luastring('Result of the Symbol.iterator method is not an object')),u},y=function(e){let t=O(e,1),a=t.next();return a.done?0:(x(e,a.value),1)};let C={new:function(e){let t=O(e,1),a=n.lua_gettop(e)-1,l=Array(a);for(let t=0;t<a;t++)l[t]=O(e,t+2);return x(e,_(t,l)),1},of:function(e){let t=M(e,1);return n.lua_pushcfunction(e,y),x(e,t),2},createproxy:function(e){s.luaL_checkany(e,1);let t=P(A(e),n.lua_toproxy(e,1));return x(e,t),1},tonumber:function(e){let t=O(e,1);return n.lua_pushnumber(e,+t),1},instanceof:function(e){let t=O(e,1),a=O(e,2);return n.lua_pushboolean(e,t instanceof a),1}},D={__index:function(e){let t=g(e,1),a=O(e,2);return x(e,t[a]),1},__newindex:function(e){let t=g(e,1),a=O(e,2),l=O(e,3);return void 0===l?delete t[a]:t[a]=l,0},__tostring:function(e){let t=g(e,1),a=i(t);return n.lua_pushstring(e,n.to_luastring(a)),1},__call:function(e){let t=g(e,1),a=n.lua_gettop(e)-1,l,u;if(0<a&&(l=O(e,2),0<a--)){u=Array(a);for(let t=0;t<a;t++)u[t]=O(e,t+3)}return x(e,o(t,l,u)),1}};e.exports.checkjs=g,e.exports.testjs=d,e.exports.pushjs=f,e.exports.push=x,e.exports.tojs=O,e.exports.luaopen_js=function(e){return T.set(A(e),new WeakMap),n.lua_atnativeerror(e,h),s.luaL_newlib(e,C),s.luaL_newmetatable(e,c),s.luaL_setfuncs(e,D,0),n.lua_pop(e,1),f(e,null),n.lua_pushvalue(e,-1),n.lua_rawsetp(e,n.LUA_REGISTRYINDEX,null),n.lua_setfield(e,-2,n.to_luastring('null')),x(e,t),n.lua_setfield(e,-2,n.to_luastring('global')),1}}).call(t,a(20))}]);