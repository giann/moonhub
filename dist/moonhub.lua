package.path="../lua_modules/share/lua/5.3/?.lua;../lua_modules/share/lua/5.3/?/init.lua"local a=require("moonview")local b=require("moonview.helpers")local c=require("hump.signal")local d=b.q;local e=b.qall;local f=b.fetchj;local g=a.View;local h=a.Model;local i=a.Collection;local j="https://api.github.com"local k="?access_token=639ccc89c5d5b919733b25e90f3cee87a80c874d"coroutine.wrap(function()local l,m;l=g{target="#project-selector",template="#project-selector-template",model=h{user=nil,project=nil},events={["click #go"]=function(self)self:update()end,["keydown input"]=function(self,n,o)if o.key=="Enter"then self:update()end end}}l.update=function(self)local p=d("input[name=user]").value;local q=d("input[name=project]").value;if p~=self.model.user or q~=self.model.project then self.model.user=p;self.model.project=q;coroutine.wrap(function()m.model.commits=i(f(j.."/repos/"..l.model.user.."/"..l.model.project.."/commits"..k))local r=f(j.."/repos/"..l.model.user.."/"..l.model.project.."/readme"..k)m.model.readme=fetch(r.download_url)end)()end end;m=g{target="#commits",template="#commits-template",model=h{commits=i{},readme=nil}}l:render()m:render()end)()
