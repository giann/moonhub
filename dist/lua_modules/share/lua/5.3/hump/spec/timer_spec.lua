local a=require'timer'()describe('hump.timer',function()it('runs a function during a specified time',function()local b,c;a:during(10,function(...)b,c=...end)a:update(2)assert.are.equal(b,2)assert.are.equal(8,c)a:update(5)assert.are.equal(b,5)assert.are.equal(3,c)a:update(10)assert.are.equal(b,10)assert.are.equal(0,c)end)it('runs a function after a specified time',function()local d=false;local e=false;a:after(3,function(...)d=true end)a:after(5,function(...)e=true end)a:update(4)assert.are.equal(true,d)assert.are.equal(false,e)a:update(4)assert.are.equal(true,d)assert.are.equal(true,e)end)it('runs a function every so often',function()local f=0;a:every(1,function(...)f=f+1 end)a:update(3)assert.are.equal(3,f)a:update(7)assert.are.equal(10,f)end)it('can script timed events',function()local g;a:script(function(h)g='foo'h(1)g='bar'end)assert.are.equal('foo',g)a:update(0.5)assert.are.equal('foo',g)a:update(1)assert.are.equal('bar',g)end)it('cancels and clears timer functions',function()pending('to be tested...')end)it('tweens',function()pending('to be tested...')end)end)
